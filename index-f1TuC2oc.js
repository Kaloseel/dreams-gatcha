(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function H6(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Qb={exports:{}},Rh={};var YR;function G6(){if(YR)return Rh;YR=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,i,o){var u=null;if(o!==void 0&&(u=""+o),i.key!==void 0&&(u=""+i.key),"key"in i){o={};for(var f in i)f!=="key"&&(o[f]=i[f])}else o=i;return i=o.ref,{$$typeof:t,type:n,key:u,ref:i!==void 0?i:null,props:o}}return Rh.Fragment=e,Rh.jsx=r,Rh.jsxs=r,Rh}var KR;function W6(){return KR||(KR=1,Qb.exports=G6()),Qb.exports}var G=W6(),Jb={exports:{}},et={};var QR;function V6(){if(QR)return et;QR=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function b(z){return z===null||typeof z!="object"?null:(z=y&&z[y]||z["@@iterator"],typeof z=="function"?z:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function R(z,se,ae){this.props=z,this.context=se,this.refs=E,this.updater=ae||w}R.prototype.isReactComponent={},R.prototype.setState=function(z,se){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,se,"setState")},R.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function O(){}O.prototype=R.prototype;function C(z,se,ae){this.props=z,this.context=se,this.refs=E,this.updater=ae||w}var I=C.prototype=new O;I.constructor=C,S(I,R.prototype),I.isPureReactComponent=!0;var P=Array.isArray;function D(){}var j={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function U(z,se,ae){var fe=ae.ref;return{$$typeof:t,type:z,key:se,ref:fe!==void 0?fe:null,props:ae}}function Y(z,se){return U(z.type,se,z.props)}function $(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function L(z){var se={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ae){return se[ae]})}var H=/\/+/g;function Q(z,se){return typeof z=="object"&&z!==null&&z.key!=null?L(""+z.key):se.toString(36)}function ce(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(D,D):(z.status="pending",z.then(function(se){z.status==="pending"&&(z.status="fulfilled",z.value=se)},function(se){z.status==="pending"&&(z.status="rejected",z.reason=se)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function M(z,se,ae,fe,pe){var be=typeof z;(be==="undefined"||be==="boolean")&&(z=null);var Se=!1;if(z===null)Se=!0;else switch(be){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(z.$$typeof){case t:case e:Se=!0;break;case d:return Se=z._init,M(Se(z._payload),se,ae,fe,pe)}}if(Se)return pe=pe(z),Se=fe===""?"."+Q(z,0):fe,P(pe)?(ae="",Se!=null&&(ae=Se.replace(H,"$&/")+"/"),M(pe,se,ae,"",function(pt){return pt})):pe!=null&&($(pe)&&(pe=Y(pe,ae+(pe.key==null||z&&z.key===pe.key?"":(""+pe.key).replace(H,"$&/")+"/")+Se)),se.push(pe)),1;Se=0;var Ie=fe===""?".":fe+":";if(P(z))for(var $e=0;$e<z.length;$e++)fe=z[$e],be=Ie+Q(fe,$e),Se+=M(fe,se,ae,be,pe);else if($e=b(z),typeof $e=="function")for(z=$e.call(z),$e=0;!(fe=z.next()).done;)fe=fe.value,be=Ie+Q(fe,$e++),Se+=M(fe,se,ae,be,pe);else if(be==="object"){if(typeof z.then=="function")return M(ce(z),se,ae,fe,pe);throw se=String(z),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Se}function J(z,se,ae){if(z==null)return z;var fe=[],pe=0;return M(z,fe,"","",function(be){return se.call(ae,be,pe++)}),fe}function Z(z){if(z._status===-1){var se=z._result;se=se(),se.then(function(ae){(z._status===0||z._status===-1)&&(z._status=1,z._result=ae)},function(ae){(z._status===0||z._status===-1)&&(z._status=2,z._result=ae)}),z._status===-1&&(z._status=0,z._result=se)}if(z._status===1)return z._result.default;throw z._result}var Ae=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},Re={map:J,forEach:function(z,se,ae){J(z,function(){se.apply(this,arguments)},ae)},count:function(z){var se=0;return J(z,function(){se++}),se},toArray:function(z){return J(z,function(se){return se})||[]},only:function(z){if(!$(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return et.Activity=m,et.Children=Re,et.Component=R,et.Fragment=r,et.Profiler=i,et.PureComponent=C,et.StrictMode=n,et.Suspense=p,et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,et.__COMPILER_RUNTIME={__proto__:null,c:function(z){return j.H.useMemoCache(z)}},et.cache=function(z){return function(){return z.apply(null,arguments)}},et.cacheSignal=function(){return null},et.cloneElement=function(z,se,ae){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var fe=S({},z.props),pe=z.key;if(se!=null)for(be in se.key!==void 0&&(pe=""+se.key),se)!q.call(se,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&se.ref===void 0||(fe[be]=se[be]);var be=arguments.length-2;if(be===1)fe.children=ae;else if(1<be){for(var Se=Array(be),Ie=0;Ie<be;Ie++)Se[Ie]=arguments[Ie+2];fe.children=Se}return U(z.type,pe,fe)},et.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:o,_context:z},z},et.createElement=function(z,se,ae){var fe,pe={},be=null;if(se!=null)for(fe in se.key!==void 0&&(be=""+se.key),se)q.call(se,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(pe[fe]=se[fe]);var Se=arguments.length-2;if(Se===1)pe.children=ae;else if(1<Se){for(var Ie=Array(Se),$e=0;$e<Se;$e++)Ie[$e]=arguments[$e+2];pe.children=Ie}if(z&&z.defaultProps)for(fe in Se=z.defaultProps,Se)pe[fe]===void 0&&(pe[fe]=Se[fe]);return U(z,be,pe)},et.createRef=function(){return{current:null}},et.forwardRef=function(z){return{$$typeof:f,render:z}},et.isValidElement=$,et.lazy=function(z){return{$$typeof:d,_payload:{_status:-1,_result:z},_init:Z}},et.memo=function(z,se){return{$$typeof:l,type:z,compare:se===void 0?null:se}},et.startTransition=function(z){var se=j.T,ae={};j.T=ae;try{var fe=z(),pe=j.S;pe!==null&&pe(ae,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(D,Ae)}catch(be){Ae(be)}finally{se!==null&&ae.types!==null&&(se.types=ae.types),j.T=se}},et.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},et.use=function(z){return j.H.use(z)},et.useActionState=function(z,se,ae){return j.H.useActionState(z,se,ae)},et.useCallback=function(z,se){return j.H.useCallback(z,se)},et.useContext=function(z){return j.H.useContext(z)},et.useDebugValue=function(){},et.useDeferredValue=function(z,se){return j.H.useDeferredValue(z,se)},et.useEffect=function(z,se){return j.H.useEffect(z,se)},et.useEffectEvent=function(z){return j.H.useEffectEvent(z)},et.useId=function(){return j.H.useId()},et.useImperativeHandle=function(z,se,ae){return j.H.useImperativeHandle(z,se,ae)},et.useInsertionEffect=function(z,se){return j.H.useInsertionEffect(z,se)},et.useLayoutEffect=function(z,se){return j.H.useLayoutEffect(z,se)},et.useMemo=function(z,se){return j.H.useMemo(z,se)},et.useOptimistic=function(z,se){return j.H.useOptimistic(z,se)},et.useReducer=function(z,se,ae){return j.H.useReducer(z,se,ae)},et.useRef=function(z){return j.H.useRef(z)},et.useState=function(z){return j.H.useState(z)},et.useSyncExternalStore=function(z,se,ae){return j.H.useSyncExternalStore(z,se,ae)},et.useTransition=function(){return j.H.useTransition()},et.version="19.2.3",et}var JR;function i2(){return JR||(JR=1,Jb.exports=V6()),Jb.exports}var xe=i2();const Te=Bp(xe);var Xb={exports:{}},Ch={},Zb={exports:{}},e_={};var XR;function Y6(){return XR||(XR=1,(function(t){function e(M,J){var Z=M.length;M.push(J);e:for(;0<Z;){var Ae=Z-1>>>1,Re=M[Ae];if(0<i(Re,J))M[Ae]=J,M[Z]=Re,Z=Ae;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var J=M[0],Z=M.pop();if(Z!==J){M[0]=Z;e:for(var Ae=0,Re=M.length,z=Re>>>1;Ae<z;){var se=2*(Ae+1)-1,ae=M[se],fe=se+1,pe=M[fe];if(0>i(ae,Z))fe<Re&&0>i(pe,ae)?(M[Ae]=pe,M[fe]=Z,Ae=fe):(M[Ae]=ae,M[se]=Z,Ae=se);else if(fe<Re&&0>i(pe,Z))M[Ae]=pe,M[fe]=Z,Ae=fe;else break e}}return J}function i(M,J){var Z=M.sortIndex-J.sortIndex;return Z!==0?Z:M.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var p=[],l=[],d=1,m=null,y=3,b=!1,w=!1,S=!1,E=!1,R=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function I(M){for(var J=r(l);J!==null;){if(J.callback===null)n(l);else if(J.startTime<=M)n(l),J.sortIndex=J.expirationTime,e(p,J);else break;J=r(l)}}function P(M){if(S=!1,I(M),!w)if(r(p)!==null)w=!0,D||(D=!0,L());else{var J=r(l);J!==null&&ce(P,J.startTime-M)}}var D=!1,j=-1,q=5,U=-1;function Y(){return E?!0:!(t.unstable_now()-U<q)}function $(){if(E=!1,D){var M=t.unstable_now();U=M;var J=!0;try{e:{w=!1,S&&(S=!1,O(j),j=-1),b=!0;var Z=y;try{t:{for(I(M),m=r(p);m!==null&&!(m.expirationTime>M&&Y());){var Ae=m.callback;if(typeof Ae=="function"){m.callback=null,y=m.priorityLevel;var Re=Ae(m.expirationTime<=M);if(M=t.unstable_now(),typeof Re=="function"){m.callback=Re,I(M),J=!0;break t}m===r(p)&&n(p),I(M)}else n(p);m=r(p)}if(m!==null)J=!0;else{var z=r(l);z!==null&&ce(P,z.startTime-M),J=!1}}break e}finally{m=null,y=Z,b=!1}J=void 0}}finally{J?L():D=!1}}}var L;if(typeof C=="function")L=function(){C($)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Q=H.port2;H.port1.onmessage=$,L=function(){Q.postMessage(null)}}else L=function(){R($,0)};function ce(M,J){j=R(function(){M(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(M){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var Z=y;y=J;try{return M()}finally{y=Z}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(M,J){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Z=y;y=M;try{return J()}finally{y=Z}},t.unstable_scheduleCallback=function(M,J,Z){var Ae=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Ae+Z:Ae):Z=Ae,M){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=Z+Re,M={id:d++,callback:J,priorityLevel:M,startTime:Z,expirationTime:Re,sortIndex:-1},Z>Ae?(M.sortIndex=Z,e(l,M),r(p)===null&&M===r(l)&&(S?(O(j),j=-1):S=!0,ce(P,Z-Ae))):(M.sortIndex=Re,e(p,M),w||b||(w=!0,D||(D=!0,L()))),M},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(M){var J=y;return function(){var Z=y;y=J;try{return M.apply(this,arguments)}finally{y=Z}}}})(e_)),e_}var ZR;function K6(){return ZR||(ZR=1,Zb.exports=Y6()),Zb.exports}var t_={exports:{}},fn={};var eC;function Q6(){if(eC)return fn;eC=1;var t=i2();function e(p){var l="https://react.dev/errors/"+p;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+p+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(p,l,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:p,containerInfo:l,implementation:d}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,l){if(p==="font")return"";if(typeof l=="string")return l==="use-credentials"?l:""}return fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,fn.createPortal=function(p,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)throw Error(e(299));return o(p,l,null,d)},fn.flushSync=function(p){var l=u.T,d=n.p;try{if(u.T=null,n.p=2,p)return p()}finally{u.T=l,n.p=d,n.d.f()}},fn.preconnect=function(p,l){typeof p=="string"&&(l?(l=l.crossOrigin,l=typeof l=="string"?l==="use-credentials"?l:"":void 0):l=null,n.d.C(p,l))},fn.prefetchDNS=function(p){typeof p=="string"&&n.d.D(p)},fn.preinit=function(p,l){if(typeof p=="string"&&l&&typeof l.as=="string"){var d=l.as,m=f(d,l.crossOrigin),y=typeof l.integrity=="string"?l.integrity:void 0,b=typeof l.fetchPriority=="string"?l.fetchPriority:void 0;d==="style"?n.d.S(p,typeof l.precedence=="string"?l.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:b}):d==="script"&&n.d.X(p,{crossOrigin:m,integrity:y,fetchPriority:b,nonce:typeof l.nonce=="string"?l.nonce:void 0})}},fn.preinitModule=function(p,l){if(typeof p=="string")if(typeof l=="object"&&l!==null){if(l.as==null||l.as==="script"){var d=f(l.as,l.crossOrigin);n.d.M(p,{crossOrigin:d,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0})}}else l==null&&n.d.M(p)},fn.preload=function(p,l){if(typeof p=="string"&&typeof l=="object"&&l!==null&&typeof l.as=="string"){var d=l.as,m=f(d,l.crossOrigin);n.d.L(p,d,{crossOrigin:m,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0,type:typeof l.type=="string"?l.type:void 0,fetchPriority:typeof l.fetchPriority=="string"?l.fetchPriority:void 0,referrerPolicy:typeof l.referrerPolicy=="string"?l.referrerPolicy:void 0,imageSrcSet:typeof l.imageSrcSet=="string"?l.imageSrcSet:void 0,imageSizes:typeof l.imageSizes=="string"?l.imageSizes:void 0,media:typeof l.media=="string"?l.media:void 0})}},fn.preloadModule=function(p,l){if(typeof p=="string")if(l){var d=f(l.as,l.crossOrigin);n.d.m(p,{as:typeof l.as=="string"&&l.as!=="script"?l.as:void 0,crossOrigin:d,integrity:typeof l.integrity=="string"?l.integrity:void 0})}else n.d.m(p)},fn.requestFormReset=function(p){n.d.r(p)},fn.unstable_batchedUpdates=function(p,l){return p(l)},fn.useFormState=function(p,l,d){return u.H.useFormState(p,l,d)},fn.useFormStatus=function(){return u.H.useHostTransitionStatus()},fn.version="19.2.3",fn}var tC;function hD(){if(tC)return t_.exports;tC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),t_.exports=Q6(),t_.exports}var rC;function J6(){if(rC)return Ch;rC=1;var t=K6(),e=i2(),r=hD();function n(a){var s="https://react.dev/errors/"+a;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var s=a,c=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,(s.flags&4098)!==0&&(c=s.return),a=s.return;while(a)}return s.tag===3?c:null}function u(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function f(a){if(a.tag===31){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function p(a){if(o(a)!==a)throw Error(n(188))}function l(a){var s=a.alternate;if(!s){if(s=o(a),s===null)throw Error(n(188));return s!==a?null:a}for(var c=a,h=s;;){var v=c.return;if(v===null)break;var g=v.alternate;if(g===null){if(h=v.return,h!==null){c=h;continue}break}if(v.child===g.child){for(g=v.child;g;){if(g===c)return p(v),a;if(g===h)return p(v),s;g=g.sibling}throw Error(n(188))}if(c.return!==h.return)c=v,h=g;else{for(var A=!1,N=v.child;N;){if(N===c){A=!0,c=v,h=g;break}if(N===h){A=!0,h=v,c=g;break}N=N.sibling}if(!A){for(N=g.child;N;){if(N===c){A=!0,c=g,h=v;break}if(N===h){A=!0,h=g,c=v;break}N=N.sibling}if(!A)throw Error(n(189))}}if(c.alternate!==h)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?a:s}function d(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a;for(a=a.child;a!==null;){if(s=d(a),s!==null)return s;a=a.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function L(a){return a===null||typeof a!="object"?null:(a=$&&a[$]||a["@@iterator"],typeof a=="function"?a:null)}var H=Symbol.for("react.client.reference");function Q(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===H?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case R:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case D:return"SuspenseList";case U:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case C:return a.displayName||"Context";case O:return(a._context.displayName||"Context")+".Consumer";case I:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case j:return s=a.displayName||null,s!==null?s:Q(a.type)||"Memo";case q:s=a._payload,a=a._init;try{return Q(a(s))}catch{}}return null}var ce=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},Ae=[],Re=-1;function z(a){return{current:a}}function se(a){0>Re||(a.current=Ae[Re],Ae[Re]=null,Re--)}function ae(a,s){Re++,Ae[Re]=a.current,a.current=s}var fe=z(null),pe=z(null),be=z(null),Se=z(null);function Ie(a,s){switch(ae(be,s),ae(pe,a),ae(fe,null),s.nodeType){case 9:case 11:a=(a=s.documentElement)&&(a=a.namespaceURI)?yR(a):0;break;default:if(a=s.tagName,s=s.namespaceURI)s=yR(s),a=gR(s,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}se(fe),ae(fe,a)}function $e(){se(fe),se(pe),se(be)}function pt(a){a.memoizedState!==null&&ae(Se,a);var s=fe.current,c=gR(s,a.type);s!==c&&(ae(pe,a),ae(fe,c))}function Ot(a){pe.current===a&&(se(fe),se(pe)),Se.current===a&&(se(Se),Eh._currentValue=Z)}var Kt,Jr;function Er(a){if(Kt===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);Kt=s&&s[1]||"",Jr=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Kt+a+Jr}var st=!1;function Pr(a,s){if(!a||st)return"";st=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(oe){var re=oe}Reflect.construct(a,[],de)}else{try{de.call()}catch(oe){re=oe}a.call(de.prototype)}}else{try{throw Error()}catch(oe){re=oe}(de=a())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(oe){if(oe&&re&&typeof oe.stack=="string")return[oe.stack,re.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=h.DetermineComponentFrameRoot(),A=g[0],N=g[1];if(A&&N){var B=A.split(`
`),ee=N.split(`
`);for(v=h=0;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;for(;v<ee.length&&!ee[v].includes("DetermineComponentFrameRoot");)v++;if(h===B.length||v===ee.length)for(h=B.length-1,v=ee.length-1;1<=h&&0<=v&&B[h]!==ee[v];)v--;for(;1<=h&&0<=v;h--,v--)if(B[h]!==ee[v]){if(h!==1||v!==1)do if(h--,v--,0>v||B[h]!==ee[v]){var ue=`
`+B[h].replace(" at new "," at ");return a.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",a.displayName)),ue}while(1<=h&&0<=v);break}}}finally{st=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?Er(c):""}function tt(a,s){switch(a.tag){case 26:case 27:case 5:return Er(a.type);case 16:return Er("Lazy");case 13:return a.child!==s&&s!==null?Er("Suspense Fallback"):Er("Suspense");case 19:return Er("SuspenseList");case 0:case 15:return Pr(a.type,!1);case 11:return Pr(a.type.render,!1);case 1:return Pr(a.type,!0);case 31:return Er("Activity");default:return""}}function cr(a){try{var s="",c=null;do s+=tt(a,c),c=a,a=a.return;while(a);return s}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var qt=Object.prototype.hasOwnProperty,mi=t.unstable_scheduleCallback,vi=t.unstable_cancelCallback,Dt=t.unstable_shouldYield,Ft=t.unstable_requestPaint,Zt=t.unstable_now,Li=t.unstable_getCurrentPriorityLevel,En=t.unstable_ImmediatePriority,Qo=t.unstable_UserBlockingPriority,ir=t.unstable_NormalPriority,ln=t.unstable_LowPriority,Tn=t.unstable_IdlePriority,ki=t.log,zn=t.unstable_setDisableYieldValue,or=null,Yt=null;function $n(a){if(typeof ki=="function"&&zn(a),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(or,a)}catch{}}var Ur=Math.clz32?Math.clz32:yi,yc=Math.log,Ss=Math.LN2;function yi(a){return a>>>=0,a===0?32:31-(yc(a)/Ss|0)|0}var xa=256,Jo=262144,So=4194304;function qr(a){var s=a&42;if(s!==0)return s;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function We(a,s,c){var h=a.pendingLanes;if(h===0)return 0;var v=0,g=a.suspendedLanes,A=a.pingedLanes;a=a.warmLanes;var N=h&134217727;return N!==0?(h=N&~g,h!==0?v=qr(h):(A&=N,A!==0?v=qr(A):c||(c=N&~a,c!==0&&(v=qr(c))))):(N=h&~g,N!==0?v=qr(N):A!==0?v=qr(A):c||(c=h&~a,c!==0&&(v=qr(c)))),v===0?0:s!==0&&s!==v&&(s&g)===0&&(g=v&-v,c=s&-s,g>=c||g===32&&(c&4194048)!==0)?s:v}function Rt(a,s){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&s)===0}function kt(a,s){switch(a){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function er(){var a=So;return So<<=1,(So&62914560)===0&&(So=4194304),a}function Mi(a){for(var s=[],c=0;31>c;c++)s.push(a);return s}function Nt(a,s){a.pendingLanes|=s,s!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Xr(a,s,c,h,v,g){var A=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var N=a.entanglements,B=a.expirationTimes,ee=a.hiddenUpdates;for(c=A&~c;0<c;){var ue=31-Ur(c),de=1<<ue;N[ue]=0,B[ue]=-1;var re=ee[ue];if(re!==null)for(ee[ue]=null,ue=0;ue<re.length;ue++){var oe=re[ue];oe!==null&&(oe.lane&=-536870913)}c&=~de}h!==0&&Eo(a,h,0),g!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=g&~(A&~s))}function Eo(a,s,c){a.pendingLanes|=s,a.suspendedLanes&=~s;var h=31-Ur(s);a.entangledLanes|=s,a.entanglements[h]=a.entanglements[h]|1073741824|c&261930}function Zr(a,s){var c=a.entangledLanes|=s;for(a=a.entanglements;c;){var h=31-Ur(c),v=1<<h;v&s|a[h]&s&&(a[h]|=s),c&=~v}}function Dr(a,s){var c=s&-s;return c=(c&42)!==0?1:Na(c),(c&(a.suspendedLanes|s))!==0?0:c}function Na(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Fn(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function gc(){var a=J.p;return a!==0?a:(a=window.event,a===void 0?32:zR(a.type))}function Ad(a,s){var c=J.p;try{return J.p=a,s()}finally{J.p=c}}var To=Math.random().toString(36).slice(2),fr="__reactFiber$"+To,zr="__reactProps$"+To,Pa="__reactContainer$"+To,Xo="__reactEvents$"+To,bc="__reactListeners$"+To,ju="__reactHandles$"+To,Lu="__reactResources$"+To,$r="__reactMarker$"+To;function _c(a){delete a[fr],delete a[zr],delete a[Xo],delete a[bc],delete a[ju]}function Zo(a){var s=a[fr];if(s)return s;for(var c=a.parentNode;c;){if(s=c[Pa]||c[fr]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(a=AR(a);a!==null;){if(c=a[fr])return c;a=AR(a)}return s}a=c,c=a.parentNode}return null}function Ua(a){if(a=a[fr]||a[Pa]){var s=a.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return a}return null}function ea(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a.stateNode;throw Error(n(33))}function Ao(a){var s=a[Lu];return s||(s=a[Lu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function dr(a){a[$r]=!0}var wc=new Set,Es={};function qa(a,s){Da(a,s),Da(a+"Capture",s)}function Da(a,s){for(Es[a]=s,a=0;a<s.length;a++)wc.add(s[a])}var em=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Od={},Sc={};function ta(a){return qt.call(Sc,a)?!0:qt.call(Od,a)?!1:em.test(a)?Sc[a]=!0:(Od[a]=!0,!1)}function Bi(a,s,c){if(ta(s))if(c===null)a.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){a.removeAttribute(s);return}}a.setAttribute(s,""+c)}}function ku(a,s,c){if(c===null)a.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(s);return}a.setAttribute(s,""+c)}}function zi(a,s,c,h){if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(s,c,""+h)}}function en(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ts(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ec(a,s,c){var h=Object.getOwnPropertyDescriptor(a.constructor.prototype,s);if(!a.hasOwnProperty(s)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,g=h.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return v.call(this)},set:function(A){c=""+A,g.call(this,A)}}),Object.defineProperty(a,s,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(A){c=""+A},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function As(a){if(!a._valueTracker){var s=Ts(a)?"checked":"value";a._valueTracker=Ec(a,s,""+a[s])}}function tm(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var c=s.getValue(),h="";return a&&(h=Ts(a)?a.checked?"true":"false":a.value),a=h,a!==c?(s.setValue(a),!0):!1}function Tc(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var o0=/[\n"\\]/g;function Hn(a){return a.replace(o0,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Rd(a,s,c,h,v,g,A,N){a.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?a.type=A:a.removeAttribute("type"),s!=null?A==="number"?(s===0&&a.value===""||a.value!=s)&&(a.value=""+en(s)):a.value!==""+en(s)&&(a.value=""+en(s)):A!=="submit"&&A!=="reset"||a.removeAttribute("value"),s!=null?Id(a,A,en(s)):c!=null?Id(a,A,en(c)):h!=null&&a.removeAttribute("value"),v==null&&g!=null&&(a.defaultChecked=!!g),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.name=""+en(N):a.removeAttribute("name")}function Cd(a,s,c,h,v,g,A,N){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(a.type=g),s!=null||c!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){As(a);return}c=c!=null?""+en(c):"",s=s!=null?""+en(s):c,N||s===a.value||(a.value=s),a.defaultValue=s}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,a.checked=N?a.checked:!!h,a.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(a.name=A),As(a)}function Id(a,s,c){s==="number"&&Tc(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function An(a,s,c,h){if(a=a.options,s){s={};for(var v=0;v<c.length;v++)s["$"+c[v]]=!0;for(c=0;c<a.length;c++)v=s.hasOwnProperty("$"+a[c].value),a[c].selected!==v&&(a[c].selected=v),v&&h&&(a[c].defaultSelected=!0)}else{for(c=""+en(c),s=null,v=0;v<a.length;v++){if(a[v].value===c){a[v].selected=!0,h&&(a[v].defaultSelected=!0);return}s!==null||a[v].disabled||(s=a[v])}s!==null&&(s.selected=!0)}}function xd(a,s,c){if(s!=null&&(s=""+en(s),s!==a.value&&(a.value=s),c==null)){a.defaultValue!==s&&(a.defaultValue=s);return}a.defaultValue=c!=null?""+en(c):""}function Nd(a,s,c,h){if(s==null){if(h!=null){if(c!=null)throw Error(n(92));if(ce(h)){if(1<h.length)throw Error(n(93));h=h[0]}c=h}c==null&&(c=""),s=c}c=en(s),a.defaultValue=c,h=a.textContent,h===c&&h!==""&&h!==null&&(a.value=h),As(a)}function gi(a,s){if(s){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=s;return}}a.textContent=s}var Os=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mu(a,s,c){var h=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?a.setProperty(s,""):s==="float"?a.cssFloat="":a[s]="":h?a.setProperty(s,c):typeof c!="number"||c===0||Os.has(s)?s==="float"?a.cssFloat=c:a[s]=(""+c).trim():a[s]=c+"px"}function Pd(a,s,c){if(s!=null&&typeof s!="object")throw Error(n(62));if(a=a.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?a.setProperty(h,""):h==="float"?a.cssFloat="":a[h]="");for(var v in s)h=s[v],s.hasOwnProperty(v)&&c[v]!==h&&Mu(a,v,h)}else for(var g in s)s.hasOwnProperty(g)&&Mu(a,g,s[g])}function Bu(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ud=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function On(a){return qd.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Gn(){}var zu=null;function bi(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Wn=null,ja=null;function Dd(a){var s=Ua(a);if(s&&(a=s.stateNode)){var c=a[zr]||null;e:switch(a=s.stateNode,s.type){case"input":if(Rd(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Hn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var h=c[s];if(h!==a&&h.form===a.form){var v=h[zr]||null;if(!v)throw Error(n(90));Rd(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(s=0;s<c.length;s++)h=c[s],h.form===a.form&&tm(h)}break e;case"textarea":xd(a,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&An(a,!!c.multiple,s,!1)}}}var Ac=!1;function jd(a,s,c){if(Ac)return a(s,c);Ac=!0;try{var h=a(s);return h}finally{if(Ac=!1,(Wn!==null||ja!==null)&&(Ym(),Wn&&(s=Wn,a=ja,ja=Wn=null,Dd(s),a)))for(s=0;s<a.length;s++)Dd(a[s])}}function Rs(a,s){var c=a.stateNode;if(c===null)return null;var h=c[zr]||null;if(h===null)return null;c=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(a=a.type,h=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!h;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(n(231,s,typeof c));return c}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$u=!1;if(cn)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){$u=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{$u=!1}var _i=null,Oc=null,La=null;function Is(){if(La)return La;var a,s=Oc,c=s.length,h,v="value"in _i?_i.value:_i.textContent,g=v.length;for(a=0;a<c&&s[a]===v[a];a++);var A=c-a;for(h=1;h<=A&&s[c-h]===v[g-h];h++);return La=v.slice(a,1<h?1-h:void 0)}function xs(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function Fu(){return!0}function Hu(){return!1}function Fr(a){function s(c,h,v,g,A){this._reactName=c,this._targetInst=v,this.type=h,this.nativeEvent=g,this.target=A,this.currentTarget=null;for(var N in a)a.hasOwnProperty(N)&&(c=a[N],this[N]=c?c(g):g[N]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Fu:Hu,this.isPropagationStopped=Hu,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Fu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Fu)},persist:function(){},isPersistent:Fu}),s}var Rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=Fr(Rn),na=m({},Rn,{view:0,detail:0}),rm=Fr(na),Gu,Rc,ia,Ns=m({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oa,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ia&&(ia&&a.type==="mousemove"?(Gu=a.screenX-ia.screenX,Rc=a.screenY-ia.screenY):Rc=Gu=0,ia=a),Gu)},movementY:function(a){return"movementY"in a?a.movementY:Rc}}),Ld=Fr(Ns),nm=m({},Ns,{dataTransfer:0}),kd=Fr(nm),im=m({},na,{relatedTarget:0}),Md=Fr(im),om=m({},Rn,{animationName:0,elapsedTime:0,pseudoElement:0}),Oo=Fr(om),Cc=m({},Rn,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Wu=Fr(Cc),am=m({},Rn,{data:0}),Vu=Fr(am),ka={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ps={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bd(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=wi[a])?!!s[a]:!1}function oa(){return Bd}var sm=m({},na,{key:function(a){if(a.key){var s=ka[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=xs(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Ps[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oa,charCode:function(a){return a.type==="keypress"?xs(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?xs(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Ic=Fr(sm),a0=m({},Ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),um=Fr(a0),s0=m({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oa}),u0=Fr(s0),l0=m({},Rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),lm=Fr(l0),Hr=m({},Ns,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Yu=Fr(Hr),cm=m({},Rn,{newState:0,oldState:0}),zd=Fr(cm),aa=[9,13,27,32],$i=cn&&"CompositionEvent"in window,tn=null;cn&&"documentMode"in document&&(tn=document.documentMode);var Ku=cn&&"TextEvent"in window&&!tn,$d=cn&&(!$i||tn&&8<tn&&11>=tn),sa=" ",Fd=!1;function Hd(a,s){switch(a){case"keyup":return aa.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qu(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ma=!1;function fm(a,s){switch(a){case"compositionend":return Qu(s);case"keypress":return s.which!==32?null:(Fd=!0,sa);case"textInput":return a=s.data,a===sa&&Fd?null:a;default:return null}}function dm(a,s){if(Ma)return a==="compositionend"||!$i&&Hd(a,s)?(a=Is(),La=Oc=_i=null,Ma=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return $d&&s.locale!=="ko"?null:s.data;default:return null}}var xc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gd(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!xc[a.type]:s==="textarea"}function Wd(a,s,c,h){Wn?ja?ja.push(h):ja=[h]:Wn=h,s=tv(s,"onChange"),0<s.length&&(c=new ra("onChange","change",null,c,h),a.push({event:c,listeners:s}))}var Ju=null,Xu=null;function c0(a){fR(a,0)}function Nc(a){var s=ea(a);if(tm(s))return a}function Zu(a,s){if(a==="change")return s}var Vd=!1;if(cn){var Pc;if(cn){var el="oninput"in document;if(!el){var Uc=document.createElement("div");Uc.setAttribute("oninput","return;"),el=typeof Uc.oninput=="function"}Pc=el}else Pc=!1;Vd=Pc&&(!document.documentMode||9<document.documentMode)}function tl(){Ju&&(Ju.detachEvent("onpropertychange",Ro),Xu=Ju=null)}function Ro(a){if(a.propertyName==="value"&&Nc(Xu)){var s=[];Wd(s,Xu,a,bi(a)),jd(c0,s)}}function qc(a,s,c){a==="focusin"?(tl(),Ju=s,Xu=c,Ju.attachEvent("onpropertychange",Ro)):a==="focusout"&&tl()}function Dc(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Nc(Xu)}function hm(a,s){if(a==="click")return Nc(s)}function pm(a,s){if(a==="input"||a==="change")return Nc(s)}function jc(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var rn=typeof Object.is=="function"?Object.is:jc;function Fi(a,s){if(rn(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var c=Object.keys(a),h=Object.keys(s);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var v=c[h];if(!qt.call(s,v)||!rn(a[v],s[v]))return!1}return!0}function Yd(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function _(a,s){var c=Yd(a);a=0;for(var h;c;){if(c.nodeType===3){if(h=a+c.textContent.length,a<=s&&h>=s)return{node:c,offset:s-a};a=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Yd(c)}}function T(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?T(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function x(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var s=Tc(a.document);s instanceof a.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)a=s.contentWindow;else break;s=Tc(a.document)}return s}function k(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}var ne=cn&&"documentMode"in document&&11>=document.documentMode,K=null,te=null,ie=null,he=!1;function Ce(a,s,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;he||K==null||K!==Tc(h)||(h=K,"selectionStart"in h&&k(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ie&&Fi(ie,h)||(ie=h,h=tv(te,"onSelect"),0<h.length&&(s=new ra("onSelect","select",null,s,c),a.push({event:s,listeners:h}),s.target=K)))}function ke(a,s){var c={};return c[a.toLowerCase()]=s.toLowerCase(),c["Webkit"+a]="webkit"+s,c["Moz"+a]="moz"+s,c}var Ee={animationend:ke("Animation","AnimationEnd"),animationiteration:ke("Animation","AnimationIteration"),animationstart:ke("Animation","AnimationStart"),transitionrun:ke("Transition","TransitionRun"),transitionstart:ke("Transition","TransitionStart"),transitioncancel:ke("Transition","TransitionCancel"),transitionend:ke("Transition","TransitionEnd")},Ne={},Xe={};cn&&(Xe=document.createElement("div").style,"AnimationEvent"in window||(delete Ee.animationend.animation,delete Ee.animationiteration.animation,delete Ee.animationstart.animation),"TransitionEvent"in window||delete Ee.transitionend.transition);function Ct(a){if(Ne[a])return Ne[a];if(!Ee[a])return a;var s=Ee[a],c;for(c in s)if(s.hasOwnProperty(c)&&c in Xe)return Ne[a]=s[c];return a}var Mt=Ct("animationend"),mt=Ct("animationiteration"),ot=Ct("animationstart"),Ze=Ct("transitionrun"),lt=Ct("transitionstart"),Ht=Ct("transitioncancel"),we=Ct("transitionend"),ze=new Map,vt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vt.push("scrollEnd");function ut(a,s){ze.set(a,s),qa(s,[a])}var Tr=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},hr=[],Cn=0,rl=0;function mm(){for(var a=Cn,s=rl=Cn=0;s<a;){var c=hr[s];hr[s++]=null;var h=hr[s];hr[s++]=null;var v=hr[s];hr[s++]=null;var g=hr[s];if(hr[s++]=null,h!==null&&v!==null){var A=h.pending;A===null?v.next=v:(v.next=A.next,A.next=v),h.pending=v}g!==0&&WT(c,v,g)}}function vm(a,s,c,h){hr[Cn++]=a,hr[Cn++]=s,hr[Cn++]=c,hr[Cn++]=h,rl|=h,a.lanes|=h,a=a.alternate,a!==null&&(a.lanes|=h)}function f0(a,s,c,h){return vm(a,s,c,h),ym(a)}function nl(a,s){return vm(a,null,null,s),ym(a)}function WT(a,s,c){a.lanes|=c;var h=a.alternate;h!==null&&(h.lanes|=c);for(var v=!1,g=a.return;g!==null;)g.childLanes|=c,h=g.alternate,h!==null&&(h.childLanes|=c),g.tag===22&&(a=g.stateNode,a===null||a._visibility&1||(v=!0)),a=g,g=g.return;return a.tag===3?(g=a.stateNode,v&&s!==null&&(v=31-Ur(c),a=g.hiddenUpdates,h=a[v],h===null?a[v]=[s]:h.push(s),s.lane=c|536870912),g):null}function ym(a){if(50<vh)throw vh=0,_b=null,Error(n(185));for(var s=a.return;s!==null;)a=s,s=a.return;return a.tag===3?a.stateNode:null}var Lc={};function RM(a,s,c,h){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Si(a,s,c,h){return new RM(a,s,c,h)}function d0(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ba(a,s){var c=a.alternate;return c===null?(c=Si(a.tag,s,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=s,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,s=a.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function VT(a,s){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=s,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,s=c.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a}function gm(a,s,c,h,v,g){var A=0;if(h=a,typeof a=="function")d0(a)&&(A=1);else if(typeof a=="string")A=P6(a,c,fe.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case U:return a=Si(31,c,s,v),a.elementType=U,a.lanes=g,a;case S:return il(c.children,v,g,s);case E:A=8,v|=24;break;case R:return a=Si(12,c,s,v|2),a.elementType=R,a.lanes=g,a;case P:return a=Si(13,c,s,v),a.elementType=P,a.lanes=g,a;case D:return a=Si(19,c,s,v),a.elementType=D,a.lanes=g,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case C:A=10;break e;case O:A=9;break e;case I:A=11;break e;case j:A=14;break e;case q:A=16,h=null;break e}A=29,c=Error(n(130,a===null?"null":typeof a,"")),h=null}return s=Si(A,c,s,v),s.elementType=a,s.type=h,s.lanes=g,s}function il(a,s,c,h){return a=Si(7,a,h,s),a.lanes=c,a}function h0(a,s,c){return a=Si(6,a,null,s),a.lanes=c,a}function YT(a){var s=Si(18,null,null,0);return s.stateNode=a,s}function p0(a,s,c){return s=Si(4,a.children!==null?a.children:[],a.key,s),s.lanes=c,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}var KT=new WeakMap;function Hi(a,s){if(typeof a=="object"&&a!==null){var c=KT.get(a);return c!==void 0?c:(s={value:a,source:s,stack:cr(s)},KT.set(a,s),s)}return{value:a,source:s,stack:cr(s)}}var kc=[],Mc=0,bm=null,Kd=0,Gi=[],Wi=0,Us=null,ua=1,la="";function za(a,s){kc[Mc++]=Kd,kc[Mc++]=bm,bm=a,Kd=s}function QT(a,s,c){Gi[Wi++]=ua,Gi[Wi++]=la,Gi[Wi++]=Us,Us=a;var h=ua;a=la;var v=32-Ur(h)-1;h&=~(1<<v),c+=1;var g=32-Ur(s)+v;if(30<g){var A=v-v%5;g=(h&(1<<A)-1).toString(32),h>>=A,v-=A,ua=1<<32-Ur(s)+v|c<<v|h,la=g+a}else ua=1<<g|c<<v|h,la=a}function m0(a){a.return!==null&&(za(a,1),QT(a,1,0))}function v0(a){for(;a===bm;)bm=kc[--Mc],kc[Mc]=null,Kd=kc[--Mc],kc[Mc]=null;for(;a===Us;)Us=Gi[--Wi],Gi[Wi]=null,la=Gi[--Wi],Gi[Wi]=null,ua=Gi[--Wi],Gi[Wi]=null}function JT(a,s){Gi[Wi++]=ua,Gi[Wi++]=la,Gi[Wi++]=Us,ua=s.id,la=s.overflow,Us=a}var nn=null,Qt=null,bt=!1,qs=null,Vi=!1,y0=Error(n(519));function Ds(a){var s=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qd(Hi(s,a)),y0}function XT(a){var s=a.stateNode,c=a.type,h=a.memoizedProps;switch(s[fr]=a,s[zr]=h,c){case"dialog":ht("cancel",s),ht("close",s);break;case"iframe":case"object":case"embed":ht("load",s);break;case"video":case"audio":for(c=0;c<gh.length;c++)ht(gh[c],s);break;case"source":ht("error",s);break;case"img":case"image":case"link":ht("error",s),ht("load",s);break;case"details":ht("toggle",s);break;case"input":ht("invalid",s),Cd(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":ht("invalid",s);break;case"textarea":ht("invalid",s),Nd(s,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||h.suppressHydrationWarning===!0||mR(s.textContent,c)?(h.popover!=null&&(ht("beforetoggle",s),ht("toggle",s)),h.onScroll!=null&&ht("scroll",s),h.onScrollEnd!=null&&ht("scrollend",s),h.onClick!=null&&(s.onclick=Gn),s=!0):s=!1,s||Ds(a,!0)}function ZT(a){for(nn=a.return;nn;)switch(nn.tag){case 5:case 31:case 13:Vi=!1;return;case 27:case 3:Vi=!0;return;default:nn=nn.return}}function Bc(a){if(a!==nn)return!1;if(!bt)return ZT(a),bt=!0,!1;var s=a.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||Db(a.type,a.memoizedProps)),c=!c),c&&Qt&&Ds(a),ZT(a),s===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));Qt=TR(a)}else if(s===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));Qt=TR(a)}else s===27?(s=Qt,Ks(a.type)?(a=Bb,Bb=null,Qt=a):Qt=s):Qt=nn?Ki(a.stateNode.nextSibling):null;return!0}function ol(){Qt=nn=null,bt=!1}function g0(){var a=qs;return a!==null&&(Qn===null?Qn=a:Qn.push.apply(Qn,a),qs=null),a}function Qd(a){qs===null?qs=[a]:qs.push(a)}var b0=z(null),al=null,$a=null;function js(a,s,c){ae(b0,s._currentValue),s._currentValue=c}function Fa(a){a._currentValue=b0.current,se(b0)}function _0(a,s,c){for(;a!==null;){var h=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),a===c)break;a=a.return}}function w0(a,s,c,h){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var g=v.dependencies;if(g!==null){var A=v.child;g=g.firstContext;e:for(;g!==null;){var N=g;g=v;for(var B=0;B<s.length;B++)if(N.context===s[B]){g.lanes|=c,N=g.alternate,N!==null&&(N.lanes|=c),_0(g.return,c,a),h||(A=null);break e}g=N.next}}else if(v.tag===18){if(A=v.return,A===null)throw Error(n(341));A.lanes|=c,g=A.alternate,g!==null&&(g.lanes|=c),_0(A,c,a),A=null}else A=v.child;if(A!==null)A.return=v;else for(A=v;A!==null;){if(A===a){A=null;break}if(v=A.sibling,v!==null){v.return=A.return,A=v;break}A=A.return}v=A}}function zc(a,s,c,h){a=null;for(var v=s,g=!1;v!==null;){if(!g){if((v.flags&524288)!==0)g=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var A=v.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var N=v.type;rn(v.pendingProps.value,A.value)||(a!==null?a.push(N):a=[N])}}else if(v===Se.current){if(A=v.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Eh):a=[Eh])}v=v.return}a!==null&&w0(s,a,c,h),s.flags|=262144}function _m(a){for(a=a.firstContext;a!==null;){if(!rn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function sl(a){al=a,$a=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function on(a){return eA(al,a)}function wm(a,s){return al===null&&sl(a),eA(a,s)}function eA(a,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},$a===null){if(a===null)throw Error(n(308));$a=s,a.dependencies={lanes:0,firstContext:s},a.flags|=524288}else $a=$a.next=s;return c}var CM=typeof AbortController<"u"?AbortController:function(){var a=[],s=this.signal={aborted:!1,addEventListener:function(c,h){a.push(h)}};this.abort=function(){s.aborted=!0,a.forEach(function(c){return c()})}},IM=t.unstable_scheduleCallback,xM=t.unstable_NormalPriority,Ar={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function S0(){return{controller:new CM,data:new Map,refCount:0}}function Jd(a){a.refCount--,a.refCount===0&&IM(xM,function(){a.controller.abort()})}var Xd=null,E0=0,$c=0,Fc=null;function NM(a,s){if(Xd===null){var c=Xd=[];E0=0,$c=Ob(),Fc={status:"pending",value:void 0,then:function(h){c.push(h)}}}return E0++,s.then(tA,tA),s}function tA(){if(--E0===0&&Xd!==null){Fc!==null&&(Fc.status="fulfilled");var a=Xd;Xd=null,$c=0,Fc=null;for(var s=0;s<a.length;s++)(0,a[s])()}}function PM(a,s){var c=[],h={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return a.then(function(){h.status="fulfilled",h.value=s;for(var v=0;v<c.length;v++)(0,c[v])(s)},function(v){for(h.status="rejected",h.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),h}var rA=M.S;M.S=function(a,s){MO=Zt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&NM(a,s),rA!==null&&rA(a,s)};var ul=z(null);function T0(){var a=ul.current;return a!==null?a:Gt.pooledCache}function Sm(a,s){s===null?ae(ul,ul.current):ae(ul,s.pool)}function nA(){var a=T0();return a===null?null:{parent:Ar._currentValue,pool:a}}var Hc=Error(n(460)),A0=Error(n(474)),Em=Error(n(542)),Tm={then:function(){}};function iA(a){return a=a.status,a==="fulfilled"||a==="rejected"}function oA(a,s,c){switch(c=a[c],c===void 0?a.push(s):c!==s&&(s.then(Gn,Gn),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,sA(a),a;default:if(typeof s.status=="string")s.then(Gn,Gn);else{if(a=Gt,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=s,a.status="pending",a.then(function(h){if(s.status==="pending"){var v=s;v.status="fulfilled",v.value=h}},function(h){if(s.status==="pending"){var v=s;v.status="rejected",v.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,sA(a),a}throw cl=s,Hc}}function ll(a){try{var s=a._init;return s(a._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(cl=c,Hc):c}}var cl=null;function aA(){if(cl===null)throw Error(n(459));var a=cl;return cl=null,a}function sA(a){if(a===Hc||a===Em)throw Error(n(483))}var Gc=null,Zd=0;function Am(a){var s=Zd;return Zd+=1,Gc===null&&(Gc=[]),oA(Gc,a,s)}function eh(a,s){s=s.props.ref,a.ref=s!==void 0?s:null}function Om(a,s){throw s.$$typeof===y?Error(n(525)):(a=Object.prototype.toString.call(s),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a)))}function uA(a){function s(W,F){if(a){var X=W.deletions;X===null?(W.deletions=[F],W.flags|=16):X.push(F)}}function c(W,F){if(!a)return null;for(;F!==null;)s(W,F),F=F.sibling;return null}function h(W){for(var F=new Map;W!==null;)W.key!==null?F.set(W.key,W):F.set(W.index,W),W=W.sibling;return F}function v(W,F){return W=Ba(W,F),W.index=0,W.sibling=null,W}function g(W,F,X){return W.index=X,a?(X=W.alternate,X!==null?(X=X.index,X<F?(W.flags|=67108866,F):X):(W.flags|=67108866,F)):(W.flags|=1048576,F)}function A(W){return a&&W.alternate===null&&(W.flags|=67108866),W}function N(W,F,X,le){return F===null||F.tag!==6?(F=h0(X,W.mode,le),F.return=W,F):(F=v(F,X),F.return=W,F)}function B(W,F,X,le){var Fe=X.type;return Fe===S?ue(W,F,X.props.children,le,X.key):F!==null&&(F.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===q&&ll(Fe)===F.type)?(F=v(F,X.props),eh(F,X),F.return=W,F):(F=gm(X.type,X.key,X.props,null,W.mode,le),eh(F,X),F.return=W,F)}function ee(W,F,X,le){return F===null||F.tag!==4||F.stateNode.containerInfo!==X.containerInfo||F.stateNode.implementation!==X.implementation?(F=p0(X,W.mode,le),F.return=W,F):(F=v(F,X.children||[]),F.return=W,F)}function ue(W,F,X,le,Fe){return F===null||F.tag!==7?(F=il(X,W.mode,le,Fe),F.return=W,F):(F=v(F,X),F.return=W,F)}function de(W,F,X){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=h0(""+F,W.mode,X),F.return=W,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case b:return X=gm(F.type,F.key,F.props,null,W.mode,X),eh(X,F),X.return=W,X;case w:return F=p0(F,W.mode,X),F.return=W,F;case q:return F=ll(F),de(W,F,X)}if(ce(F)||L(F))return F=il(F,W.mode,X,null),F.return=W,F;if(typeof F.then=="function")return de(W,Am(F),X);if(F.$$typeof===C)return de(W,wm(W,F),X);Om(W,F)}return null}function re(W,F,X,le){var Fe=F!==null?F.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Fe!==null?null:N(W,F,""+X,le);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case b:return X.key===Fe?B(W,F,X,le):null;case w:return X.key===Fe?ee(W,F,X,le):null;case q:return X=ll(X),re(W,F,X,le)}if(ce(X)||L(X))return Fe!==null?null:ue(W,F,X,le,null);if(typeof X.then=="function")return re(W,F,Am(X),le);if(X.$$typeof===C)return re(W,F,wm(W,X),le);Om(W,X)}return null}function oe(W,F,X,le,Fe){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return W=W.get(X)||null,N(F,W,""+le,Fe);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case b:return W=W.get(le.key===null?X:le.key)||null,B(F,W,le,Fe);case w:return W=W.get(le.key===null?X:le.key)||null,ee(F,W,le,Fe);case q:return le=ll(le),oe(W,F,X,le,Fe)}if(ce(le)||L(le))return W=W.get(X)||null,ue(F,W,le,Fe,null);if(typeof le.then=="function")return oe(W,F,X,Am(le),Fe);if(le.$$typeof===C)return oe(W,F,X,wm(F,le),Fe);Om(F,le)}return null}function Pe(W,F,X,le){for(var Fe=null,It=null,Le=F,at=F=0,gt=null;Le!==null&&at<X.length;at++){Le.index>at?(gt=Le,Le=null):gt=Le.sibling;var xt=re(W,Le,X[at],le);if(xt===null){Le===null&&(Le=gt);break}a&&Le&&xt.alternate===null&&s(W,Le),F=g(xt,F,at),It===null?Fe=xt:It.sibling=xt,It=xt,Le=gt}if(at===X.length)return c(W,Le),bt&&za(W,at),Fe;if(Le===null){for(;at<X.length;at++)Le=de(W,X[at],le),Le!==null&&(F=g(Le,F,at),It===null?Fe=Le:It.sibling=Le,It=Le);return bt&&za(W,at),Fe}for(Le=h(Le);at<X.length;at++)gt=oe(Le,W,at,X[at],le),gt!==null&&(a&&gt.alternate!==null&&Le.delete(gt.key===null?at:gt.key),F=g(gt,F,at),It===null?Fe=gt:It.sibling=gt,It=gt);return a&&Le.forEach(function(eu){return s(W,eu)}),bt&&za(W,at),Fe}function Ge(W,F,X,le){if(X==null)throw Error(n(151));for(var Fe=null,It=null,Le=F,at=F=0,gt=null,xt=X.next();Le!==null&&!xt.done;at++,xt=X.next()){Le.index>at?(gt=Le,Le=null):gt=Le.sibling;var eu=re(W,Le,xt.value,le);if(eu===null){Le===null&&(Le=gt);break}a&&Le&&eu.alternate===null&&s(W,Le),F=g(eu,F,at),It===null?Fe=eu:It.sibling=eu,It=eu,Le=gt}if(xt.done)return c(W,Le),bt&&za(W,at),Fe;if(Le===null){for(;!xt.done;at++,xt=X.next())xt=de(W,xt.value,le),xt!==null&&(F=g(xt,F,at),It===null?Fe=xt:It.sibling=xt,It=xt);return bt&&za(W,at),Fe}for(Le=h(Le);!xt.done;at++,xt=X.next())xt=oe(Le,W,at,xt.value,le),xt!==null&&(a&&xt.alternate!==null&&Le.delete(xt.key===null?at:xt.key),F=g(xt,F,at),It===null?Fe=xt:It.sibling=xt,It=xt);return a&&Le.forEach(function(F6){return s(W,F6)}),bt&&za(W,at),Fe}function $t(W,F,X,le){if(typeof X=="object"&&X!==null&&X.type===S&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case b:e:{for(var Fe=X.key;F!==null;){if(F.key===Fe){if(Fe=X.type,Fe===S){if(F.tag===7){c(W,F.sibling),le=v(F,X.props.children),le.return=W,W=le;break e}}else if(F.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===q&&ll(Fe)===F.type){c(W,F.sibling),le=v(F,X.props),eh(le,X),le.return=W,W=le;break e}c(W,F);break}else s(W,F);F=F.sibling}X.type===S?(le=il(X.props.children,W.mode,le,X.key),le.return=W,W=le):(le=gm(X.type,X.key,X.props,null,W.mode,le),eh(le,X),le.return=W,W=le)}return A(W);case w:e:{for(Fe=X.key;F!==null;){if(F.key===Fe)if(F.tag===4&&F.stateNode.containerInfo===X.containerInfo&&F.stateNode.implementation===X.implementation){c(W,F.sibling),le=v(F,X.children||[]),le.return=W,W=le;break e}else{c(W,F);break}else s(W,F);F=F.sibling}le=p0(X,W.mode,le),le.return=W,W=le}return A(W);case q:return X=ll(X),$t(W,F,X,le)}if(ce(X))return Pe(W,F,X,le);if(L(X)){if(Fe=L(X),typeof Fe!="function")throw Error(n(150));return X=Fe.call(X),Ge(W,F,X,le)}if(typeof X.then=="function")return $t(W,F,Am(X),le);if(X.$$typeof===C)return $t(W,F,wm(W,X),le);Om(W,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,F!==null&&F.tag===6?(c(W,F.sibling),le=v(F,X),le.return=W,W=le):(c(W,F),le=h0(X,W.mode,le),le.return=W,W=le),A(W)):c(W,F)}return function(W,F,X,le){try{Zd=0;var Fe=$t(W,F,X,le);return Gc=null,Fe}catch(Le){if(Le===Hc||Le===Em)throw Le;var It=Si(29,Le,null,W.mode);return It.lanes=le,It.return=W,It}}}var fl=uA(!0),lA=uA(!1),Ls=!1;function O0(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function R0(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function ks(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ms(a,s,c){var h=a.updateQueue;if(h===null)return null;if(h=h.shared,(Pt&2)!==0){var v=h.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),h.pending=s,s=ym(a),WT(a,null,c),s}return vm(a,h,s,c),ym(a)}function th(a,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var h=s.lanes;h&=a.pendingLanes,c|=h,s.lanes=c,Zr(a,c)}}function C0(a,s){var c=a.updateQueue,h=a.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var v=null,g=null;if(c=c.firstBaseUpdate,c!==null){do{var A={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};g===null?v=g=A:g=g.next=A,c=c.next}while(c!==null);g===null?v=g=s:g=g.next=s}else v=g=s;c={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:g,shared:h.shared,callbacks:h.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=s:a.next=s,c.lastBaseUpdate=s}var I0=!1;function rh(){if(I0){var a=Fc;if(a!==null)throw a}}function nh(a,s,c,h){I0=!1;var v=a.updateQueue;Ls=!1;var g=v.firstBaseUpdate,A=v.lastBaseUpdate,N=v.shared.pending;if(N!==null){v.shared.pending=null;var B=N,ee=B.next;B.next=null,A===null?g=ee:A.next=ee,A=B;var ue=a.alternate;ue!==null&&(ue=ue.updateQueue,N=ue.lastBaseUpdate,N!==A&&(N===null?ue.firstBaseUpdate=ee:N.next=ee,ue.lastBaseUpdate=B))}if(g!==null){var de=v.baseState;A=0,ue=ee=B=null,N=g;do{var re=N.lane&-536870913,oe=re!==N.lane;if(oe?(yt&re)===re:(h&re)===re){re!==0&&re===$c&&(I0=!0),ue!==null&&(ue=ue.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Pe=a,Ge=N;re=s;var $t=c;switch(Ge.tag){case 1:if(Pe=Ge.payload,typeof Pe=="function"){de=Pe.call($t,de,re);break e}de=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ge.payload,re=typeof Pe=="function"?Pe.call($t,de,re):Pe,re==null)break e;de=m({},de,re);break e;case 2:Ls=!0}}re=N.callback,re!==null&&(a.flags|=64,oe&&(a.flags|=8192),oe=v.callbacks,oe===null?v.callbacks=[re]:oe.push(re))}else oe={lane:re,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ue===null?(ee=ue=oe,B=de):ue=ue.next=oe,A|=re;if(N=N.next,N===null){if(N=v.shared.pending,N===null)break;oe=N,N=oe.next,oe.next=null,v.lastBaseUpdate=oe,v.shared.pending=null}}while(!0);ue===null&&(B=de),v.baseState=B,v.firstBaseUpdate=ee,v.lastBaseUpdate=ue,g===null&&(v.shared.lanes=0),Hs|=A,a.lanes=A,a.memoizedState=de}}function cA(a,s){if(typeof a!="function")throw Error(n(191,a));a.call(s)}function fA(a,s){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)cA(c[a],s)}var Wc=z(null),Rm=z(0);function dA(a,s){a=Xa,ae(Rm,a),ae(Wc,s),Xa=a|s.baseLanes}function x0(){ae(Rm,Xa),ae(Wc,Wc.current)}function N0(){Xa=Rm.current,se(Wc),se(Rm)}var Ei=z(null),Yi=null;function Bs(a){var s=a.alternate;ae(pr,pr.current&1),ae(Ei,a),Yi===null&&(s===null||Wc.current!==null||s.memoizedState!==null)&&(Yi=a)}function P0(a){ae(pr,pr.current),ae(Ei,a),Yi===null&&(Yi=a)}function hA(a){a.tag===22?(ae(pr,pr.current),ae(Ei,a),Yi===null&&(Yi=a)):zs()}function zs(){ae(pr,pr.current),ae(Ei,Ei.current)}function Ti(a){se(Ei),Yi===a&&(Yi=null),se(pr)}var pr=z(0);function Cm(a){for(var s=a;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||kb(c)||Mb(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ha=0,it=null,Bt=null,Or=null,Im=!1,Vc=!1,dl=!1,xm=0,ih=0,Yc=null,UM=0;function ar(){throw Error(n(321))}function U0(a,s){if(s===null)return!1;for(var c=0;c<s.length&&c<a.length;c++)if(!rn(a[c],s[c]))return!1;return!0}function q0(a,s,c,h,v,g){return Ha=g,it=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,M.H=a===null||a.memoizedState===null?QA:K0,dl=!1,g=c(h,v),dl=!1,Vc&&(g=mA(s,c,h,v)),pA(a),g}function pA(a){M.H=sh;var s=Bt!==null&&Bt.next!==null;if(Ha=0,Or=Bt=it=null,Im=!1,ih=0,Yc=null,s)throw Error(n(300));a===null||Rr||(a=a.dependencies,a!==null&&_m(a)&&(Rr=!0))}function mA(a,s,c,h){it=a;var v=0;do{if(Vc&&(Yc=null),ih=0,Vc=!1,25<=v)throw Error(n(301));if(v+=1,Or=Bt=null,a.updateQueue!=null){var g=a.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}M.H=JA,g=s(c,h)}while(Vc);return g}function qM(){var a=M.H,s=a.useState()[0];return s=typeof s.then=="function"?oh(s):s,a=a.useState()[0],(Bt!==null?Bt.memoizedState:null)!==a&&(it.flags|=1024),s}function D0(){var a=xm!==0;return xm=0,a}function j0(a,s,c){s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~c}function L0(a){if(Im){for(a=a.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}Im=!1}Ha=0,Or=Bt=it=null,Vc=!1,ih=xm=0,Yc=null}function In(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?it.memoizedState=Or=a:Or=Or.next=a,Or}function mr(){if(Bt===null){var a=it.alternate;a=a!==null?a.memoizedState:null}else a=Bt.next;var s=Or===null?it.memoizedState:Or.next;if(s!==null)Or=s,Bt=a;else{if(a===null)throw it.alternate===null?Error(n(467)):Error(n(310));Bt=a,a={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Or===null?it.memoizedState=Or=a:Or=Or.next=a}return Or}function Nm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function oh(a){var s=ih;return ih+=1,Yc===null&&(Yc=[]),a=oA(Yc,a,s),s=it,(Or===null?s.memoizedState:Or.next)===null&&(s=s.alternate,M.H=s===null||s.memoizedState===null?QA:K0),a}function Pm(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return oh(a);if(a.$$typeof===C)return on(a)}throw Error(n(438,String(a)))}function k0(a){var s=null,c=it.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var h=it.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(v){return v.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Nm(),it.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(a),h=0;h<a;h++)c[h]=Y;return s.index++,c}function Ga(a,s){return typeof s=="function"?s(a):s}function Um(a){var s=mr();return M0(s,Bt,a)}function M0(a,s,c){var h=a.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=c;var v=a.baseQueue,g=h.pending;if(g!==null){if(v!==null){var A=v.next;v.next=g.next,g.next=A}s.baseQueue=v=g,h.pending=null}if(g=a.baseState,v===null)a.memoizedState=g;else{s=v.next;var N=A=null,B=null,ee=s,ue=!1;do{var de=ee.lane&-536870913;if(de!==ee.lane?(yt&de)===de:(Ha&de)===de){var re=ee.revertLane;if(re===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),de===$c&&(ue=!0);else if((Ha&re)===re){ee=ee.next,re===$c&&(ue=!0);continue}else de={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},B===null?(N=B=de,A=g):B=B.next=de,it.lanes|=re,Hs|=re;de=ee.action,dl&&c(g,de),g=ee.hasEagerState?ee.eagerState:c(g,de)}else re={lane:de,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},B===null?(N=B=re,A=g):B=B.next=re,it.lanes|=de,Hs|=de;ee=ee.next}while(ee!==null&&ee!==s);if(B===null?A=g:B.next=N,!rn(g,a.memoizedState)&&(Rr=!0,ue&&(c=Fc,c!==null)))throw c;a.memoizedState=g,a.baseState=A,a.baseQueue=B,h.lastRenderedState=g}return v===null&&(h.lanes=0),[a.memoizedState,h.dispatch]}function B0(a){var s=mr(),c=s.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=a;var h=c.dispatch,v=c.pending,g=s.memoizedState;if(v!==null){c.pending=null;var A=v=v.next;do g=a(g,A.action),A=A.next;while(A!==v);rn(g,s.memoizedState)||(Rr=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),c.lastRenderedState=g}return[g,h]}function vA(a,s,c){var h=it,v=mr(),g=bt;if(g){if(c===void 0)throw Error(n(407));c=c()}else c=s();var A=!rn((Bt||v).memoizedState,c);if(A&&(v.memoizedState=c,Rr=!0),v=v.queue,F0(bA.bind(null,h,v,a),[a]),v.getSnapshot!==s||A||Or!==null&&Or.memoizedState.tag&1){if(h.flags|=2048,Kc(9,{destroy:void 0},gA.bind(null,h,v,c,s),null),Gt===null)throw Error(n(349));g||(Ha&127)!==0||yA(h,s,c)}return c}function yA(a,s,c){a.flags|=16384,a={getSnapshot:s,value:c},s=it.updateQueue,s===null?(s=Nm(),it.updateQueue=s,s.stores=[a]):(c=s.stores,c===null?s.stores=[a]:c.push(a))}function gA(a,s,c,h){s.value=c,s.getSnapshot=h,_A(s)&&wA(a)}function bA(a,s,c){return c(function(){_A(s)&&wA(a)})}function _A(a){var s=a.getSnapshot;a=a.value;try{var c=s();return!rn(a,c)}catch{return!0}}function wA(a){var s=nl(a,2);s!==null&&Jn(s,a,2)}function z0(a){var s=In();if(typeof a=="function"){var c=a;if(a=c(),dl){$n(!0);try{c()}finally{$n(!1)}}}return s.memoizedState=s.baseState=a,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:a},s}function SA(a,s,c,h){return a.baseState=c,M0(a,Bt,typeof h=="function"?h:Ga)}function DM(a,s,c,h,v){if(jm(a))throw Error(n(485));if(a=s.action,a!==null){var g={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){g.listeners.push(A)}};M.T!==null?c(!0):g.isTransition=!1,h(g),c=s.pending,c===null?(g.next=s.pending=g,EA(s,g)):(g.next=c.next,s.pending=c.next=g)}}function EA(a,s){var c=s.action,h=s.payload,v=a.state;if(s.isTransition){var g=M.T,A={};M.T=A;try{var N=c(v,h),B=M.S;B!==null&&B(A,N),TA(a,s,N)}catch(ee){$0(a,s,ee)}finally{g!==null&&A.types!==null&&(g.types=A.types),M.T=g}}else try{g=c(v,h),TA(a,s,g)}catch(ee){$0(a,s,ee)}}function TA(a,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){AA(a,s,h)},function(h){return $0(a,s,h)}):AA(a,s,c)}function AA(a,s,c){s.status="fulfilled",s.value=c,OA(s),a.state=c,s=a.pending,s!==null&&(c=s.next,c===s?a.pending=null:(c=c.next,s.next=c,EA(a,c)))}function $0(a,s,c){var h=a.pending;if(a.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=c,OA(s),s=s.next;while(s!==h)}a.action=null}function OA(a){a=a.listeners;for(var s=0;s<a.length;s++)(0,a[s])()}function RA(a,s){return s}function CA(a,s){if(bt){var c=Gt.formState;if(c!==null){e:{var h=it;if(bt){if(Qt){t:{for(var v=Qt,g=Vi;v.nodeType!==8;){if(!g){v=null;break t}if(v=Ki(v.nextSibling),v===null){v=null;break t}}g=v.data,v=g==="F!"||g==="F"?v:null}if(v){Qt=Ki(v.nextSibling),h=v.data==="F!";break e}}Ds(h)}h=!1}h&&(s=c[0])}}return c=In(),c.memoizedState=c.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:RA,lastRenderedState:s},c.queue=h,c=VA.bind(null,it,h),h.dispatch=c,h=z0(!1),g=Y0.bind(null,it,!1,h.queue),h=In(),v={state:s,dispatch:null,action:a,pending:null},h.queue=v,c=DM.bind(null,it,v,g,c),v.dispatch=c,h.memoizedState=a,[s,c,!1]}function IA(a){var s=mr();return xA(s,Bt,a)}function xA(a,s,c){if(s=M0(a,s,RA)[0],a=Um(Ga)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=oh(s)}catch(A){throw A===Hc?Em:A}else h=s;s=mr();var v=s.queue,g=v.dispatch;return c!==s.memoizedState&&(it.flags|=2048,Kc(9,{destroy:void 0},jM.bind(null,v,c),null)),[h,g,a]}function jM(a,s){a.action=s}function NA(a){var s=mr(),c=Bt;if(c!==null)return xA(s,c,a);mr(),s=s.memoizedState,c=mr();var h=c.queue.dispatch;return c.memoizedState=a,[s,h,!1]}function Kc(a,s,c,h){return a={tag:a,create:c,deps:h,inst:s,next:null},s=it.updateQueue,s===null&&(s=Nm(),it.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=a.next=a:(h=c.next,c.next=a,a.next=h,s.lastEffect=a),a}function PA(){return mr().memoizedState}function qm(a,s,c,h){var v=In();it.flags|=a,v.memoizedState=Kc(1|s,{destroy:void 0},c,h===void 0?null:h)}function Dm(a,s,c,h){var v=mr();h=h===void 0?null:h;var g=v.memoizedState.inst;Bt!==null&&h!==null&&U0(h,Bt.memoizedState.deps)?v.memoizedState=Kc(s,g,c,h):(it.flags|=a,v.memoizedState=Kc(1|s,g,c,h))}function UA(a,s){qm(8390656,8,a,s)}function F0(a,s){Dm(2048,8,a,s)}function LM(a){it.flags|=4;var s=it.updateQueue;if(s===null)s=Nm(),it.updateQueue=s,s.events=[a];else{var c=s.events;c===null?s.events=[a]:c.push(a)}}function qA(a){var s=mr().memoizedState;return LM({ref:s,nextImpl:a}),function(){if((Pt&2)!==0)throw Error(n(440));return s.impl.apply(void 0,arguments)}}function DA(a,s){return Dm(4,2,a,s)}function jA(a,s){return Dm(4,4,a,s)}function LA(a,s){if(typeof s=="function"){a=a();var c=s(a);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function kA(a,s,c){c=c!=null?c.concat([a]):null,Dm(4,4,LA.bind(null,s,a),c)}function H0(){}function MA(a,s){var c=mr();s=s===void 0?null:s;var h=c.memoizedState;return s!==null&&U0(s,h[1])?h[0]:(c.memoizedState=[a,s],a)}function BA(a,s){var c=mr();s=s===void 0?null:s;var h=c.memoizedState;if(s!==null&&U0(s,h[1]))return h[0];if(h=a(),dl){$n(!0);try{a()}finally{$n(!1)}}return c.memoizedState=[h,s],h}function G0(a,s,c){return c===void 0||(Ha&1073741824)!==0&&(yt&261930)===0?a.memoizedState=s:(a.memoizedState=c,a=zO(),it.lanes|=a,Hs|=a,c)}function zA(a,s,c,h){return rn(c,s)?c:Wc.current!==null?(a=G0(a,c,h),rn(a,s)||(Rr=!0),a):(Ha&42)===0||(Ha&1073741824)!==0&&(yt&261930)===0?(Rr=!0,a.memoizedState=c):(a=zO(),it.lanes|=a,Hs|=a,s)}function $A(a,s,c,h,v){var g=J.p;J.p=g!==0&&8>g?g:8;var A=M.T,N={};M.T=N,Y0(a,!1,s,c);try{var B=v(),ee=M.S;if(ee!==null&&ee(N,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ue=PM(B,h);ah(a,s,ue,Ri(a))}else ah(a,s,h,Ri(a))}catch(de){ah(a,s,{then:function(){},status:"rejected",reason:de},Ri())}finally{J.p=g,A!==null&&N.types!==null&&(A.types=N.types),M.T=A}}function kM(){}function W0(a,s,c,h){if(a.tag!==5)throw Error(n(476));var v=FA(a).queue;$A(a,v,s,Z,c===null?kM:function(){return HA(a),c(h)})}function FA(a){var s=a.memoizedState;if(s!==null)return s;s={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:Z},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:c},next:null},a.memoizedState=s,a=a.alternate,a!==null&&(a.memoizedState=s),s}function HA(a){var s=FA(a);s.next===null&&(s=a.alternate.memoizedState),ah(a,s.next.queue,{},Ri())}function V0(){return on(Eh)}function GA(){return mr().memoizedState}function WA(){return mr().memoizedState}function MM(a){for(var s=a.return;s!==null;){switch(s.tag){case 24:case 3:var c=Ri();a=ks(c);var h=Ms(s,a,c);h!==null&&(Jn(h,s,c),th(h,s,c)),s={cache:S0()},a.payload=s;return}s=s.return}}function BM(a,s,c){var h=Ri();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},jm(a)?YA(s,c):(c=f0(a,s,c,h),c!==null&&(Jn(c,a,h),KA(c,s,h)))}function VA(a,s,c){var h=Ri();ah(a,s,c,h)}function ah(a,s,c,h){var v={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(jm(a))YA(s,v);else{var g=a.alternate;if(a.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var A=s.lastRenderedState,N=g(A,c);if(v.hasEagerState=!0,v.eagerState=N,rn(N,A))return vm(a,s,v,0),Gt===null&&mm(),!1}catch{}if(c=f0(a,s,v,h),c!==null)return Jn(c,a,h),KA(c,s,h),!0}return!1}function Y0(a,s,c,h){if(h={lane:2,revertLane:Ob(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},jm(a)){if(s)throw Error(n(479))}else s=f0(a,c,h,2),s!==null&&Jn(s,a,2)}function jm(a){var s=a.alternate;return a===it||s!==null&&s===it}function YA(a,s){Vc=Im=!0;var c=a.pending;c===null?s.next=s:(s.next=c.next,c.next=s),a.pending=s}function KA(a,s,c){if((c&4194048)!==0){var h=s.lanes;h&=a.pendingLanes,c|=h,s.lanes=c,Zr(a,c)}}var sh={readContext:on,use:Pm,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useLayoutEffect:ar,useInsertionEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useSyncExternalStore:ar,useId:ar,useHostTransitionStatus:ar,useFormState:ar,useActionState:ar,useOptimistic:ar,useMemoCache:ar,useCacheRefresh:ar};sh.useEffectEvent=ar;var QA={readContext:on,use:Pm,useCallback:function(a,s){return In().memoizedState=[a,s===void 0?null:s],a},useContext:on,useEffect:UA,useImperativeHandle:function(a,s,c){c=c!=null?c.concat([a]):null,qm(4194308,4,LA.bind(null,s,a),c)},useLayoutEffect:function(a,s){return qm(4194308,4,a,s)},useInsertionEffect:function(a,s){qm(4,2,a,s)},useMemo:function(a,s){var c=In();s=s===void 0?null:s;var h=a();if(dl){$n(!0);try{a()}finally{$n(!1)}}return c.memoizedState=[h,s],h},useReducer:function(a,s,c){var h=In();if(c!==void 0){var v=c(s);if(dl){$n(!0);try{c(s)}finally{$n(!1)}}}else v=s;return h.memoizedState=h.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},h.queue=a,a=a.dispatch=BM.bind(null,it,a),[h.memoizedState,a]},useRef:function(a){var s=In();return a={current:a},s.memoizedState=a},useState:function(a){a=z0(a);var s=a.queue,c=VA.bind(null,it,s);return s.dispatch=c,[a.memoizedState,c]},useDebugValue:H0,useDeferredValue:function(a,s){var c=In();return G0(c,a,s)},useTransition:function(){var a=z0(!1);return a=$A.bind(null,it,a.queue,!0,!1),In().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,s,c){var h=it,v=In();if(bt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=s(),Gt===null)throw Error(n(349));(yt&127)!==0||yA(h,s,c)}v.memoizedState=c;var g={value:c,getSnapshot:s};return v.queue=g,UA(bA.bind(null,h,g,a),[a]),h.flags|=2048,Kc(9,{destroy:void 0},gA.bind(null,h,g,c,s),null),c},useId:function(){var a=In(),s=Gt.identifierPrefix;if(bt){var c=la,h=ua;c=(h&~(1<<32-Ur(h)-1)).toString(32)+c,s="_"+s+"R_"+c,c=xm++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=UM++,s="_"+s+"r_"+c.toString(32)+"_";return a.memoizedState=s},useHostTransitionStatus:V0,useFormState:CA,useActionState:CA,useOptimistic:function(a){var s=In();s.memoizedState=s.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Y0.bind(null,it,!0,c),c.dispatch=s,[a,s]},useMemoCache:k0,useCacheRefresh:function(){return In().memoizedState=MM.bind(null,it)},useEffectEvent:function(a){var s=In(),c={impl:a};return s.memoizedState=c,function(){if((Pt&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}},K0={readContext:on,use:Pm,useCallback:MA,useContext:on,useEffect:F0,useImperativeHandle:kA,useInsertionEffect:DA,useLayoutEffect:jA,useMemo:BA,useReducer:Um,useRef:PA,useState:function(){return Um(Ga)},useDebugValue:H0,useDeferredValue:function(a,s){var c=mr();return zA(c,Bt.memoizedState,a,s)},useTransition:function(){var a=Um(Ga)[0],s=mr().memoizedState;return[typeof a=="boolean"?a:oh(a),s]},useSyncExternalStore:vA,useId:GA,useHostTransitionStatus:V0,useFormState:IA,useActionState:IA,useOptimistic:function(a,s){var c=mr();return SA(c,Bt,a,s)},useMemoCache:k0,useCacheRefresh:WA};K0.useEffectEvent=qA;var JA={readContext:on,use:Pm,useCallback:MA,useContext:on,useEffect:F0,useImperativeHandle:kA,useInsertionEffect:DA,useLayoutEffect:jA,useMemo:BA,useReducer:B0,useRef:PA,useState:function(){return B0(Ga)},useDebugValue:H0,useDeferredValue:function(a,s){var c=mr();return Bt===null?G0(c,a,s):zA(c,Bt.memoizedState,a,s)},useTransition:function(){var a=B0(Ga)[0],s=mr().memoizedState;return[typeof a=="boolean"?a:oh(a),s]},useSyncExternalStore:vA,useId:GA,useHostTransitionStatus:V0,useFormState:NA,useActionState:NA,useOptimistic:function(a,s){var c=mr();return Bt!==null?SA(c,Bt,a,s):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:k0,useCacheRefresh:WA};JA.useEffectEvent=qA;function Q0(a,s,c,h){s=a.memoizedState,c=c(h,s),c=c==null?s:m({},s,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var J0={enqueueSetState:function(a,s,c){a=a._reactInternals;var h=Ri(),v=ks(h);v.payload=s,c!=null&&(v.callback=c),s=Ms(a,v,h),s!==null&&(Jn(s,a,h),th(s,a,h))},enqueueReplaceState:function(a,s,c){a=a._reactInternals;var h=Ri(),v=ks(h);v.tag=1,v.payload=s,c!=null&&(v.callback=c),s=Ms(a,v,h),s!==null&&(Jn(s,a,h),th(s,a,h))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var c=Ri(),h=ks(c);h.tag=2,s!=null&&(h.callback=s),s=Ms(a,h,c),s!==null&&(Jn(s,a,c),th(s,a,c))}};function XA(a,s,c,h,v,g,A){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(h,g,A):s.prototype&&s.prototype.isPureReactComponent?!Fi(c,h)||!Fi(v,g):!0}function ZA(a,s,c,h){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,h),s.state!==a&&J0.enqueueReplaceState(s,s.state,null)}function hl(a,s){var c=s;if("ref"in s){c={};for(var h in s)h!=="ref"&&(c[h]=s[h])}if(a=a.defaultProps){c===s&&(c=m({},c));for(var v in a)c[v]===void 0&&(c[v]=a[v])}return c}function eO(a){Tr(a)}function tO(a){console.error(a)}function rO(a){Tr(a)}function Lm(a,s){try{var c=a.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function nO(a,s,c){try{var h=a.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function X0(a,s,c){return c=ks(c),c.tag=3,c.payload={element:null},c.callback=function(){Lm(a,s)},c}function iO(a){return a=ks(a),a.tag=3,a}function oO(a,s,c,h){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var g=h.value;a.payload=function(){return v(g)},a.callback=function(){nO(s,c,h)}}var A=c.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(a.callback=function(){nO(s,c,h),typeof v!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var N=h.stack;this.componentDidCatch(h.value,{componentStack:N!==null?N:""})})}function zM(a,s,c,h,v){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=c.alternate,s!==null&&zc(s,c,v,!0),c=Ei.current,c!==null){switch(c.tag){case 31:case 13:return Yi===null?Km():c.alternate===null&&sr===0&&(sr=3),c.flags&=-257,c.flags|=65536,c.lanes=v,h===Tm?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([h]):s.add(h),Eb(a,h,v)),!1;case 22:return c.flags|=65536,h===Tm?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([h]):c.add(h)),Eb(a,h,v)),!1}throw Error(n(435,c.tag))}return Eb(a,h,v),Km(),!1}if(bt)return s=Ei.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=v,h!==y0&&(a=Error(n(422),{cause:h}),Qd(Hi(a,c)))):(h!==y0&&(s=Error(n(423),{cause:h}),Qd(Hi(s,c))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,h=Hi(h,c),v=X0(a.stateNode,h,v),C0(a,v),sr!==4&&(sr=2)),!1;var g=Error(n(520),{cause:h});if(g=Hi(g,c),mh===null?mh=[g]:mh.push(g),sr!==4&&(sr=2),s===null)return!0;h=Hi(h,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,a=v&-v,c.lanes|=a,a=X0(c.stateNode,h,a),C0(c,a),!1;case 1:if(s=c.type,g=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Gs===null||!Gs.has(g))))return c.flags|=65536,v&=-v,c.lanes|=v,v=iO(v),oO(v,a,c,h),C0(c,v),!1}c=c.return}while(c!==null);return!1}var Z0=Error(n(461)),Rr=!1;function an(a,s,c,h){s.child=a===null?lA(s,null,c,h):fl(s,a.child,c,h)}function aO(a,s,c,h,v){c=c.render;var g=s.ref;if("ref"in h){var A={};for(var N in h)N!=="ref"&&(A[N]=h[N])}else A=h;return sl(s),h=q0(a,s,c,A,g,v),N=D0(),a!==null&&!Rr?(j0(a,s,v),Wa(a,s,v)):(bt&&N&&m0(s),s.flags|=1,an(a,s,h,v),s.child)}function sO(a,s,c,h,v){if(a===null){var g=c.type;return typeof g=="function"&&!d0(g)&&g.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=g,uO(a,s,g,h,v)):(a=gm(c.type,null,h,s,s.mode,v),a.ref=s.ref,a.return=s,s.child=a)}if(g=a.child,!sb(a,v)){var A=g.memoizedProps;if(c=c.compare,c=c!==null?c:Fi,c(A,h)&&a.ref===s.ref)return Wa(a,s,v)}return s.flags|=1,a=Ba(g,h),a.ref=s.ref,a.return=s,s.child=a}function uO(a,s,c,h,v){if(a!==null){var g=a.memoizedProps;if(Fi(g,h)&&a.ref===s.ref)if(Rr=!1,s.pendingProps=h=g,sb(a,v))(a.flags&131072)!==0&&(Rr=!0);else return s.lanes=a.lanes,Wa(a,s,v)}return eb(a,s,c,h,v)}function lO(a,s,c,h){var v=h.children,g=a!==null?a.memoizedState:null;if(a===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|c:c,a!==null){for(h=s.child=a.child,v=0;h!==null;)v=v|h.lanes|h.childLanes,h=h.sibling;h=v&~g}else h=0,s.child=null;return cO(a,s,g,c,h)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},a!==null&&Sm(s,g!==null?g.cachePool:null),g!==null?dA(s,g):x0(),hA(s);else return h=s.lanes=536870912,cO(a,s,g!==null?g.baseLanes|c:c,c,h)}else g!==null?(Sm(s,g.cachePool),dA(s,g),zs(),s.memoizedState=null):(a!==null&&Sm(s,null),x0(),zs());return an(a,s,v,c),s.child}function uh(a,s){return a!==null&&a.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function cO(a,s,c,h,v){var g=T0();return g=g===null?null:{parent:Ar._currentValue,pool:g},s.memoizedState={baseLanes:c,cachePool:g},a!==null&&Sm(s,null),x0(),hA(s),a!==null&&zc(a,s,h,!0),s.childLanes=v,null}function km(a,s){return s=Bm({mode:s.mode,children:s.children},a.mode),s.ref=a.ref,a.child=s,s.return=a,s}function fO(a,s,c){return fl(s,a.child,null,c),a=km(s,s.pendingProps),a.flags|=2,Ti(s),s.memoizedState=null,a}function $M(a,s,c){var h=s.pendingProps,v=(s.flags&128)!==0;if(s.flags&=-129,a===null){if(bt){if(h.mode==="hidden")return a=km(s,h),s.lanes=536870912,uh(null,a);if(P0(s),(a=Qt)?(a=ER(a,Vi),a=a!==null&&a.data==="&"?a:null,a!==null&&(s.memoizedState={dehydrated:a,treeContext:Us!==null?{id:ua,overflow:la}:null,retryLane:536870912,hydrationErrors:null},c=YT(a),c.return=s,s.child=c,nn=s,Qt=null)):a=null,a===null)throw Ds(s);return s.lanes=536870912,null}return km(s,h)}var g=a.memoizedState;if(g!==null){var A=g.dehydrated;if(P0(s),v)if(s.flags&256)s.flags&=-257,s=fO(a,s,c);else if(s.memoizedState!==null)s.child=a.child,s.flags|=128,s=null;else throw Error(n(558));else if(Rr||zc(a,s,c,!1),v=(c&a.childLanes)!==0,Rr||v){if(h=Gt,h!==null&&(A=Dr(h,c),A!==0&&A!==g.retryLane))throw g.retryLane=A,nl(a,A),Jn(h,a,A),Z0;Km(),s=fO(a,s,c)}else a=g.treeContext,Qt=Ki(A.nextSibling),nn=s,bt=!0,qs=null,Vi=!1,a!==null&&JT(s,a),s=km(s,h),s.flags|=4096;return s}return a=Ba(a.child,{mode:h.mode,children:h.children}),a.ref=s.ref,s.child=a,a.return=s,a}function Mm(a,s){var c=s.ref;if(c===null)a!==null&&a.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(a===null||a.ref!==c)&&(s.flags|=4194816)}}function eb(a,s,c,h,v){return sl(s),c=q0(a,s,c,h,void 0,v),h=D0(),a!==null&&!Rr?(j0(a,s,v),Wa(a,s,v)):(bt&&h&&m0(s),s.flags|=1,an(a,s,c,v),s.child)}function dO(a,s,c,h,v,g){return sl(s),s.updateQueue=null,c=mA(s,h,c,v),pA(a),h=D0(),a!==null&&!Rr?(j0(a,s,g),Wa(a,s,g)):(bt&&h&&m0(s),s.flags|=1,an(a,s,c,g),s.child)}function hO(a,s,c,h,v){if(sl(s),s.stateNode===null){var g=Lc,A=c.contextType;typeof A=="object"&&A!==null&&(g=on(A)),g=new c(h,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=J0,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=h,g.state=s.memoizedState,g.refs={},O0(s),A=c.contextType,g.context=typeof A=="object"&&A!==null?on(A):Lc,g.state=s.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(Q0(s,c,A,h),g.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(A=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),A!==g.state&&J0.enqueueReplaceState(g,g.state,null),nh(s,h,g,v),rh(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(a===null){g=s.stateNode;var N=s.memoizedProps,B=hl(c,N);g.props=B;var ee=g.context,ue=c.contextType;A=Lc,typeof ue=="object"&&ue!==null&&(A=on(ue));var de=c.getDerivedStateFromProps;ue=typeof de=="function"||typeof g.getSnapshotBeforeUpdate=="function",N=s.pendingProps!==N,ue||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(N||ee!==A)&&ZA(s,g,h,A),Ls=!1;var re=s.memoizedState;g.state=re,nh(s,h,g,v),rh(),ee=s.memoizedState,N||re!==ee||Ls?(typeof de=="function"&&(Q0(s,c,de,h),ee=s.memoizedState),(B=Ls||XA(s,c,B,h,re,ee,A))?(ue||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=ee),g.props=h,g.state=ee,g.context=A,h=B):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{g=s.stateNode,R0(a,s),A=s.memoizedProps,ue=hl(c,A),g.props=ue,de=s.pendingProps,re=g.context,ee=c.contextType,B=Lc,typeof ee=="object"&&ee!==null&&(B=on(ee)),N=c.getDerivedStateFromProps,(ee=typeof N=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A!==de||re!==B)&&ZA(s,g,h,B),Ls=!1,re=s.memoizedState,g.state=re,nh(s,h,g,v),rh();var oe=s.memoizedState;A!==de||re!==oe||Ls||a!==null&&a.dependencies!==null&&_m(a.dependencies)?(typeof N=="function"&&(Q0(s,c,N,h),oe=s.memoizedState),(ue=Ls||XA(s,c,ue,h,re,oe,B)||a!==null&&a.dependencies!==null&&_m(a.dependencies))?(ee||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(h,oe,B),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(h,oe,B)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||A===a.memoizedProps&&re===a.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||A===a.memoizedProps&&re===a.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=oe),g.props=h,g.state=oe,g.context=B,h=ue):(typeof g.componentDidUpdate!="function"||A===a.memoizedProps&&re===a.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||A===a.memoizedProps&&re===a.memoizedState||(s.flags|=1024),h=!1)}return g=h,Mm(a,s),h=(s.flags&128)!==0,g||h?(g=s.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,a!==null&&h?(s.child=fl(s,a.child,null,v),s.child=fl(s,null,c,v)):an(a,s,c,v),s.memoizedState=g.state,a=s.child):a=Wa(a,s,v),a}function pO(a,s,c,h){return ol(),s.flags|=256,an(a,s,c,h),s.child}var tb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rb(a){return{baseLanes:a,cachePool:nA()}}function nb(a,s,c){return a=a!==null?a.childLanes&~c:0,s&&(a|=Oi),a}function mO(a,s,c){var h=s.pendingProps,v=!1,g=(s.flags&128)!==0,A;if((A=g)||(A=a!==null&&a.memoizedState===null?!1:(pr.current&2)!==0),A&&(v=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,a===null){if(bt){if(v?Bs(s):zs(),(a=Qt)?(a=ER(a,Vi),a=a!==null&&a.data!=="&"?a:null,a!==null&&(s.memoizedState={dehydrated:a,treeContext:Us!==null?{id:ua,overflow:la}:null,retryLane:536870912,hydrationErrors:null},c=YT(a),c.return=s,s.child=c,nn=s,Qt=null)):a=null,a===null)throw Ds(s);return Mb(a)?s.lanes=32:s.lanes=536870912,null}var N=h.children;return h=h.fallback,v?(zs(),v=s.mode,N=Bm({mode:"hidden",children:N},v),h=il(h,v,c,null),N.return=s,h.return=s,N.sibling=h,s.child=N,h=s.child,h.memoizedState=rb(c),h.childLanes=nb(a,A,c),s.memoizedState=tb,uh(null,h)):(Bs(s),ib(s,N))}var B=a.memoizedState;if(B!==null&&(N=B.dehydrated,N!==null)){if(g)s.flags&256?(Bs(s),s.flags&=-257,s=ob(a,s,c)):s.memoizedState!==null?(zs(),s.child=a.child,s.flags|=128,s=null):(zs(),N=h.fallback,v=s.mode,h=Bm({mode:"visible",children:h.children},v),N=il(N,v,c,null),N.flags|=2,h.return=s,N.return=s,h.sibling=N,s.child=h,fl(s,a.child,null,c),h=s.child,h.memoizedState=rb(c),h.childLanes=nb(a,A,c),s.memoizedState=tb,s=uh(null,h));else if(Bs(s),Mb(N)){if(A=N.nextSibling&&N.nextSibling.dataset,A)var ee=A.dgst;A=ee,h=Error(n(419)),h.stack="",h.digest=A,Qd({value:h,source:null,stack:null}),s=ob(a,s,c)}else if(Rr||zc(a,s,c,!1),A=(c&a.childLanes)!==0,Rr||A){if(A=Gt,A!==null&&(h=Dr(A,c),h!==0&&h!==B.retryLane))throw B.retryLane=h,nl(a,h),Jn(A,a,h),Z0;kb(N)||Km(),s=ob(a,s,c)}else kb(N)?(s.flags|=192,s.child=a.child,s=null):(a=B.treeContext,Qt=Ki(N.nextSibling),nn=s,bt=!0,qs=null,Vi=!1,a!==null&&JT(s,a),s=ib(s,h.children),s.flags|=4096);return s}return v?(zs(),N=h.fallback,v=s.mode,B=a.child,ee=B.sibling,h=Ba(B,{mode:"hidden",children:h.children}),h.subtreeFlags=B.subtreeFlags&65011712,ee!==null?N=Ba(ee,N):(N=il(N,v,c,null),N.flags|=2),N.return=s,h.return=s,h.sibling=N,s.child=h,uh(null,h),h=s.child,N=a.child.memoizedState,N===null?N=rb(c):(v=N.cachePool,v!==null?(B=Ar._currentValue,v=v.parent!==B?{parent:B,pool:B}:v):v=nA(),N={baseLanes:N.baseLanes|c,cachePool:v}),h.memoizedState=N,h.childLanes=nb(a,A,c),s.memoizedState=tb,uh(a.child,h)):(Bs(s),c=a.child,a=c.sibling,c=Ba(c,{mode:"visible",children:h.children}),c.return=s,c.sibling=null,a!==null&&(A=s.deletions,A===null?(s.deletions=[a],s.flags|=16):A.push(a)),s.child=c,s.memoizedState=null,c)}function ib(a,s){return s=Bm({mode:"visible",children:s},a.mode),s.return=a,a.child=s}function Bm(a,s){return a=Si(22,a,null,s),a.lanes=0,a}function ob(a,s,c){return fl(s,a.child,null,c),a=ib(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function vO(a,s,c){a.lanes|=s;var h=a.alternate;h!==null&&(h.lanes|=s),_0(a.return,s,c)}function ab(a,s,c,h,v,g){var A=a.memoizedState;A===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:v,treeForkCount:g}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=h,A.tail=c,A.tailMode=v,A.treeForkCount=g)}function yO(a,s,c){var h=s.pendingProps,v=h.revealOrder,g=h.tail;h=h.children;var A=pr.current,N=(A&2)!==0;if(N?(A=A&1|2,s.flags|=128):A&=1,ae(pr,A),an(a,s,h,c),h=bt?Kd:0,!N&&a!==null&&(a.flags&128)!==0)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&vO(a,c,s);else if(a.tag===19)vO(a,c,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(v){case"forwards":for(c=s.child,v=null;c!==null;)a=c.alternate,a!==null&&Cm(a)===null&&(v=c),c=c.sibling;c=v,c===null?(v=s.child,s.child=null):(v=c.sibling,c.sibling=null),ab(s,!1,v,c,g,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=s.child,s.child=null;v!==null;){if(a=v.alternate,a!==null&&Cm(a)===null){s.child=v;break}a=v.sibling,v.sibling=c,c=v,v=a}ab(s,!0,c,null,g,h);break;case"together":ab(s,!1,null,null,void 0,h);break;default:s.memoizedState=null}return s.child}function Wa(a,s,c){if(a!==null&&(s.dependencies=a.dependencies),Hs|=s.lanes,(c&s.childLanes)===0)if(a!==null){if(zc(a,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(a!==null&&s.child!==a.child)throw Error(n(153));if(s.child!==null){for(a=s.child,c=Ba(a,a.pendingProps),s.child=c,c.return=s;a.sibling!==null;)a=a.sibling,c=c.sibling=Ba(a,a.pendingProps),c.return=s;c.sibling=null}return s.child}function sb(a,s){return(a.lanes&s)!==0?!0:(a=a.dependencies,!!(a!==null&&_m(a)))}function FM(a,s,c){switch(s.tag){case 3:Ie(s,s.stateNode.containerInfo),js(s,Ar,a.memoizedState.cache),ol();break;case 27:case 5:pt(s);break;case 4:Ie(s,s.stateNode.containerInfo);break;case 10:js(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,P0(s),null;break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(Bs(s),s.flags|=128,null):(c&s.child.childLanes)!==0?mO(a,s,c):(Bs(s),a=Wa(a,s,c),a!==null?a.sibling:null);Bs(s);break;case 19:var v=(a.flags&128)!==0;if(h=(c&s.childLanes)!==0,h||(zc(a,s,c,!1),h=(c&s.childLanes)!==0),v){if(h)return yO(a,s,c);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ae(pr,pr.current),h)break;return null;case 22:return s.lanes=0,lO(a,s,c,s.pendingProps);case 24:js(s,Ar,a.memoizedState.cache)}return Wa(a,s,c)}function gO(a,s,c){if(a!==null)if(a.memoizedProps!==s.pendingProps)Rr=!0;else{if(!sb(a,c)&&(s.flags&128)===0)return Rr=!1,FM(a,s,c);Rr=(a.flags&131072)!==0}else Rr=!1,bt&&(s.flags&1048576)!==0&&QT(s,Kd,s.index);switch(s.lanes=0,s.tag){case 16:e:{var h=s.pendingProps;if(a=ll(s.elementType),s.type=a,typeof a=="function")d0(a)?(h=hl(a,h),s.tag=1,s=hO(null,s,a,h,c)):(s.tag=0,s=eb(null,s,a,h,c));else{if(a!=null){var v=a.$$typeof;if(v===I){s.tag=11,s=aO(null,s,a,h,c);break e}else if(v===j){s.tag=14,s=sO(null,s,a,h,c);break e}}throw s=Q(a)||a,Error(n(306,s,""))}}return s;case 0:return eb(a,s,s.type,s.pendingProps,c);case 1:return h=s.type,v=hl(h,s.pendingProps),hO(a,s,h,v,c);case 3:e:{if(Ie(s,s.stateNode.containerInfo),a===null)throw Error(n(387));h=s.pendingProps;var g=s.memoizedState;v=g.element,R0(a,s),nh(s,h,null,c);var A=s.memoizedState;if(h=A.cache,js(s,Ar,h),h!==g.cache&&w0(s,[Ar],c,!0),rh(),h=A.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=pO(a,s,h,c);break e}else if(h!==v){v=Hi(Error(n(424)),s),Qd(v),s=pO(a,s,h,c);break e}else for(a=s.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,Qt=Ki(a.firstChild),nn=s,bt=!0,qs=null,Vi=!0,c=lA(s,null,h,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ol(),h===v){s=Wa(a,s,c);break e}an(a,s,h,c)}s=s.child}return s;case 26:return Mm(a,s),a===null?(c=IR(s.type,null,s.pendingProps,null))?s.memoizedState=c:bt||(c=s.type,a=s.pendingProps,h=rv(be.current).createElement(c),h[fr]=s,h[zr]=a,sn(h,c,a),dr(h),s.stateNode=h):s.memoizedState=IR(s.type,a.memoizedProps,s.pendingProps,a.memoizedState),null;case 27:return pt(s),a===null&&bt&&(h=s.stateNode=OR(s.type,s.pendingProps,be.current),nn=s,Vi=!0,v=Qt,Ks(s.type)?(Bb=v,Qt=Ki(h.firstChild)):Qt=v),an(a,s,s.pendingProps.children,c),Mm(a,s),a===null&&(s.flags|=4194304),s.child;case 5:return a===null&&bt&&((v=h=Qt)&&(h=b6(h,s.type,s.pendingProps,Vi),h!==null?(s.stateNode=h,nn=s,Qt=Ki(h.firstChild),Vi=!1,v=!0):v=!1),v||Ds(s)),pt(s),v=s.type,g=s.pendingProps,A=a!==null?a.memoizedProps:null,h=g.children,Db(v,g)?h=null:A!==null&&Db(v,A)&&(s.flags|=32),s.memoizedState!==null&&(v=q0(a,s,qM,null,null,c),Eh._currentValue=v),Mm(a,s),an(a,s,h,c),s.child;case 6:return a===null&&bt&&((a=c=Qt)&&(c=_6(c,s.pendingProps,Vi),c!==null?(s.stateNode=c,nn=s,Qt=null,a=!0):a=!1),a||Ds(s)),null;case 13:return mO(a,s,c);case 4:return Ie(s,s.stateNode.containerInfo),h=s.pendingProps,a===null?s.child=fl(s,null,h,c):an(a,s,h,c),s.child;case 11:return aO(a,s,s.type,s.pendingProps,c);case 7:return an(a,s,s.pendingProps,c),s.child;case 8:return an(a,s,s.pendingProps.children,c),s.child;case 12:return an(a,s,s.pendingProps.children,c),s.child;case 10:return h=s.pendingProps,js(s,s.type,h.value),an(a,s,h.children,c),s.child;case 9:return v=s.type._context,h=s.pendingProps.children,sl(s),v=on(v),h=h(v),s.flags|=1,an(a,s,h,c),s.child;case 14:return sO(a,s,s.type,s.pendingProps,c);case 15:return uO(a,s,s.type,s.pendingProps,c);case 19:return yO(a,s,c);case 31:return $M(a,s,c);case 22:return lO(a,s,c,s.pendingProps);case 24:return sl(s),h=on(Ar),a===null?(v=T0(),v===null&&(v=Gt,g=S0(),v.pooledCache=g,g.refCount++,g!==null&&(v.pooledCacheLanes|=c),v=g),s.memoizedState={parent:h,cache:v},O0(s),js(s,Ar,v)):((a.lanes&c)!==0&&(R0(a,s),nh(s,null,null,c),rh()),v=a.memoizedState,g=s.memoizedState,v.parent!==h?(v={parent:h,cache:h},s.memoizedState=v,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=v),js(s,Ar,h)):(h=g.cache,js(s,Ar,h),h!==v.cache&&w0(s,[Ar],c,!0))),an(a,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function Va(a){a.flags|=4}function ub(a,s,c,h,v){if((s=(a.mode&32)!==0)&&(s=!1),s){if(a.flags|=16777216,(v&335544128)===v)if(a.stateNode.complete)a.flags|=8192;else if(GO())a.flags|=8192;else throw cl=Tm,A0}else a.flags&=-16777217}function bO(a,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!qR(s))if(GO())a.flags|=8192;else throw cl=Tm,A0}function zm(a,s){s!==null&&(a.flags|=4),a.flags&16384&&(s=a.tag!==22?er():536870912,a.lanes|=s,Zc|=s)}function lh(a,s){if(!bt)switch(a.tailMode){case"hidden":s=a.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:h.sibling=null}}function Jt(a){var s=a.alternate!==null&&a.alternate.child===a.child,c=0,h=0;if(s)for(var v=a.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=h,a.childLanes=c,s}function HM(a,s,c){var h=s.pendingProps;switch(v0(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(s),null;case 1:return Jt(s),null;case 3:return c=s.stateNode,h=null,a!==null&&(h=a.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),Fa(Ar),$e(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(Bc(s)?Va(s):a===null||a.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,g0())),Jt(s),null;case 26:var v=s.type,g=s.memoizedState;return a===null?(Va(s),g!==null?(Jt(s),bO(s,g)):(Jt(s),ub(s,v,null,h,c))):g?g!==a.memoizedState?(Va(s),Jt(s),bO(s,g)):(Jt(s),s.flags&=-16777217):(a=a.memoizedProps,a!==h&&Va(s),Jt(s),ub(s,v,a,h,c)),null;case 27:if(Ot(s),c=be.current,v=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==h&&Va(s);else{if(!h){if(s.stateNode===null)throw Error(n(166));return Jt(s),null}a=fe.current,Bc(s)?XT(s):(a=OR(v,h,c),s.stateNode=a,Va(s))}return Jt(s),null;case 5:if(Ot(s),v=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==h&&Va(s);else{if(!h){if(s.stateNode===null)throw Error(n(166));return Jt(s),null}if(g=fe.current,Bc(s))XT(s);else{var A=rv(be.current);switch(g){case 1:g=A.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:g=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":g=A.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":g=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":g=A.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof h.is=="string"?A.createElement("select",{is:h.is}):A.createElement("select"),h.multiple?g.multiple=!0:h.size&&(g.size=h.size);break;default:g=typeof h.is=="string"?A.createElement(v,{is:h.is}):A.createElement(v)}}g[fr]=s,g[zr]=h;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)g.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=g;e:switch(sn(g,v,h),v){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Va(s)}}return Jt(s),ub(s,s.type,a===null?null:a.memoizedProps,s.pendingProps,c),null;case 6:if(a&&s.stateNode!=null)a.memoizedProps!==h&&Va(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(n(166));if(a=be.current,Bc(s)){if(a=s.stateNode,c=s.memoizedProps,h=null,v=nn,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}a[fr]=s,a=!!(a.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||mR(a.nodeValue,c)),a||Ds(s,!0)}else a=rv(a).createTextNode(h),a[fr]=s,s.stateNode=a}return Jt(s),null;case 31:if(c=s.memoizedState,a===null||a.memoizedState!==null){if(h=Bc(s),c!==null){if(a===null){if(!h)throw Error(n(318));if(a=s.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[fr]=s}else ol(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Jt(s),a=!1}else c=g0(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=c),a=!0;if(!a)return s.flags&256?(Ti(s),s):(Ti(s),null);if((s.flags&128)!==0)throw Error(n(558))}return Jt(s),null;case 13:if(h=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=Bc(s),h!==null&&h.dehydrated!==null){if(a===null){if(!v)throw Error(n(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[fr]=s}else ol(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Jt(s),v=!1}else v=g0(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return s.flags&256?(Ti(s),s):(Ti(s),null)}return Ti(s),(s.flags&128)!==0?(s.lanes=c,s):(c=h!==null,a=a!==null&&a.memoizedState!==null,c&&(h=s.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool),g=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(g=h.memoizedState.cachePool.pool),g!==v&&(h.flags|=2048)),c!==a&&c&&(s.child.flags|=8192),zm(s,s.updateQueue),Jt(s),null);case 4:return $e(),a===null&&xb(s.stateNode.containerInfo),Jt(s),null;case 10:return Fa(s.type),Jt(s),null;case 19:if(se(pr),h=s.memoizedState,h===null)return Jt(s),null;if(v=(s.flags&128)!==0,g=h.rendering,g===null)if(v)lh(h,!1);else{if(sr!==0||a!==null&&(a.flags&128)!==0)for(a=s.child;a!==null;){if(g=Cm(a),g!==null){for(s.flags|=128,lh(h,!1),a=g.updateQueue,s.updateQueue=a,zm(s,a),s.subtreeFlags=0,a=c,c=s.child;c!==null;)VT(c,a),c=c.sibling;return ae(pr,pr.current&1|2),bt&&za(s,h.treeForkCount),s.child}a=a.sibling}h.tail!==null&&Zt()>Wm&&(s.flags|=128,v=!0,lh(h,!1),s.lanes=4194304)}else{if(!v)if(a=Cm(g),a!==null){if(s.flags|=128,v=!0,a=a.updateQueue,s.updateQueue=a,zm(s,a),lh(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!bt)return Jt(s),null}else 2*Zt()-h.renderingStartTime>Wm&&c!==536870912&&(s.flags|=128,v=!0,lh(h,!1),s.lanes=4194304);h.isBackwards?(g.sibling=s.child,s.child=g):(a=h.last,a!==null?a.sibling=g:s.child=g,h.last=g)}return h.tail!==null?(a=h.tail,h.rendering=a,h.tail=a.sibling,h.renderingStartTime=Zt(),a.sibling=null,c=pr.current,ae(pr,v?c&1|2:c&1),bt&&za(s,h.treeForkCount),a):(Jt(s),null);case 22:case 23:return Ti(s),N0(),h=s.memoizedState!==null,a!==null?a.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(c&536870912)!==0&&(s.flags&128)===0&&(Jt(s),s.subtreeFlags&6&&(s.flags|=8192)):Jt(s),c=s.updateQueue,c!==null&&zm(s,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==c&&(s.flags|=2048),a!==null&&se(ul),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Fa(Ar),Jt(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function GM(a,s){switch(v0(s),s.tag){case 1:return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return Fa(Ar),$e(),a=s.flags,(a&65536)!==0&&(a&128)===0?(s.flags=a&-65537|128,s):null;case 26:case 27:case 5:return Ot(s),null;case 31:if(s.memoizedState!==null){if(Ti(s),s.alternate===null)throw Error(n(340));ol()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 13:if(Ti(s),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(n(340));ol()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return se(pr),null;case 4:return $e(),null;case 10:return Fa(s.type),null;case 22:case 23:return Ti(s),N0(),a!==null&&se(ul),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 24:return Fa(Ar),null;case 25:return null;default:return null}}function _O(a,s){switch(v0(s),s.tag){case 3:Fa(Ar),$e();break;case 26:case 27:case 5:Ot(s);break;case 4:$e();break;case 31:s.memoizedState!==null&&Ti(s);break;case 13:Ti(s);break;case 19:se(pr);break;case 10:Fa(s.type);break;case 22:case 23:Ti(s),N0(),a!==null&&se(ul);break;case 24:Fa(Ar)}}function ch(a,s){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var v=h.next;c=v;do{if((c.tag&a)===a){h=void 0;var g=c.create,A=c.inst;h=g(),A.destroy=h}c=c.next}while(c!==v)}}catch(N){Lt(s,s.return,N)}}function $s(a,s,c){try{var h=s.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var g=v.next;h=g;do{if((h.tag&a)===a){var A=h.inst,N=A.destroy;if(N!==void 0){A.destroy=void 0,v=s;var B=c,ee=N;try{ee()}catch(ue){Lt(v,B,ue)}}}h=h.next}while(h!==g)}}catch(ue){Lt(s,s.return,ue)}}function wO(a){var s=a.updateQueue;if(s!==null){var c=a.stateNode;try{fA(s,c)}catch(h){Lt(a,a.return,h)}}}function SO(a,s,c){c.props=hl(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(h){Lt(a,s,h)}}function fh(a,s){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var h=a.stateNode;break;case 30:h=a.stateNode;break;default:h=a.stateNode}typeof c=="function"?a.refCleanup=c(h):c.current=h}}catch(v){Lt(a,s,v)}}function ca(a,s){var c=a.ref,h=a.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(v){Lt(a,s,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){Lt(a,s,v)}else c.current=null}function EO(a){var s=a.type,c=a.memoizedProps,h=a.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(v){Lt(a,a.return,v)}}function lb(a,s,c){try{var h=a.stateNode;h6(h,a.type,c,s),h[zr]=s}catch(v){Lt(a,a.return,v)}}function TO(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ks(a.type)||a.tag===4}function cb(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||TO(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ks(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function fb(a,s,c){var h=a.tag;if(h===5||h===6)a=a.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(a),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Gn));else if(h!==4&&(h===27&&Ks(a.type)&&(c=a.stateNode,s=null),a=a.child,a!==null))for(fb(a,s,c),a=a.sibling;a!==null;)fb(a,s,c),a=a.sibling}function $m(a,s,c){var h=a.tag;if(h===5||h===6)a=a.stateNode,s?c.insertBefore(a,s):c.appendChild(a);else if(h!==4&&(h===27&&Ks(a.type)&&(c=a.stateNode),a=a.child,a!==null))for($m(a,s,c),a=a.sibling;a!==null;)$m(a,s,c),a=a.sibling}function AO(a){var s=a.stateNode,c=a.memoizedProps;try{for(var h=a.type,v=s.attributes;v.length;)s.removeAttributeNode(v[0]);sn(s,h,c),s[fr]=a,s[zr]=c}catch(g){Lt(a,a.return,g)}}var Ya=!1,Cr=!1,db=!1,OO=typeof WeakSet=="function"?WeakSet:Set,Gr=null;function WM(a,s){if(a=a.containerInfo,Ub=lv,a=x(a),k(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var v=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{c.nodeType,g.nodeType}catch{c=null;break e}var A=0,N=-1,B=-1,ee=0,ue=0,de=a,re=null;t:for(;;){for(var oe;de!==c||v!==0&&de.nodeType!==3||(N=A+v),de!==g||h!==0&&de.nodeType!==3||(B=A+h),de.nodeType===3&&(A+=de.nodeValue.length),(oe=de.firstChild)!==null;)re=de,de=oe;for(;;){if(de===a)break t;if(re===c&&++ee===v&&(N=A),re===g&&++ue===h&&(B=A),(oe=de.nextSibling)!==null)break;de=re,re=de.parentNode}de=oe}c=N===-1||B===-1?null:{start:N,end:B}}else c=null}c=c||{start:0,end:0}}else c=null;for(qb={focusedElem:a,selectionRange:c},lv=!1,Gr=s;Gr!==null;)if(s=Gr,a=s.child,(s.subtreeFlags&1028)!==0&&a!==null)a.return=s,Gr=a;else for(;Gr!==null;){switch(s=Gr,g=s.alternate,a=s.flags,s.tag){case 0:if((a&4)!==0&&(a=s.updateQueue,a=a!==null?a.events:null,a!==null))for(c=0;c<a.length;c++)v=a[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&g!==null){a=void 0,c=s,v=g.memoizedProps,g=g.memoizedState,h=c.stateNode;try{var Pe=hl(c.type,v);a=h.getSnapshotBeforeUpdate(Pe,g),h.__reactInternalSnapshotBeforeUpdate=a}catch(Ge){Lt(c,c.return,Ge)}}break;case 3:if((a&1024)!==0){if(a=s.stateNode.containerInfo,c=a.nodeType,c===9)Lb(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Lb(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=s.sibling,a!==null){a.return=s.return,Gr=a;break}Gr=s.return}}function RO(a,s,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Qa(a,c),h&4&&ch(5,c);break;case 1:if(Qa(a,c),h&4)if(a=c.stateNode,s===null)try{a.componentDidMount()}catch(A){Lt(c,c.return,A)}else{var v=hl(c.type,s.memoizedProps);s=s.memoizedState;try{a.componentDidUpdate(v,s,a.__reactInternalSnapshotBeforeUpdate)}catch(A){Lt(c,c.return,A)}}h&64&&wO(c),h&512&&fh(c,c.return);break;case 3:if(Qa(a,c),h&64&&(a=c.updateQueue,a!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{fA(a,s)}catch(A){Lt(c,c.return,A)}}break;case 27:s===null&&h&4&&AO(c);case 26:case 5:Qa(a,c),s===null&&h&4&&EO(c),h&512&&fh(c,c.return);break;case 12:Qa(a,c);break;case 31:Qa(a,c),h&4&&xO(a,c);break;case 13:Qa(a,c),h&4&&NO(a,c),h&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=t6.bind(null,c),w6(a,c))));break;case 22:if(h=c.memoizedState!==null||Ya,!h){s=s!==null&&s.memoizedState!==null||Cr,v=Ya;var g=Cr;Ya=h,(Cr=s)&&!g?Ja(a,c,(c.subtreeFlags&8772)!==0):Qa(a,c),Ya=v,Cr=g}break;case 30:break;default:Qa(a,c)}}function CO(a){var s=a.alternate;s!==null&&(a.alternate=null,CO(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&_c(s)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var tr=null,Vn=!1;function Ka(a,s,c){for(c=c.child;c!==null;)IO(a,s,c),c=c.sibling}function IO(a,s,c){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(or,c)}catch{}switch(c.tag){case 26:Cr||ca(c,s),Ka(a,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Cr||ca(c,s);var h=tr,v=Vn;Ks(c.type)&&(tr=c.stateNode,Vn=!1),Ka(a,s,c),_h(c.stateNode),tr=h,Vn=v;break;case 5:Cr||ca(c,s);case 6:if(h=tr,v=Vn,tr=null,Ka(a,s,c),tr=h,Vn=v,tr!==null)if(Vn)try{(tr.nodeType===9?tr.body:tr.nodeName==="HTML"?tr.ownerDocument.body:tr).removeChild(c.stateNode)}catch(g){Lt(c,s,g)}else try{tr.removeChild(c.stateNode)}catch(g){Lt(c,s,g)}break;case 18:tr!==null&&(Vn?(a=tr,wR(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),uf(a)):wR(tr,c.stateNode));break;case 4:h=tr,v=Vn,tr=c.stateNode.containerInfo,Vn=!0,Ka(a,s,c),tr=h,Vn=v;break;case 0:case 11:case 14:case 15:$s(2,c,s),Cr||$s(4,c,s),Ka(a,s,c);break;case 1:Cr||(ca(c,s),h=c.stateNode,typeof h.componentWillUnmount=="function"&&SO(c,s,h)),Ka(a,s,c);break;case 21:Ka(a,s,c);break;case 22:Cr=(h=Cr)||c.memoizedState!==null,Ka(a,s,c),Cr=h;break;default:Ka(a,s,c)}}function xO(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{uf(a)}catch(c){Lt(s,s.return,c)}}}function NO(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{uf(a)}catch(c){Lt(s,s.return,c)}}function VM(a){switch(a.tag){case 31:case 13:case 19:var s=a.stateNode;return s===null&&(s=a.stateNode=new OO),s;case 22:return a=a.stateNode,s=a._retryCache,s===null&&(s=a._retryCache=new OO),s;default:throw Error(n(435,a.tag))}}function Fm(a,s){var c=VM(a);s.forEach(function(h){if(!c.has(h)){c.add(h);var v=r6.bind(null,a,h);h.then(v,v)}})}function Yn(a,s){var c=s.deletions;if(c!==null)for(var h=0;h<c.length;h++){var v=c[h],g=a,A=s,N=A;e:for(;N!==null;){switch(N.tag){case 27:if(Ks(N.type)){tr=N.stateNode,Vn=!1;break e}break;case 5:tr=N.stateNode,Vn=!1;break e;case 3:case 4:tr=N.stateNode.containerInfo,Vn=!0;break e}N=N.return}if(tr===null)throw Error(n(160));IO(g,A,v),tr=null,Vn=!1,g=v.alternate,g!==null&&(g.return=null),v.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)PO(s,a),s=s.sibling}var Co=null;function PO(a,s){var c=a.alternate,h=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Yn(s,a),Kn(a),h&4&&($s(3,a,a.return),ch(3,a),$s(5,a,a.return));break;case 1:Yn(s,a),Kn(a),h&512&&(Cr||c===null||ca(c,c.return)),h&64&&Ya&&(a=a.updateQueue,a!==null&&(h=a.callbacks,h!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var v=Co;if(Yn(s,a),Kn(a),h&512&&(Cr||c===null||ca(c,c.return)),h&4){var g=c!==null?c.memoizedState:null;if(h=a.memoizedState,c===null)if(h===null)if(a.stateNode===null){e:{h=a.type,c=a.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":g=v.getElementsByTagName("title")[0],(!g||g[$r]||g[fr]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=v.createElement(h),v.head.insertBefore(g,v.querySelector("head > title"))),sn(g,h,c),g[fr]=a,dr(g),h=g;break e;case"link":var A=PR("link","href",v).get(h+(c.href||""));if(A){for(var N=0;N<A.length;N++)if(g=A[N],g.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&g.getAttribute("rel")===(c.rel==null?null:c.rel)&&g.getAttribute("title")===(c.title==null?null:c.title)&&g.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){A.splice(N,1);break t}}g=v.createElement(h),sn(g,h,c),v.head.appendChild(g);break;case"meta":if(A=PR("meta","content",v).get(h+(c.content||""))){for(N=0;N<A.length;N++)if(g=A[N],g.getAttribute("content")===(c.content==null?null:""+c.content)&&g.getAttribute("name")===(c.name==null?null:c.name)&&g.getAttribute("property")===(c.property==null?null:c.property)&&g.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&g.getAttribute("charset")===(c.charSet==null?null:c.charSet)){A.splice(N,1);break t}}g=v.createElement(h),sn(g,h,c),v.head.appendChild(g);break;default:throw Error(n(468,h))}g[fr]=a,dr(g),h=g}a.stateNode=h}else UR(v,a.type,a.stateNode);else a.stateNode=NR(v,h,a.memoizedProps);else g!==h?(g===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):g.count--,h===null?UR(v,a.type,a.stateNode):NR(v,h,a.memoizedProps)):h===null&&a.stateNode!==null&&lb(a,a.memoizedProps,c.memoizedProps)}break;case 27:Yn(s,a),Kn(a),h&512&&(Cr||c===null||ca(c,c.return)),c!==null&&h&4&&lb(a,a.memoizedProps,c.memoizedProps);break;case 5:if(Yn(s,a),Kn(a),h&512&&(Cr||c===null||ca(c,c.return)),a.flags&32){v=a.stateNode;try{gi(v,"")}catch(Pe){Lt(a,a.return,Pe)}}h&4&&a.stateNode!=null&&(v=a.memoizedProps,lb(a,v,c!==null?c.memoizedProps:v)),h&1024&&(db=!0);break;case 6:if(Yn(s,a),Kn(a),h&4){if(a.stateNode===null)throw Error(n(162));h=a.memoizedProps,c=a.stateNode;try{c.nodeValue=h}catch(Pe){Lt(a,a.return,Pe)}}break;case 3:if(ov=null,v=Co,Co=nv(s.containerInfo),Yn(s,a),Co=v,Kn(a),h&4&&c!==null&&c.memoizedState.isDehydrated)try{uf(s.containerInfo)}catch(Pe){Lt(a,a.return,Pe)}db&&(db=!1,UO(a));break;case 4:h=Co,Co=nv(a.stateNode.containerInfo),Yn(s,a),Kn(a),Co=h;break;case 12:Yn(s,a),Kn(a);break;case 31:Yn(s,a),Kn(a),h&4&&(h=a.updateQueue,h!==null&&(a.updateQueue=null,Fm(a,h)));break;case 13:Yn(s,a),Kn(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Gm=Zt()),h&4&&(h=a.updateQueue,h!==null&&(a.updateQueue=null,Fm(a,h)));break;case 22:v=a.memoizedState!==null;var B=c!==null&&c.memoizedState!==null,ee=Ya,ue=Cr;if(Ya=ee||v,Cr=ue||B,Yn(s,a),Cr=ue,Ya=ee,Kn(a),h&8192)e:for(s=a.stateNode,s._visibility=v?s._visibility&-2:s._visibility|1,v&&(c===null||B||Ya||Cr||pl(a)),c=null,s=a;;){if(s.tag===5||s.tag===26){if(c===null){B=c=s;try{if(g=B.stateNode,v)A=g.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{N=B.stateNode;var de=B.memoizedProps.style,re=de!=null&&de.hasOwnProperty("display")?de.display:null;N.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(Pe){Lt(B,B.return,Pe)}}}else if(s.tag===6){if(c===null){B=s;try{B.stateNode.nodeValue=v?"":B.memoizedProps}catch(Pe){Lt(B,B.return,Pe)}}}else if(s.tag===18){if(c===null){B=s;try{var oe=B.stateNode;v?SR(oe,!0):SR(B.stateNode,!1)}catch(Pe){Lt(B,B.return,Pe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===a)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=a.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,Fm(a,c))));break;case 19:Yn(s,a),Kn(a),h&4&&(h=a.updateQueue,h!==null&&(a.updateQueue=null,Fm(a,h)));break;case 30:break;case 21:break;default:Yn(s,a),Kn(a)}}function Kn(a){var s=a.flags;if(s&2){try{for(var c,h=a.return;h!==null;){if(TO(h)){c=h;break}h=h.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var v=c.stateNode,g=cb(a);$m(a,g,v);break;case 5:var A=c.stateNode;c.flags&32&&(gi(A,""),c.flags&=-33);var N=cb(a);$m(a,N,A);break;case 3:case 4:var B=c.stateNode.containerInfo,ee=cb(a);fb(a,ee,B);break;default:throw Error(n(161))}}catch(ue){Lt(a,a.return,ue)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function UO(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var s=a;UO(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),a=a.sibling}}function Qa(a,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)RO(a,s.alternate,s),s=s.sibling}function pl(a){for(a=a.child;a!==null;){var s=a;switch(s.tag){case 0:case 11:case 14:case 15:$s(4,s,s.return),pl(s);break;case 1:ca(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&SO(s,s.return,c),pl(s);break;case 27:_h(s.stateNode);case 26:case 5:ca(s,s.return),pl(s);break;case 22:s.memoizedState===null&&pl(s);break;case 30:pl(s);break;default:pl(s)}a=a.sibling}}function Ja(a,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,v=a,g=s,A=g.flags;switch(g.tag){case 0:case 11:case 15:Ja(v,g,c),ch(4,g);break;case 1:if(Ja(v,g,c),h=g,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ee){Lt(h,h.return,ee)}if(h=g,v=h.updateQueue,v!==null){var N=h.stateNode;try{var B=v.shared.hiddenCallbacks;if(B!==null)for(v.shared.hiddenCallbacks=null,v=0;v<B.length;v++)cA(B[v],N)}catch(ee){Lt(h,h.return,ee)}}c&&A&64&&wO(g),fh(g,g.return);break;case 27:AO(g);case 26:case 5:Ja(v,g,c),c&&h===null&&A&4&&EO(g),fh(g,g.return);break;case 12:Ja(v,g,c);break;case 31:Ja(v,g,c),c&&A&4&&xO(v,g);break;case 13:Ja(v,g,c),c&&A&4&&NO(v,g);break;case 22:g.memoizedState===null&&Ja(v,g,c),fh(g,g.return);break;case 30:break;default:Ja(v,g,c)}s=s.sibling}}function hb(a,s){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&Jd(c))}function pb(a,s){a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&Jd(a))}function Io(a,s,c,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)qO(a,s,c,h),s=s.sibling}function qO(a,s,c,h){var v=s.flags;switch(s.tag){case 0:case 11:case 15:Io(a,s,c,h),v&2048&&ch(9,s);break;case 1:Io(a,s,c,h);break;case 3:Io(a,s,c,h),v&2048&&(a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&Jd(a)));break;case 12:if(v&2048){Io(a,s,c,h),a=s.stateNode;try{var g=s.memoizedProps,A=g.id,N=g.onPostCommit;typeof N=="function"&&N(A,s.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(B){Lt(s,s.return,B)}}else Io(a,s,c,h);break;case 31:Io(a,s,c,h);break;case 13:Io(a,s,c,h);break;case 23:break;case 22:g=s.stateNode,A=s.alternate,s.memoizedState!==null?g._visibility&2?Io(a,s,c,h):dh(a,s):g._visibility&2?Io(a,s,c,h):(g._visibility|=2,Qc(a,s,c,h,(s.subtreeFlags&10256)!==0||!1)),v&2048&&hb(A,s);break;case 24:Io(a,s,c,h),v&2048&&pb(s.alternate,s);break;default:Io(a,s,c,h)}}function Qc(a,s,c,h,v){for(v=v&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=a,A=s,N=c,B=h,ee=A.flags;switch(A.tag){case 0:case 11:case 15:Qc(g,A,N,B,v),ch(8,A);break;case 23:break;case 22:var ue=A.stateNode;A.memoizedState!==null?ue._visibility&2?Qc(g,A,N,B,v):dh(g,A):(ue._visibility|=2,Qc(g,A,N,B,v)),v&&ee&2048&&hb(A.alternate,A);break;case 24:Qc(g,A,N,B,v),v&&ee&2048&&pb(A.alternate,A);break;default:Qc(g,A,N,B,v)}s=s.sibling}}function dh(a,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=a,h=s,v=h.flags;switch(h.tag){case 22:dh(c,h),v&2048&&hb(h.alternate,h);break;case 24:dh(c,h),v&2048&&pb(h.alternate,h);break;default:dh(c,h)}s=s.sibling}}var hh=8192;function Jc(a,s,c){if(a.subtreeFlags&hh)for(a=a.child;a!==null;)DO(a,s,c),a=a.sibling}function DO(a,s,c){switch(a.tag){case 26:Jc(a,s,c),a.flags&hh&&a.memoizedState!==null&&U6(c,Co,a.memoizedState,a.memoizedProps);break;case 5:Jc(a,s,c);break;case 3:case 4:var h=Co;Co=nv(a.stateNode.containerInfo),Jc(a,s,c),Co=h;break;case 22:a.memoizedState===null&&(h=a.alternate,h!==null&&h.memoizedState!==null?(h=hh,hh=16777216,Jc(a,s,c),hh=h):Jc(a,s,c));break;default:Jc(a,s,c)}}function jO(a){var s=a.alternate;if(s!==null&&(a=s.child,a!==null)){s.child=null;do s=a.sibling,a.sibling=null,a=s;while(a!==null)}}function ph(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];Gr=h,kO(h,a)}jO(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)LO(a),a=a.sibling}function LO(a){switch(a.tag){case 0:case 11:case 15:ph(a),a.flags&2048&&$s(9,a,a.return);break;case 3:ph(a);break;case 12:ph(a);break;case 22:var s=a.stateNode;a.memoizedState!==null&&s._visibility&2&&(a.return===null||a.return.tag!==13)?(s._visibility&=-3,Hm(a)):ph(a);break;default:ph(a)}}function Hm(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];Gr=h,kO(h,a)}jO(a)}for(a=a.child;a!==null;){switch(s=a,s.tag){case 0:case 11:case 15:$s(8,s,s.return),Hm(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Hm(s));break;default:Hm(s)}a=a.sibling}}function kO(a,s){for(;Gr!==null;){var c=Gr;switch(c.tag){case 0:case 11:case 15:$s(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Jd(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Gr=h;else e:for(c=a;Gr!==null;){h=Gr;var v=h.sibling,g=h.return;if(CO(h),h===c){Gr=null;break e}if(v!==null){v.return=g,Gr=v;break e}Gr=g}}}var YM={getCacheForType:function(a){var s=on(Ar),c=s.data.get(a);return c===void 0&&(c=a(),s.data.set(a,c)),c},cacheSignal:function(){return on(Ar).controller.signal}},KM=typeof WeakMap=="function"?WeakMap:Map,Pt=0,Gt=null,dt=null,yt=0,jt=0,Ai=null,Fs=!1,Xc=!1,mb=!1,Xa=0,sr=0,Hs=0,ml=0,vb=0,Oi=0,Zc=0,mh=null,Qn=null,yb=!1,Gm=0,MO=0,Wm=1/0,Vm=null,Gs=null,jr=0,Ws=null,ef=null,Za=0,gb=0,bb=null,BO=null,vh=0,_b=null;function Ri(){return(Pt&2)!==0&&yt!==0?yt&-yt:M.T!==null?Ob():gc()}function zO(){if(Oi===0)if((yt&536870912)===0||bt){var a=Jo;Jo<<=1,(Jo&3932160)===0&&(Jo=262144),Oi=a}else Oi=536870912;return a=Ei.current,a!==null&&(a.flags|=32),Oi}function Jn(a,s,c){(a===Gt&&(jt===2||jt===9)||a.cancelPendingCommit!==null)&&(tf(a,0),Vs(a,yt,Oi,!1)),Nt(a,c),((Pt&2)===0||a!==Gt)&&(a===Gt&&((Pt&2)===0&&(ml|=c),sr===4&&Vs(a,yt,Oi,!1)),fa(a))}function $O(a,s,c){if((Pt&6)!==0)throw Error(n(327));var h=!c&&(s&127)===0&&(s&a.expiredLanes)===0||Rt(a,s),v=h?XM(a,s):Sb(a,s,!0),g=h;do{if(v===0){Xc&&!h&&Vs(a,s,0,!1);break}else{if(c=a.current.alternate,g&&!QM(c)){v=Sb(a,s,!1),g=!1;continue}if(v===2){if(g=s,a.errorRecoveryDisabledLanes&g)var A=0;else A=a.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var N=a;v=mh;var B=N.current.memoizedState.isDehydrated;if(B&&(tf(N,A).flags|=256),A=Sb(N,A,!1),A!==2){if(mb&&!B){N.errorRecoveryDisabledLanes|=g,ml|=g,v=4;break e}g=Qn,Qn=v,g!==null&&(Qn===null?Qn=g:Qn.push.apply(Qn,g))}v=A}if(g=!1,v!==2)continue}}if(v===1){tf(a,0),Vs(a,s,0,!0);break}e:{switch(h=a,g=v,g){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:Vs(h,s,Oi,!Fs);break e;case 2:Qn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(v=Gm+300-Zt(),10<v)){if(Vs(h,s,Oi,!Fs),We(h,0,!0)!==0)break e;Za=s,h.timeoutHandle=bR(FO.bind(null,h,c,Qn,Vm,yb,s,Oi,ml,Zc,Fs,g,"Throttled",-0,0),v);break e}FO(h,c,Qn,Vm,yb,s,Oi,ml,Zc,Fs,g,null,-0,0)}}break}while(!0);fa(a)}function FO(a,s,c,h,v,g,A,N,B,ee,ue,de,re,oe){if(a.timeoutHandle=-1,de=s.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gn},DO(s,g,de);var Pe=(g&62914560)===g?Gm-Zt():(g&4194048)===g?MO-Zt():0;if(Pe=q6(de,Pe),Pe!==null){Za=g,a.cancelPendingCommit=Pe(JO.bind(null,a,s,g,c,h,v,A,N,B,ue,de,null,re,oe)),Vs(a,g,A,!ee);return}}JO(a,s,g,c,h,v,A,N,B)}function QM(a){for(var s=a;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var v=c[h],g=v.getSnapshot;v=v.value;try{if(!rn(g(),v))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Vs(a,s,c,h){s&=~vb,s&=~ml,a.suspendedLanes|=s,a.pingedLanes&=~s,h&&(a.warmLanes|=s),h=a.expirationTimes;for(var v=s;0<v;){var g=31-Ur(v),A=1<<g;h[g]=-1,v&=~A}c!==0&&Eo(a,c,s)}function Ym(){return(Pt&6)===0?(yh(0),!1):!0}function wb(){if(dt!==null){if(jt===0)var a=dt.return;else a=dt,$a=al=null,L0(a),Gc=null,Zd=0,a=dt;for(;a!==null;)_O(a.alternate,a),a=a.return;dt=null}}function tf(a,s){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,v6(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),Za=0,wb(),Gt=a,dt=c=Ba(a.current,null),yt=s,jt=0,Ai=null,Fs=!1,Xc=Rt(a,s),mb=!1,Zc=Oi=vb=ml=Hs=sr=0,Qn=mh=null,yb=!1,(s&8)!==0&&(s|=s&32);var h=a.entangledLanes;if(h!==0)for(a=a.entanglements,h&=s;0<h;){var v=31-Ur(h),g=1<<v;s|=a[v],h&=~g}return Xa=s,mm(),c}function HO(a,s){it=null,M.H=sh,s===Hc||s===Em?(s=aA(),jt=3):s===A0?(s=aA(),jt=4):jt=s===Z0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ai=s,dt===null&&(sr=1,Lm(a,Hi(s,a.current)))}function GO(){var a=Ei.current;return a===null?!0:(yt&4194048)===yt?Yi===null:(yt&62914560)===yt||(yt&536870912)!==0?a===Yi:!1}function WO(){var a=M.H;return M.H=sh,a===null?sh:a}function VO(){var a=M.A;return M.A=YM,a}function Km(){sr=4,Fs||(yt&4194048)!==yt&&Ei.current!==null||(Xc=!0),(Hs&134217727)===0&&(ml&134217727)===0||Gt===null||Vs(Gt,yt,Oi,!1)}function Sb(a,s,c){var h=Pt;Pt|=2;var v=WO(),g=VO();(Gt!==a||yt!==s)&&(Vm=null,tf(a,s)),s=!1;var A=sr;e:do try{if(jt!==0&&dt!==null){var N=dt,B=Ai;switch(jt){case 8:wb(),A=6;break e;case 3:case 2:case 9:case 6:Ei.current===null&&(s=!0);var ee=jt;if(jt=0,Ai=null,rf(a,N,B,ee),c&&Xc){A=0;break e}break;default:ee=jt,jt=0,Ai=null,rf(a,N,B,ee)}}JM(),A=sr;break}catch(ue){HO(a,ue)}while(!0);return s&&a.shellSuspendCounter++,$a=al=null,Pt=h,M.H=v,M.A=g,dt===null&&(Gt=null,yt=0,mm()),A}function JM(){for(;dt!==null;)YO(dt)}function XM(a,s){var c=Pt;Pt|=2;var h=WO(),v=VO();Gt!==a||yt!==s?(Vm=null,Wm=Zt()+500,tf(a,s)):Xc=Rt(a,s);e:do try{if(jt!==0&&dt!==null){s=dt;var g=Ai;t:switch(jt){case 1:jt=0,Ai=null,rf(a,s,g,1);break;case 2:case 9:if(iA(g)){jt=0,Ai=null,KO(s);break}s=function(){jt!==2&&jt!==9||Gt!==a||(jt=7),fa(a)},g.then(s,s);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:iA(g)?(jt=0,Ai=null,KO(s)):(jt=0,Ai=null,rf(a,s,g,7));break;case 5:var A=null;switch(dt.tag){case 26:A=dt.memoizedState;case 5:case 27:var N=dt;if(A?qR(A):N.stateNode.complete){jt=0,Ai=null;var B=N.sibling;if(B!==null)dt=B;else{var ee=N.return;ee!==null?(dt=ee,Qm(ee)):dt=null}break t}}jt=0,Ai=null,rf(a,s,g,5);break;case 6:jt=0,Ai=null,rf(a,s,g,6);break;case 8:wb(),sr=6;break e;default:throw Error(n(462))}}ZM();break}catch(ue){HO(a,ue)}while(!0);return $a=al=null,M.H=h,M.A=v,Pt=c,dt!==null?0:(Gt=null,yt=0,mm(),sr)}function ZM(){for(;dt!==null&&!Dt();)YO(dt)}function YO(a){var s=gO(a.alternate,a,Xa);a.memoizedProps=a.pendingProps,s===null?Qm(a):dt=s}function KO(a){var s=a,c=s.alternate;switch(s.tag){case 15:case 0:s=dO(c,s,s.pendingProps,s.type,void 0,yt);break;case 11:s=dO(c,s,s.pendingProps,s.type.render,s.ref,yt);break;case 5:L0(s);default:_O(c,s),s=dt=VT(s,Xa),s=gO(c,s,Xa)}a.memoizedProps=a.pendingProps,s===null?Qm(a):dt=s}function rf(a,s,c,h){$a=al=null,L0(s),Gc=null,Zd=0;var v=s.return;try{if(zM(a,v,s,c,yt)){sr=1,Lm(a,Hi(c,a.current)),dt=null;return}}catch(g){if(v!==null)throw dt=v,g;sr=1,Lm(a,Hi(c,a.current)),dt=null;return}s.flags&32768?(bt||h===1?a=!0:Xc||(yt&536870912)!==0?a=!1:(Fs=a=!0,(h===2||h===9||h===3||h===6)&&(h=Ei.current,h!==null&&h.tag===13&&(h.flags|=16384))),QO(s,a)):Qm(s)}function Qm(a){var s=a;do{if((s.flags&32768)!==0){QO(s,Fs);return}a=s.return;var c=HM(s.alternate,s,Xa);if(c!==null){dt=c;return}if(s=s.sibling,s!==null){dt=s;return}dt=s=a}while(s!==null);sr===0&&(sr=5)}function QO(a,s){do{var c=GM(a.alternate,a);if(c!==null){c.flags&=32767,dt=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(a=a.sibling,a!==null)){dt=a;return}dt=a=c}while(a!==null);sr=6,dt=null}function JO(a,s,c,h,v,g,A,N,B){a.cancelPendingCommit=null;do Jm();while(jr!==0);if((Pt&6)!==0)throw Error(n(327));if(s!==null){if(s===a.current)throw Error(n(177));if(g=s.lanes|s.childLanes,g|=rl,Xr(a,c,g,A,N,B),a===Gt&&(dt=Gt=null,yt=0),ef=s,Ws=a,Za=c,gb=g,bb=v,BO=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,n6(ir,function(){return rR(),null})):(a.callbackNode=null,a.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=M.T,M.T=null,v=J.p,J.p=2,A=Pt,Pt|=4;try{WM(a,s,c)}finally{Pt=A,J.p=v,M.T=h}}jr=1,XO(),ZO(),eR()}}function XO(){if(jr===1){jr=0;var a=Ws,s=ef,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=M.T,M.T=null;var h=J.p;J.p=2;var v=Pt;Pt|=4;try{PO(s,a);var g=qb,A=x(a.containerInfo),N=g.focusedElem,B=g.selectionRange;if(A!==N&&N&&N.ownerDocument&&T(N.ownerDocument.documentElement,N)){if(B!==null&&k(N)){var ee=B.start,ue=B.end;if(ue===void 0&&(ue=ee),"selectionStart"in N)N.selectionStart=ee,N.selectionEnd=Math.min(ue,N.value.length);else{var de=N.ownerDocument||document,re=de&&de.defaultView||window;if(re.getSelection){var oe=re.getSelection(),Pe=N.textContent.length,Ge=Math.min(B.start,Pe),$t=B.end===void 0?Ge:Math.min(B.end,Pe);!oe.extend&&Ge>$t&&(A=$t,$t=Ge,Ge=A);var W=_(N,Ge),F=_(N,$t);if(W&&F&&(oe.rangeCount!==1||oe.anchorNode!==W.node||oe.anchorOffset!==W.offset||oe.focusNode!==F.node||oe.focusOffset!==F.offset)){var X=de.createRange();X.setStart(W.node,W.offset),oe.removeAllRanges(),Ge>$t?(oe.addRange(X),oe.extend(F.node,F.offset)):(X.setEnd(F.node,F.offset),oe.addRange(X))}}}}for(de=[],oe=N;oe=oe.parentNode;)oe.nodeType===1&&de.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<de.length;N++){var le=de[N];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}lv=!!Ub,qb=Ub=null}finally{Pt=v,J.p=h,M.T=c}}a.current=s,jr=2}}function ZO(){if(jr===2){jr=0;var a=Ws,s=ef,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=M.T,M.T=null;var h=J.p;J.p=2;var v=Pt;Pt|=4;try{RO(a,s.alternate,s)}finally{Pt=v,J.p=h,M.T=c}}jr=3}}function eR(){if(jr===4||jr===3){jr=0,Ft();var a=Ws,s=ef,c=Za,h=BO;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?jr=5:(jr=0,ef=Ws=null,tR(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(Gs=null),Fn(c),s=s.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(or,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=M.T,v=J.p,J.p=2,M.T=null;try{for(var g=a.onRecoverableError,A=0;A<h.length;A++){var N=h[A];g(N.value,{componentStack:N.stack})}}finally{M.T=s,J.p=v}}(Za&3)!==0&&Jm(),fa(a),v=a.pendingLanes,(c&261930)!==0&&(v&42)!==0?a===_b?vh++:(vh=0,_b=a):vh=0,yh(0)}}function tR(a,s){(a.pooledCacheLanes&=s)===0&&(s=a.pooledCache,s!=null&&(a.pooledCache=null,Jd(s)))}function Jm(){return XO(),ZO(),eR(),rR()}function rR(){if(jr!==5)return!1;var a=Ws,s=gb;gb=0;var c=Fn(Za),h=M.T,v=J.p;try{J.p=32>c?32:c,M.T=null,c=bb,bb=null;var g=Ws,A=Za;if(jr=0,ef=Ws=null,Za=0,(Pt&6)!==0)throw Error(n(331));var N=Pt;if(Pt|=4,LO(g.current),qO(g,g.current,A,c),Pt=N,yh(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(or,g)}catch{}return!0}finally{J.p=v,M.T=h,tR(a,s)}}function nR(a,s,c){s=Hi(c,s),s=X0(a.stateNode,s,2),a=Ms(a,s,2),a!==null&&(Nt(a,2),fa(a))}function Lt(a,s,c){if(a.tag===3)nR(a,a,c);else for(;s!==null;){if(s.tag===3){nR(s,a,c);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Gs===null||!Gs.has(h))){a=Hi(c,a),c=iO(2),h=Ms(s,c,2),h!==null&&(oO(c,h,s,a),Nt(h,2),fa(h));break}}s=s.return}}function Eb(a,s,c){var h=a.pingCache;if(h===null){h=a.pingCache=new KM;var v=new Set;h.set(s,v)}else v=h.get(s),v===void 0&&(v=new Set,h.set(s,v));v.has(c)||(mb=!0,v.add(c),a=e6.bind(null,a,s,c),s.then(a,a))}function e6(a,s,c){var h=a.pingCache;h!==null&&h.delete(s),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,Gt===a&&(yt&c)===c&&(sr===4||sr===3&&(yt&62914560)===yt&&300>Zt()-Gm?(Pt&2)===0&&tf(a,0):vb|=c,Zc===yt&&(Zc=0)),fa(a)}function iR(a,s){s===0&&(s=er()),a=nl(a,s),a!==null&&(Nt(a,s),fa(a))}function t6(a){var s=a.memoizedState,c=0;s!==null&&(c=s.retryLane),iR(a,c)}function r6(a,s){var c=0;switch(a.tag){case 31:case 13:var h=a.stateNode,v=a.memoizedState;v!==null&&(c=v.retryLane);break;case 19:h=a.stateNode;break;case 22:h=a.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(s),iR(a,c)}function n6(a,s){return mi(a,s)}var Xm=null,nf=null,Tb=!1,Zm=!1,Ab=!1,Ys=0;function fa(a){a!==nf&&a.next===null&&(nf===null?Xm=nf=a:nf=nf.next=a),Zm=!0,Tb||(Tb=!0,o6())}function yh(a,s){if(!Ab&&Zm){Ab=!0;do for(var c=!1,h=Xm;h!==null;){if(a!==0){var v=h.pendingLanes;if(v===0)var g=0;else{var A=h.suspendedLanes,N=h.pingedLanes;g=(1<<31-Ur(42|a)+1)-1,g&=v&~(A&~N),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(c=!0,uR(h,g))}else g=yt,g=We(h,h===Gt?g:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(g&3)===0||Rt(h,g)||(c=!0,uR(h,g));h=h.next}while(c);Ab=!1}}function i6(){oR()}function oR(){Zm=Tb=!1;var a=0;Ys!==0&&m6()&&(a=Ys);for(var s=Zt(),c=null,h=Xm;h!==null;){var v=h.next,g=aR(h,s);g===0?(h.next=null,c===null?Xm=v:c.next=v,v===null&&(nf=c)):(c=h,(a!==0||(g&3)!==0)&&(Zm=!0)),h=v}jr!==0&&jr!==5||yh(a),Ys!==0&&(Ys=0)}function aR(a,s){for(var c=a.suspendedLanes,h=a.pingedLanes,v=a.expirationTimes,g=a.pendingLanes&-62914561;0<g;){var A=31-Ur(g),N=1<<A,B=v[A];B===-1?((N&c)===0||(N&h)!==0)&&(v[A]=kt(N,s)):B<=s&&(a.expiredLanes|=N),g&=~N}if(s=Gt,c=yt,c=We(a,a===s?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),h=a.callbackNode,c===0||a===s&&(jt===2||jt===9)||a.cancelPendingCommit!==null)return h!==null&&h!==null&&vi(h),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||Rt(a,c)){if(s=c&-c,s===a.callbackPriority)return s;switch(h!==null&&vi(h),Fn(c)){case 2:case 8:c=Qo;break;case 32:c=ir;break;case 268435456:c=Tn;break;default:c=ir}return h=sR.bind(null,a),c=mi(c,h),a.callbackPriority=s,a.callbackNode=c,s}return h!==null&&h!==null&&vi(h),a.callbackPriority=2,a.callbackNode=null,2}function sR(a,s){if(jr!==0&&jr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(Jm()&&a.callbackNode!==c)return null;var h=yt;return h=We(a,a===Gt?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),h===0?null:($O(a,h,s),aR(a,Zt()),a.callbackNode!=null&&a.callbackNode===c?sR.bind(null,a):null)}function uR(a,s){if(Jm())return null;$O(a,s,!0)}function o6(){y6(function(){(Pt&6)!==0?mi(En,i6):oR()})}function Ob(){if(Ys===0){var a=$c;a===0&&(a=xa,xa<<=1,(xa&261888)===0&&(xa=256)),Ys=a}return Ys}function lR(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:On(""+a)}function cR(a,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,a.id&&c.setAttribute("form",a.id),s.parentNode.insertBefore(c,s),a=new FormData(a),c.parentNode.removeChild(c),a}function a6(a,s,c,h,v){if(s==="submit"&&c&&c.stateNode===v){var g=lR((v[zr]||null).action),A=h.submitter;A&&(s=(s=A[zr]||null)?lR(s.formAction):A.getAttribute("formAction"),s!==null&&(g=s,A=null));var N=new ra("action","action",null,h,v);a.push({event:N,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ys!==0){var B=A?cR(v,A):new FormData(v);W0(c,{pending:!0,data:B,method:v.method,action:g},null,B)}}else typeof g=="function"&&(N.preventDefault(),B=A?cR(v,A):new FormData(v),W0(c,{pending:!0,data:B,method:v.method,action:g},g,B))},currentTarget:v}]})}}for(var Rb=0;Rb<vt.length;Rb++){var Cb=vt[Rb],s6=Cb.toLowerCase(),u6=Cb[0].toUpperCase()+Cb.slice(1);ut(s6,"on"+u6)}ut(Mt,"onAnimationEnd"),ut(mt,"onAnimationIteration"),ut(ot,"onAnimationStart"),ut("dblclick","onDoubleClick"),ut("focusin","onFocus"),ut("focusout","onBlur"),ut(Ze,"onTransitionRun"),ut(lt,"onTransitionStart"),ut(Ht,"onTransitionCancel"),ut(we,"onTransitionEnd"),Da("onMouseEnter",["mouseout","mouseover"]),Da("onMouseLeave",["mouseout","mouseover"]),Da("onPointerEnter",["pointerout","pointerover"]),Da("onPointerLeave",["pointerout","pointerover"]),qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qa("onBeforeInput",["compositionend","keypress","textInput","paste"]),qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gh));function fR(a,s){s=(s&4)!==0;for(var c=0;c<a.length;c++){var h=a[c],v=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var A=h.length-1;0<=A;A--){var N=h[A],B=N.instance,ee=N.currentTarget;if(N=N.listener,B!==g&&v.isPropagationStopped())break e;g=N,v.currentTarget=ee;try{g(v)}catch(ue){Tr(ue)}v.currentTarget=null,g=B}else for(A=0;A<h.length;A++){if(N=h[A],B=N.instance,ee=N.currentTarget,N=N.listener,B!==g&&v.isPropagationStopped())break e;g=N,v.currentTarget=ee;try{g(v)}catch(ue){Tr(ue)}v.currentTarget=null,g=B}}}}function ht(a,s){var c=s[Xo];c===void 0&&(c=s[Xo]=new Set);var h=a+"__bubble";c.has(h)||(dR(s,a,2,!1),c.add(h))}function Ib(a,s,c){var h=0;s&&(h|=4),dR(c,a,h,s)}var ev="_reactListening"+Math.random().toString(36).slice(2);function xb(a){if(!a[ev]){a[ev]=!0,wc.forEach(function(c){c!=="selectionchange"&&(l6.has(c)||Ib(c,!1,a),Ib(c,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[ev]||(s[ev]=!0,Ib("selectionchange",!1,s))}}function dR(a,s,c,h){switch(zR(s)){case 2:var v=L6;break;case 8:v=k6;break;default:v=Gb}c=v.bind(null,s,c,a),v=void 0,!$u||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),h?v!==void 0?a.addEventListener(s,c,{capture:!0,passive:v}):a.addEventListener(s,c,!0):v!==void 0?a.addEventListener(s,c,{passive:v}):a.addEventListener(s,c,!1)}function Nb(a,s,c,h,v){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var N=h.stateNode.containerInfo;if(N===v)break;if(A===4)for(A=h.return;A!==null;){var B=A.tag;if((B===3||B===4)&&A.stateNode.containerInfo===v)return;A=A.return}for(;N!==null;){if(A=Zo(N),A===null)return;if(B=A.tag,B===5||B===6||B===26||B===27){h=g=A;continue e}N=N.parentNode}}h=h.return}jd(function(){var ee=g,ue=bi(c),de=[];e:{var re=ze.get(a);if(re!==void 0){var oe=ra,Pe=a;switch(a){case"keypress":if(xs(c)===0)break e;case"keydown":case"keyup":oe=Ic;break;case"focusin":Pe="focus",oe=Md;break;case"focusout":Pe="blur",oe=Md;break;case"beforeblur":case"afterblur":oe=Md;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=kd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=u0;break;case Mt:case mt:case ot:oe=Oo;break;case we:oe=lm;break;case"scroll":case"scrollend":oe=rm;break;case"wheel":oe=Yu;break;case"copy":case"cut":case"paste":oe=Wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=um;break;case"toggle":case"beforetoggle":oe=zd}var Ge=(s&4)!==0,$t=!Ge&&(a==="scroll"||a==="scrollend"),W=Ge?re!==null?re+"Capture":null:re;Ge=[];for(var F=ee,X;F!==null;){var le=F;if(X=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||X===null||W===null||(le=Rs(F,W),le!=null&&Ge.push(bh(F,le,X))),$t)break;F=F.return}0<Ge.length&&(re=new oe(re,Pe,null,c,ue),de.push({event:re,listeners:Ge}))}}if((s&7)===0){e:{if(re=a==="mouseover"||a==="pointerover",oe=a==="mouseout"||a==="pointerout",re&&c!==zu&&(Pe=c.relatedTarget||c.fromElement)&&(Zo(Pe)||Pe[Pa]))break e;if((oe||re)&&(re=ue.window===ue?ue:(re=ue.ownerDocument)?re.defaultView||re.parentWindow:window,oe?(Pe=c.relatedTarget||c.toElement,oe=ee,Pe=Pe?Zo(Pe):null,Pe!==null&&($t=o(Pe),Ge=Pe.tag,Pe!==$t||Ge!==5&&Ge!==27&&Ge!==6)&&(Pe=null)):(oe=null,Pe=ee),oe!==Pe)){if(Ge=Ld,le="onMouseLeave",W="onMouseEnter",F="mouse",(a==="pointerout"||a==="pointerover")&&(Ge=um,le="onPointerLeave",W="onPointerEnter",F="pointer"),$t=oe==null?re:ea(oe),X=Pe==null?re:ea(Pe),re=new Ge(le,F+"leave",oe,c,ue),re.target=$t,re.relatedTarget=X,le=null,Zo(ue)===ee&&(Ge=new Ge(W,F+"enter",Pe,c,ue),Ge.target=X,Ge.relatedTarget=$t,le=Ge),$t=le,oe&&Pe)t:{for(Ge=c6,W=oe,F=Pe,X=0,le=W;le;le=Ge(le))X++;le=0;for(var Fe=F;Fe;Fe=Ge(Fe))le++;for(;0<X-le;)W=Ge(W),X--;for(;0<le-X;)F=Ge(F),le--;for(;X--;){if(W===F||F!==null&&W===F.alternate){Ge=W;break t}W=Ge(W),F=Ge(F)}Ge=null}else Ge=null;oe!==null&&hR(de,re,oe,Ge,!1),Pe!==null&&$t!==null&&hR(de,$t,Pe,Ge,!0)}}e:{if(re=ee?ea(ee):window,oe=re.nodeName&&re.nodeName.toLowerCase(),oe==="select"||oe==="input"&&re.type==="file")var It=Zu;else if(Gd(re))if(Vd)It=pm;else{It=Dc;var Le=qc}else oe=re.nodeName,!oe||oe.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ee&&Bu(ee.elementType)&&(It=Zu):It=hm;if(It&&(It=It(a,ee))){Wd(de,It,c,ue);break e}Le&&Le(a,re,ee),a==="focusout"&&ee&&re.type==="number"&&ee.memoizedProps.value!=null&&Id(re,"number",re.value)}switch(Le=ee?ea(ee):window,a){case"focusin":(Gd(Le)||Le.contentEditable==="true")&&(K=Le,te=ee,ie=null);break;case"focusout":ie=te=K=null;break;case"mousedown":he=!0;break;case"contextmenu":case"mouseup":case"dragend":he=!1,Ce(de,c,ue);break;case"selectionchange":if(ne)break;case"keydown":case"keyup":Ce(de,c,ue)}var at;if($i)e:{switch(a){case"compositionstart":var gt="onCompositionStart";break e;case"compositionend":gt="onCompositionEnd";break e;case"compositionupdate":gt="onCompositionUpdate";break e}gt=void 0}else Ma?Hd(a,c)&&(gt="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(gt="onCompositionStart");gt&&($d&&c.locale!=="ko"&&(Ma||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&Ma&&(at=Is()):(_i=ue,Oc="value"in _i?_i.value:_i.textContent,Ma=!0)),Le=tv(ee,gt),0<Le.length&&(gt=new Vu(gt,a,null,c,ue),de.push({event:gt,listeners:Le}),at?gt.data=at:(at=Qu(c),at!==null&&(gt.data=at)))),(at=Ku?fm(a,c):dm(a,c))&&(gt=tv(ee,"onBeforeInput"),0<gt.length&&(Le=new Vu("onBeforeInput","beforeinput",null,c,ue),de.push({event:Le,listeners:gt}),Le.data=at)),a6(de,a,ee,c,ue)}fR(de,s)})}function bh(a,s,c){return{instance:a,listener:s,currentTarget:c}}function tv(a,s){for(var c=s+"Capture",h=[];a!==null;){var v=a,g=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||g===null||(v=Rs(a,c),v!=null&&h.unshift(bh(a,v,g)),v=Rs(a,s),v!=null&&h.push(bh(a,v,g))),a.tag===3)return h;a=a.return}return[]}function c6(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function hR(a,s,c,h,v){for(var g=s._reactName,A=[];c!==null&&c!==h;){var N=c,B=N.alternate,ee=N.stateNode;if(N=N.tag,B!==null&&B===h)break;N!==5&&N!==26&&N!==27||ee===null||(B=ee,v?(ee=Rs(c,g),ee!=null&&A.unshift(bh(c,ee,B))):v||(ee=Rs(c,g),ee!=null&&A.push(bh(c,ee,B)))),c=c.return}A.length!==0&&a.push({event:s,listeners:A})}var f6=/\r\n?/g,d6=/\u0000|\uFFFD/g;function pR(a){return(typeof a=="string"?a:""+a).replace(f6,`
`).replace(d6,"")}function mR(a,s){return s=pR(s),pR(a)===s}function zt(a,s,c,h,v,g){switch(c){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||gi(a,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&gi(a,""+h);break;case"className":ku(a,"class",h);break;case"tabIndex":ku(a,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":ku(a,c,h);break;case"style":Pd(a,h,g);break;case"data":if(s!=="object"){ku(a,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||c!=="href")){a.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){a.removeAttribute(c);break}h=On(""+h),a.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(c==="formAction"?(s!=="input"&&zt(a,s,"name",v.name,v,null),zt(a,s,"formEncType",v.formEncType,v,null),zt(a,s,"formMethod",v.formMethod,v,null),zt(a,s,"formTarget",v.formTarget,v,null)):(zt(a,s,"encType",v.encType,v,null),zt(a,s,"method",v.method,v,null),zt(a,s,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){a.removeAttribute(c);break}h=On(""+h),a.setAttribute(c,h);break;case"onClick":h!=null&&(a.onclick=Gn);break;case"onScroll":h!=null&&ht("scroll",a);break;case"onScrollEnd":h!=null&&ht("scrollend",a);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(n(60));a.innerHTML=c}}break;case"multiple":a.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":a.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){a.removeAttribute("xlink:href");break}c=On(""+h),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?a.setAttribute(c,""+h):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":h===!0?a.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?a.setAttribute(c,h):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?a.setAttribute(c,h):a.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?a.removeAttribute(c):a.setAttribute(c,h);break;case"popover":ht("beforetoggle",a),ht("toggle",a),Bi(a,"popover",h);break;case"xlinkActuate":zi(a,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":zi(a,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":zi(a,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":zi(a,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":zi(a,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":zi(a,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":zi(a,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":zi(a,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":zi(a,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Bi(a,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ud.get(c)||c,Bi(a,c,h))}}function Pb(a,s,c,h,v,g){switch(c){case"style":Pd(a,h,g);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(n(60));a.innerHTML=c}}break;case"children":typeof h=="string"?gi(a,h):(typeof h=="number"||typeof h=="bigint")&&gi(a,""+h);break;case"onScroll":h!=null&&ht("scroll",a);break;case"onScrollEnd":h!=null&&ht("scrollend",a);break;case"onClick":h!=null&&(a.onclick=Gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Es.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),s=c.slice(2,v?c.length-7:void 0),g=a[zr]||null,g=g!=null?g[c]:null,typeof g=="function"&&a.removeEventListener(s,g,v),typeof h=="function")){typeof g!="function"&&g!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(s,h,v);break e}c in a?a[c]=h:h===!0?a.setAttribute(c,""):Bi(a,c,h)}}}function sn(a,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",a),ht("load",a);var h=!1,v=!1,g;for(g in c)if(c.hasOwnProperty(g)){var A=c[g];if(A!=null)switch(g){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:zt(a,s,g,A,c,null)}}v&&zt(a,s,"srcSet",c.srcSet,c,null),h&&zt(a,s,"src",c.src,c,null);return;case"input":ht("invalid",a);var N=g=A=v=null,B=null,ee=null;for(h in c)if(c.hasOwnProperty(h)){var ue=c[h];if(ue!=null)switch(h){case"name":v=ue;break;case"type":A=ue;break;case"checked":B=ue;break;case"defaultChecked":ee=ue;break;case"value":g=ue;break;case"defaultValue":N=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(n(137,s));break;default:zt(a,s,h,ue,c,null)}}Cd(a,g,N,B,ee,A,v,!1);return;case"select":ht("invalid",a),h=A=g=null;for(v in c)if(c.hasOwnProperty(v)&&(N=c[v],N!=null))switch(v){case"value":g=N;break;case"defaultValue":A=N;break;case"multiple":h=N;default:zt(a,s,v,N,c,null)}s=g,c=A,a.multiple=!!h,s!=null?An(a,!!h,s,!1):c!=null&&An(a,!!h,c,!0);return;case"textarea":ht("invalid",a),g=v=h=null;for(A in c)if(c.hasOwnProperty(A)&&(N=c[A],N!=null))switch(A){case"value":h=N;break;case"defaultValue":v=N;break;case"children":g=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(n(91));break;default:zt(a,s,A,N,c,null)}Nd(a,h,v,g);return;case"option":for(B in c)c.hasOwnProperty(B)&&(h=c[B],h!=null)&&(B==="selected"?a.selected=h&&typeof h!="function"&&typeof h!="symbol":zt(a,s,B,h,c,null));return;case"dialog":ht("beforetoggle",a),ht("toggle",a),ht("cancel",a),ht("close",a);break;case"iframe":case"object":ht("load",a);break;case"video":case"audio":for(h=0;h<gh.length;h++)ht(gh[h],a);break;case"image":ht("error",a),ht("load",a);break;case"details":ht("toggle",a);break;case"embed":case"source":case"link":ht("error",a),ht("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in c)if(c.hasOwnProperty(ee)&&(h=c[ee],h!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:zt(a,s,ee,h,c,null)}return;default:if(Bu(s)){for(ue in c)c.hasOwnProperty(ue)&&(h=c[ue],h!==void 0&&Pb(a,s,ue,h,c,void 0));return}}for(N in c)c.hasOwnProperty(N)&&(h=c[N],h!=null&&zt(a,s,N,h,c,null))}function h6(a,s,c,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,g=null,A=null,N=null,B=null,ee=null,ue=null;for(oe in c){var de=c[oe];if(c.hasOwnProperty(oe)&&de!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":B=de;default:h.hasOwnProperty(oe)||zt(a,s,oe,null,h,de)}}for(var re in h){var oe=h[re];if(de=c[re],h.hasOwnProperty(re)&&(oe!=null||de!=null))switch(re){case"type":g=oe;break;case"name":v=oe;break;case"checked":ee=oe;break;case"defaultChecked":ue=oe;break;case"value":A=oe;break;case"defaultValue":N=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(137,s));break;default:oe!==de&&zt(a,s,re,oe,h,de)}}Rd(a,A,N,B,ee,ue,g,v);return;case"select":oe=A=N=re=null;for(g in c)if(B=c[g],c.hasOwnProperty(g)&&B!=null)switch(g){case"value":break;case"multiple":oe=B;default:h.hasOwnProperty(g)||zt(a,s,g,null,h,B)}for(v in h)if(g=h[v],B=c[v],h.hasOwnProperty(v)&&(g!=null||B!=null))switch(v){case"value":re=g;break;case"defaultValue":N=g;break;case"multiple":A=g;default:g!==B&&zt(a,s,v,g,h,B)}s=N,c=A,h=oe,re!=null?An(a,!!c,re,!1):!!h!=!!c&&(s!=null?An(a,!!c,s,!0):An(a,!!c,c?[]:"",!1));return;case"textarea":oe=re=null;for(N in c)if(v=c[N],c.hasOwnProperty(N)&&v!=null&&!h.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:zt(a,s,N,null,h,v)}for(A in h)if(v=h[A],g=c[A],h.hasOwnProperty(A)&&(v!=null||g!=null))switch(A){case"value":re=v;break;case"defaultValue":oe=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==g&&zt(a,s,A,v,h,g)}xd(a,re,oe);return;case"option":for(var Pe in c)re=c[Pe],c.hasOwnProperty(Pe)&&re!=null&&!h.hasOwnProperty(Pe)&&(Pe==="selected"?a.selected=!1:zt(a,s,Pe,null,h,re));for(B in h)re=h[B],oe=c[B],h.hasOwnProperty(B)&&re!==oe&&(re!=null||oe!=null)&&(B==="selected"?a.selected=re&&typeof re!="function"&&typeof re!="symbol":zt(a,s,B,re,h,oe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in c)re=c[Ge],c.hasOwnProperty(Ge)&&re!=null&&!h.hasOwnProperty(Ge)&&zt(a,s,Ge,null,h,re);for(ee in h)if(re=h[ee],oe=c[ee],h.hasOwnProperty(ee)&&re!==oe&&(re!=null||oe!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(n(137,s));break;default:zt(a,s,ee,re,h,oe)}return;default:if(Bu(s)){for(var $t in c)re=c[$t],c.hasOwnProperty($t)&&re!==void 0&&!h.hasOwnProperty($t)&&Pb(a,s,$t,void 0,h,re);for(ue in h)re=h[ue],oe=c[ue],!h.hasOwnProperty(ue)||re===oe||re===void 0&&oe===void 0||Pb(a,s,ue,re,h,oe);return}}for(var W in c)re=c[W],c.hasOwnProperty(W)&&re!=null&&!h.hasOwnProperty(W)&&zt(a,s,W,null,h,re);for(de in h)re=h[de],oe=c[de],!h.hasOwnProperty(de)||re===oe||re==null&&oe==null||zt(a,s,de,re,h,oe)}function vR(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function p6(){if(typeof performance.getEntriesByType=="function"){for(var a=0,s=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var v=c[h],g=v.transferSize,A=v.initiatorType,N=v.duration;if(g&&N&&vR(A)){for(A=0,N=v.responseEnd,h+=1;h<c.length;h++){var B=c[h],ee=B.startTime;if(ee>N)break;var ue=B.transferSize,de=B.initiatorType;ue&&vR(de)&&(B=B.responseEnd,A+=ue*(B<N?1:(N-ee)/(B-ee)))}if(--h,s+=8*(g+A)/(v.duration/1e3),a++,10<a)break}}if(0<a)return s/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Ub=null,qb=null;function rv(a){return a.nodeType===9?a:a.ownerDocument}function yR(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gR(a,s){if(a===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&s==="foreignObject"?0:a}function Db(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var jb=null;function m6(){var a=window.event;return a&&a.type==="popstate"?a===jb?!1:(jb=a,!0):(jb=null,!1)}var bR=typeof setTimeout=="function"?setTimeout:void 0,v6=typeof clearTimeout=="function"?clearTimeout:void 0,_R=typeof Promise=="function"?Promise:void 0,y6=typeof queueMicrotask=="function"?queueMicrotask:typeof _R<"u"?function(a){return _R.resolve(null).then(a).catch(g6)}:bR;function g6(a){setTimeout(function(){throw a})}function Ks(a){return a==="head"}function wR(a,s){var c=s,h=0;do{var v=c.nextSibling;if(a.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(h===0){a.removeChild(v),uf(s);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")_h(a.ownerDocument.documentElement);else if(c==="head"){c=a.ownerDocument.head,_h(c);for(var g=c.firstChild;g;){var A=g.nextSibling,N=g.nodeName;g[$r]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&g.rel.toLowerCase()==="stylesheet"||c.removeChild(g),g=A}}else c==="body"&&_h(a.ownerDocument.body);c=v}while(c);uf(s)}function SR(a,s){var c=a;a=0;do{var h=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(a===0)break;a--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||a++;c=h}while(c)}function Lb(a){var s=a.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Lb(c),_c(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function b6(a,s,c,h){for(;a.nodeType===1;){var v=c;if(a.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(h){if(!a[$r])switch(s){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(g=a.getAttribute("rel"),g==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(g!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(g=a.getAttribute("src"),(g!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&g&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(s==="input"&&a.type==="hidden"){var g=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===g)return a}else return a;if(a=Ki(a.nextSibling),a===null)break}return null}function _6(a,s,c){if(s==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=Ki(a.nextSibling),a===null))return null;return a}function ER(a,s){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!s||(a=Ki(a.nextSibling),a===null))return null;return a}function kb(a){return a.data==="$?"||a.data==="$~"}function Mb(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function w6(a,s){var c=a.ownerDocument;if(a.data==="$~")a._reactRetry=s;else if(a.data!=="$?"||c.readyState!=="loading")s();else{var h=function(){s(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),a._reactRetry=h}}function Ki(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return a}var Bb=null;function TR(a){a=a.nextSibling;for(var s=0;a;){if(a.nodeType===8){var c=a.data;if(c==="/$"||c==="/&"){if(s===0)return Ki(a.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}a=a.nextSibling}return null}function AR(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return a;s--}else c!=="/$"&&c!=="/&"||s++}a=a.previousSibling}return null}function OR(a,s,c){switch(s=rv(c),a){case"html":if(a=s.documentElement,!a)throw Error(n(452));return a;case"head":if(a=s.head,!a)throw Error(n(453));return a;case"body":if(a=s.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function _h(a){for(var s=a.attributes;s.length;)a.removeAttributeNode(s[0]);_c(a)}var Qi=new Map,RR=new Set;function nv(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var es=J.d;J.d={f:S6,r:E6,D:T6,C:A6,L:O6,m:R6,X:I6,S:C6,M:x6};function S6(){var a=es.f(),s=Ym();return a||s}function E6(a){var s=Ua(a);s!==null&&s.tag===5&&s.type==="form"?HA(s):es.r(a)}var of=typeof document>"u"?null:document;function CR(a,s,c){var h=of;if(h&&typeof s=="string"&&s){var v=Hn(s);v='link[rel="'+a+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),RR.has(v)||(RR.add(v),a={rel:a,crossOrigin:c,href:s},h.querySelector(v)===null&&(s=h.createElement("link"),sn(s,"link",a),dr(s),h.head.appendChild(s)))}}function T6(a){es.D(a),CR("dns-prefetch",a,null)}function A6(a,s){es.C(a,s),CR("preconnect",a,s)}function O6(a,s,c){es.L(a,s,c);var h=of;if(h&&a&&s){var v='link[rel="preload"][as="'+Hn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+Hn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+Hn(c.imageSizes)+'"]')):v+='[href="'+Hn(a)+'"]';var g=v;switch(s){case"style":g=af(a);break;case"script":g=sf(a)}Qi.has(g)||(a=m({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:a,as:s},c),Qi.set(g,a),h.querySelector(v)!==null||s==="style"&&h.querySelector(wh(g))||s==="script"&&h.querySelector(Sh(g))||(s=h.createElement("link"),sn(s,"link",a),dr(s),h.head.appendChild(s)))}}function R6(a,s){es.m(a,s);var c=of;if(c&&a){var h=s&&typeof s.as=="string"?s.as:"script",v='link[rel="modulepreload"][as="'+Hn(h)+'"][href="'+Hn(a)+'"]',g=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=sf(a)}if(!Qi.has(g)&&(a=m({rel:"modulepreload",href:a},s),Qi.set(g,a),c.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Sh(g)))return}h=c.createElement("link"),sn(h,"link",a),dr(h),c.head.appendChild(h)}}}function C6(a,s,c){es.S(a,s,c);var h=of;if(h&&a){var v=Ao(h).hoistableStyles,g=af(a);s=s||"default";var A=v.get(g);if(!A){var N={loading:0,preload:null};if(A=h.querySelector(wh(g)))N.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":s},c),(c=Qi.get(g))&&zb(a,c);var B=A=h.createElement("link");dr(B),sn(B,"link",a),B._p=new Promise(function(ee,ue){B.onload=ee,B.onerror=ue}),B.addEventListener("load",function(){N.loading|=1}),B.addEventListener("error",function(){N.loading|=2}),N.loading|=4,iv(A,s,h)}A={type:"stylesheet",instance:A,count:1,state:N},v.set(g,A)}}}function I6(a,s){es.X(a,s);var c=of;if(c&&a){var h=Ao(c).hoistableScripts,v=sf(a),g=h.get(v);g||(g=c.querySelector(Sh(v)),g||(a=m({src:a,async:!0},s),(s=Qi.get(v))&&$b(a,s),g=c.createElement("script"),dr(g),sn(g,"link",a),c.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},h.set(v,g))}}function x6(a,s){es.M(a,s);var c=of;if(c&&a){var h=Ao(c).hoistableScripts,v=sf(a),g=h.get(v);g||(g=c.querySelector(Sh(v)),g||(a=m({src:a,async:!0,type:"module"},s),(s=Qi.get(v))&&$b(a,s),g=c.createElement("script"),dr(g),sn(g,"link",a),c.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},h.set(v,g))}}function IR(a,s,c,h){var v=(v=be.current)?nv(v):null;if(!v)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=af(c.href),c=Ao(v).hoistableStyles,h=c.get(s),h||(h={type:"style",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=af(c.href);var g=Ao(v).hoistableStyles,A=g.get(a);if(A||(v=v.ownerDocument||v,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(a,A),(g=v.querySelector(wh(a)))&&!g._p&&(A.instance=g,A.state.loading=5),Qi.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Qi.set(a,c),g||N6(v,a,c,A.state))),s&&h===null)throw Error(n(528,""));return A}if(s&&h!==null)throw Error(n(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=sf(c),c=Ao(v).hoistableScripts,h=c.get(s),h||(h={type:"script",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function af(a){return'href="'+Hn(a)+'"'}function wh(a){return'link[rel="stylesheet"]['+a+"]"}function xR(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function N6(a,s,c,h){a.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=a.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),sn(s,"link",c),dr(s),a.head.appendChild(s))}function sf(a){return'[src="'+Hn(a)+'"]'}function Sh(a){return"script[async]"+a}function NR(a,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var h=a.querySelector('style[data-href~="'+Hn(c.href)+'"]');if(h)return s.instance=h,dr(h),h;var v=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(a.ownerDocument||a).createElement("style"),dr(h),sn(h,"style",v),iv(h,c.precedence,a),s.instance=h;case"stylesheet":v=af(c.href);var g=a.querySelector(wh(v));if(g)return s.state.loading|=4,s.instance=g,dr(g),g;h=xR(c),(v=Qi.get(v))&&zb(h,v),g=(a.ownerDocument||a).createElement("link"),dr(g);var A=g;return A._p=new Promise(function(N,B){A.onload=N,A.onerror=B}),sn(g,"link",h),s.state.loading|=4,iv(g,c.precedence,a),s.instance=g;case"script":return g=sf(c.src),(v=a.querySelector(Sh(g)))?(s.instance=v,dr(v),v):(h=c,(v=Qi.get(g))&&(h=m({},c),$b(h,v)),a=a.ownerDocument||a,v=a.createElement("script"),dr(v),sn(v,"link",h),a.head.appendChild(v),s.instance=v);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,iv(h,c.precedence,a));return s.instance}function iv(a,s,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,g=v,A=0;A<h.length;A++){var N=h[A];if(N.dataset.precedence===s)g=N;else if(g!==v)break}g?g.parentNode.insertBefore(a,g.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(a,s.firstChild))}function zb(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.title==null&&(a.title=s.title)}function $b(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.integrity==null&&(a.integrity=s.integrity)}var ov=null;function PR(a,s,c){if(ov===null){var h=new Map,v=ov=new Map;v.set(c,h)}else v=ov,h=v.get(c),h||(h=new Map,v.set(c,h));if(h.has(a))return h;for(h.set(a,null),c=c.getElementsByTagName(a),v=0;v<c.length;v++){var g=c[v];if(!(g[$r]||g[fr]||a==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var A=g.getAttribute(s)||"";A=a+A;var N=h.get(A);N?N.push(g):h.set(A,[g])}}return h}function UR(a,s,c){a=a.ownerDocument||a,a.head.insertBefore(c,s==="title"?a.querySelector("head > title"):null)}function P6(a,s,c){if(c===1||s.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(a=s.disabled,typeof s.precedence=="string"&&a==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function qR(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function U6(a,s,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=af(h.href),g=s.querySelector(wh(v));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(a.count++,a=av.bind(a),s.then(a,a)),c.state.loading|=4,c.instance=g,dr(g);return}g=s.ownerDocument||s,h=xR(h),(v=Qi.get(v))&&zb(h,v),g=g.createElement("link"),dr(g);var A=g;A._p=new Promise(function(N,B){A.onload=N,A.onerror=B}),sn(g,"link",h),c.instance=g}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(a.count++,c=av.bind(a),s.addEventListener("load",c),s.addEventListener("error",c))}}var Fb=0;function q6(a,s){return a.stylesheets&&a.count===0&&uv(a,a.stylesheets),0<a.count||0<a.imgCount?function(c){var h=setTimeout(function(){if(a.stylesheets&&uv(a,a.stylesheets),a.unsuspend){var g=a.unsuspend;a.unsuspend=null,g()}},6e4+s);0<a.imgBytes&&Fb===0&&(Fb=62500*p6());var v=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&uv(a,a.stylesheets),a.unsuspend)){var g=a.unsuspend;a.unsuspend=null,g()}},(a.imgBytes>Fb?50:800)+s);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(h),clearTimeout(v)}}:null}function av(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uv(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var sv=null;function uv(a,s){a.stylesheets=null,a.unsuspend!==null&&(a.count++,sv=new Map,s.forEach(D6,a),sv=null,av.call(a))}function D6(a,s){if(!(s.state.loading&4)){var c=sv.get(a);if(c)var h=c.get(null);else{c=new Map,sv.set(a,c);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<v.length;g++){var A=v[g];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(c.set(A.dataset.precedence,A),h=A)}h&&c.set(null,h)}v=s.instance,A=v.getAttribute("data-precedence"),g=c.get(A)||h,g===h&&c.set(null,v),c.set(A,v),this.count++,h=av.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),g?g.parentNode.insertBefore(v,g.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),s.state.loading|=4}}var Eh={$$typeof:C,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function j6(a,s,c,h,v,g,A,N,B){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.hiddenUpdates=Mi(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=g,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function DR(a,s,c,h,v,g,A,N,B,ee,ue,de){return a=new j6(a,s,c,A,B,ee,ue,de,N),s=1,g===!0&&(s|=24),g=Si(3,null,null,s),a.current=g,g.stateNode=a,s=S0(),s.refCount++,a.pooledCache=s,s.refCount++,g.memoizedState={element:h,isDehydrated:c,cache:s},O0(g),a}function jR(a){return a?(a=Lc,a):Lc}function LR(a,s,c,h,v,g){v=jR(v),h.context===null?h.context=v:h.pendingContext=v,h=ks(s),h.payload={element:c},g=g===void 0?null:g,g!==null&&(h.callback=g),c=Ms(a,h,s),c!==null&&(Jn(c,a,s),th(c,a,s))}function kR(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<s?c:s}}function Hb(a,s){kR(a,s),(a=a.alternate)&&kR(a,s)}function MR(a){if(a.tag===13||a.tag===31){var s=nl(a,67108864);s!==null&&Jn(s,a,67108864),Hb(a,67108864)}}function BR(a){if(a.tag===13||a.tag===31){var s=Ri();s=Na(s);var c=nl(a,s);c!==null&&Jn(c,a,s),Hb(a,s)}}var lv=!0;function L6(a,s,c,h){var v=M.T;M.T=null;var g=J.p;try{J.p=2,Gb(a,s,c,h)}finally{J.p=g,M.T=v}}function k6(a,s,c,h){var v=M.T;M.T=null;var g=J.p;try{J.p=8,Gb(a,s,c,h)}finally{J.p=g,M.T=v}}function Gb(a,s,c,h){if(lv){var v=Wb(h);if(v===null)Nb(a,s,h,cv,c),$R(a,h);else if(B6(v,a,s,c,h))h.stopPropagation();else if($R(a,h),s&4&&-1<M6.indexOf(a)){for(;v!==null;){var g=Ua(v);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var A=qr(g.pendingLanes);if(A!==0){var N=g;for(N.pendingLanes|=2,N.entangledLanes|=2;A;){var B=1<<31-Ur(A);N.entanglements[1]|=B,A&=~B}fa(g),(Pt&6)===0&&(Wm=Zt()+500,yh(0))}}break;case 31:case 13:N=nl(g,2),N!==null&&Jn(N,g,2),Ym(),Hb(g,2)}if(g=Wb(h),g===null&&Nb(a,s,h,cv,c),g===v)break;v=g}v!==null&&h.stopPropagation()}else Nb(a,s,h,null,c)}}function Wb(a){return a=bi(a),Vb(a)}var cv=null;function Vb(a){if(cv=null,a=Zo(a),a!==null){var s=o(a);if(s===null)a=null;else{var c=s.tag;if(c===13){if(a=u(s),a!==null)return a;a=null}else if(c===31){if(a=f(s),a!==null)return a;a=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null)}}return cv=a,null}function zR(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Li()){case En:return 2;case Qo:return 8;case ir:case ln:return 32;case Tn:return 268435456;default:return 32}default:return 32}}var Yb=!1,Qs=null,Js=null,Xs=null,Th=new Map,Ah=new Map,Zs=[],M6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $R(a,s){switch(a){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":Th.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ah.delete(s.pointerId)}}function Oh(a,s,c,h,v,g){return a===null||a.nativeEvent!==g?(a={blockedOn:s,domEventName:c,eventSystemFlags:h,nativeEvent:g,targetContainers:[v]},s!==null&&(s=Ua(s),s!==null&&MR(s)),a):(a.eventSystemFlags|=h,s=a.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),a)}function B6(a,s,c,h,v){switch(s){case"focusin":return Qs=Oh(Qs,a,s,c,h,v),!0;case"dragenter":return Js=Oh(Js,a,s,c,h,v),!0;case"mouseover":return Xs=Oh(Xs,a,s,c,h,v),!0;case"pointerover":var g=v.pointerId;return Th.set(g,Oh(Th.get(g)||null,a,s,c,h,v)),!0;case"gotpointercapture":return g=v.pointerId,Ah.set(g,Oh(Ah.get(g)||null,a,s,c,h,v)),!0}return!1}function FR(a){var s=Zo(a.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){a.blockedOn=s,Ad(a.priority,function(){BR(c)});return}}else if(s===31){if(s=f(c),s!==null){a.blockedOn=s,Ad(a.priority,function(){BR(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function fv(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var c=Wb(a.nativeEvent);if(c===null){c=a.nativeEvent;var h=new c.constructor(c.type,c);zu=h,c.target.dispatchEvent(h),zu=null}else return s=Ua(c),s!==null&&MR(s),a.blockedOn=c,!1;s.shift()}return!0}function HR(a,s,c){fv(a)&&c.delete(s)}function z6(){Yb=!1,Qs!==null&&fv(Qs)&&(Qs=null),Js!==null&&fv(Js)&&(Js=null),Xs!==null&&fv(Xs)&&(Xs=null),Th.forEach(HR),Ah.forEach(HR)}function dv(a,s){a.blockedOn===s&&(a.blockedOn=null,Yb||(Yb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,z6)))}var hv=null;function GR(a){hv!==a&&(hv=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){hv===a&&(hv=null);for(var s=0;s<a.length;s+=3){var c=a[s],h=a[s+1],v=a[s+2];if(typeof h!="function"){if(Vb(h||c)===null)continue;break}var g=Ua(c);g!==null&&(a.splice(s,3),s-=3,W0(g,{pending:!0,data:v,method:c.method,action:h},h,v))}}))}function uf(a){function s(B){return dv(B,a)}Qs!==null&&dv(Qs,a),Js!==null&&dv(Js,a),Xs!==null&&dv(Xs,a),Th.forEach(s),Ah.forEach(s);for(var c=0;c<Zs.length;c++){var h=Zs[c];h.blockedOn===a&&(h.blockedOn=null)}for(;0<Zs.length&&(c=Zs[0],c.blockedOn===null);)FR(c),c.blockedOn===null&&Zs.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var v=c[h],g=c[h+1],A=v[zr]||null;if(typeof g=="function")A||GR(c);else if(A){var N=null;if(g&&g.hasAttribute("formAction")){if(v=g,A=g[zr]||null)N=A.formAction;else if(Vb(v)!==null)continue}else N=A.action;typeof N=="function"?c[h+1]=N:(c.splice(h,3),h-=3),GR(c)}}}function WR(){function a(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(A){return v=A})},focusReset:"manual",scroll:"manual"})}function s(){v!==null&&(v(),v=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,v=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),v!==null&&(v(),v=null)}}}function Kb(a){this._internalRoot=a}pv.prototype.render=Kb.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(n(409));var c=s.current,h=Ri();LR(c,h,a,s,null,null)},pv.prototype.unmount=Kb.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;LR(a.current,2,null,a,null,null),Ym(),s[Pa]=null}};function pv(a){this._internalRoot=a}pv.prototype.unstable_scheduleHydration=function(a){if(a){var s=gc();a={blockedOn:null,target:a,priority:s};for(var c=0;c<Zs.length&&s!==0&&s<Zs[c].priority;c++);Zs.splice(c,0,a),c===0&&FR(a)}};var VR=e.version;if(VR!=="19.2.3")throw Error(n(527,VR,"19.2.3"));J.findDOMNode=function(a){var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=l(s),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var $6={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mv.isDisabled&&mv.supportsFiber)try{or=mv.inject($6),Yt=mv}catch{}}return Ch.createRoot=function(a,s){if(!i(a))throw Error(n(299));var c=!1,h="",v=eO,g=tO,A=rO;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(v=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=DR(a,1,!1,null,null,c,h,null,v,g,A,WR),a[Pa]=s.current,xb(a),new Kb(s)},Ch.hydrateRoot=function(a,s,c){if(!i(a))throw Error(n(299));var h=!1,v="",g=eO,A=tO,N=rO,B=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(g=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(N=c.onRecoverableError),c.formState!==void 0&&(B=c.formState)),s=DR(a,1,!0,s,c??null,h,v,B,g,A,N,WR),s.context=jR(null),c=s.current,h=Ri(),h=Na(h),v=ks(h),v.callback=null,Ms(c,v,h),c=h,s.current.lanes=c,Nt(s,c),fa(s),a[Pa]=s.current,xb(a),new pv(s)},Ch.version="19.2.3",Ch}var nC;function X6(){if(nC)return Xb.exports;nC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xb.exports=J6(),Xb.exports}var Z6=X6();const eB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tB=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),iC=t=>{const e=tB(t);return e.charAt(0).toUpperCase()+e.slice(1)},pD=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim(),rB=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var nB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const iB=xe.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:u,...f},p)=>xe.createElement("svg",{ref:p,...nB,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:pD("lucide",i),...!o&&!rB(f)&&{"aria-hidden":"true"},...f},[...u.map(([l,d])=>xe.createElement(l,d)),...Array.isArray(o)?o:[o]]));const un=(t,e)=>{const r=xe.forwardRef(({className:n,...i},o)=>xe.createElement(iB,{ref:o,iconNode:e,className:pD(`lucide-${eB(iC(t))}`,`lucide-${t}`,n),...i}));return r.displayName=iC(t),r};const oB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],aB=un("circle-alert",oB);const sB=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],uB=un("circle-check-big",sB);const lB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],cB=un("circle-check",lB);const fB=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dB=un("eye",fB);const hB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],mD=un("info",hB);const pB=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],mB=un("layout-grid",pB);const vB=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],yB=un("loader-circle",vB);const gB=[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],bB=un("octagon-x",gB);const _B=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],oC=un("plus",_B);const wB=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],SB=un("refresh-cw",wB);const EB=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],TB=un("search",EB);const AB=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],OB=un("send",AB);const RB=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],CB=un("sparkles",RB);const IB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xB=un("triangle-alert",IB);const NB=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],PB=un("volume-2",NB);const UB=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],qB=un("volume-x",UB);const DB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],iE=un("x",DB),Bo={minLength:5,maxLength:300,maxAuthorLength:20},ss={initialTokens:10,rewardPerSubmit:2,costPerDraw:1},oE={purple:{bg:"from-purple-900 via-fuchsia-900 to-purple-950",accent:"fuchsia-400",glow:"fuchsia-500"},blue:{bg:"from-blue-900 via-indigo-900 to-blue-950",accent:"blue-400",glow:"blue-500"},pink:{bg:"from-pink-900 via-rose-900 to-pink-950",accent:"pink-400",glow:"pink-500"},gold:{bg:"from-amber-900 via-yellow-900 to-amber-950",accent:"yellow-400",glow:"yellow-500"},red:{bg:"from-red-950 via-rose-950 to-red-950",accent:"red-400",glow:"red-500"},green:{bg:"from-emerald-900 via-green-900 to-emerald-950",accent:"emerald-400",glow:"emerald-500"},cyan:{bg:"from-cyan-900 via-teal-900 to-cyan-950",accent:"cyan-400",glow:"cyan-500"},rainbow:{bg:"from-violet-900 via-purple-900 via-pink-900 via-red-900 via-orange-900 via-yellow-900 via-green-900 via-cyan-900 via-blue-900 to-violet-950",accent:"violet-400",glow:"violet-500"}},jB=({index:t,isDispensing:e,isVisible:r})=>{const n=[["#c084fc","#818cf8"],["#f9a8d4","#c084fc"],["#7dd3fc","#a78bfa"],["#fcd34d","#f472b6"],["#86efac","#67e8f9"],["#fda4af","#c4b5fd"]],[i,o]=n[t%n.length],u=[{left:18,top:22},{left:42,top:18},{left:68,top:25},{left:28,top:42},{left:52,top:48},{left:75,top:38},{left:15,top:58},{left:38,top:65},{left:62,top:62},{left:82,top:55},{left:25,top:78},{left:48,top:82},{left:72,top:75},{left:35,top:35},{left:58,top:30}],f=u[t%u.length];return G.jsx("div",{"code-path":"src/sections/GachaMachine.tsx:52:5",className:`absolute transition-all duration-700 ${e?"opacity-0 scale-150":""}`,style:{width:"45px",height:"45px",left:`${f.left}%`,top:`${f.top}%`,opacity:r?.85:0,transform:r?"scale(1)":"scale(0.5)",transition:`opacity 0.6s ease-out ${t*.08}s, transform 0.6s ease-out ${t*.08}s`,animation:r?`float-orb ${5+t%4}s ease-in-out infinite`:"none",animationDelay:`${t*.3}s`},children:G.jsx("div",{"code-path":"src/sections/GachaMachine.tsx:66:7",className:"w-full h-full rounded-full",style:{background:`radial-gradient(circle at 30% 30%, ${i}, ${o})`,filter:"blur(8px)",boxShadow:`0 0 40px ${i}60, 0 0 80px ${o}40`}})})},LB=({gacha:t})=>{const e=oE[t.theme||"purple"];return G.jsx("div",{"code-path":"src/sections/GachaMachine.tsx:83:5",className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 z-20",style:{animation:"dispense-drop 1s ease-out forwards"},children:G.jsx("div",{"code-path":"src/sections/GachaMachine.tsx:87:7",className:"w-full h-full rounded-full",style:{background:`radial-gradient(circle at 30% 30%, ${e.accent}, ${e.glow})`,filter:"blur(12px)",boxShadow:`0 0 60px ${e.glow}80`}})})},kB=({theme:t})=>{const e=oE[t]||oE.purple;return G.jsxs(G.Fragment,{children:[G.jsx("div",{"code-path":"src/sections/GachaMachine.tsx:106:7",className:"absolute -top-32 left-1/2 -translate-x-1/2 w-64 h-64",style:{animation:"pulse-glow 4s ease-in-out infinite"},children:G.jsx("div",{"code-path":"src/sections/GachaMachine.tsx:110:9",className:"w-full h-full rounded-full",style:{background:`radial-gradient(circle, ${e.accent}40 0%, ${e.glow}20 40%, transparent 70%)`,filter:"blur(30px)"}})}),G.jsx("div",{"code-path":"src/sections/GachaMachine.tsx:120:7",className:"fixed inset-0 pointer-events-none transition-all duration-1000",style:{background:`radial-gradient(ellipse at 50% 30%, ${e.glow}15 0%, transparent 60%)`}}),Array.from({length:8}).map((r,n)=>G.jsx("div",{"code-path":"src/sections/GachaMachine.tsx:129:9",className:"absolute w-2 h-2 rounded-full",style:{left:`${20+n*8}%`,top:`${10+n%3*15}%`,background:e.accent,filter:"blur(4px)",opacity:.4,animation:`float-particle ${3+n*.5}s ease-in-out infinite`,animationDelay:`${n*.2}s`}},n))]})};function MB({onDispense:t,onCreateClick:e,onCollectionClick:r,totalCount:n,userCount:i,tokens:o,onCollectGacha:u,collectedCount:f,isPlaying:p,toggleMusic:l,playSound:d}){const[m,y]=xe.useState("idle"),[b,w]=xe.useState(null),[S,E]=xe.useState(!1),[R,O]=xe.useState(!1),C=xe.useRef(null);setTimeout(()=>O(!0),150);const I=xe.useCallback(()=>{if(d("click"),m!=="idle")return;const q=t();q&&(w(q),y("dispensing"),d("dispense"),setTimeout(()=>{y("revealed"),d("reveal"),u&&u(q)},1e3))},[m,t,u,d]),P=xe.useCallback(()=>{d("click"),y("idle"),w(null)},[d]),D=Array.from({length:25},(q,U)=>({id:U,x:Math.random()*100,y:Math.random()*100,size:Math.random()*1.5+.5,duration:Math.random()*25+20,delay:Math.random()*8})),j=()=>m!=="revealed"||!b?.theme?"":{purple:"rgba(60, 10, 80, 0.5)",blue:"rgba(10, 30, 80, 0.5)",pink:"rgba(80, 10, 50, 0.5)",gold:"rgba(60, 40, 10, 0.5)",red:"rgba(80, 10, 20, 0.5)",green:"rgba(10, 50, 30, 0.5)",cyan:"rgba(10, 50, 60, 0.5)",rainbow:"rgba(60, 10, 80, 0.5)"}[b.theme]||"";return G.jsxs("div",{"code-path":"src/sections/GachaMachine.tsx:225:5",ref:C,className:"relative min-h-screen w-full overflow-hidden bg-[#050508] transition-all duration-1000",style:m==="revealed"&&b?.theme?{background:`linear-gradient(180deg, ${j()} 0%, #050508 30%, #050508 100%)`}:void 0,children:[G.jsxs("div",{"code-path":"src/sections/GachaMachine.tsx:233:7",className:"absolute inset-0",children:[G.jsx("div",{"code-path":"src/sections/GachaMachine.tsx:234:9",className:"absolute inset-0 opacity-40",style:{background:"radial-gradient(ellipse at 30% 70%, rgba(139, 92, 246, 0.12) 0%, transparent 50%), radial-gradient(ellipse at 70% 30%, rgba(236, 72, 153, 0.08) 0%, transparent 50%)"}}),D.map(q=>G.jsx("div",{"code-path":"src/sections/GachaMachine.tsx:242:11",className:"absolute rounded-full bg-white/10",style:{left:`${q.x}%`,top:`${q.y}%`,width:`${q.size}px`,height:`${q.size}px`,animation:`particle-float ${q.duration}s linear infinite`,animationDelay:`${q.delay}s`}},q.id))]}),m==="revealed"&&b&&G.jsx(kB,{"code-path":"src/sections/GachaMachine.tsx:259:9",theme:b.theme}),G.jsxs("nav",{"code-path":"src/sections/GachaMachine.tsx:263:7",className:"relative z-50 flex items-center justify-between px-4 sm:px-8 py-4 sm:py-5",children:[G.jsxs("div",{"code-path":"src/sections/GachaMachine.tsx:264:9",className:"flex items-center gap-4 sm:gap-6",children:[G.jsx("h1",{"code-path":"src/sections/GachaMachine.tsx:265:11",className:"text-white/80 text-sm sm:text-base font-light tracking-wide",children:""}),G.jsx("div",{"code-path":"src/sections/GachaMachine.tsx:266:11",className:"hidden sm:flex items-center text-white/30 text-xs",children:G.jsxs("span",{"code-path":"src/sections/GachaMachine.tsx:267:13",children:[" ",n]})})]}),G.jsxs("div",{"code-path":"src/sections/GachaMachine.tsx:271:9",className:"flex items-center gap-1.5 sm:gap-2",children:[G.jsxs("div",{"code-path":"src/sections/GachaMachine.tsx:272:11",className:"flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 bg-white/5 rounded-full",children:[G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:273:13",className:"text-white/60 text-sm",children:o}),G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:274:13",className:"text-white/30 text-xs",children:""})]}),G.jsxs("button",{"code-path":"src/sections/GachaMachine.tsx:278:11",onClick:()=>{e(),d("click")},className:"flex items-center gap-1 px-2.5 sm:px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-full border border-white/10 hover:border-white/25 transition-all",children:[G.jsx(oC,{"code-path":"src/sections/GachaMachine.tsx:282:13",className:"w-3.5 sm:w-4 h-3.5 sm:h-4 text-white/50"}),G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:283:13",className:"text-white/60 text-xs hidden sm:inline",children:""})]}),G.jsxs("button",{"code-path":"src/sections/GachaMachine.tsx:286:11",onClick:()=>{r(),d("click")},className:"group relative flex items-center gap-1.5 px-3 sm:px-3.5 py-1.5 bg-white/5 hover:bg-white/10 rounded-full border border-white/10 hover:border-white/25 transition-all",children:[G.jsx(CB,{"code-path":"src/sections/GachaMachine.tsx:290:13",className:"w-3.5 sm:w-4 h-3.5 sm:h-4 text-purple-400/70 group-hover:text-purple-400 transition-colors"}),G.jsx(mB,{"code-path":"src/sections/GachaMachine.tsx:291:13",className:"w-3.5 sm:w-4 h-3.5 sm:h-4 text-white/50 group-hover:text-white/70 transition-colors"}),G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:292:13",className:"text-white/60 group-hover:text-white/80 text-xs font-medium transition-colors",children:f}),f>0&&G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:295:15",className:"absolute -top-0.5 -right-0.5 w-2 h-2 bg-purple-400 rounded-full animate-pulse"})]}),G.jsx("button",{"code-path":"src/sections/GachaMachine.tsx:299:11",onClick:()=>{l(),d("click")},className:"p-1.5 sm:p-2 hover:bg-white/5 rounded-full transition-colors",children:p?G.jsx(PB,{"code-path":"src/sections/GachaMachine.tsx:303:26",className:"w-3.5 sm:w-4 h-3.5 sm:h-4 text-white/40"}):G.jsx(qB,{"code-path":"src/sections/GachaMachine.tsx:303:92",className:"w-3.5 sm:w-4 h-3.5 sm:h-4 text-white/20"})}),G.jsx("button",{"code-path":"src/sections/GachaMachine.tsx:306:11",onClick:()=>{E(!S),d("click")},className:"p-1.5 sm:p-2 hover:bg-white/5 rounded-full transition-colors",children:G.jsx(mD,{"code-path":"src/sections/GachaMachine.tsx:310:13",className:"w-3.5 sm:w-4 h-3.5 sm:h-4 text-white/40"})})]})]}),S&&G.jsx("div",{"code-path":"src/sections/GachaMachine.tsx:317:9",className:"absolute top-16 sm:top-20 left-1/2 -translate-x-1/2 z-40 px-5 sm:px-6 py-3 sm:py-4 bg-black/70 backdrop-blur-xl rounded-xl sm:rounded-2xl border border-white/10 shadow-2xl animate-fade-in",children:G.jsxs("div",{"code-path":"src/sections/GachaMachine.tsx:318:11",className:"text-center space-y-1.5 sm:space-y-2",children:[G.jsxs("p",{"code-path":"src/sections/GachaMachine.tsx:319:13",className:"text-white/80 text-xs sm:text-sm",children:[G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:320:15",className:"text-purple-400 font-medium",children:""}),"  ",G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:320:76",className:"text-white font-medium",children:"1"})," "]}),G.jsxs("p",{"code-path":"src/sections/GachaMachine.tsx:322:13",className:"text-white/80 text-xs sm:text-sm",children:[G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:323:15",className:"text-pink-400 font-medium",children:""}),"  ",G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:323:74",className:"text-white font-medium",children:"2"})," "]})]})}),G.jsxs("main",{"code-path":"src/sections/GachaMachine.tsx:330:7",className:"relative z-10 flex flex-col items-center justify-center min-h-[calc(100vh-80px)] sm:min-h-[calc(100vh-100px)] px-4",children:[G.jsxs("div",{"code-path":"src/sections/GachaMachine.tsx:333:9",className:"relative w-[300px] h-[300px] sm:w-[420px] sm:h-[420px]",children:[G.jsx("div",{"code-path":"src/sections/GachaMachine.tsx:336:11",className:"absolute inset-0",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.04) 0%, rgba(255,255,255,0.01) 100%)",animation:"container-breathe 12s ease-in-out infinite",boxShadow:"inset 0 0 60px rgba(255,255,255,0.02), 0 0 50px rgba(139,92,246,0.06)"}}),m==="idle"&&G.jsx("div",{"code-path":"src/sections/GachaMachine.tsx:347:13",className:"absolute inset-2",children:Array.from({length:15}).map((q,U)=>G.jsx(jB,{"code-path":"src/sections/GachaMachine.tsx:349:17",index:U,isDispensing:!1,isVisible:R},U))}),m==="dispensing"&&b&&G.jsx(LB,{"code-path":"src/sections/GachaMachine.tsx:361:13",gacha:b}),m==="idle"&&G.jsx("button",{"code-path":"src/sections/GachaMachine.tsx:366:13",onClick:I,disabled:o<ss.costPerDraw,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-30 px-8 sm:px-10 py-3 sm:py-4 bg-white/10 hover:bg-white/15 disabled:bg-white/5 disabled:cursor-not-allowed rounded-full border border-white/20 transition-all hover:scale-105 backdrop-blur-sm",children:G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:371:15",className:"text-white/90 text-sm sm:text-base font-light tracking-widest",children:o>=ss.costPerDraw?"":""})})]}),m==="revealed"&&b&&G.jsxs("div",{"code-path":"src/sections/GachaMachine.tsx:380:11",className:"mt-2 sm:mt-4 max-w-sm sm:max-w-md w-full animate-fade-in relative",children:[G.jsxs("div",{"code-path":"src/sections/GachaMachine.tsx:381:13",className:"relative p-6 sm:p-8 bg-white/5 backdrop-blur-xl rounded-2xl sm:rounded-3xl border border-white/10",children:[G.jsxs("p",{"code-path":"src/sections/GachaMachine.tsx:382:15",className:"text-white/70 text-base sm:text-lg leading-relaxed text-center font-light",children:['"',b.content,'"']}),G.jsxs("div",{"code-path":"src/sections/GachaMachine.tsx:385:15",className:"mt-4 sm:mt-6 flex items-center justify-center gap-2 sm:gap-3 text-white/30 text-xs",children:[b.author&&G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:386:43",children:b.author}),b.author&&G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:387:43",children:""}),G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:388:17",children:new Date(b.createdAt).toLocaleDateString()})]})]}),G.jsx("div",{"code-path":"src/sections/GachaMachine.tsx:393:13",className:"flex justify-center mt-6 sm:mt-8",children:G.jsxs("button",{"code-path":"src/sections/GachaMachine.tsx:394:15",onClick:P,className:"group relative flex items-center gap-2 px-8 sm:px-10 py-4 sm:py-5 bg-white/10 hover:bg-white/20 active:bg-white/25 rounded-full border border-white/30 hover:border-white/50 transition-all hover:scale-105 active:scale-95 shadow-lg shadow-white/5 hover:shadow-white/10",style:{minHeight:"56px",minWidth:"160px"},children:[G.jsx(SB,{"code-path":"src/sections/GachaMachine.tsx:399:17",className:"w-4 h-4 text-white/60 group-hover:rotate-180 transition-transform duration-500"}),G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:400:17",className:"text-white/80 text-sm sm:text-base font-medium tracking-wide",children:""}),G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:402:17",className:"absolute inset-0 rounded-full border border-white/20 animate-ping opacity-30"})]})})]}),m==="idle"&&o<ss.costPerDraw&&G.jsx("p",{"code-path":"src/sections/GachaMachine.tsx:410:11",className:"mt-4 text-white/40 text-xs text-center",children:""}),m==="idle"&&G.jsxs("button",{"code-path":"src/sections/GachaMachine.tsx:417:11",onClick:()=>{e(),d("click")},className:"mt-8 sm:mt-10 flex items-center gap-2 px-4 sm:px-5 py-2 sm:py-2.5 hover:bg-white/5 rounded-full border border-white/10 transition-all",children:[G.jsx(oC,{"code-path":"src/sections/GachaMachine.tsx:421:13",className:"w-3.5 sm:w-4 h-3.5 sm:h-4 text-white/40"}),G.jsx("span",{"code-path":"src/sections/GachaMachine.tsx:422:13",className:"text-white/40 text-xs sm:text-sm",children:""})]})]}),G.jsxs("footer",{"code-path":"src/sections/GachaMachine.tsx:428:7",className:"absolute bottom-4 sm:bottom-5 left-1/2 -translate-x-1/2 z-10 text-center",children:[G.jsx("p",{"code-path":"src/sections/GachaMachine.tsx:429:9",className:"text-white/20 text-xs tracking-wider",children:"Designed by Kalos and made with kimi"}),G.jsx("p",{"code-path":"src/sections/GachaMachine.tsx:430:9",className:"text-white/20 text-xs tracking-wider mt-1",children:"Music by NeutronStar714"})]}),G.jsx("style",{"code-path":"src/sections/GachaMachine.tsx:434:7",children:`
        @keyframes container-breathe {
          0%, 100% { border-radius: 48% 52% 58% 42% / 48% 52% 48% 52%; }
          25% { border-radius: 52% 48% 42% 58% / 52% 48% 52% 48%; }
          50% { border-radius: 42% 58% 52% 48% / 48% 52% 42% 58%; }
          75% { border-radius: 58% 42% 48% 52% / 52% 48% 58% 42%; }
        }
        
        @keyframes float-orb {
          0%, 100% { transform: translate(0, 0); }
          25% { transform: translate(8px, -12px); }
          50% { transform: translate(-5px, -18px); }
          75% { transform: translate(-10px, -8px); }
        }
        
        @keyframes pulse-glow {
          0%, 100% { opacity: 0.6; transform: scale(1); }
          50% { opacity: 1; transform: scale(1.1); }
        }
        
        @keyframes dispense-drop {
          0% { 
            transform: translate(-50%, -180%) scale(0.4);
            opacity: 0;
          }
          30% { opacity: 1; }
          60% { transform: translate(-50%, -20%) scale(1.2); }
          100% { transform: translate(-50%, 0%) scale(1); opacity: 1; }
        }
        
        @keyframes particle-float {
          0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
          10% { opacity: 0.12; }
          90% { opacity: 0.12; }
          100% { transform: translateY(-100vh) rotate(720deg); opacity: 0; }
        }
        
        @keyframes float-particle {
          0%, 100% { transform: translateY(0) translateX(0); opacity: 0.3; }
          50% { transform: translateY(-20px) translateX(10px); opacity: 0.6; }
        }
        
        @keyframes fade-in {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in {
          animation: fade-in 0.3s ease-out forwards;
        }

        @keyframes wave-flow {
          0%, 100% {
            d: path('M0,100 Q125,60 250,100 T500,100');
            opacity: 0.4;
          }
          25% {
            d: path('M0,100 Q125,140 250,100 T500,100');
            opacity: 0.7;
          }
          50% {
            d: path('M0,100 Q125,50 250,100 T500,100');
            opacity: 0.5;
          }
          75% {
            d: path('M0,100 Q125,150 250,100 T500,100');
            opacity: 0.8;
          }
        }

        @keyframes float-blob {
          0%, 100% {
            transform: translate(0, 0) scale(1);
            opacity: 0.3;
          }
          33% {
            transform: translate(15px, -20px) scale(1.2);
            opacity: 0.6;
          }
          66% {
            transform: translate(-10px, -10px) scale(0.9);
            opacity: 0.4;
          }
        }

        @keyframes pulse-center {
          0%, 100% {
            transform: translate(-50%, -50%) scale(1);
            opacity: 0.5;
          }
          50% {
            transform: translate(-50%, -50%) scale(1.3);
            opacity: 0.8;
          }
        }
      `})]})}function vD(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=vD(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function BB(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=vD(t))&&(n&&(n+=" "),n+=e);return n}const zB=(t,e)=>{const r=new Array(t.length+e.length);for(let n=0;n<t.length;n++)r[n]=t[n];for(let n=0;n<e.length;n++)r[t.length+n]=e[n];return r},$B=(t,e)=>({classGroupId:t,validator:e}),yD=(t=new Map,e=null,r)=>({nextPart:t,validators:e,classGroupId:r}),Uy="-",aC=[],FB="arbitrary..",HB=t=>{const e=WB(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:u=>{if(u.startsWith("[")&&u.endsWith("]"))return GB(u);const f=u.split(Uy),p=f[0]===""&&f.length>1?1:0;return gD(f,p,e)},getConflictingClassGroupIds:(u,f)=>{if(f){const p=n[u],l=r[u];return p?l?zB(l,p):p:l||aC}return r[u]||aC}}},gD=(t,e,r)=>{if(t.length-e===0)return r.classGroupId;const i=t[e],o=r.nextPart.get(i);if(o){const l=gD(t,e+1,o);if(l)return l}const u=r.validators;if(u===null)return;const f=e===0?t.join(Uy):t.slice(e).join(Uy),p=u.length;for(let l=0;l<p;l++){const d=u[l];if(d.validator(f))return d.classGroupId}},GB=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),r=e.indexOf(":"),n=e.slice(0,r);return n?FB+n:void 0})(),WB=t=>{const{theme:e,classGroups:r}=t;return VB(r,e)},VB=(t,e)=>{const r=yD();for(const n in t){const i=t[n];o2(i,r,n,e)}return r},o2=(t,e,r,n)=>{const i=t.length;for(let o=0;o<i;o++){const u=t[o];YB(u,e,r,n)}},YB=(t,e,r,n)=>{if(typeof t=="string"){KB(t,e,r);return}if(typeof t=="function"){QB(t,e,r,n);return}JB(t,e,r,n)},KB=(t,e,r)=>{const n=t===""?e:bD(e,t);n.classGroupId=r},QB=(t,e,r,n)=>{if(XB(t)){o2(t(n),e,r,n);return}e.validators===null&&(e.validators=[]),e.validators.push($B(r,t))},JB=(t,e,r,n)=>{const i=Object.entries(t),o=i.length;for(let u=0;u<o;u++){const[f,p]=i[u];o2(p,bD(e,f),r,n)}},bD=(t,e)=>{let r=t;const n=e.split(Uy),i=n.length;for(let o=0;o<i;o++){const u=n[o];let f=r.nextPart.get(u);f||(f=yD(),r.nextPart.set(u,f)),r=f}return r},XB=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,ZB=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=Object.create(null),n=Object.create(null);const i=(o,u)=>{r[o]=u,e++,e>t&&(e=0,n=r,r=Object.create(null))};return{get(o){let u=r[o];if(u!==void 0)return u;if((u=n[o])!==void 0)return i(o,u),u},set(o,u){o in r?r[o]=u:i(o,u)}}},aE="!",sC=":",e8=[],uC=(t,e,r,n,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:r,maybePostfixModifierPosition:n,isExternal:i}),t8=t=>{const{prefix:e,experimentalParseClassName:r}=t;let n=i=>{const o=[];let u=0,f=0,p=0,l;const d=i.length;for(let S=0;S<d;S++){const E=i[S];if(u===0&&f===0){if(E===sC){o.push(i.slice(p,S)),p=S+1;continue}if(E==="/"){l=S;continue}}E==="["?u++:E==="]"?u--:E==="("?f++:E===")"&&f--}const m=o.length===0?i:i.slice(p);let y=m,b=!1;m.endsWith(aE)?(y=m.slice(0,-1),b=!0):m.startsWith(aE)&&(y=m.slice(1),b=!0);const w=l&&l>p?l-p:void 0;return uC(o,b,y,w)};if(e){const i=e+sC,o=n;n=u=>u.startsWith(i)?o(u.slice(i.length)):uC(e8,!1,u,void 0,!0)}if(r){const i=n;n=o=>r({className:o,parseClassName:i})}return n},r8=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((r,n)=>{e.set(r,1e6+n)}),r=>{const n=[];let i=[];for(let o=0;o<r.length;o++){const u=r[o],f=u[0]==="[",p=e.has(u);f||p?(i.length>0&&(i.sort(),n.push(...i),i=[]),n.push(u)):i.push(u)}return i.length>0&&(i.sort(),n.push(...i)),n}},n8=t=>({cache:ZB(t.cacheSize),parseClassName:t8(t),sortModifiers:r8(t),...HB(t)}),i8=/\s+/,o8=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i,sortModifiers:o}=e,u=[],f=t.trim().split(i8);let p="";for(let l=f.length-1;l>=0;l-=1){const d=f[l],{isExternal:m,modifiers:y,hasImportantModifier:b,baseClassName:w,maybePostfixModifierPosition:S}=r(d);if(m){p=d+(p.length>0?" "+p:p);continue}let E=!!S,R=n(E?w.substring(0,S):w);if(!R){if(!E){p=d+(p.length>0?" "+p:p);continue}if(R=n(w),!R){p=d+(p.length>0?" "+p:p);continue}E=!1}const O=y.length===0?"":y.length===1?y[0]:o(y).join(":"),C=b?O+aE:O,I=C+R;if(u.indexOf(I)>-1)continue;u.push(I);const P=i(R,E);for(let D=0;D<P.length;++D){const j=P[D];u.push(C+j)}p=d+(p.length>0?" "+p:p)}return p},a8=(...t)=>{let e=0,r,n,i="";for(;e<t.length;)(r=t[e++])&&(n=_D(r))&&(i&&(i+=" "),i+=n);return i},_D=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=_D(t[n]))&&(r&&(r+=" "),r+=e);return r},s8=(t,...e)=>{let r,n,i,o;const u=p=>{const l=e.reduce((d,m)=>m(d),t());return r=n8(l),n=r.cache.get,i=r.cache.set,o=f,f(p)},f=p=>{const l=n(p);if(l)return l;const d=o8(p,r);return i(p,d),d};return o=u,(...p)=>o(a8(...p))},u8=[],Lr=t=>{const e=r=>r[t]||u8;return e.isThemeGetter=!0,e},wD=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,SD=/^\((?:(\w[\w-]*):)?(.+)\)$/i,l8=/^\d+\/\d+$/,c8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,f8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,d8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,h8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,p8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,lf=t=>l8.test(t),ct=t=>!!t&&!Number.isNaN(Number(t)),tu=t=>!!t&&Number.isInteger(Number(t)),r_=t=>t.endsWith("%")&&ct(t.slice(0,-1)),ts=t=>c8.test(t),m8=()=>!0,v8=t=>f8.test(t)&&!d8.test(t),ED=()=>!1,y8=t=>h8.test(t),g8=t=>p8.test(t),b8=t=>!Ue(t)&&!qe(t),_8=t=>pd(t,OD,ED),Ue=t=>wD.test(t),vl=t=>pd(t,RD,v8),n_=t=>pd(t,A8,ct),lC=t=>pd(t,TD,ED),w8=t=>pd(t,AD,g8),vv=t=>pd(t,CD,y8),qe=t=>SD.test(t),Ih=t=>md(t,RD),S8=t=>md(t,O8),cC=t=>md(t,TD),E8=t=>md(t,OD),T8=t=>md(t,AD),yv=t=>md(t,CD,!0),pd=(t,e,r)=>{const n=wD.exec(t);return n?n[1]?e(n[1]):r(n[2]):!1},md=(t,e,r=!1)=>{const n=SD.exec(t);return n?n[1]?e(n[1]):r:!1},TD=t=>t==="position"||t==="percentage",AD=t=>t==="image"||t==="url",OD=t=>t==="length"||t==="size"||t==="bg-size",RD=t=>t==="length",A8=t=>t==="number",O8=t=>t==="family-name",CD=t=>t==="shadow",R8=()=>{const t=Lr("color"),e=Lr("font"),r=Lr("text"),n=Lr("font-weight"),i=Lr("tracking"),o=Lr("leading"),u=Lr("breakpoint"),f=Lr("container"),p=Lr("spacing"),l=Lr("radius"),d=Lr("shadow"),m=Lr("inset-shadow"),y=Lr("text-shadow"),b=Lr("drop-shadow"),w=Lr("blur"),S=Lr("perspective"),E=Lr("aspect"),R=Lr("ease"),O=Lr("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...I(),qe,Ue],D=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],q=()=>[qe,Ue,p],U=()=>[lf,"full","auto",...q()],Y=()=>[tu,"none","subgrid",qe,Ue],$=()=>["auto",{span:["full",tu,qe,Ue]},tu,qe,Ue],L=()=>[tu,"auto",qe,Ue],H=()=>["auto","min","max","fr",qe,Ue],Q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ce=()=>["start","end","center","stretch","center-safe","end-safe"],M=()=>["auto",...q()],J=()=>[lf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...q()],Z=()=>[t,qe,Ue],Ae=()=>[...I(),cC,lC,{position:[qe,Ue]}],Re=()=>["no-repeat",{repeat:["","x","y","space","round"]}],z=()=>["auto","cover","contain",E8,_8,{size:[qe,Ue]}],se=()=>[r_,Ih,vl],ae=()=>["","none","full",l,qe,Ue],fe=()=>["",ct,Ih,vl],pe=()=>["solid","dashed","dotted","double"],be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Se=()=>[ct,r_,cC,lC],Ie=()=>["","none",w,qe,Ue],$e=()=>["none",ct,qe,Ue],pt=()=>["none",ct,qe,Ue],Ot=()=>[ct,qe,Ue],Kt=()=>[lf,"full",...q()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ts],breakpoint:[ts],color:[m8],container:[ts],"drop-shadow":[ts],ease:["in","out","in-out"],font:[b8],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ts],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ts],shadow:[ts],spacing:["px",ct],text:[ts],"text-shadow":[ts],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",lf,Ue,qe,E]}],container:["container"],columns:[{columns:[ct,Ue,qe,f]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:U()}],"inset-x":[{"inset-x":U()}],"inset-y":[{"inset-y":U()}],start:[{start:U()}],end:[{end:U()}],top:[{top:U()}],right:[{right:U()}],bottom:[{bottom:U()}],left:[{left:U()}],visibility:["visible","invisible","collapse"],z:[{z:[tu,"auto",qe,Ue]}],basis:[{basis:[lf,"full","auto",f,...q()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ct,lf,"auto","initial","none",Ue]}],grow:[{grow:["",ct,qe,Ue]}],shrink:[{shrink:["",ct,qe,Ue]}],order:[{order:[tu,"first","last","none",qe,Ue]}],"grid-cols":[{"grid-cols":Y()}],"col-start-end":[{col:$()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":Y()}],"row-start-end":[{row:$()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":H()}],"auto-rows":[{"auto-rows":H()}],gap:[{gap:q()}],"gap-x":[{"gap-x":q()}],"gap-y":[{"gap-y":q()}],"justify-content":[{justify:[...Q(),"normal"]}],"justify-items":[{"justify-items":[...ce(),"normal"]}],"justify-self":[{"justify-self":["auto",...ce()]}],"align-content":[{content:["normal",...Q()]}],"align-items":[{items:[...ce(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ce(),{baseline:["","last"]}]}],"place-content":[{"place-content":Q()}],"place-items":[{"place-items":[...ce(),"baseline"]}],"place-self":[{"place-self":["auto",...ce()]}],p:[{p:q()}],px:[{px:q()}],py:[{py:q()}],ps:[{ps:q()}],pe:[{pe:q()}],pt:[{pt:q()}],pr:[{pr:q()}],pb:[{pb:q()}],pl:[{pl:q()}],m:[{m:M()}],mx:[{mx:M()}],my:[{my:M()}],ms:[{ms:M()}],me:[{me:M()}],mt:[{mt:M()}],mr:[{mr:M()}],mb:[{mb:M()}],ml:[{ml:M()}],"space-x":[{"space-x":q()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":q()}],"space-y-reverse":["space-y-reverse"],size:[{size:J()}],w:[{w:[f,"screen",...J()]}],"min-w":[{"min-w":[f,"screen","none",...J()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[u]},...J()]}],h:[{h:["screen","lh",...J()]}],"min-h":[{"min-h":["screen","lh","none",...J()]}],"max-h":[{"max-h":["screen","lh",...J()]}],"font-size":[{text:["base",r,Ih,vl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,qe,n_]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",r_,Ue]}],"font-family":[{font:[S8,Ue,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,qe,Ue]}],"line-clamp":[{"line-clamp":[ct,"none",qe,n_]}],leading:[{leading:[o,...q()]}],"list-image":[{"list-image":["none",qe,Ue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",qe,Ue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[ct,"from-font","auto",qe,vl]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[ct,"auto",qe,Ue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qe,Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qe,Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ae()}],"bg-repeat":[{bg:Re()}],"bg-size":[{bg:z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},tu,qe,Ue],radial:["",qe,Ue],conic:[tu,qe,Ue]},T8,w8]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:se()}],"gradient-via-pos":[{via:se()}],"gradient-to-pos":[{to:se()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:ae()}],"rounded-s":[{"rounded-s":ae()}],"rounded-e":[{"rounded-e":ae()}],"rounded-t":[{"rounded-t":ae()}],"rounded-r":[{"rounded-r":ae()}],"rounded-b":[{"rounded-b":ae()}],"rounded-l":[{"rounded-l":ae()}],"rounded-ss":[{"rounded-ss":ae()}],"rounded-se":[{"rounded-se":ae()}],"rounded-ee":[{"rounded-ee":ae()}],"rounded-es":[{"rounded-es":ae()}],"rounded-tl":[{"rounded-tl":ae()}],"rounded-tr":[{"rounded-tr":ae()}],"rounded-br":[{"rounded-br":ae()}],"rounded-bl":[{"rounded-bl":ae()}],"border-w":[{border:fe()}],"border-w-x":[{"border-x":fe()}],"border-w-y":[{"border-y":fe()}],"border-w-s":[{"border-s":fe()}],"border-w-e":[{"border-e":fe()}],"border-w-t":[{"border-t":fe()}],"border-w-r":[{"border-r":fe()}],"border-w-b":[{"border-b":fe()}],"border-w-l":[{"border-l":fe()}],"divide-x":[{"divide-x":fe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":fe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pe(),"hidden","none"]}],"divide-style":[{divide:[...pe(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ct,qe,Ue]}],"outline-w":[{outline:["",ct,Ih,vl]}],"outline-color":[{outline:Z()}],shadow:[{shadow:["","none",d,yv,vv]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",m,yv,vv]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[ct,vl]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":fe()}],"inset-ring-color":[{"inset-ring":Z()}],"text-shadow":[{"text-shadow":["none",y,yv,vv]}],"text-shadow-color":[{"text-shadow":Z()}],opacity:[{opacity:[ct,qe,Ue]}],"mix-blend":[{"mix-blend":[...be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ct]}],"mask-image-linear-from-pos":[{"mask-linear-from":Se()}],"mask-image-linear-to-pos":[{"mask-linear-to":Se()}],"mask-image-linear-from-color":[{"mask-linear-from":Z()}],"mask-image-linear-to-color":[{"mask-linear-to":Z()}],"mask-image-t-from-pos":[{"mask-t-from":Se()}],"mask-image-t-to-pos":[{"mask-t-to":Se()}],"mask-image-t-from-color":[{"mask-t-from":Z()}],"mask-image-t-to-color":[{"mask-t-to":Z()}],"mask-image-r-from-pos":[{"mask-r-from":Se()}],"mask-image-r-to-pos":[{"mask-r-to":Se()}],"mask-image-r-from-color":[{"mask-r-from":Z()}],"mask-image-r-to-color":[{"mask-r-to":Z()}],"mask-image-b-from-pos":[{"mask-b-from":Se()}],"mask-image-b-to-pos":[{"mask-b-to":Se()}],"mask-image-b-from-color":[{"mask-b-from":Z()}],"mask-image-b-to-color":[{"mask-b-to":Z()}],"mask-image-l-from-pos":[{"mask-l-from":Se()}],"mask-image-l-to-pos":[{"mask-l-to":Se()}],"mask-image-l-from-color":[{"mask-l-from":Z()}],"mask-image-l-to-color":[{"mask-l-to":Z()}],"mask-image-x-from-pos":[{"mask-x-from":Se()}],"mask-image-x-to-pos":[{"mask-x-to":Se()}],"mask-image-x-from-color":[{"mask-x-from":Z()}],"mask-image-x-to-color":[{"mask-x-to":Z()}],"mask-image-y-from-pos":[{"mask-y-from":Se()}],"mask-image-y-to-pos":[{"mask-y-to":Se()}],"mask-image-y-from-color":[{"mask-y-from":Z()}],"mask-image-y-to-color":[{"mask-y-to":Z()}],"mask-image-radial":[{"mask-radial":[qe,Ue]}],"mask-image-radial-from-pos":[{"mask-radial-from":Se()}],"mask-image-radial-to-pos":[{"mask-radial-to":Se()}],"mask-image-radial-from-color":[{"mask-radial-from":Z()}],"mask-image-radial-to-color":[{"mask-radial-to":Z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":I()}],"mask-image-conic-pos":[{"mask-conic":[ct]}],"mask-image-conic-from-pos":[{"mask-conic-from":Se()}],"mask-image-conic-to-pos":[{"mask-conic-to":Se()}],"mask-image-conic-from-color":[{"mask-conic-from":Z()}],"mask-image-conic-to-color":[{"mask-conic-to":Z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ae()}],"mask-repeat":[{mask:Re()}],"mask-size":[{mask:z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",qe,Ue]}],filter:[{filter:["","none",qe,Ue]}],blur:[{blur:Ie()}],brightness:[{brightness:[ct,qe,Ue]}],contrast:[{contrast:[ct,qe,Ue]}],"drop-shadow":[{"drop-shadow":["","none",b,yv,vv]}],"drop-shadow-color":[{"drop-shadow":Z()}],grayscale:[{grayscale:["",ct,qe,Ue]}],"hue-rotate":[{"hue-rotate":[ct,qe,Ue]}],invert:[{invert:["",ct,qe,Ue]}],saturate:[{saturate:[ct,qe,Ue]}],sepia:[{sepia:["",ct,qe,Ue]}],"backdrop-filter":[{"backdrop-filter":["","none",qe,Ue]}],"backdrop-blur":[{"backdrop-blur":Ie()}],"backdrop-brightness":[{"backdrop-brightness":[ct,qe,Ue]}],"backdrop-contrast":[{"backdrop-contrast":[ct,qe,Ue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ct,qe,Ue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ct,qe,Ue]}],"backdrop-invert":[{"backdrop-invert":["",ct,qe,Ue]}],"backdrop-opacity":[{"backdrop-opacity":[ct,qe,Ue]}],"backdrop-saturate":[{"backdrop-saturate":[ct,qe,Ue]}],"backdrop-sepia":[{"backdrop-sepia":["",ct,qe,Ue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":q()}],"border-spacing-x":[{"border-spacing-x":q()}],"border-spacing-y":[{"border-spacing-y":q()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",qe,Ue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ct,"initial",qe,Ue]}],ease:[{ease:["linear","initial",R,qe,Ue]}],delay:[{delay:[ct,qe,Ue]}],animate:[{animate:["none",O,qe,Ue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,qe,Ue]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:$e()}],"rotate-x":[{"rotate-x":$e()}],"rotate-y":[{"rotate-y":$e()}],"rotate-z":[{"rotate-z":$e()}],scale:[{scale:pt()}],"scale-x":[{"scale-x":pt()}],"scale-y":[{"scale-y":pt()}],"scale-z":[{"scale-z":pt()}],"scale-3d":["scale-3d"],skew:[{skew:Ot()}],"skew-x":[{"skew-x":Ot()}],"skew-y":[{"skew-y":Ot()}],transform:[{transform:[qe,Ue,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Kt()}],"translate-x":[{"translate-x":Kt()}],"translate-y":[{"translate-y":Kt()}],"translate-z":[{"translate-z":Kt()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qe,Ue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qe,Ue]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[ct,Ih,vl,n_]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},C8=s8(R8);function ID(...t){return C8(BB(t))}function I8({className:t,...e}){return G.jsx("textarea",{"code-path":"src/components/ui/textarea.tsx:7:5","data-slot":"textarea",className:ID("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}function xD({className:t,type:e,...r}){return G.jsx("input",{"code-path":"src/components/ui/input.tsx:7:5",type:e,"data-slot":"input",className:ID("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}function x8({isOpen:t,onClose:e,onSubmit:r}){const[n,i]=xe.useState(""),[o,u]=xe.useState(""),[f,p]=xe.useState(!1),[l,d]=xe.useState(null),[m,y]=xe.useState(!1),b=()=>{f&&!m||(i(""),u(""),d(null),y(!1),e())},w=async()=>{if(n.trim().length<Bo.minLength){d({isValid:!1,reason:`${Bo.minLength}`,isDreamRelated:!1,isAppropriate:!1});return}p(!0),d(null);try{const S=await r(n.trim(),o.trim());d(S),S.isValid&&(y(!0),setTimeout(()=>{b()},2e3))}catch{d({isValid:!1,reason:"",isDreamRelated:!1,isAppropriate:!1})}finally{p(!1)}};return t?G.jsxs("div",{"code-path":"src/sections/CreateGacha.tsx:71:5",className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[G.jsx("div",{"code-path":"src/sections/CreateGacha.tsx:72:7",className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:b}),G.jsxs("div",{"code-path":"src/sections/CreateGacha.tsx:77:7",className:"relative w-full max-w-lg bg-[#0a0a0f] rounded-3xl border border-white/10 overflow-hidden animate-fade-in",children:[G.jsx("button",{"code-path":"src/sections/CreateGacha.tsx:79:9",onClick:b,className:"absolute top-4 right-4 p-2 text-white/40 hover:text-white/80 transition-colors z-20",children:G.jsx(iE,{"code-path":"src/sections/CreateGacha.tsx:83:11",className:"w-5 h-5"})}),G.jsxs("div",{"code-path":"src/sections/CreateGacha.tsx:86:9",className:"p-8",children:[G.jsxs("div",{"code-path":"src/sections/CreateGacha.tsx:88:11",className:"text-center mb-8",children:[G.jsx("h2",{"code-path":"src/sections/CreateGacha.tsx:89:13",className:"text-2xl font-light text-white/90 mb-2",children:""}),G.jsx("p",{"code-path":"src/sections/CreateGacha.tsx:90:13",className:"text-white/40 text-sm",children:""})]}),m?G.jsxs("div",{"code-path":"src/sections/CreateGacha.tsx:94:13",className:"text-center py-10",children:[G.jsx("div",{"code-path":"src/sections/CreateGacha.tsx:95:15",className:"inline-flex items-center justify-center w-16 h-16 mb-4",children:G.jsx(uB,{"code-path":"src/sections/CreateGacha.tsx:96:17",className:"w-10 h-10 text-green-400"})}),G.jsx("h3",{"code-path":"src/sections/CreateGacha.tsx:98:15",className:"text-xl text-white/90 mb-2",children:""}),G.jsx("p",{"code-path":"src/sections/CreateGacha.tsx:99:15",className:"text-white/40",children:"+"})]}):G.jsxs("div",{"code-path":"src/sections/CreateGacha.tsx:102:13",className:"space-y-6",children:[G.jsxs("div",{"code-path":"src/sections/CreateGacha.tsx:104:15",children:[G.jsx("label",{"code-path":"src/sections/CreateGacha.tsx:105:17",className:"block text-white/60 text-sm mb-2",children:""}),G.jsx(I8,{"code-path":"src/sections/CreateGacha.tsx:106:17",value:n,onChange:S=>i(S.target.value),placeholder:"...",className:"w-full min-h-[120px] bg-white/5 border-white/10 text-white placeholder:text-white/20 resize-none focus:border-white/30 rounded-xl",maxLength:Bo.maxLength,disabled:f}),G.jsxs("div",{"code-path":"src/sections/CreateGacha.tsx:114:17",className:"flex justify-between mt-2 text-xs text-white/30",children:[G.jsxs("span",{"code-path":"src/sections/CreateGacha.tsx:115:19",children:[" ",Bo.minLength," "]}),G.jsxs("span",{"code-path":"src/sections/CreateGacha.tsx:116:19",children:[n.length," / ",Bo.maxLength]})]})]}),G.jsxs("div",{"code-path":"src/sections/CreateGacha.tsx:121:15",children:[G.jsxs("label",{"code-path":"src/sections/CreateGacha.tsx:122:17",className:"block text-white/60 text-sm mb-2",children:[" ",G.jsx("span",{"code-path":"src/sections/CreateGacha.tsx:123:22",className:"text-white/30",children:""})]}),G.jsx(xD,{"code-path":"src/sections/CreateGacha.tsx:125:17",value:o,onChange:S=>u(S.target.value),placeholder:"",className:"w-full bg-white/5 border-white/10 text-white placeholder:text-white/20 focus:border-white/30 rounded-xl",maxLength:Bo.maxAuthorLength,disabled:f})]}),l&&!l.isValid&&G.jsxs("div",{"code-path":"src/sections/CreateGacha.tsx:137:17",className:"flex items-start gap-3 p-4 bg-red-500/10 border border-red-500/20 rounded-xl",children:[G.jsx(aB,{"code-path":"src/sections/CreateGacha.tsx:138:19",className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),G.jsx("p",{"code-path":"src/sections/CreateGacha.tsx:139:19",className:"text-red-300 text-sm",children:l.reason})]}),G.jsx("button",{"code-path":"src/sections/CreateGacha.tsx:144:15",onClick:w,disabled:f||n.trim().length<Bo.minLength,className:"w-full py-4 bg-white/10 hover:bg-white/15 disabled:bg-white/5 disabled:cursor-not-allowed rounded-xl border border-white/20 transition-all",children:f?G.jsx("span",{"code-path":"src/sections/CreateGacha.tsx:150:19",className:"text-white/60",children:"..."}):G.jsxs("span",{"code-path":"src/sections/CreateGacha.tsx:152:19",className:"text-white/90 flex items-center justify-center gap-2",children:[G.jsx(OB,{"code-path":"src/sections/CreateGacha.tsx:153:21",className:"w-4 h-4"}),""]})})]})]})]}),G.jsx("style",{"code-path":"src/sections/CreateGacha.tsx:163:7",children:`
        @keyframes fade-in {
          from { opacity: 0; transform: translateY(20px) scale(0.98); }
          to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .animate-fade-in {
          animation: fade-in 0.3s ease-out forwards;
        }
      `})]}):null}const N8={purple:"from-purple-500/10 via-purple-400/5 to-transparent border-purple-500/20",blue:"from-blue-500/10 via-blue-400/5 to-transparent border-blue-500/20",pink:"from-pink-500/10 via-pink-400/5 to-transparent border-pink-500/20",gold:"from-amber-500/10 via-amber-400/5 to-transparent border-amber-500/20",red:"from-red-500/10 via-red-400/5 to-transparent border-red-500/20",green:"from-emerald-500/10 via-emerald-400/5 to-transparent border-emerald-500/20",cyan:"from-cyan-500/10 via-cyan-400/5 to-transparent border-cyan-500/20",rainbow:"from-violet-500/10 via-fuchsia-400/5 to-transparent border-violet-500/20"};function P8({isOpen:t,onClose:e,collectedGachas:r,mySubmittedGachas:n=[]}){const[i,o]=xe.useState(""),[u,f]=xe.useState(null),[p,l]=xe.useState("collected"),m=(p==="collected"?r:n).filter(y=>y.content.toLowerCase().includes(i.toLowerCase()));return t?G.jsxs("div",{"code-path":"src/sections/CollectionShowcase.tsx:38:5",className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[G.jsx("div",{"code-path":"src/sections/CollectionShowcase.tsx:39:7",className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:e}),G.jsxs("div",{"code-path":"src/sections/CollectionShowcase.tsx:44:7",className:"relative w-full max-w-2xl max-h-[80vh] bg-[#0a0a0f] rounded-3xl border border-white/10 overflow-hidden animate-fade-in",children:[G.jsxs("div",{"code-path":"src/sections/CollectionShowcase.tsx:46:9",className:"flex items-center justify-between p-6 border-b border-white/10",children:[G.jsxs("div",{"code-path":"src/sections/CollectionShowcase.tsx:47:11",children:[G.jsx("h2",{"code-path":"src/sections/CollectionShowcase.tsx:48:13",className:"text-xl text-white/90",children:""}),G.jsxs("p",{"code-path":"src/sections/CollectionShowcase.tsx:49:13",className:"text-white/40 text-sm",children:[r.length,"   ",n.length," "]})]}),G.jsx("button",{"code-path":"src/sections/CollectionShowcase.tsx:51:11",onClick:e,className:"p-2 text-white/40 hover:text-white/80",children:G.jsx(iE,{"code-path":"src/sections/CollectionShowcase.tsx:52:13",className:"w-5 h-5"})})]}),G.jsxs("div",{"code-path":"src/sections/CollectionShowcase.tsx:57:9",className:"flex border-b border-white/10",children:[G.jsxs("button",{"code-path":"src/sections/CollectionShowcase.tsx:58:11",onClick:()=>l("collected"),className:`flex-1 py-3 text-sm transition-colors ${p==="collected"?"text-white/90 border-b-2 border-white/40":"text-white/40 hover:text-white/60"}`,children:[" (",r.length,")"]}),G.jsxs("button",{"code-path":"src/sections/CollectionShowcase.tsx:68:11",onClick:()=>l("submitted"),className:`flex-1 py-3 text-sm transition-colors ${p==="submitted"?"text-white/90 border-b-2 border-white/40":"text-white/40 hover:text-white/60"}`,children:[" (",n.length,")"]})]}),G.jsx("div",{"code-path":"src/sections/CollectionShowcase.tsx:81:9",className:"p-4 border-b border-white/10",children:G.jsxs("div",{"code-path":"src/sections/CollectionShowcase.tsx:82:11",className:"relative",children:[G.jsx(TB,{"code-path":"src/sections/CollectionShowcase.tsx:83:13",className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-white/30"}),G.jsx(xD,{"code-path":"src/sections/CollectionShowcase.tsx:84:13",value:i,onChange:y=>o(y.target.value),placeholder:"...",className:"w-full pl-10 py-3 bg-white/5 border-white/10 text-white placeholder:text-white/20 rounded-xl"})]})}),G.jsx("div",{"code-path":"src/sections/CollectionShowcase.tsx:94:9",className:"overflow-auto max-h-[50vh] p-4",children:m.length===0?G.jsx("div",{"code-path":"src/sections/CollectionShowcase.tsx:96:13",className:"text-center py-12 text-white/30",children:G.jsx("p",{"code-path":"src/sections/CollectionShowcase.tsx:97:15",children:""})}):G.jsx("div",{"code-path":"src/sections/CollectionShowcase.tsx:100:13",className:"space-y-3",children:m.map(y=>G.jsxs("div",{"code-path":"src/sections/CollectionShowcase.tsx:102:17",className:`group p-4 bg-gradient-to-br ${N8[y.theme||"purple"]} hover:from-white/10 hover:to-white/5 rounded-xl border transition-all duration-300 cursor-pointer`,onClick:()=>f(y),children:[G.jsxs("p",{"code-path":"src/sections/CollectionShowcase.tsx:107:19",className:"text-white/70 text-sm line-clamp-2 mb-2",children:['"',y.content,'"']}),G.jsxs("div",{"code-path":"src/sections/CollectionShowcase.tsx:110:19",className:"flex items-center justify-between",children:[G.jsx("span",{"code-path":"src/sections/CollectionShowcase.tsx:111:21",className:"text-white/30 text-xs",children:y.author||""}),G.jsx(dB,{"code-path":"src/sections/CollectionShowcase.tsx:112:21",className:"w-4 h-4 text-white/20 group-hover:text-white/40"})]})]},y.id))})})]}),u&&G.jsxs("div",{"code-path":"src/sections/CollectionShowcase.tsx:123:9",className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[G.jsx("div",{"code-path":"src/sections/CollectionShowcase.tsx:124:11",className:"absolute inset-0 bg-black/60",onClick:()=>f(null)}),G.jsxs("div",{"code-path":"src/sections/CollectionShowcase.tsx:128:11",className:"relative max-w-md w-full bg-[#0a0a0f] rounded-3xl border border-white/10 p-8 animate-fade-in",children:[G.jsx("button",{"code-path":"src/sections/CollectionShowcase.tsx:129:13",onClick:()=>f(null),className:"absolute top-4 right-4 text-white/40 hover:text-white/80",children:G.jsx(iE,{"code-path":"src/sections/CollectionShowcase.tsx:133:15",className:"w-5 h-5"})}),G.jsxs("p",{"code-path":"src/sections/CollectionShowcase.tsx:135:13",className:"text-white/80 text-lg leading-relaxed text-center mb-6",children:['"',u.content,'"']}),G.jsxs("div",{"code-path":"src/sections/CollectionShowcase.tsx:138:13",className:"text-center text-white/40 text-sm",children:[u.author||"","  ",new Date(u.createdAt).toLocaleDateString()]})]})]}),G.jsx("style",{"code-path":"src/sections/CollectionShowcase.tsx:145:7",children:`
        @keyframes fade-in {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
          animation: fade-in 0.3s ease-out forwards;
        }
        .line-clamp-2 {
          display: -webkit-box;
          -webkit-line-clamp: 2;
          -webkit-box-orient: vertical;
          overflow: hidden;
        }
      `})]}):null}function U8({onEnter:t}){const[e,r]=xe.useState(!1),[n,i]=xe.useState(!1);return xe.useEffect(()=>{const o=setTimeout(()=>r(!0),300),u=setTimeout(()=>i(!0),3e3);return()=>{clearTimeout(o),clearTimeout(u)}},[]),G.jsxs("div",{"code-path":"src/sections/IntroScreen.tsx:24:5",className:"fixed inset-0 z-[100] bg-[#050508] flex flex-col items-center justify-center px-6",children:[G.jsx("div",{"code-path":"src/sections/IntroScreen.tsx:26:7",className:"absolute inset-0 overflow-hidden",children:Array.from({length:20}).map((o,u)=>G.jsx("div",{"code-path":"src/sections/IntroScreen.tsx:28:11",className:"absolute w-1 h-1 rounded-full bg-white/10",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animation:`float-particle ${15+Math.random()*10}s linear infinite`,animationDelay:`${Math.random()*5}s`}},u))}),G.jsxs("div",{"code-path":"src/sections/IntroScreen.tsx:42:7",className:`relative z-10 text-center max-w-md transition-all duration-1000 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:[G.jsx("h1",{"code-path":"src/sections/IntroScreen.tsx:48:9",className:"text-white/90 text-3xl sm:text-4xl font-light tracking-wider mb-8",children:""}),G.jsxs("div",{"code-path":"src/sections/IntroScreen.tsx:53:9",className:"space-y-4 text-white/60 text-base sm:text-lg font-light leading-relaxed mb-12",children:[G.jsx("p",{"code-path":"src/sections/IntroScreen.tsx:54:11",children:""}),G.jsx("p",{"code-path":"src/sections/IntroScreen.tsx:55:11",children:""}),G.jsx("p",{"code-path":"src/sections/IntroScreen.tsx:56:11",children:""}),G.jsx("p",{"code-path":"src/sections/IntroScreen.tsx:57:11",children:""})]}),G.jsxs("div",{"code-path":"src/sections/IntroScreen.tsx:61:9",className:"space-y-2 text-white/40 text-sm mb-12",children:[G.jsx("p",{"code-path":"src/sections/IntroScreen.tsx:62:11",children:"  "}),G.jsx("p",{"code-path":"src/sections/IntroScreen.tsx:63:11",children:"  "}),G.jsx("p",{"code-path":"src/sections/IntroScreen.tsx:64:11",children:"  "})]}),G.jsx("button",{"code-path":"src/sections/IntroScreen.tsx:68:9",onClick:t,disabled:!n,className:`px-10 py-4 rounded-full border transition-all duration-500 ${n?"border-white/30 bg-white/10 text-white/90 hover:bg-white/15 hover:scale-105":"border-white/10 bg-white/5 text-white/30 cursor-wait"}`,children:G.jsx("span",{"code-path":"src/sections/IntroScreen.tsx:77:11",className:"text-base tracking-widest",children:n?"":"..."})})]}),G.jsxs("div",{"code-path":"src/sections/IntroScreen.tsx:84:7",className:"absolute bottom-8 left-1/2 -translate-x-1/2 text-white/20 text-xs tracking-wider",children:[G.jsx("p",{"code-path":"src/sections/IntroScreen.tsx:85:9",children:"Designed by Kalos"}),G.jsx("p",{"code-path":"src/sections/IntroScreen.tsx:86:9",className:"mt-1",children:"Music by NeutronStar714"})]}),G.jsx("style",{"code-path":"src/sections/IntroScreen.tsx:89:7",children:`
        @keyframes float-particle {
          0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
          10% { opacity: 0.1; }
          90% { opacity: 0.1; }
          100% { transform: translateY(-100vh) rotate(720deg); opacity: 0; }
        }
      `})]})}var ND="@cloudbase/js-sdk";function q8(t){ND=t}function wg(){return ND}var PD="https:";function D8(t){PD=t}function j8(){return PD}var Sg="https://support.qq.com/products/148793",Bn={INVALID_PARAMS:"INVALID_PARAMS",INVALID_OPERATION:"INVALID_OPERATION",OPERATION_FAIL:"OPERATION_FAIL"},Ap;(function(t){t.local="local",t.none="none",t.session="session"})(Ap||(Ap={}));var a2=(function(){function t(){}return t})(),UD=(function(){function t(){}return t})();function Kh(t,e,r){r===void 0&&(r={});var n=/\?/.test(e),i="";for(var o in r)i===""?!n&&(e+="?"):i+="&",i+=o+"="+encodeURIComponent(r[o]);return e+=i,/^http(s)?\:\/\//.test(e)?e:""+t+e}const L8=Object.freeze(Object.defineProperty({__proto__:null,AbstractSDKRequest:a2,AbstractStorage:UD,get StorageType(){return Ap},formatUrl:Kh},Symbol.toStringTag,{value:"Module"}));var k8=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function qD(t){return Object.prototype.toString.call(t)==="[object Array]"}function DD(t){return typeof t=="string"}function M8(t){return Object.prototype.toString.call(t)==="[object Object]"}function B8(t,e){return t instanceof e}function jD(t){return Object.prototype.toString.call(t)==="[object FormData]"}function z8(){return Math.random().toString(16).slice(2)}function LD(){var t=new Date().getTime(),e=Date?.now&&Date.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var n=Math.random()*16;return t>0?(n=(t+n)%16|0,t=Math.floor(t/16)):(n=(e+n)%16|0,e=Math.floor(e/16)),(r==="x"?n:n&7|8).toString(16)})}function kD(t,e,r){r===void 0&&(r={});var n=/\?/.test(e),i="";return Object.keys(r).forEach(function(o){i===""?!n&&(e+="?"):i+="&",i+="".concat(o,"=").concat(encodeURIComponent(r[o]))}),e+=i,/^http(s)?:\/\//.test(e)?e:"".concat(t).concat(e)}function $8(t){t===void 0&&(t={});var e=[];return Object.keys(t).forEach(function(r){e.push("".concat(r,"=").concat(encodeURIComponent(t[r])))}),e.join("&")}function i_(t,e){if(typeof window>"u")return!1;var r=decodeURIComponent(window.location.search),n=new RegExp("(^|&)".concat(t,"=([^&]*)(&|$)")),i=r.substr(r.indexOf("?")+1).match(n);return i!=null?i[2]:""}function MD(t,e,r){if(r===void 0&&(r=null),t&&typeof t=="function")return t(e,r);if(e)throw e;return r}function $f(t,e){console.warn("[".concat(wg(),"][").concat(t,"]:").concat(e))}var F8=function(t){t=t.replace(/^\?/,"");var e={},r=t.split("&");return r.forEach(function(n){var i=n.split("="),o=i[0],u=i[1];o=decodeURIComponent(o),u=decodeURIComponent(u),o&&(e[o]?Array.isArray(e[o])?e[o].push(u):e[o]=[e[o],u]:e[o]=u)}),e};function H8(t){var e={},r=t.match(/^(data:.*?)(\?[^#\s]*)?$/);if(r){t=r[1];var n=r[2];n&&(e=F8(n))}var i=e.token,o=k8(e,["token"]);return/^data:/.test(t)&&!i?{error:"invalid_argument",error_description:"invalid captcha data: ".concat(t)}:i?{state:o.state,token:i,captchaData:t}:{error:"unimplemented",error_description:"need to impl captcha data"}}var G8=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),dn=function(){return dn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},dn.apply(this,arguments)},o_=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},a_=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},W8=(function(t){G8(e,t);function e(r){var n=t.call(this)||this,i=r.timeout,o=r.timeoutMsg,u=r.restrictedMethods;return n.timeout=i||0,n.timeoutMsg=o||"",n.restrictedMethods=u||["get","post","upload","download"],n}return e.prototype.get=function(r){return this.request(dn(dn({},r),{method:"get"}),this.restrictedMethods.includes("get"))},e.prototype.post=function(r){return this.request(dn(dn({},r),{method:"post"}),this.restrictedMethods.includes("post"))},e.prototype.put=function(r){return this.request(dn(dn({},r),{method:"put"}))},e.prototype.upload=function(r){var n=r.data,i=r.file,o=r.name,u=r.method,f=r.headers,p=f===void 0?{}:f,l={post:"post",put:"put"}[u?.toLowerCase()]||"put",d=new FormData;return l==="post"?(Object.keys(n).forEach(function(m){d.append(m,n[m])}),d.append("key",o),d.append("file",i),this.request(dn(dn({},r),{data:d,method:l}),this.restrictedMethods.includes("upload"))):this.request(dn(dn({},r),{method:"put",headers:p,body:i}),this.restrictedMethods.includes("upload"))},e.prototype.download=function(r){return o_(this,void 0,void 0,function(){var n,i,o,u;return a_(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),[4,this.get(dn(dn({},r),{headers:{},responseType:"blob"}))];case 1:return n=f.sent().data,i=window.URL.createObjectURL(new Blob([n])),o=decodeURIComponent(new URL(r.url).pathname.split("/").pop()||""),u=document.createElement("a"),u.href=i,u.setAttribute("download",o),u.style.display="none",document.body.appendChild(u),u.click(),window.URL.revokeObjectURL(i),document.body.removeChild(u),[3,3];case 2:return f.sent(),[3,3];case 3:return[2,new Promise(function(p){p({statusCode:200,tempFilePath:r.url})})]}})})},e.prototype.fetch=function(r){var n;return o_(this,void 0,void 0,function(){var i,o,u,f,p,l,d,m,y,b,w,S,E,R=this;return a_(this,function(O){switch(O.label){case 0:return i=new AbortController,o=r.url,u=r.enableAbort,f=u===void 0?!1:u,p=r.stream,l=p===void 0?!1:p,d=r.signal,m=r.timeout,y=r.shouldThrowOnError,b=y===void 0?!0:y,w=m??this.timeout,d&&(d.aborted&&i.abort(),d.addEventListener("abort",function(){return i.abort()})),S=null,f&&w&&(S=setTimeout(function(){console.warn(R.timeoutMsg),i.abort(new Error(R.timeoutMsg))},w)),[4,fetch(o,dn(dn({},r),{signal:i.signal})).then(function(C){return o_(R,void 0,void 0,function(){var I,P,D;return a_(this,function(j){switch(j.label){case 0:return clearTimeout(S),b?C.ok?(I=C,[3,3]):[3,1]:[3,4];case 1:return D=(P=Promise).reject,[4,C.json()];case 2:I=D.apply(P,[j.sent()]),j.label=3;case 3:return[2,I];case 4:return[2,C]}})})}).catch(function(C){if(clearTimeout(S),b)return Promise.reject(C)})];case 1:return E=O.sent(),[2,{data:l?E.body:!((n=E.headers.get("content-type"))===null||n===void 0)&&n.includes("application/json")?E.json():E.text(),statusCode:E.status,header:E.headers}]}})})},e.prototype.request=function(r,n){var i=this;n===void 0&&(n=!1);var o=String(r.method).toLowerCase()||"get";return new Promise(function(u){var f=r.url,p=r.headers,l=p===void 0?{}:p,d=r.data,m=r.responseType,y=r.withCredentials,b=r.body,w=r.onUploadProgress,S=kD(j8(),f,o==="get"?d:{}),E=new XMLHttpRequest;E.open(o,S),m&&(E.responseType=m),Object.keys(l).forEach(function(C){E.setRequestHeader(C,l[C])});var R;w&&E.upload.addEventListener("progress",w),E.onreadystatechange=function(){var C={};if(E.readyState===4){var I=E.getAllResponseHeaders(),P=I.trim().split(/[\r\n]+/),D={};P.forEach(function(j){var q=j.split(": "),U=q.shift().toLowerCase(),Y=q.join(": ");D[U]=Y}),C.header=D,C.statusCode=E.status;try{C.data=m==="blob"?E.response:JSON.parse(E.responseText)}catch{C.data=m==="blob"?E.response:E.responseText}clearTimeout(R),u(C)}},n&&i.timeout&&(R=setTimeout(function(){console.warn(i.timeoutMsg),E.abort()},i.timeout));var O;jD(d)?O=d:l["content-type"]==="application/x-www-form-urlencoded"?O=$8(d):b?O=b:O=d?JSON.stringify(d):void 0,y&&(E.withCredentials=!0),E.send(O)})},e})(a2);function V8(){var t={type:"default",root:window,reqClass:W8,wsClass:WebSocket,localStorage};return t}var qy=function(){return qy=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qy.apply(this,arguments)},sE;(function(t){t.WEB="web",t.WX_MP="wx_mp"})(sE||(sE={}));function Y8(t,e){for(var r=qD(t)?t:[t],n=0,i=r;n<i.length;n++){var o=i[n],u=o.isMatch,f=o.genAdapter,p=o.runtime;if(u())return{adapter:qy({isMatch:u},f(e)),runtime:p}}}function K8(){return{adapter:qy({},V8()),runtime:sE.WEB}}var gv={},Q8=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),s_=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,[])).next())})},u_=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},l_=(function(t){Q8(e,t);function e(r){var n=t.call(this)||this;return n.root=r,r.tcbCacheObject||(r.tcbCacheObject={}),n}return e.prototype.setItem=function(r,n){this.root.tcbCacheObject[r]=n},e.prototype.getItem=function(r){return this.root.tcbCacheObject[r]},e.prototype.removeItem=function(r){delete this.root.tcbCacheObject[r]},e.prototype.clear=function(){delete this.root.tcbCacheObject},e})(UD);function J8(t,e){switch(t){case"local":return e.localStorage?e.localStorage:($f(Bn.INVALID_PARAMS,"localStorage is not supported on current platform"),new l_(e.root));case"none":return new l_(e.root);default:return e.localStorage?e.localStorage:($f(Bn.INVALID_PARAMS,"localStorage is not supported on current platform"),new l_(e.root))}}var X8=(function(){function t(e){this.keys={};var r=e.persistence,n=e.platformInfo,i=n===void 0?{}:n,o=e.keys,u=o===void 0?{}:o;this.platformInfo=i,this.storage||(this.persistenceTag=this.platformInfo.adapter.primaryStorage||r,this.storage=J8(this.persistenceTag,this.platformInfo.adapter),this.keys=u)}return Object.defineProperty(t.prototype,"mode",{get:function(){return this.storage.mode||"sync"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"persistence",{get:function(){return this.persistenceTag},enumerable:!1,configurable:!0}),t.prototype.setStore=function(e,r,n){if(this.mode==="async"){$f(Bn.INVALID_OPERATION,"current platform's storage is asynchronous, please use setStoreAsync insteed");return}if(this.storage)try{var i={version:n||"localCachev1",content:r};this.storage.setItem(e,JSON.stringify(i))}catch(o){throw new Error(JSON.stringify({code:Bn.OPERATION_FAIL,msg:"[".concat(wg(),"][").concat(Bn.OPERATION_FAIL,"]setStore failed"),info:o}))}},t.prototype.setStoreAsync=function(e,r,n){return s_(this,void 0,void 0,function(){var i;return u_(this,function(o){switch(o.label){case 0:if(!this.storage)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),i={version:n||"localCachev1",content:r},[4,this.storage.setItem(e,JSON.stringify(i))];case 2:return o.sent(),[3,4];case 3:return o.sent(),[2];case 4:return[2]}})})},t.prototype.getStore=function(e,r){var n;if(this.mode==="async"){$f(Bn.INVALID_OPERATION,"current platform's storage is asynchronous, please use getStoreAsync insteed");return}try{if(typeof process<"u"&&(!((n=gv)===null||n===void 0)&&n.tcb_token))return gv.tcb_token;if(!this.storage)return""}catch{return""}r=r||"localCachev1";var i=this.storage.getItem(e);if(!i)return"";if(i.indexOf(r)>=0){var o=JSON.parse(i);return o.content}return""},t.prototype.getStoreAsync=function(e,r){var n;return s_(this,void 0,void 0,function(){var i,o;return u_(this,function(u){switch(u.label){case 0:try{if(typeof process<"u"&&(!((n=gv)===null||n===void 0)&&n.tcb_token))return[2,gv.tcb_token];if(!this.storage)return[2,""]}catch{return[2,""]}return r=r||"localCachev1",[4,this.storage.getItem(e)];case 1:return i=u.sent(),i?i.indexOf(r)>=0?(o=JSON.parse(i),[2,o.content]):[2,""]:[2,""]}})})},t.prototype.removeStore=function(e){if(this.mode==="async"){$f(Bn.INVALID_OPERATION,"current platform's storage is asynchronous, please use removeStoreAsync insteed");return}this.storage.removeItem(e)},t.prototype.removeStoreAsync=function(e){return s_(this,void 0,void 0,function(){return u_(this,function(r){switch(r.label){case 0:return[4,this.storage.removeItem(e)];case 1:return r.sent(),[2]}})})},t})(),Z8=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),e4=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};function t4(t,e,r){r[t]=r[t]||[],r[t].push(e)}function r4(t,e,r){if(r?.[t]){var n=r[t].indexOf(e);n!==-1&&r[t].splice(n,1)}}var BD=(function(){function t(e,r){this.data=r||null,this.name=e}return t})(),n4=(function(t){Z8(e,t);function e(r,n){var i=t.call(this,"error",{error:r,data:n})||this;return i.error=r,i}return e})(BD),zD=(function(){function t(){this.listeners={}}return t.prototype.on=function(e,r){return t4(e,r,this.listeners),this},t.prototype.off=function(e,r){return r4(e,r,this.listeners),this},t.prototype.fire=function(e,r){if(B8(e,n4))return console.error(e.error),this;var n=DD(e)?new BD(e,r||{}):e,i=n.name;if(this.listens(i)){n.target=this;for(var o=this.listeners[i]?e4([],this.listeners[i],!0):[],u=0,f=o;u<f.length;u++){var p=f[u];p.call(this,n)}}return this},t.prototype.listens=function(e){return this.listeners[e]&&this.listeners[e].length>0},t})(),Eg=new zD,Tg="lang_change";typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox");function Ag(t){return t.mode,t.customInfo,t.title,t.messages,function(e,r,n){}}function uE(t){this.message=t}uE.prototype=new Error,uE.prototype.name="InvalidCharacterError";typeof window<"u"&&window.atob&&window.atob.bind(window);function fC(t){this.message=t}fC.prototype=new Error,fC.prototype.name="InvalidTokenError";var Dy=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},jy=Bn,dC={};function i4(t,e){var r=e.name,n=e.namespace,i=e.entity,o=e.injectEvents,u=e.IIFE,f=u===void 0?!1:u;if(dC[r]||n&&t[n])throw new Error(JSON.stringify({code:jy.INVALID_OPERATION,msg:"Duplicate component ".concat(r)}));if(f){if(!i||typeof i!="function")throw new Error(JSON.stringify({code:jy.INVALID_PARAMS,msg:"IIFE component's entity must be a function"}));i.call(t)}if(dC[r]=e,n?t.prototype[n]=i:$D(t.prototype,i),o){var p=o.bus,l=o.events;if(!p||!l||l.length===0)return;var d=t.prototype.fire||function(){};t.prototype.events||(t.prototype.events={});var m=t.prototype.events||{};m[r]?t.prototype.events[r].events=Dy(Dy([],t.prototype.events[r].events,!0),l,!0):t.prototype.events[r]={bus:p,events:l},t.prototype.fire=function(y,b){d(y,b);for(var w=Object.keys(this.events),S=0,E=w;S<E.length;S++){var R=E[S],O=this.events[R],C=O.bus,I=O.events;if(I.includes(y)){C.fire(y,b);break}}}}}function $D(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:{var r=e;return new Date(r.getTime())}case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(var n=Object.keys(e),i=0,o=n;i<o.length;i++){var u=o[i];Object.prototype.hasOwnProperty.call(e,u)&&(t[u]=$D(t[u],e[u]))}return t}function o4(t,e){var r=e.entity,n=e.target;if(Object.prototype.hasOwnProperty.call(t,n))throw new Error(JSON.stringify({code:jy.INVALID_OPERATION,msg:"target:".concat(n," is not exist")}));var i=t.prototype[n];if(typeof i!="function")throw new Error(JSON.stringify({code:jy.INVALID_OPERATION,msg:"target:".concat(n," is not a function which is the only type supports hook")}));t.prototype[n]=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return r.call.apply(r,Dy([this],o,!1)),i.call.apply(i,Dy([this],o,!1))}}function Op(){}function Qr(t){return typeof t=="object"&&t!==null||typeof t=="function"}const FD=Op;function St(t,e){try{Object.defineProperty(t,"name",{value:e,configurable:!0})}catch{}}const s2=Promise,a4=Promise.resolve.bind(s2),s4=Promise.prototype.then,u4=Promise.reject.bind(s2),l4=a4;function wn(t){return new s2(t)}function Ut(t){return wn(e=>e(t))}function Be(t){return u4(t)}function wa(t,e,r){return s4.call(t,e,r)}function Vo(t,e,r){wa(wa(t,e,r),void 0,FD)}function c_(t,e){Vo(t,e)}function lE(t,e){Vo(t,void 0,e)}function Yl(t,e,r){return wa(t,e,r)}function zp(t){wa(t,void 0,FD)}let Kl=t=>{if(typeof queueMicrotask=="function")Kl=queueMicrotask;else{const e=Ut(void 0);Kl=r=>wa(e,r)}return Kl(t)};function td(t,e,r){if(typeof t!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,e,r)}function vd(t,e,r){try{return Ut(td(t,e,r))}catch(n){return Be(n)}}let mo=class{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){const r=this._back;let n=r;r._elements.length===16383&&(n={_elements:[],_next:void 0}),r._elements.push(e),n!==r&&(this._back=n,r._next=n),++this._size}shift(){const e=this._front;let r=e;const n=this._cursor;let i=n+1;const o=e._elements,u=o[n];return i===16384&&(r=e._next,i=0),--this._size,this._cursor=i,e!==r&&(this._front=r),o[n]=void 0,u}forEach(e){let r=this._cursor,n=this._front,i=n._elements;for(;!(r===i.length&&n._next===void 0||r===i.length&&(n=n._next,i=n._elements,r=0,i.length===0));)e(i[r]),++r}peek(){const e=this._front,r=this._cursor;return e._elements[r]}};const HD=Symbol("[[AbortSteps]]"),GD=Symbol("[[ErrorSteps]]"),u2=Symbol("[[CancelSteps]]"),l2=Symbol("[[PullSteps]]"),c2=Symbol("[[ReleaseSteps]]");function WD(t,e){t._ownerReadableStream=e,e._reader=t,e._state==="readable"?cE(t):e._state==="closed"?(function(r){cE(r),YD(r)})(t):VD(t,e._storedError)}function f2(t,e){return $o(t._ownerReadableStream,e)}function ds(t){const e=t._ownerReadableStream;e._state==="readable"?d2(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):(function(r,n){VD(r,n)})(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._readableStreamController[c2](),e._reader=void 0,t._ownerReadableStream=void 0}function Ly(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function cE(t){t._closedPromise=wn((e,r)=>{t._closedPromise_resolve=e,t._closedPromise_reject=r})}function VD(t,e){cE(t),d2(t,e)}function d2(t,e){t._closedPromise_reject!==void 0&&(zp(t._closedPromise),t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}function YD(t){t._closedPromise_resolve!==void 0&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}const hC=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},c4=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};function bu(t,e){if(t!==void 0&&typeof(r=t)!="object"&&typeof r!="function")throw new TypeError(`${e} is not an object.`);var r}function Pu(t,e){if(typeof t!="function")throw new TypeError(`${e} is not a function.`)}function KD(t,e){if(!(function(r){return typeof r=="object"&&r!==null||typeof r=="function"})(t))throw new TypeError(`${e} is not an object.`)}function tc(t,e,r){if(t===void 0)throw new TypeError(`Parameter ${e} is required in '${r}'.`)}function pC(t,e,r){if(t===void 0)throw new TypeError(`${e} is required in '${r}'.`)}function QD(t){return Number(t)}function mC(t){return t===0?0:t}function h2(t,e){const r=Number.MAX_SAFE_INTEGER;let n=Number(t);if(n=mC(n),!hC(n))throw new TypeError(`${e} is not a finite number`);if(n=(function(i){return mC(c4(i))})(n),n<0||n>r)throw new TypeError(`${e} is outside the accepted range of 0 to ${r}, inclusive`);return hC(n)&&n!==0?n:0}function p2(t,e){if(!au(t))throw new TypeError(`${e} is not a ReadableStream.`)}function Ff(t){return new Nl(t)}function JD(t,e){t._reader._readRequests.push(e)}function m2(t,e,r){const n=t._reader._readRequests.shift();r?n._closeSteps():n._chunkSteps(e)}function Og(t){return t._reader._readRequests.length}function XD(t){const e=t._reader;return e!==void 0&&!!_u(e)}let Nl=class{constructor(e){if(tc(e,1,"ReadableStreamDefaultReader"),p2(e,"First parameter"),wu(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");WD(this,e),this._readRequests=new mo}get closed(){return _u(this)?this._closedPromise:Be(bv("closed"))}cancel(e=void 0){return _u(this)?this._ownerReadableStream===void 0?Be(Ly("cancel")):f2(this,e):Be(bv("cancel"))}read(){if(!_u(this))return Be(bv("read"));if(this._ownerReadableStream===void 0)return Be(Ly("read from"));let e,r;const n=wn((i,o)=>{e=i,r=o});return Rp(this,{_chunkSteps:i=>e({value:i,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:i=>r(i)}),n}releaseLock(){if(!_u(this))throw bv("releaseLock");this._ownerReadableStream!==void 0&&(function(e){ds(e);const r=new TypeError("Reader was released");ZD(e,r)})(this)}};function _u(t){return!!Qr(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readRequests")&&t instanceof Nl}function Rp(t,e){const r=t._ownerReadableStream;r._disturbed=!0,r._state==="closed"?e._closeSteps():r._state==="errored"?e._errorSteps(r._storedError):r._readableStreamController[l2](e)}function ZD(t,e){const r=t._readRequests;t._readRequests=new mo,r.forEach(n=>{n._errorSteps(e)})}function bv(t){return new TypeError(`ReadableStreamDefaultReader.prototype.${t} can only be used on a ReadableStreamDefaultReader`)}var f_,d_,h_;function Qh(t){return t.slice()}function e5(t,e,r,n,i){new Uint8Array(t).set(new Uint8Array(r,n,i),e)}Object.defineProperties(Nl.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),St(Nl.prototype.cancel,"cancel"),St(Nl.prototype.read,"read"),St(Nl.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Nl.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});let rc=t=>(rc=typeof t.transfer=="function"?e=>e.transfer():typeof structuredClone=="function"?e=>structuredClone(e,{transfer:[e]}):e=>e,rc(t)),nc=t=>(nc=typeof t.detached=="boolean"?e=>e.detached:e=>e.byteLength===0,nc(t));function t5(t,e,r){if(t.slice)return t.slice(e,r);const n=r-e,i=new ArrayBuffer(n);return e5(i,0,t,e,n),i}function Jh(t,e){const r=t[e];if(r!=null){if(typeof r!="function")throw new TypeError(`${String(e)} is not a function`);return r}}function vC(t){try{const e=t.done,r=t.value;return wa(l4(r),n=>({done:e,value:n}))}catch(e){return Be(e)}}const $p=(h_=(f_=Symbol.asyncIterator)!==null&&f_!==void 0?f_:(d_=Symbol.for)===null||d_===void 0?void 0:d_.call(Symbol,"Symbol.asyncIterator"))!==null&&h_!==void 0?h_:"@@asyncIterator";function r5(t,e="sync",r){if(r===void 0)if(e==="async"){if((r=Jh(t,$p))===void 0)return(function(i){const o={next(){let u;try{u=n5(i)}catch(f){return Be(f)}return vC(u)},return(u){let f;try{const p=Jh(i.iterator,"return");if(p===void 0)return Ut({done:!0,value:u});f=td(p,i.iterator,[u])}catch(p){return Be(p)}return Qr(f)?vC(f):Be(new TypeError("The iterator.return() method must return an object"))}};return{iterator:o,nextMethod:o.next,done:!1}})(r5(t,"sync",Jh(t,Symbol.iterator)))}else r=Jh(t,Symbol.iterator);if(r===void 0)throw new TypeError("The object is not iterable");const n=td(r,t,[]);if(!Qr(n))throw new TypeError("The iterator method must return an object");return{iterator:n,nextMethod:n.next,done:!1}}function n5(t){const e=td(t.nextMethod,t.iterator,[]);if(!Qr(e))throw new TypeError("The iterator.next() method must return an object");return e}let i5=class{constructor(e,r){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=r}next(){const e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?Yl(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){const r=()=>this._returnSteps(e);return this._ongoingPromise=this._ongoingPromise?Yl(this._ongoingPromise,r,r):r(),this._ongoingPromise}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const e=this._reader;let r,n;const i=wn((o,u)=>{r=o,n=u});return Rp(e,{_chunkSteps:o=>{this._ongoingPromise=void 0,Kl(()=>r({value:o,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ds(e),r({value:void 0,done:!0})},_errorSteps:o=>{this._ongoingPromise=void 0,this._isFinished=!0,ds(e),n(o)}}),i}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;const r=this._reader;if(!this._preventCancel){const n=f2(r,e);return ds(r),Yl(n,()=>({value:e,done:!0}))}return ds(r),Ut({value:e,done:!0})}};const o5={next(){return yC(this)?this._asyncIteratorImpl.next():Be(gC("next"))},return(t){return yC(this)?this._asyncIteratorImpl.return(t):Be(gC("return"))},[$p](){return this}};function yC(t){if(!Qr(t)||!Object.prototype.hasOwnProperty.call(t,"_asyncIteratorImpl"))return!1;try{return t._asyncIteratorImpl instanceof i5}catch{return!1}}function gC(t){return new TypeError(`ReadableStreamAsyncIterator.${t} can only be used on a ReadableSteamAsyncIterator`)}Object.defineProperty(o5,$p,{enumerable:!1});const a5=Number.isNaN||function(t){return t!=t};function bC(t){const e=t5(t.buffer,t.byteOffset,t.byteOffset+t.byteLength);return new Uint8Array(e)}function fE(t){const e=t._queue.shift();return t._queueTotalSize-=e.size,t._queueTotalSize<0&&(t._queueTotalSize=0),e.value}function v2(t,e,r){if(typeof(n=r)!="number"||a5(n)||n<0||r===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var n;t._queue.push({value:e,size:r}),t._queueTotalSize+=r}function Uu(t){t._queue=new mo,t._queueTotalSize=0}function s5(t){return t===DataView}let Cf=class{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!p_(this))throw m_("view");return this._view}respond(e){if(!p_(this))throw m_("respond");if(tc(e,1,"respond"),e=h2(e,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(nc(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");fy(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!p_(this))throw m_("respondWithNewView");if(tc(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(nc(e.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");dy(this._associatedReadableByteStreamController,e)}};Object.defineProperties(Cf.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),St(Cf.prototype.respond,"respond"),St(Cf.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Cf.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});let pu=class{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Pl(this))throw xh("byobRequest");return hE(this)}get desiredSize(){if(!Pl(this))throw xh("desiredSize");return g5(this)}close(){if(!Pl(this))throw xh("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");const e=this._controlledReadableByteStream._state;if(e!=="readable")throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);Xh(this)}enqueue(e){if(!Pl(this))throw xh("enqueue");if(tc(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(e.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(e.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");const r=this._controlledReadableByteStream._state;if(r!=="readable")throw new TypeError(`The stream (in ${r} state) is not in the readable state and cannot be enqueued to`);cy(this,e)}error(e=void 0){if(!Pl(this))throw xh("error");fo(this,e)}[u2](e){u5(this),Uu(this);const r=this._cancelAlgorithm(e);return Rg(this),r}[l2](e){const r=this._controlledReadableByteStream;if(this._queueTotalSize>0)return void y5(this,e);const n=this._autoAllocateChunkSize;if(n!==void 0){let i;try{i=new ArrayBuffer(n)}catch(u){return void e._errorSteps(u)}const o={buffer:i,bufferByteLength:n,byteOffset:0,byteLength:n,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(o)}JD(r,e),cc(this)}[c2](){if(this._pendingPullIntos.length>0){const e=this._pendingPullIntos.peek();e.readerType="none",this._pendingPullIntos=new mo,this._pendingPullIntos.push(e)}}};function Pl(t){return!!Qr(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledReadableByteStream")&&t instanceof pu}function p_(t){return!!Qr(t)&&!!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")&&t instanceof Cf}function cc(t){if((function(r){const n=r._controlledReadableByteStream;return n._state!=="readable"||r._closeRequested||!r._started?!1:!!(XD(n)&&Og(n)>0||g2(n)&&w5(n)>0||g5(r)>0)})(t)){if(t._pulling)return void(t._pullAgain=!0);t._pulling=!0,Vo(t._pullAlgorithm(),()=>(t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,cc(t)),null),r=>(fo(t,r),null))}}function u5(t){y2(t),t._pendingPullIntos=new mo}function l5(t,e){let r=!1;t._state==="closed"&&(r=!0);const n=c5(e);e.readerType==="default"?m2(t,n,r):(function(i,o,u){const f=i._reader,p=f._readIntoRequests.shift();u?p._closeSteps(o):p._chunkSteps(o)})(t,n,r)}function uy(t,e){for(let r=0;r<e.length;++r)l5(t,e[r])}function c5(t){const e=t.bytesFilled,r=t.elementSize;return new t.viewConstructor(t.buffer,t.byteOffset,e/r)}function ly(t,e,r,n){t._queue.push({buffer:e,byteOffset:r,byteLength:n}),t._queueTotalSize+=n}function f5(t,e,r,n){let i;try{i=t5(e,r,r+n)}catch(o){throw fo(t,o),o}ly(t,i,0,n)}function d5(t,e){e.bytesFilled>0&&f5(t,e.buffer,e.byteOffset,e.bytesFilled),Hf(t)}function h5(t,e){const r=Math.min(t._queueTotalSize,e.byteLength-e.bytesFilled),n=e.bytesFilled+r;let i=r,o=!1;const u=n-n%e.elementSize;u>=e.minimumFill&&(i=u-e.bytesFilled,o=!0);const f=t._queue;for(;i>0;){const p=f.peek(),l=Math.min(i,p.byteLength),d=e.byteOffset+e.bytesFilled;e5(e.buffer,d,p.buffer,p.byteOffset,l),p.byteLength===l?f.shift():(p.byteOffset+=l,p.byteLength-=l),t._queueTotalSize-=l,p5(t,l,e),i-=l}return o}function p5(t,e,r){r.bytesFilled+=e}function m5(t){t._queueTotalSize===0&&t._closeRequested?(Rg(t),Fp(t._controlledReadableByteStream)):cc(t)}function y2(t){t._byobRequest!==null&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=null,t._byobRequest=null)}function dE(t){const e=[];for(;t._pendingPullIntos.length>0&&t._queueTotalSize!==0;){const r=t._pendingPullIntos.peek();h5(t,r)&&(Hf(t),e.push(r))}return e}function f4(t,e,r,n){const i=t._controlledReadableByteStream,o=e.constructor,u=(function(y){return s5(y)?1:y.BYTES_PER_ELEMENT})(o),{byteOffset:f,byteLength:p}=e,l=r*u;let d;try{d=rc(e.buffer)}catch(y){return void n._errorSteps(y)}const m={buffer:d,bufferByteLength:d.byteLength,byteOffset:f,byteLength:p,bytesFilled:0,minimumFill:l,elementSize:u,viewConstructor:o,readerType:"byob"};if(t._pendingPullIntos.length>0)return t._pendingPullIntos.push(m),void _C(i,n);if(i._state==="closed"){const y=new o(m.buffer,m.byteOffset,0);return void n._closeSteps(y)}if(t._queueTotalSize>0){if(h5(t,m)){const y=c5(m);return m5(t),void n._chunkSteps(y)}if(t._closeRequested){const y=new TypeError("Insufficient bytes to fill elements in the given buffer");return fo(t,y),void n._errorSteps(y)}}t._pendingPullIntos.push(m),_C(i,n),cc(t)}function v5(t,e){const r=t._pendingPullIntos.peek();y2(t),t._controlledReadableByteStream._state==="closed"?(function(n,i){i.readerType==="none"&&Hf(n);const o=n._controlledReadableByteStream;if(g2(o)){const u=[];for(;u.length<w5(o);)u.push(Hf(n));uy(o,u)}})(t,r):(function(n,i,o){if(p5(0,i,o),o.readerType==="none"){d5(n,o);const p=dE(n);return void uy(n._controlledReadableByteStream,p)}if(o.bytesFilled<o.minimumFill)return;Hf(n);const u=o.bytesFilled%o.elementSize;if(u>0){const p=o.byteOffset+o.bytesFilled;f5(n,o.buffer,p-u,u)}o.bytesFilled-=u;const f=dE(n);l5(n._controlledReadableByteStream,o),uy(n._controlledReadableByteStream,f)})(t,e,r),cc(t)}function Hf(t){return t._pendingPullIntos.shift()}function Rg(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0}function Xh(t){const e=t._controlledReadableByteStream;if(!t._closeRequested&&e._state==="readable")if(t._queueTotalSize>0)t._closeRequested=!0;else{if(t._pendingPullIntos.length>0){const r=t._pendingPullIntos.peek();if(r.bytesFilled%r.elementSize!==0){const n=new TypeError("Insufficient bytes to fill elements in the given buffer");throw fo(t,n),n}}Rg(t),Fp(e)}}function cy(t,e){const r=t._controlledReadableByteStream;if(t._closeRequested||r._state!=="readable")return;const{buffer:n,byteOffset:i,byteLength:o}=e;if(nc(n))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");const u=rc(n);if(t._pendingPullIntos.length>0){const f=t._pendingPullIntos.peek();if(nc(f.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");y2(t),f.buffer=rc(f.buffer),f.readerType==="none"&&d5(t,f)}XD(r)?((function(f){const p=f._controlledReadableByteStream._reader;for(;p._readRequests.length>0;){if(f._queueTotalSize===0)return;y5(f,p._readRequests.shift())}})(t),Og(r)===0?ly(t,u,i,o):(t._pendingPullIntos.length>0&&Hf(t),m2(r,new Uint8Array(u,i,o),!1))):g2(r)?(ly(t,u,i,o),uy(r,dE(t))):ly(t,u,i,o),cc(t)}function fo(t,e){const r=t._controlledReadableByteStream;r._state==="readable"&&(u5(t),Uu(t),Rg(t),z5(r,e))}function y5(t,e){const r=t._queue.shift();t._queueTotalSize-=r.byteLength,m5(t);const n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);e._chunkSteps(n)}function hE(t){if(t._byobRequest===null&&t._pendingPullIntos.length>0){const e=t._pendingPullIntos.peek(),r=new Uint8Array(e.buffer,e.byteOffset+e.bytesFilled,e.byteLength-e.bytesFilled),n=Object.create(Cf.prototype);(function(i,o,u){i._associatedReadableByteStreamController=o,i._view=u})(n,t,r),t._byobRequest=n}return t._byobRequest}function g5(t){const e=t._controlledReadableByteStream._state;return e==="errored"?null:e==="closed"?0:t._strategyHWM-t._queueTotalSize}function fy(t,e){const r=t._pendingPullIntos.peek();if(t._controlledReadableByteStream._state==="closed"){if(e!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(e===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(r.bytesFilled+e>r.byteLength)throw new RangeError("bytesWritten out of range")}r.buffer=rc(r.buffer),v5(t,e)}function dy(t,e){const r=t._pendingPullIntos.peek();if(t._controlledReadableByteStream._state==="closed"){if(e.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(e.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(r.byteOffset+r.bytesFilled!==e.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(r.bufferByteLength!==e.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(r.bytesFilled+e.byteLength>r.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");const n=e.byteLength;r.buffer=rc(e.buffer),v5(t,n)}function b5(t,e,r,n,i,o,u){e._controlledReadableByteStream=t,e._pullAgain=!1,e._pulling=!1,e._byobRequest=null,e._queue=e._queueTotalSize=void 0,Uu(e),e._closeRequested=!1,e._started=!1,e._strategyHWM=o,e._pullAlgorithm=n,e._cancelAlgorithm=i,e._autoAllocateChunkSize=u,e._pendingPullIntos=new mo,t._readableStreamController=e,Vo(Ut(r()),()=>(e._started=!0,cc(e),null),f=>(fo(e,f),null))}function m_(t){return new TypeError(`ReadableStreamBYOBRequest.prototype.${t} can only be used on a ReadableStreamBYOBRequest`)}function xh(t){return new TypeError(`ReadableByteStreamController.prototype.${t} can only be used on a ReadableByteStreamController`)}function d4(t,e){if((t=`${t}`)!="byob")throw new TypeError(`${e} '${t}' is not a valid enumeration value for ReadableStreamReaderMode`);return t}function _5(t){return new Ul(t)}function _C(t,e){t._reader._readIntoRequests.push(e)}function w5(t){return t._reader._readIntoRequests.length}function g2(t){const e=t._reader;return e!==void 0&&!!$l(e)}Object.defineProperties(pu.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),St(pu.prototype.close,"close"),St(pu.prototype.enqueue,"enqueue"),St(pu.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(pu.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});let Ul=class{constructor(e){if(tc(e,1,"ReadableStreamBYOBReader"),p2(e,"First parameter"),wu(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Pl(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");WD(this,e),this._readIntoRequests=new mo}get closed(){return $l(this)?this._closedPromise:Be(_v("closed"))}cancel(e=void 0){return $l(this)?this._ownerReadableStream===void 0?Be(Ly("cancel")):f2(this,e):Be(_v("cancel"))}read(e,r={}){if(!$l(this))return Be(_v("read"));if(!ArrayBuffer.isView(e))return Be(new TypeError("view must be an array buffer view"));if(e.byteLength===0)return Be(new TypeError("view must have non-zero byteLength"));if(e.buffer.byteLength===0)return Be(new TypeError("view's buffer must have non-zero byteLength"));if(nc(e.buffer))return Be(new TypeError("view's buffer has been detached"));let n;try{n=(function(p,l){var d;return bu(p,l),{min:h2((d=p?.min)!==null&&d!==void 0?d:1,`${l} has member 'min' that`)}})(r,"options")}catch(p){return Be(p)}const i=n.min;if(i===0)return Be(new TypeError("options.min must be greater than 0"));if((function(p){return s5(p.constructor)})(e)){if(i>e.byteLength)return Be(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(i>e.length)return Be(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return Be(Ly("read from"));let o,u;const f=wn((p,l)=>{o=p,u=l});return S5(this,e,i,{_chunkSteps:p=>o({value:p,done:!1}),_closeSteps:p=>o({value:p,done:!0}),_errorSteps:p=>u(p)}),f}releaseLock(){if(!$l(this))throw _v("releaseLock");this._ownerReadableStream!==void 0&&(function(e){ds(e);const r=new TypeError("Reader was released");E5(e,r)})(this)}};function $l(t){return!!Qr(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")&&t instanceof Ul}function S5(t,e,r,n){const i=t._ownerReadableStream;i._disturbed=!0,i._state==="errored"?n._errorSteps(i._storedError):f4(i._readableStreamController,e,r,n)}function E5(t,e){const r=t._readIntoRequests;t._readIntoRequests=new mo,r.forEach(n=>{n._errorSteps(e)})}function _v(t){return new TypeError(`ReadableStreamBYOBReader.prototype.${t} can only be used on a ReadableStreamBYOBReader`)}function pE(t,e){const{highWaterMark:r}=t;if(r===void 0)return e;if(a5(r)||r<0)throw new RangeError("Invalid highWaterMark");return r}function T5(t){const{size:e}=t;return e||(()=>1)}function A5(t,e){bu(t,e);const r=t?.highWaterMark,n=t?.size;return{highWaterMark:r===void 0?void 0:QD(r),size:n===void 0?void 0:h4(n,`${e} has member 'size' that`)}}function h4(t,e){return Pu(t,e),r=>QD(t(r))}function p4(t,e,r){return Pu(t,r),n=>vd(t,e,[n])}function m4(t,e,r){return Pu(t,r),()=>vd(t,e,[])}function v4(t,e,r){return Pu(t,r),n=>td(t,e,[n])}function y4(t,e,r){return Pu(t,r),(n,i)=>vd(t,e,[n,i])}function O5(t,e){if(!If(t))throw new TypeError(`${e} is not a WritableStream.`)}Object.defineProperties(Ul.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),St(Ul.prototype.cancel,"cancel"),St(Ul.prototype.read,"read"),St(Ul.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ul.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});let Tf=class{constructor(e={},r={}){e===void 0?e=null:KD(e,"First parameter");const n=A5(r,"Second parameter"),i=(function(u,f){bu(u,f);const p=u?.abort,l=u?.close,d=u?.start,m=u?.type,y=u?.write;return{abort:p===void 0?void 0:p4(p,u,`${f} has member 'abort' that`),close:l===void 0?void 0:m4(l,u,`${f} has member 'close' that`),start:d===void 0?void 0:v4(d,u,`${f} has member 'start' that`),write:y===void 0?void 0:y4(y,u,`${f} has member 'write' that`),type:m}})(e,"First parameter");if(g4(this),i.type!==void 0)throw new RangeError("Invalid type is specified");const o=T5(n);(function(u,f,p,l){const d=Object.create(My.prototype);let m,y,b,w;m=f.start!==void 0?()=>f.start(d):()=>{},y=f.write!==void 0?S=>f.write(S,d):()=>Ut(void 0),b=f.close!==void 0?()=>f.close():()=>Ut(void 0),w=f.abort!==void 0?S=>f.abort(S):()=>Ut(void 0),_4(u,d,m,y,b,w,p,l)})(this,i,pE(n,1),o)}get locked(){if(!If(this))throw Sv("locked");return Gf(this)}abort(e=void 0){return If(this)?Gf(this)?Be(new TypeError("Cannot abort a stream that already has a writer")):ky(this,e):Be(Sv("abort"))}close(){return If(this)?Gf(this)?Be(new TypeError("Cannot close a stream that already has a writer")):Sa(this)?Be(new TypeError("Cannot close an already-closing stream")):C5(this):Be(Sv("close"))}getWriter(){if(!If(this))throw Sv("getWriter");return R5(this)}};function R5(t){return new lu(t)}function g4(t){t._state="writable",t._storedError=void 0,t._writer=void 0,t._writableStreamController=void 0,t._writeRequests=new mo,t._inFlightWriteRequest=void 0,t._closeRequest=void 0,t._inFlightCloseRequest=void 0,t._pendingAbortRequest=void 0,t._backpressure=!1}function If(t){return!!Qr(t)&&!!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")&&t instanceof Tf}function Gf(t){return t._writer!==void 0}function ky(t,e){var r;if(t._state==="closed"||t._state==="errored")return Ut(void 0);t._writableStreamController._abortReason=e,(r=t._writableStreamController._abortController)===null||r===void 0||r.abort(e);const n=t._state;if(n==="closed"||n==="errored")return Ut(void 0);if(t._pendingAbortRequest!==void 0)return t._pendingAbortRequest._promise;let i=!1;n==="erroring"&&(i=!0,e=void 0);const o=wn((u,f)=>{t._pendingAbortRequest={_promise:void 0,_resolve:u,_reject:f,_reason:e,_wasAlreadyErroring:i}});return t._pendingAbortRequest._promise=o,i||b2(t,e),o}function C5(t){const e=t._state;if(e==="closed"||e==="errored")return Be(new TypeError(`The stream (in ${e} state) is not in the writable state and cannot be closed`));const r=wn((o,u)=>{const f={_resolve:o,_reject:u};t._closeRequest=f}),n=t._writer;var i;return n!==void 0&&t._backpressure&&e==="writable"&&T2(n),v2(i=t._writableStreamController,U5,0),Cg(i),r}function mE(t,e){t._state!=="writable"?_2(t):b2(t,e)}function b2(t,e){const r=t._writableStreamController;t._state="erroring",t._storedError=e;const n=t._writer;n!==void 0&&x5(n,e),!(function(i){return!(i._inFlightWriteRequest===void 0&&i._inFlightCloseRequest===void 0)})(t)&&r._started&&_2(t)}function _2(t){t._state="errored",t._writableStreamController[GD]();const e=t._storedError;if(t._writeRequests.forEach(n=>{n._reject(e)}),t._writeRequests=new mo,t._pendingAbortRequest===void 0)return void wv(t);const r=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(e),void wv(t);Vo(t._writableStreamController[HD](r._reason),()=>(r._resolve(),wv(t),null),n=>(r._reject(n),wv(t),null))}function Sa(t){return t._closeRequest!==void 0||t._inFlightCloseRequest!==void 0}function wv(t){t._closeRequest!==void 0&&(t._closeRequest._reject(t._storedError),t._closeRequest=void 0);const e=t._writer;e!==void 0&&E2(e,t._storedError)}function w2(t,e){const r=t._writer;r!==void 0&&e!==t._backpressure&&(e?(function(n){Ig(n)})(r):T2(r)),t._backpressure=e}Object.defineProperties(Tf.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),St(Tf.prototype.abort,"abort"),St(Tf.prototype.close,"close"),St(Tf.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Tf.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});let lu=class{constructor(e){if(tc(e,1,"WritableStreamDefaultWriter"),O5(e,"First parameter"),Gf(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;const r=e._state;if(r==="writable")!Sa(e)&&e._backpressure?Ig(this):wC(this),hy(this);else if(r==="erroring")yE(this,e._storedError),hy(this);else if(r==="closed")wC(this),hy(n=this),L5(n);else{const i=e._storedError;yE(this,i),j5(this,i)}var n}get closed(){return yl(this)?this._closedPromise:Be(gl("closed"))}get desiredSize(){if(!yl(this))throw gl("desiredSize");if(this._ownerWritableStream===void 0)throw Zh("desiredSize");return(function(e){const r=e._ownerWritableStream,n=r._state;return n==="errored"||n==="erroring"?null:n==="closed"?0:q5(r._writableStreamController)})(this)}get ready(){return yl(this)?this._readyPromise:Be(gl("ready"))}abort(e=void 0){return yl(this)?this._ownerWritableStream===void 0?Be(Zh("abort")):(function(r,n){return ky(r._ownerWritableStream,n)})(this,e):Be(gl("abort"))}close(){if(!yl(this))return Be(gl("close"));const e=this._ownerWritableStream;return e===void 0?Be(Zh("close")):Sa(e)?Be(new TypeError("Cannot close an already-closing stream")):I5(this)}releaseLock(){if(!yl(this))throw gl("releaseLock");this._ownerWritableStream!==void 0&&N5(this)}write(e=void 0){return yl(this)?this._ownerWritableStream===void 0?Be(Zh("write to")):P5(this,e):Be(gl("write"))}};function yl(t){return!!Qr(t)&&!!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")&&t instanceof lu}function I5(t){return C5(t._ownerWritableStream)}function b4(t,e){t._closedPromiseState==="pending"?E2(t,e):(function(r,n){j5(r,n)})(t,e)}function x5(t,e){t._readyPromiseState==="pending"?k5(t,e):(function(r,n){yE(r,n)})(t,e)}function N5(t){const e=t._ownerWritableStream,r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");x5(t,r),b4(t,r),e._writer=void 0,t._ownerWritableStream=void 0}function P5(t,e){const r=t._ownerWritableStream,n=r._writableStreamController,i=(function(f,p){if(f._strategySizeAlgorithm===void 0)return 1;try{return f._strategySizeAlgorithm(p)}catch(l){return vE(f,l),1}})(n,e);if(r!==t._ownerWritableStream)return Be(Zh("write to"));const o=r._state;if(o==="errored")return Be(r._storedError);if(Sa(r)||o==="closed")return Be(new TypeError("The stream is closing or closed and cannot be written to"));if(o==="erroring")return Be(r._storedError);const u=(function(f){return wn((p,l)=>{const d={_resolve:p,_reject:l};f._writeRequests.push(d)})})(r);return(function(f,p,l){try{v2(f,p,l)}catch(m){return void vE(f,m)}const d=f._controlledWritableStream;!Sa(d)&&d._state==="writable"&&w2(d,S2(f)),Cg(f)})(n,e,i),u}Object.defineProperties(lu.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),St(lu.prototype.abort,"abort"),St(lu.prototype.close,"close"),St(lu.prototype.releaseLock,"releaseLock"),St(lu.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(lu.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});const U5={};let My=class{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!v_(this))throw y_("abortReason");return this._abortReason}get signal(){if(!v_(this))throw y_("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e=void 0){if(!v_(this))throw y_("error");this._controlledWritableStream._state==="writable"&&D5(this,e)}[HD](e){const r=this._abortAlgorithm(e);return By(this),r}[GD](){Uu(this)}};function v_(t){return!!Qr(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledWritableStream")&&t instanceof My}function _4(t,e,r,n,i,o,u,f){e._controlledWritableStream=t,t._writableStreamController=e,e._queue=void 0,e._queueTotalSize=void 0,Uu(e),e._abortReason=void 0,e._abortController=(function(){if(typeof AbortController=="function")return new AbortController})(),e._started=!1,e._strategySizeAlgorithm=f,e._strategyHWM=u,e._writeAlgorithm=n,e._closeAlgorithm=i,e._abortAlgorithm=o;const p=S2(e);w2(t,p),Vo(Ut(r()),()=>(e._started=!0,Cg(e),null),l=>(e._started=!0,mE(t,l),null))}function By(t){t._writeAlgorithm=void 0,t._closeAlgorithm=void 0,t._abortAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function q5(t){return t._strategyHWM-t._queueTotalSize}function Cg(t){const e=t._controlledWritableStream;if(!t._started||e._inFlightWriteRequest!==void 0)return;if(e._state==="erroring")return void _2(e);if(t._queue.length===0)return;const r=t._queue.peek().value;r===U5?(function(n){const i=n._controlledWritableStream;(function(u){u._inFlightCloseRequest=u._closeRequest,u._closeRequest=void 0})(i),fE(n);const o=n._closeAlgorithm();By(n),Vo(o,()=>((function(u){u._inFlightCloseRequest._resolve(void 0),u._inFlightCloseRequest=void 0,u._state==="erroring"&&(u._storedError=void 0,u._pendingAbortRequest!==void 0&&(u._pendingAbortRequest._resolve(),u._pendingAbortRequest=void 0)),u._state="closed";const f=u._writer;f!==void 0&&L5(f)})(i),null),u=>((function(f,p){f._inFlightCloseRequest._reject(p),f._inFlightCloseRequest=void 0,f._pendingAbortRequest!==void 0&&(f._pendingAbortRequest._reject(p),f._pendingAbortRequest=void 0),mE(f,p)})(i,u),null))})(t):(function(n,i){const o=n._controlledWritableStream;(function(f){f._inFlightWriteRequest=f._writeRequests.shift()})(o);const u=n._writeAlgorithm(i);Vo(u,()=>{(function(p){p._inFlightWriteRequest._resolve(void 0),p._inFlightWriteRequest=void 0})(o);const f=o._state;if(fE(n),!Sa(o)&&f==="writable"){const p=S2(n);w2(o,p)}return Cg(n),null},f=>(o._state==="writable"&&By(n),(function(p,l){p._inFlightWriteRequest._reject(l),p._inFlightWriteRequest=void 0,mE(p,l)})(o,f),null))})(t,r)}function vE(t,e){t._controlledWritableStream._state==="writable"&&D5(t,e)}function S2(t){return q5(t)<=0}function D5(t,e){const r=t._controlledWritableStream;By(t),b2(r,e)}function Sv(t){return new TypeError(`WritableStream.prototype.${t} can only be used on a WritableStream`)}function y_(t){return new TypeError(`WritableStreamDefaultController.prototype.${t} can only be used on a WritableStreamDefaultController`)}function gl(t){return new TypeError(`WritableStreamDefaultWriter.prototype.${t} can only be used on a WritableStreamDefaultWriter`)}function Zh(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function hy(t){t._closedPromise=wn((e,r)=>{t._closedPromise_resolve=e,t._closedPromise_reject=r,t._closedPromiseState="pending"})}function j5(t,e){hy(t),E2(t,e)}function E2(t,e){t._closedPromise_reject!==void 0&&(zp(t._closedPromise),t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected")}function L5(t){t._closedPromise_resolve!==void 0&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved")}function Ig(t){t._readyPromise=wn((e,r)=>{t._readyPromise_resolve=e,t._readyPromise_reject=r}),t._readyPromiseState="pending"}function yE(t,e){Ig(t),k5(t,e)}function wC(t){Ig(t),T2(t)}function k5(t,e){t._readyPromise_reject!==void 0&&(zp(t._readyPromise),t._readyPromise_reject(e),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected")}function T2(t){t._readyPromise_resolve!==void 0&&(t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled")}Object.defineProperties(My.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(My.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});const SC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:void 0,w4=(function(){const t=SC?.DOMException;return(function(e){if(typeof e!="function"&&typeof e!="object"||e.name!=="DOMException")return!1;try{return new e,!0}catch{return!1}})(t)?t:void 0})()||(function(){const t=function(e,r){this.message=e||"",this.name=r||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return St(t,"DOMException"),t.prototype=Object.create(Error.prototype),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t})();function EC(t,e,r,n,i,o){const u=Ff(t),f=R5(e);t._disturbed=!0;let p=!1,l=Ut(void 0);return wn((d,m)=>{let y;if(o!==void 0){if(y=()=>{const P=o.reason!==void 0?o.reason:new w4("Aborted","AbortError"),D=[];n||D.push(()=>e._state==="writable"?ky(e,P):Ut(void 0)),i||D.push(()=>t._state==="readable"?$o(t,P):Ut(void 0)),O(()=>Promise.all(D.map(j=>j())),!0,P)},o.aborted)return void y();o.addEventListener("abort",y)}var b,w,S;if(R(t,u._closedPromise,P=>(n?C(!0,P):O(()=>ky(e,P),!0,P),null)),R(e,f._closedPromise,P=>(i?C(!0,P):O(()=>$o(t,P),!0,P),null)),b=t,w=u._closedPromise,S=()=>(r?C():O(()=>(function(P){const D=P._ownerWritableStream,j=D._state;return Sa(D)||j==="closed"?Ut(void 0):j==="errored"?Be(D._storedError):I5(P)})(f)),null),b._state==="closed"?S():c_(w,S),Sa(e)||e._state==="closed"){const P=new TypeError("the destination writable stream closed before all data could be piped to it");i?C(!0,P):O(()=>$o(t,P),!0,P)}function E(){const P=l;return wa(l,()=>P!==l?E():void 0)}function R(P,D,j){P._state==="errored"?j(P._storedError):lE(D,j)}function O(P,D,j){function q(){return Vo(P(),()=>I(D,j),U=>I(!0,U)),null}p||(p=!0,e._state!=="writable"||Sa(e)?q():c_(E(),q))}function C(P,D){p||(p=!0,e._state!=="writable"||Sa(e)?I(P,D):c_(E(),()=>I(P,D)))}function I(P,D){return N5(f),ds(u),o!==void 0&&o.removeEventListener("abort",y),P?m(D):d(void 0),null}zp(wn((P,D)=>{(function j(q){q?P():wa(p?Ut(!0):wa(f._readyPromise,()=>wn((U,Y)=>{Rp(u,{_chunkSteps:$=>{l=wa(P5(f,$),void 0,Op),U(!1)},_closeSteps:()=>U(!0),_errorSteps:Y})})),j,D)})(!1)}))})}let mu=class{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Ev(this))throw Tv("desiredSize");return A2(this)}close(){if(!Ev(this))throw Tv("close");if(!id(this))throw new TypeError("The stream is not in a state that permits close");rd(this)}enqueue(e=void 0){if(!Ev(this))throw Tv("enqueue");if(!id(this))throw new TypeError("The stream is not in a state that permits enqueue");return nd(this,e)}error(e=void 0){if(!Ev(this))throw Tv("error");xu(this,e)}[u2](e){Uu(this);const r=this._cancelAlgorithm(e);return zy(this),r}[l2](e){const r=this._controlledReadableStream;if(this._queue.length>0){const n=fE(this);this._closeRequested&&this._queue.length===0?(zy(this),Fp(r)):Cp(this),e._chunkSteps(n)}else JD(r,e),Cp(this)}[c2](){}};function Ev(t){return!!Qr(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledReadableStream")&&t instanceof mu}function Cp(t){if(M5(t)){if(t._pulling)return void(t._pullAgain=!0);t._pulling=!0,Vo(t._pullAlgorithm(),()=>(t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,Cp(t)),null),e=>(xu(t,e),null))}}function M5(t){const e=t._controlledReadableStream;return!id(t)||!t._started?!1:wu(e)&&Og(e)>0?!0:A2(t)>0}function zy(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function rd(t){if(!id(t))return;const e=t._controlledReadableStream;t._closeRequested=!0,t._queue.length===0&&(zy(t),Fp(e))}function nd(t,e){if(!id(t))return;const r=t._controlledReadableStream;if(wu(r)&&Og(r)>0)m2(r,e,!1);else{let n;try{n=t._strategySizeAlgorithm(e)}catch(i){throw xu(t,i),i}try{v2(t,e,n)}catch(i){throw xu(t,i),i}}Cp(t)}function xu(t,e){const r=t._controlledReadableStream;r._state==="readable"&&(Uu(t),zy(t),z5(r,e))}function A2(t){const e=t._controlledReadableStream._state;return e==="errored"?null:e==="closed"?0:t._strategyHWM-t._queueTotalSize}function id(t){const e=t._controlledReadableStream._state;return!t._closeRequested&&e==="readable"}function B5(t,e,r,n,i,o,u){e._controlledReadableStream=t,e._queue=void 0,e._queueTotalSize=void 0,Uu(e),e._started=!1,e._closeRequested=!1,e._pullAgain=!1,e._pulling=!1,e._strategySizeAlgorithm=u,e._strategyHWM=o,e._pullAlgorithm=n,e._cancelAlgorithm=i,t._readableStreamController=e,Vo(Ut(r()),()=>(e._started=!0,Cp(e),null),f=>(xu(e,f),null))}function Tv(t){return new TypeError(`ReadableStreamDefaultController.prototype.${t} can only be used on a ReadableStreamDefaultController`)}function S4(t,e){return Pl(t._readableStreamController)?(function(r){let n,i,o,u,f,p=Ff(r),l=!1,d=!1,m=!1,y=!1,b=!1;const w=wn(j=>{f=j});function S(j){lE(j._closedPromise,q=>(j!==p||(fo(o._readableStreamController,q),fo(u._readableStreamController,q),y&&b||f(void 0)),null))}function E(){$l(p)&&(ds(p),p=Ff(r),S(p)),Rp(p,{_chunkSteps:j=>{Kl(()=>{d=!1,m=!1;const q=j;let U=j;if(!y&&!b)try{U=bC(j)}catch(Y){return fo(o._readableStreamController,Y),fo(u._readableStreamController,Y),void f($o(r,Y))}y||cy(o._readableStreamController,q),b||cy(u._readableStreamController,U),l=!1,d?O():m&&C()})},_closeSteps:()=>{l=!1,y||Xh(o._readableStreamController),b||Xh(u._readableStreamController),o._readableStreamController._pendingPullIntos.length>0&&fy(o._readableStreamController,0),u._readableStreamController._pendingPullIntos.length>0&&fy(u._readableStreamController,0),y&&b||f(void 0)},_errorSteps:()=>{l=!1}})}function R(j,q){_u(p)&&(ds(p),p=_5(r),S(p));const U=q?u:o,Y=q?o:u;S5(p,j,1,{_chunkSteps:$=>{Kl(()=>{d=!1,m=!1;const L=q?b:y;if(q?y:b)L||dy(U._readableStreamController,$);else{let H;try{H=bC($)}catch(Q){return fo(U._readableStreamController,Q),fo(Y._readableStreamController,Q),void f($o(r,Q))}L||dy(U._readableStreamController,$),cy(Y._readableStreamController,H)}l=!1,d?O():m&&C()})},_closeSteps:$=>{l=!1;const L=q?b:y,H=q?y:b;L||Xh(U._readableStreamController),H||Xh(Y._readableStreamController),$!==void 0&&(L||dy(U._readableStreamController,$),!H&&Y._readableStreamController._pendingPullIntos.length>0&&fy(Y._readableStreamController,0)),L&&H||f(void 0)},_errorSteps:()=>{l=!1}})}function O(){if(l)return d=!0,Ut(void 0);l=!0;const j=hE(o._readableStreamController);return j===null?E():R(j._view,!1),Ut(void 0)}function C(){if(l)return m=!0,Ut(void 0);l=!0;const j=hE(u._readableStreamController);return j===null?E():R(j._view,!0),Ut(void 0)}function I(j){if(y=!0,n=j,b){const q=Qh([n,i]),U=$o(r,q);f(U)}return w}function P(j){if(b=!0,i=j,y){const q=Qh([n,i]),U=$o(r,q);f(U)}return w}function D(){}return o=AC(D,O,I),u=AC(D,C,P),S(p),[o,u]})(t):(function(r){const n=Ff(r);let i,o,u,f,p,l=!1,d=!1,m=!1,y=!1;const b=wn(O=>{p=O});function w(){return l?(d=!0,Ut(void 0)):(l=!0,Rp(n,{_chunkSteps:O=>{Kl(()=>{d=!1;const C=O,I=O;m||nd(u._readableStreamController,C),y||nd(f._readableStreamController,I),l=!1,d&&w()})},_closeSteps:()=>{l=!1,m||rd(u._readableStreamController),y||rd(f._readableStreamController),m&&y||p(void 0)},_errorSteps:()=>{l=!1}}),Ut(void 0))}function S(O){if(m=!0,i=O,y){const C=Qh([i,o]),I=$o(r,C);p(I)}return b}function E(O){if(y=!0,o=O,m){const C=Qh([i,o]),I=$o(r,C);p(I)}return b}function R(){}return u=$y(R,w,S),f=$y(R,w,E),lE(n._closedPromise,O=>(xu(u._readableStreamController,O),xu(f._readableStreamController,O),m&&y||p(void 0),null)),[u,f]})(t)}function E4(t){return Qr(e=t)&&e.getReader!==void 0?(function(r){let n;function i(){let u;try{u=r.read()}catch(f){return Be(f)}return Yl(u,f=>{if(!Qr(f))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(f.done)rd(n._readableStreamController);else{const p=f.value;nd(n._readableStreamController,p)}})}function o(u){try{return Ut(r.cancel(u))}catch(f){return Be(f)}}return n=$y(Op,i,o,0),n})(t.getReader()):(function(r){let n;const i=r5(r,"async");function o(){let f;try{f=n5(i)}catch(p){return Be(p)}return Yl(Ut(f),p=>{if(!Qr(p))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(p.done)rd(n._readableStreamController);else{const l=p.value;nd(n._readableStreamController,l)}})}function u(f){const p=i.iterator;let l;try{l=Jh(p,"return")}catch(d){return Be(d)}return l===void 0?Ut(void 0):Yl(vd(l,p,[f]),d=>{if(!Qr(d))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return n=$y(Op,o,u,0),n})(t);var e}function T4(t,e,r){return Pu(t,r),n=>vd(t,e,[n])}function A4(t,e,r){return Pu(t,r),n=>vd(t,e,[n])}function O4(t,e,r){return Pu(t,r),n=>td(t,e,[n])}function R4(t,e){if((t=`${t}`)!="bytes")throw new TypeError(`${e} '${t}' is not a valid enumeration value for ReadableStreamType`);return t}function TC(t,e){bu(t,e);const r=t?.preventAbort,n=t?.preventCancel,i=t?.preventClose,o=t?.signal;return o!==void 0&&(function(u,f){if(!(function(p){if(typeof p!="object"||p===null)return!1;try{return typeof p.aborted=="boolean"}catch{return!1}})(u))throw new TypeError(`${f} is not an AbortSignal.`)})(o,`${e} has member 'signal' that`),{preventAbort:!!r,preventCancel:!!n,preventClose:!!i,signal:o}}Object.defineProperties(mu.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),St(mu.prototype.close,"close"),St(mu.prototype.enqueue,"enqueue"),St(mu.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(mu.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});let pn=class{constructor(e={},r={}){e===void 0?e=null:KD(e,"First parameter");const n=A5(r,"Second parameter"),i=(function(o,u){bu(o,u);const f=o,p=f?.autoAllocateChunkSize,l=f?.cancel,d=f?.pull,m=f?.start,y=f?.type;return{autoAllocateChunkSize:p===void 0?void 0:h2(p,`${u} has member 'autoAllocateChunkSize' that`),cancel:l===void 0?void 0:T4(l,f,`${u} has member 'cancel' that`),pull:d===void 0?void 0:A4(d,f,`${u} has member 'pull' that`),start:m===void 0?void 0:O4(m,f,`${u} has member 'start' that`),type:y===void 0?void 0:R4(y,`${u} has member 'type' that`)}})(e,"First parameter");if(O2(this),i.type==="bytes"){if(n.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");(function(o,u,f){const p=Object.create(pu.prototype);let l,d,m;l=u.start!==void 0?()=>u.start(p):()=>{},d=u.pull!==void 0?()=>u.pull(p):()=>Ut(void 0),m=u.cancel!==void 0?b=>u.cancel(b):()=>Ut(void 0);const y=u.autoAllocateChunkSize;if(y===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");b5(o,p,l,d,m,f,y)})(this,i,pE(n,0))}else{const o=T5(n);(function(u,f,p,l){const d=Object.create(mu.prototype);let m,y,b;m=f.start!==void 0?()=>f.start(d):()=>{},y=f.pull!==void 0?()=>f.pull(d):()=>Ut(void 0),b=f.cancel!==void 0?w=>f.cancel(w):()=>Ut(void 0),B5(u,d,m,y,b,p,l)})(this,i,pE(n,1),o)}}get locked(){if(!au(this))throw bl("locked");return wu(this)}cancel(e=void 0){return au(this)?wu(this)?Be(new TypeError("Cannot cancel a stream that already has a reader")):$o(this,e):Be(bl("cancel"))}getReader(e=void 0){if(!au(this))throw bl("getReader");return(function(r,n){bu(r,n);const i=r?.mode;return{mode:i===void 0?void 0:d4(i,`${n} has member 'mode' that`)}})(e,"First parameter").mode===void 0?Ff(this):_5(this)}pipeThrough(e,r={}){if(!au(this))throw bl("pipeThrough");tc(e,1,"pipeThrough");const n=(function(o,u){bu(o,u);const f=o?.readable;pC(f,"readable","ReadableWritablePair"),p2(f,`${u} has member 'readable' that`);const p=o?.writable;return pC(p,"writable","ReadableWritablePair"),O5(p,`${u} has member 'writable' that`),{readable:f,writable:p}})(e,"First parameter"),i=TC(r,"Second parameter");if(wu(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Gf(n.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return zp(EC(this,n.writable,i.preventClose,i.preventAbort,i.preventCancel,i.signal)),n.readable}pipeTo(e,r={}){if(!au(this))return Be(bl("pipeTo"));if(e===void 0)return Be("Parameter 1 is required in 'pipeTo'.");if(!If(e))return Be(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let n;try{n=TC(r,"Second parameter")}catch(i){return Be(i)}return wu(this)?Be(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Gf(e)?Be(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):EC(this,e,n.preventClose,n.preventAbort,n.preventCancel,n.signal)}tee(){if(!au(this))throw bl("tee");return Qh(S4(this))}values(e=void 0){if(!au(this))throw bl("values");return(function(r,n){const i=Ff(r),o=new i5(i,n),u=Object.create(o5);return u._asyncIteratorImpl=o,u})(this,(function(r,n){return bu(r,n),{preventCancel:!!r?.preventCancel}})(e,"First parameter").preventCancel)}[$p](e){return this.values(e)}static from(e){return E4(e)}};function $y(t,e,r,n=1,i=()=>1){const o=Object.create(pn.prototype);return O2(o),B5(o,Object.create(mu.prototype),t,e,r,n,i),o}function AC(t,e,r){const n=Object.create(pn.prototype);return O2(n),b5(n,Object.create(pu.prototype),t,e,r,0,void 0),n}function O2(t){t._state="readable",t._reader=void 0,t._storedError=void 0,t._disturbed=!1}function au(t){return!!Qr(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")&&t instanceof pn}function wu(t){return t._reader!==void 0}function $o(t,e){if(t._disturbed=!0,t._state==="closed")return Ut(void 0);if(t._state==="errored")return Be(t._storedError);Fp(t);const r=t._reader;if(r!==void 0&&$l(r)){const n=r._readIntoRequests;r._readIntoRequests=new mo,n.forEach(i=>{i._closeSteps(void 0)})}return Yl(t._readableStreamController[u2](e),Op)}function Fp(t){t._state="closed";const e=t._reader;if(e!==void 0&&(YD(e),_u(e))){const r=e._readRequests;e._readRequests=new mo,r.forEach(n=>{n._closeSteps()})}}function z5(t,e){t._state="errored",t._storedError=e;const r=t._reader;r!==void 0&&(d2(r,e),_u(r)?ZD(r,e):E5(r,e))}function bl(t){return new TypeError(`ReadableStream.prototype.${t} can only be used on a ReadableStream`)}Object.defineProperties(pn,{from:{enumerable:!0}}),Object.defineProperties(pn.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),St(pn.from,"from"),St(pn.prototype.cancel,"cancel"),St(pn.prototype.getReader,"getReader"),St(pn.prototype.pipeThrough,"pipeThrough"),St(pn.prototype.pipeTo,"pipeTo"),St(pn.prototype.tee,"tee"),St(pn.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(pn.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(pn.prototype,$p,{value:pn.prototype.values,writable:!0,configurable:!0});const C4=t=>t.byteLength;St(C4,"size");const I4=()=>1;St(I4,"size");function x4(t,e){xu(t._readable._readableStreamController,e),R2(t,e)}function R2(t,e){P4(t._transformStreamController),vE(t._writable._writableStreamController,e),N4(t)}function N4(t){t._backpressure&&$5(t,!1)}function $5(t,e){t._backpressureChangePromise!==void 0&&t._backpressureChangePromise_resolve(),t._backpressureChangePromise=wn(r=>{t._backpressureChangePromise_resolve=r}),t._backpressure=e}let Af=class{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Av(this))throw Ov("desiredSize");return A2(this._controlledTransformStream._readable._readableStreamController)}enqueue(e=void 0){if(!Av(this))throw Ov("enqueue");U4(this,e)}error(e=void 0){if(!Av(this))throw Ov("error");var r;r=e,x4(this._controlledTransformStream,r)}terminate(){if(!Av(this))throw Ov("terminate");(function(e){const r=e._controlledTransformStream;rd(r._readable._readableStreamController);const n=new TypeError("TransformStream terminated");R2(r,n)})(this)}};function Av(t){return!!Qr(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")&&t instanceof Af}function P4(t){t._transformAlgorithm=void 0,t._flushAlgorithm=void 0,t._cancelAlgorithm=void 0}function U4(t,e){const r=t._controlledTransformStream,n=r._readable._readableStreamController;if(!id(n))throw new TypeError("Readable side is not in a state that permits enqueue");try{nd(n,e)}catch(o){throw R2(r,o),r._readable._storedError}(function(o){return!M5(o)})(n)!==r._backpressure&&$5(r,!0)}function Ov(t){return new TypeError(`TransformStreamDefaultController.prototype.${t} can only be used on a TransformStreamDefaultController`)}Object.defineProperties(Af.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),St(Af.prototype.enqueue,"enqueue"),St(Af.prototype.error,"error"),St(Af.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Af.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});var q4=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),od=function(){return od=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},od.apply(this,arguments)},D4=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},j4=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},L4=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function k4(){if(typeof wx>"u"||typeof Page>"u"||!wx.getSystemInfoSync||!wx.getStorageSync||!wx.setStorageSync||!wx.connectSocket||!wx.request)return!1;try{if(!wx.getSystemInfoSync()||wx.getSystemInfoSync().AppPlatform==="qq")return!1}catch{return!1}return!0}function M4(){return typeof App>"u"&&typeof getApp>"u"&&!wx.onAppHide&&!wx.offAppHide&&!wx.onAppShow&&!wx.offAppShow}var g_="Error when aborting requestTask",gE=(function(t){q4(e,t);function e(r){r===void 0&&(r={});var n=t.call(this)||this,i=r.timeout,o=r.timeoutMsg,u=r.restrictedMethods;return n._timeout=i||0,n._timeoutMsg=o||"",n._restrictedMethods=u||["get","post","upload","download"],n}return e.prototype.post=function(r){var n=this;return new Promise(function(i,o){var u=r.url,f=r.data,p=r.headers,l=wx.request({url:Kh("https:",u),data:f,timeout:n._timeout,method:"POST",header:p,success:function(d){d.statusCode>=200&&d.statusCode<300?i({statusCode:d.statusCode,status:d.statusCode,data:d.data}):o(d)},fail:function(d){o(d)},complete:function(d){if(!(!d||!d.errMsg)&&!(!n._timeout||n._restrictedMethods.indexOf("post")===-1)){var m=d.errMsg;if(m==="request:fail timeout"){console.warn(n._timeoutMsg);try{l.abort()}catch{}}}}})})},e.prototype.get=function(r){var n=this;return new Promise(function(i,o){var u=r.url,f=r.body,p=r.headers,l=Kh("https:",u),d=wx.request({url:l,data:f,timeout:n._timeout,method:"GET",header:p,success:function(m){m.statusCode>=200&&m.statusCode<300?i({statusCode:m.statusCode,status:m.statusCode,data:m.data}):o(m)},fail:function(m){o(m)},complete:function(m){if(!(!m||!m.errMsg)&&!(!n._timeout||n._restrictedMethods.indexOf("get")===-1)){var y=m.errMsg;if(y.includes("timeout")){console.warn(n._timeoutMsg);try{d.abort()}catch(b){console.warn(g_,b)}}}}})})},e.prototype.upload=function(r){var n=this,i=this;return new Promise(function(o){return D4(n,void 0,void 0,function(){var u,f,p,l,d,m;return j4(this,function(y){return u=r.url,f=r.file,p=r.data,l=r.headers,d=r.onUploadProgress,m=wx.uploadFile({url:u,filePath:f,name:"file",formData:od({},p),header:l,timeout:this._timeout,success:function(b){var w={statusCode:b.statusCode,data:b.data||{}};b.statusCode===200&&p.success_action_status&&(w.statusCode=parseInt(p.success_action_status,10)),o(w)},fail:function(b){o(b)},complete:function(b){if(!(!b||!b.errMsg)&&!(!i._timeout||i._restrictedMethods.indexOf("upload")===-1)){var w=b.errMsg;if(w==="request:fail timeout"){console.warn(i._timeoutMsg);try{m.abort()}catch{}}}}}),d&&m.onProgressUpdate(function(b){d(b)}),[2]})})})},e.prototype.download=function(r){var n=this,i=this;return new Promise(function(o,u){var f=r.url,p=r.headers,l=wx.downloadFile({url:Kh("https:",f),header:p,timeout:n._timeout,success:function(d){d.statusCode===200&&d.tempFilePath?o({statusCode:200,tempFilePath:d.tempFilePath}):o(d)},fail:function(d){u(d)},complete:function(d){if(!(!d||!d.errMsg)&&!(!i._timeout||i._restrictedMethods.indexOf("download")===-1)){var m=d.errMsg;if(m==="request:fail timeout"){console.warn(i._timeoutMsg);try{l.abort()}catch{}}}}})})},e.prototype.fetch=function(r){var n=r.url,i=r.body,o=r.enableAbort,u=r.headers,f=r.method,p=r.stream,l=p===void 0?!1:p,d=r.signal,m=r.timeout,y=this,b=m??this._timeout,w=null,S=new pn({start:function(E){w=E},cancel:function(){w=null}});return new Promise(function(E,R){l&&E({data:S});var O=wx.request({url:Kh("https:",n),data:i,timeout:b,method:f.toUpperCase(),header:u,success:function(I){var P;(P=w)===null||P===void 0||P.close(),!l&&E(I)},fail:function(I){var P;if((P=w)===null||P===void 0||P.close(),R(I),l)throw I},complete:function(I){if(!(!I||!I.errMsg)&&!(!b||y._restrictedMethods.indexOf("post")===-1||!o)){var P=I.errMsg;if(P==="request:fail timeout"){console.warn(y._timeoutMsg);try{O.abort()}catch(D){console.warn(g_,D)}}}},enableChunked:l});if(O.onChunkReceived(function(I){var P;(P=w)===null||P===void 0||P.enqueue(new Uint8Array(I.data))}),d){var C=function(){try{O.abort()}catch(I){console.warn(g_,I)}};d.aborted?C():d.addEventListener("abort",function(){return C()})}})},e})(a2),F5={setItem:function(t,e){wx.setStorageSync(t,e)},getItem:function(t){return wx.getStorageSync(t)},removeItem:function(t){wx.removeStorageSync(t)},clear:function(){wx.clearStorageSync()}},H5=(function(){function t(e,r){r===void 0&&(r={});var n=wx.connectSocket(od({url:e},r)),i={set onopen(o){n.onOpen(o)},set onmessage(o){n.onMessage(o)},set onclose(o){n.onClose(o)},set onerror(o){n.onError(o)},send:function(o){return n.send({data:o})},close:function(o,u){return n.close({code:o,reason:u})},get readyState(){return n.readyState},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3};return i}return t})();function G5(t){var e={},r=t.replace(/^[?#]/,"");if(!r)return e;var n=r.split("&");return n.forEach(function(i){var o=i.split("="),u=o[0],f=o[1];u=decodeURIComponent(u),f=decodeURIComponent(f),u&&(e[u]?Array.isArray(e[u])?e[u].push(f):e[u]=[e[u],f]:e[u]=f)}),e}function B4(t){var e={root:{globalThis:{}},reqClass:gE,wsClass:H5,captchaOptions:{openURIWithCallback:function(r){var n=t.EventBus,i={},o=r;console.log("openURIWithCallback",r);var u=r.match(/^(data:.*?)(\?[^#\s]*)?$/);if(u){o=u[1],console.log("openURIWithCallback url",o);var f=u[2];f&&(i=G5(f))}console.log("openURIWithCallback queryObj",i);var p=i.token,l=L4(i,["token"]);return/^data:/.test(o)&&!p?Promise.reject({error:"invalid_argument",error_description:"invalie captcha data: "+r}):p?new Promise(function(d){console.log("wait for captcha..."),n.$emit("CAPTCHA_DATA_CHANGE",od(od({},l),{token:p,url:o})),n.$once("RESOLVE_CAPTCHA_DATA",function(m){d(m)})}):Promise.reject({error:"unimplemented",error_description:"need to impl captcha data"})}},localStorage:F5,primaryStorage:Ap.local,getAppSign:function(){var r=wx.getAccountInfoSync();return M4()?r&&r.plugin?r.plugin.appId:"":r&&r.miniProgram?r.miniProgram.appId:""}};return e}var ba={genAdapter:B4,isMatch:k4,runtime:"wx_mp"},fp=function(){return fp=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},fp.apply(this,arguments)},z4=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},os={},$4=function(){gE.prototype.upload=function(e){var r=this,n=this;return new Promise(function(i){var o=e.url,u=e.file,f=e.data,p=e.headers,l=wx.getFileSystemManager(),d=wx.request({url:o,method:e.method,header:fp({"content-type":" "},p),data:l.readFileSync(u),timeout:r._timeout,success:function(m){var y={statusCode:m.statusCode,data:m.data||{}};m.statusCode===200&&f?.success_action_status&&(y.statusCode=parseInt(f.success_action_status,10)),i(y)},fail:function(m){i(m)},complete:function(m){if(m?.errMsg&&!(!n._timeout||n._restrictedMethods.indexOf("upload")===-1)){var y=m.errMsg;if(y==="request:fail timeout"){console.warn(n._timeoutMsg);try{d.abort()}catch{}}}}})})};function t(){return typeof App>"u"&&typeof getApp>"u"&&!wx.onAppHide&&!wx.offAppHide&&!wx.onAppShow&&!wx.offAppShow}return ba.genAdapter=function(r){var n={root:{globalThis:{}},reqClass:gE,wsClass:H5,captchaOptions:{openURIWithCallback:function(i){var o=r.EventBus,u={},f=i;console.log("openURIWithCallback",i);var p=i.match(/^(data:.*?)(\?[^#\s]*)?$/);if(p){f=p[1],console.log("openURIWithCallback url",f);var l=p[2];l&&(u=G5(l))}console.log("openURIWithCallback queryObj",u);var d=u.token,m=z4(u,["token"]);return/^data:/.test(f)&&!d?Promise.reject({error:"invalid_argument",error_description:"invalie captcha data: ".concat(i)}):d?new Promise(function(y){console.log("wait for captcha..."),o.$emit("CAPTCHA_DATA_CHANGE",fp(fp({},m),{token:d,url:f})),o.$once("RESOLVE_CAPTCHA_DATA",function(b){y(b)})}):Promise.reject({error:"unimplemented",error_description:"need to impl captcha data"})}},localStorage:F5,primaryStorage:Ap.local,getAppSign:function(){var i=wx.getAccountInfoSync();return t()?i&&i.plugin?i.plugin.appId:"":i&&i.miniProgram?i.miniProgram.appId:""}};return n},ba},xf=function(){return xf=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},xf.apply(this,arguments)},F4="user_info",OC=X8,bE={},_E={};function RC(t){var e=t.env,r=t.platformInfo,n="".concat(F4,"_").concat(e),i={userInfoKey:n};bE[e]=bE[e]||new OC(xf(xf({},t),{keys:i,platformInfo:r})),_E[e]=_E[e]||new OC(xf(xf({},t),{keys:i,platformInfo:r,persistence:"local"}))}function H4(t){return bE[t]}function W5(t){return _E[t]}var Fy=function(){return Fy=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Fy.apply(this,arguments)},G4=["ap-shanghai","ap-guangzhou","ap-shenzhen-fsi","ap-shanghai-fsi","ap-nanjing","ap-beijing","ap-chengdu","ap-chongqing","ap-hongkong"],W4=q8,V4=D8,V5="",Y5="@cloudbase/js-sdk";function Y4(t){V5=t}function Hy(){return V5}function K4(t){Y5=t,W4(t)}function Q4(){return Y5}var J4="2020-01-10",K5=[],X4=["env","endPointKey","region"],wE="https:";function Q5(t){return K5.find(function(e){return X4.filter(function(r){return t[r]!=null}).every(function(r){return e[r]===t[r]})})}function Gy(t){var e,r;t.protocol&&!/:$/.test(t.protocol)&&(t.protocol="".concat(t.protocol,":"));var n=Q5(t);n?(t.baseUrl!=null&&(n.baseUrl=t.baseUrl),t.protocol!=null&&(n.protocol=t.protocol)):K5.push(Fy(Fy({},t),{protocol:(e=t.protocol)!==null&&e!==void 0?e:wE})),t.endPointKey==="CLOUD_API"&&V4((r=t.protocol)!==null&&r!==void 0?r:wE)}function dp(t,e,r){return Q5({env:t,endPointKey:e,region:r})}function Z4(t,e,r){r===void 0&&(r="ap-shanghai"),r=r||"ap-shanghai";var n="//".concat(t,".api.tcloudbasegateway.com/v1");G4.includes(r)||(n="//".concat(t,".api.intl.tcloudbasegateway.com/v1")),Gy({endPointKey:"GATEWAY",env:t,baseUrl:n,protocol:e})}function e9(t,e,r){var n="//".concat(t,".").concat(e||"ap-shanghai",".tcb-api.tencentcloudapi.com/web");Gy({env:t,region:e,baseUrl:n,protocol:r,endPointKey:"CLOUD_API"})}function CC(t,e){e===void 0&&(e="CLOUD_API");var r=dp(t,e||"CLOUD_API"),n=r.protocol,i=r.baseUrl,o="".concat(n).concat(i);return o.match(/(http(s)?:)?\/\/([^/?#]*)/)[0]}var IC;(function(t){t.NULL="NULL",t.ANONYMOUS="ANONYMOUS",t.WECHAT="WECHAT",t.WECHAT_PUBLIC="WECHAT-PUBLIC",t.WECHAT_OPEN="WECHAT-OPEN",t.CUSTOM="CUSTOM",t.EMAIL="EMAIL",t.USERNAME="USERNAME",t.PHONE="PHONE"})(IC||(IC={}));var ft=function(){return ft=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ft.apply(this,arguments)},da=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},ha=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},t9=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},b_=Bn,r9=z8,n9=jD,xC=kD,i9=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"];function __(t,e,r){var n=t[e];t[e]=function(i){var o={},u={};r.forEach(function(p){var l=p.call(t,i),d=l.data,m=l.headers;Object.assign(o,d),Object.assign(u,m)});var f=i.data;return f&&(function(){if(n9(f)){Object.keys(o).forEach(function(p){f.append(p,o[p])});return}i.data=ft(ft({},f),o)})(),i.headers=ft(ft({},i.headers||{}),u),n.call(t,i)}}function w_(){var t=r9();return{data:{seqId:t},headers:{"X-SDK-Version":"@cloudbase/js-sdk/".concat(Hy()),"x-seqid":t}}}var o9=(function(){function t(e){var r=this;this.throwWhenRequestFail=!1,this.config=e;var n={timeout:this.config.timeout,timeoutMsg:"[@cloudbase/js-sdk] ".concat(this.config.timeout/1e3,"s"),restrictedMethods:["post","put"]};this.reqClass=new os.adapter.reqClass(n),this.throwWhenRequestFail=e.throw||!1,this.localCache=W5(this.config.env),this.config.endPointMode!=="GATEWAY"&&(__(this.reqClass,"post",[w_]),__(this.reqClass,"upload",[w_]),__(this.reqClass,"download",[w_])),Eg.on(Tg,function(i){var o;r.config.i18n=((o=i.data)===null||o===void 0?void 0:o.i18n)||r.config.i18n})}return t.prototype.getAccessToken=function(e){return e===void 0&&(e=null),da(this,void 0,void 0,function(){var r,n,i;return ha(this,function(o){switch(o.label){case 0:if(e!=null)return[2,e];if(r=this.config._fromApp,!r.oauthInstance)throw new Error("you can't request without auth");return n=r.oauthInstance,i=n.oauth2client,[4,this.getOauthAccessTokenV2(i)];case 1:return[2,o.sent().accessToken]}})})},t.prototype.getDefaultHeaders=function(){var e,r,n;return e={},e[(r=this.config.i18n)===null||r===void 0?void 0:r.LANG_HEADER_KEY]=(n=this.config.i18n)===null||n===void 0?void 0:n.lang,e["X-SDK-Version"]="@cloudbase/js-sdk/".concat(Hy()),e},t.prototype.post=function(e,r){return da(this,void 0,void 0,function(){var n;return ha(this,function(i){switch(i.label){case 0:return[4,this.reqClass.post(ft(ft({},e),{headers:ft(ft({},e.headers),this.getDefaultHeaders()),customReqOpts:r}))];case 1:return n=i.sent(),[2,n]}})})},t.prototype.upload=function(e){return da(this,void 0,void 0,function(){var r;return ha(this,function(n){switch(n.label){case 0:return[4,this.reqClass.upload(ft(ft({},e),{headers:ft(ft({},e.headers),this.getDefaultHeaders())}))];case 1:return r=n.sent(),[2,r]}})})},t.prototype.download=function(e){return da(this,void 0,void 0,function(){var r;return ha(this,function(n){switch(n.label){case 0:return[4,this.reqClass.download(ft(ft({},e),{headers:ft(ft({},e.headers),this.getDefaultHeaders())}))];case 1:return r=n.sent(),[2,r]}})})},t.prototype.getBaseEndPoint=function(e){return e===void 0&&(e="CLOUD_API"),CC(this.config.env,e)},t.prototype.getOauthAccessTokenV2=function(e){return da(this,void 0,void 0,function(){var r,n;return ha(this,function(i){switch(i.label){case 0:return[4,e.getAccessToken()];case 1:return r=i.sent(),[4,e.getCredentials()];case 2:return n=i.sent(),[2,{accessToken:r,accessTokenExpire:new Date(n.expires_at).getTime()}]}})})},t.prototype.request=function(e,r,n,i){var o,u;return da(this,void 0,void 0,function(){var f,p,l,d,m,y,b,w,S,E,R,O,C,I,P,D,j,q,U,Y,$,L;return ha(this,function(H){switch(H.label){case 0:if(f="x-tcb-trace_".concat(this.config.env),p="application/x-www-form-urlencoded",l=ft({action:e,dataVersion:J4,env:this.config.env},r),i9.indexOf(e)!==-1)return[3,2];if(d=this.config._fromApp,!d.oauthInstance)throw new Error("you can't request without auth");return m=d.oauthInstance,y=m.oauth2client,b=l,[4,this.getOauthAccessTokenV2(y)];case 1:b.access_token=H.sent().accessToken,H.label=2;case 2:return e==="storage.uploadFile"?(w=new FormData,Object.keys(w).forEach(function(Q){Object.prototype.hasOwnProperty.call(w,Q)&&w[Q]!==void 0&&w.append(Q,l[Q])}),p="multipart/form-data"):(p="application/json;charset=UTF-8",w={},Object.keys(l).forEach(function(Q){l[Q]!==void 0&&(w[Q]=l[Q])})),S={headers:ft(ft({"content-type":p},this.getDefaultHeaders()),n?.headers)},n?.onUploadProgress&&(S.onUploadProgress=n.onUploadProgress),this.config.region&&(S.headers["X-TCB-Region"]=this.config.region),E=this.localCache.getStore(f),E&&(S.headers["X-TCB-Trace"]=E),R=n?.parse!==void 0?n.parse:r.parse,O=n?.inQuery!==void 0?n.inQuery:r.inQuery,C=n?.search!==void 0?n.search:r.search,I=ft(ft({},n?.defaultQuery||{}),{env:this.config.env}),R&&(I.parse=!0),O&&(I=ft(ft({},O),I)),P=this.config.endPointMode||"CLOUD_API",D=dp(this.config.env,P),j=D.baseUrl,q=D.protocol,P==="GATEWAY"&&/^((database)\.)|(auth\.wsWebSign)/.test(e)&&(U=dp(this.config.env,"CLOUD_API"),j="".concat(U.baseUrl.match(/\/\/([^/?#]*)/)[0],"/web")),n.pathname?Y=xC(q,"".concat((o=CC(this.config.env,P))===null||o===void 0?void 0:o.replace(/^https?:/,""),"/").concat(n.pathname),I):Y=xC(q,j,I),C&&(Y+=C),[4,this.post(ft({url:Y,data:w},S),i)];case 3:if($=H.sent(),L=(u=$.header)===null||u===void 0?void 0:u["x-tcb-trace"],L&&this.localCache.setStore(f,L),Number($.status)!==200&&Number($.statusCode)!==200||!$.data)throw new Error("network request error");return[2,$]}})})},t.prototype.fetch=function(e){var r,n,i,o,u,f,p,l;return da(this,void 0,void 0,function(){var d,m,y,b,w,S,E,R=this;return ha(this,function(O){switch(O.label){case 0:d=e.token,m=e.headers,y=m===void 0?{}:m,b=t9(e,["token","headers"]),w=function(){return da(R,void 0,void 0,function(){var C,I,P,D,j;return ha(this,function(q){switch(q.label){case 0:return I=(C=this.reqClass).fetch,D={},j={"X-SDK-Version":"@cloudbase/js-sdk/".concat(Hy())},P="Bearer ".concat,[4,this.getAccessToken(d)];case 1:return[2,I.apply(C,[ft.apply(void 0,[(D.headers=ft.apply(void 0,[ft.apply(void 0,[(j.Authorization=P.apply("Bearer ",[q.sent()]),j),this.getDefaultHeaders()]),y]),D),b])])]}})})},O.label=1;case 1:return O.trys.push([1,3,,6]),[4,w()];case 2:return S=O.sent(),[2,S];case 3:if(E=O.sent(),E?.code!=="ACCESS_TOKEN_EXPIRED")return[3,5];if(typeof((o=(i=(n=(r=this.config)===null||r===void 0?void 0:r._fromApp)===null||n===void 0?void 0:n.oauthInstance)===null||i===void 0?void 0:i.authApi)===null||o===void 0?void 0:o.refreshTokenForce)!="function")throw E;return[4,(l=(p=(f=(u=this.config)===null||u===void 0?void 0:u._fromApp)===null||f===void 0?void 0:f.oauthInstance)===null||p===void 0?void 0:p.authApi)===null||l===void 0?void 0:l.refreshTokenForce()];case 4:return O.sent(),[2,w()];case 5:throw E;case 6:return[2]}})})},t.prototype.send=function(e,r,n,i){return r===void 0&&(r={}),n===void 0&&(n={}),da(this,void 0,void 0,function(){var o;return ha(this,function(u){switch(u.label){case 0:return[4,this.request(e,r,ft(ft({},n),{onUploadProgress:r.onUploadProgress}),i)];case 1:if(o=u.sent(),o.data.code&&this.throwWhenRequestFail)throw new Error(JSON.stringify({code:b_.OPERATION_FAIL,msg:"[".concat(o.data.code,"] ").concat(o.data.message)}));return[2,o.data]}})})},t.prototype.gateWay=function(e,r){var n;return da(this,void 0,void 0,function(){var i,o,u,f,p,l,d,m,y,b,w,S,E,R,O,C,I,P,D;return ha(this,function(j){switch(j.label){case 0:if(i=e.url,o=e.name,u=e.data,f=e.path,p=f===void 0?"":f,l=e.method,d=e.header,m=d===void 0?{}:d,(!o||!p)&&!i)throw new Error(JSON.stringify({code:b_.INVALID_PARAMS,msg:"[gateWay] invalid function name or path or url"}));try{y=u?JSON.stringify(u):""}catch{throw new Error(JSON.stringify({code:b_.INVALID_PARAMS,msg:"[gateWay] invalid data"}))}if(b=LD(),w=dp(this.config.env,"GATEWAY"),S=w.baseUrl,E=w.protocol,R="".concat(E).concat(S).concat(i||"/".concat(p,"/").concat(o)),O=["GET","HEAD"].includes((n=l?.toUpperCase)===null||n===void 0?void 0:n.call(l)),O)try{C={};try{C=JSON.parse(u)}catch{C=u||{}}R="".concat(R).concat(R.includes("?")?"&":"?").concat(Object.keys(C).map(function(q){return"".concat(q,"=").concat(C[q])}).join("&"))}catch{}return[4,this.fetch(ft(ft({method:l||"POST",headers:ft({"Content-Type":"application/json; charset=utf-8","X-Request-Id":b},m)},O?{}:{body:y}),{url:R,customReqOpts:r}))];case 1:return I=j.sent(),P=[ft({requestId:b},I)],D={},[4,I.data];case 2:return[2,ft.apply(void 0,P.concat([(D.data=j.sent(),D)]))]}})})},t})(),J5={};function a9(t){J5[t.env]=new o9(ft(ft({},t),{throw:!0}))}function s9(t){return J5[t]}var S_,Wy;(function(t){t.ZH="zh-CN",t.EN="en-US"})(Wy||(Wy={}));var u9="Accept-Language",l9=(S_={},S_[Wy.EN]={" AI+ ":"Please check the calling method or visit the AI+ homepage to view the documentation","AI+ ":"AI+ request error, error code",:"error message",:"not implemented"," wasm ":"wasm loading is not supported in mini programs"," js ":"dynamic js loading is not supported in mini programs",:"request timeout"," privatelink sdk ":"missing privatelink sdk address"},S_),NC=function(t,e){var r;return((r=l9[e])===null||r===void 0?void 0:r[t])||t},c9=function(t){return"lang_".concat(t.clientId||t.env)},f9=function(t,e){var r,n,i=c9(e),o=(t.adapter||{}).localStorage,u=e.lang||((r=o?.getItem)===null||r===void 0?void 0:r.call(o,i))||Wy.ZH;return(n=o?.setItem)===null||n===void 0||n.call(o,i,u),new Proxy({t:function(f){return NC(f,u)},LANG_HEADER_KEY:u9,lang:u},{get:function(f,p){var l;return p==="lang"&&((l=o?.getItem)===null||l===void 0?void 0:l.call(o,i))||f[p]},set:function(f,p,l){var d;return p==="lang"&&l!==f[p]&&(f[p]=l,f.t=function(m){return NC(m,l)},(d=o?.setItem)===null||d===void 0||d.call(o,i,l),Eg.fire(Tg,{i18n:f})),f[p]=l,!0}})},hp=function(){return hp=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},hp.apply(this,arguments)},PC=function(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var f=t.length-1;f>=0;f--)(u=t[f])&&(o=(i<3?u(o):i>3?u(e,r,o):u(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o},cf=function(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)},d9=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},h9=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},p9=Y8,m9=K8,Rv=Bn,UC=Sg,qC=$f,DC=Ag,v9={timeout:15e3,persistence:"local"},jC=1e3*60*10,LC=100,kC={},y9=(function(){function t(e){this.cloudbaseConfig=e||this.cloudbaseConfig,this.authInstance=null,this.oauthInstance=null,this.version=Hy()}return Object.defineProperty(t.prototype,"config",{get:function(){return this.cloudbaseConfig},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"platform",{get:function(){return os},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cache",{get:function(){return H4(this.cloudbaseConfig.env)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCache",{get:function(){return W5(this.cloudbaseConfig.env)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"request",{get:function(){return s9(this.cloudbaseConfig.env)},enumerable:!1,configurable:!0}),t.prototype.init=function(e){var r;if(!e.env)throw new Error(JSON.stringify({code:Rv.INVALID_PARAMS,msg:"env must not be specified"}));os.adapter||this.useDefaultAdapter();var n={timeout:e.timeout||5e3,timeoutMsg:"[".concat(Q4(),"][REQUEST TIMEOUT] request had been abort since didn't finished within").concat(e.timeout/1e3,"s")};this.requestClient=new os.adapter.reqClass(n),this.cloudbaseConfig=hp(hp(hp({},v9),e),{i18n:f9(os,e)}),delete this.cloudbaseConfig.lang,this.cloudbaseConfig.timeout=this.formatTimeout(this.cloudbaseConfig.timeout);var i=this.cloudbaseConfig,o=i.env,u=i.persistence,f=i.debug,p=i.timeout,l=i.oauthClient,d=i.i18n;RC({env:o,persistence:u,debug:f,platformInfo:this.platform}),e9(o,e.region||""),Z4(o,wE,e.region||"");var m=new t(this.cloudbaseConfig);return a9({env:o,region:e.region||"",timeout:p,oauthClient:l,_fromApp:m,i18n:d,endPointMode:e.endPointMode}),m.requestClient=this.requestClient,(r=this===null||this===void 0?void 0:this.fire)===null||r===void 0||r.call(this,"cloudbase_init",m),this.try2InitAuth(m),m},t.prototype.updateConfig=function(e){var r=e.persistence,n=e.debug;this.cloudbaseConfig.persistence=r,this.cloudbaseConfig.debug=n,RC({env:this.cloudbaseConfig.env,persistence:r,debug:n,platformInfo:this.platform})},t.prototype.updateLang=function(e){var r;!e||e===((r=this.cloudbaseConfig.i18n)===null||r===void 0?void 0:r.lang)||(this.cloudbaseConfig.i18n.lang=e)},t.prototype.registerExtension=function(e){kC[e.name]=e},t.prototype.invokeExtension=function(e,r){return d9(this,void 0,void 0,function(){var n;return h9(this,function(i){switch(i.label){case 0:if(n=kC[e],!n)throw new Error(JSON.stringify({code:Rv.INVALID_PARAMS,msg:"extension:".concat(e," must be registered before invoke")}));return[4,n.invoke(r,this)];case 1:return[2,i.sent()]}})})},t.prototype.useAdapters=function(e,r){var n=p9(e,r)||{},i=n.adapter,o=n.runtime;i&&(os.adapter=i),o&&(os.runtime=o)},t.prototype.registerHook=function(e){o4(t,e)},t.prototype.registerComponent=function(e){i4(t,e)},t.prototype.registerVersion=function(e){Y4(e),this.version=e},t.prototype.registerSdkName=function(e){K4(e)},t.prototype.registerEndPoint=function(e,r){Gy({baseUrl:e,protocol:r,env:this.config.env,endPointKey:"CLOUD_API"})},t.prototype.registerEndPointWithKey=function(e){Gy({env:this.config.env,endPointKey:e.key,baseUrl:e.url,protocol:e.protocol})},t.prototype.getEndPointWithKey=function(e){var r=dp(this.config.env,e);return{BASE_URL:r.baseUrl,PROTOCOL:r.protocol}},t.prototype.parseCaptcha=function(e){return H8(e)},t.prototype.useDefaultAdapter=function(){var e=m9.bind(this)(),r=e.adapter,n=e.runtime;os.adapter=r,os.runtime=n},t.prototype.formatTimeout=function(e){switch(!0){case e>jC:return qC(Rv.INVALID_PARAMS,"timeout is greater than maximum value[10min]"),jC;case e<LC:return qC(Rv.INVALID_PARAMS,"timeout is less than maximum value[100ms]"),LC;default:return e}},t.prototype.try2InitAuth=function(e){try{e.auth()}catch(r){console.log("try2InitAuth error:",r)}},PC([DC({mode:"sync",title:"Cloudbase ",messages:["","  1 -  cloudbase.init() ","  2 - https://docs.cloudbase.net/api-reference/webv3/adapter#%E7%AC%AC-2-%E6%AD%A5%E9%85%8D%E7%BD%AE%E5%AE%89%E5%85%A8%E5%BA%94%E7%94%A8%E6%9D%A5%E6%BA%90","".concat(UC)]}),cf("design:type",Function),cf("design:paramtypes",[Object]),cf("design:returntype",t)],t.prototype,"init",null),PC([DC({title:"",messages:["","  1 -  invokeExtension() ","  2 -  registerExtension() ","".concat(UC)]}),cf("design:type",Function),cf("design:paramtypes",[String,Object]),cf("design:returntype",Promise)],t.prototype,"invokeExtension",null),t})(),Ln=new y9;Ln.useAdapters($4());const xg="/auth";var Ye;(function(t){t.AUTH_SIGN_UP_URL="/v1/signup",t.AUTH_TOKEN_URL="/v1/token",t.AUTH_REVOKE_URL="/v1/revoke",t.WEDA_USER_URL="/v1/plugin/weda/userinfo",t.AUTH_RESET_PASSWORD="/v1/reset",t.AUTH_GET_DEVICE_CODE="/v1/device/code",t.CHECK_USERNAME="/v1/checkUsername",t.CHECK_IF_USER_EXIST="/v1/checkIfUserExist",t.GET_PROVIDER_TYPE="/v1/mgr/provider/providerSubType",t.AUTH_SIGN_IN_URL="/v1/signin",t.AUTH_SIGN_IN_ANONYMOUSLY_URL="/v1/signin/anonymously",t.AUTH_SIGN_IN_WITH_PROVIDER_URL="/v1/signin/with/provider",t.AUTH_SIGN_IN_WITH_WECHAT_URL="/v1/signin/wechat/noauth",t.AUTH_SIGN_IN_CUSTOM="/v1/signin/custom",t.PROVIDER_TOKEN_URL="/v1/provider/token",t.PROVIDER_URI_URL="/v1/provider/uri",t.USER_ME_URL="/v1/user/me",t.AUTH_SIGNOUT_URL="/v1/user/signout",t.USER_QUERY_URL="/v1/user/query",t.USER_PRIFILE_URL="/v1/user/profile",t.USER_BASIC_EDIT_URL="/v1/user/basic/edit",t.USER_TRANS_BY_PROVIDER_URL="/v1/user/trans/by/provider",t.PROVIDER_LIST="/v1/user/provider",t.PROVIDER_BIND_URL="/v1/user/provider/bind",t.PROVIDER_UNBIND_URL="/v1/user/provider",t.CHECK_PWD_URL="/v1/user/sudo",t.SUDO_URL="/v1/user/sudo",t.BIND_CONTACT_URL="/v1/user/contact",t.AUTH_SET_PASSWORD="/v1/user/password",t.AUTHORIZE_DEVICE_URL="/v1/user/device/authorize",t.AUTHORIZE_URL="/v1/user/authorize",t.AUTHORIZE_INFO_URL="/v1/user/authorize/info",t.AUTHORIZED_DEVICES_DELETE_URL="/v1/user/authorized/devices/",t.AUTH_REVOKE_ALL_URL="/v1/user/revoke/all",t.GET_USER_BEHAVIOR_LOG="/v1/user/security/history",t.VERIFICATION_URL="/v1/verification",t.VERIFY_URL="/v1/verification/verify",t.CAPTCHA_DATA_URL="/v1/captcha/data",t.VERIFY_CAPTCHA_DATA_URL="/v1/captcha/data/verify",t.GET_CAPTCHA_URL="/v1/captcha/init",t.GET_MINIPROGRAM_QRCODE="/v1/qrcode/generate",t.GET_MINIPROGRAM_QRCODE_STATUS="/v1/qrcode/get/status"})(Ye||(Ye={}));var Wf;(function(t){t.AUTH_SIGN_IN_URL="/v2/signin/username",t.AUTH_TOKEN_URL="/v2/token",t.USER_ME_URL="/v2/user/me",t.VERIFY_URL="/v2/signin/verificationcode",t.AUTH_SIGN_IN_WITH_PROVIDER_URL="/v2/signin/with/provider",t.AUTH_PUBLIC_KEY="/v2/signin/publichkey",t.AUTH_RESET_PASSWORD="/v2/signin/password/update"})(Wf||(Wf={}));var MC;(function(t){t.REGISTER="REGISTER",t.SIGN_IN="SIGN_IN",t.PASSWORD_RESET="PASSWORD_RESET",t.EMAIL_ADDRESS_CHANGE="EMAIL_ADDRESS_CHANGE",t.PHONE_NUMBER_CHANGE="PHONE_NUMBER_CHANGE"})(MC||(MC={}));var ci;(function(t){t.UNREACHABLE="unreachable",t.LOCAL="local",t.CANCELLED="cancelled",t.UNKNOWN="unknown",t.UNAUTHENTICATED="unauthenticated",t.RESOURCE_EXHAUSTED="resource_exhausted",t.FAILED_PRECONDITION="failed_precondition",t.INVALID_ARGUMENT="invalid_argument",t.DEADLINE_EXCEEDED="deadline_exceeded",t.NOT_FOUND="not_found",t.ALREADY_EXISTS="already_exists",t.PERMISSION_DENIED="permission_denied",t.ABORTED="aborted",t.OUT_OF_RANGE="out_of_range",t.UNIMPLEMENTED="unimplemented",t.INTERNAL="internal",t.UNAVAILABLE="unavailable",t.DATA_LOSS="data_loss",t.INVALID_PASSWORD="invalid_password",t.PASSWORD_NOT_SET="password_not_set",t.INVALID_STATUS="invalid_status",t.USER_PENDING="user_pending",t.USER_BLOCKED="user_blocked",t.INVALID_VERIFICATION_CODE="invalid_verification_code",t.TWO_FACTOR_REQUIRED="two_factor_required",t.INVALID_TWO_FACTOR="invalid_two_factor",t.INVALID_TWO_FACTOR_RECOVERY="invalid_two_factor_recovery",t.UNDER_REVIEW="under_review",t.INVALID_REQUEST="invalid_request",t.UNAUTHORIZED_CLIENT="unauthorized_client",t.ACCESS_DENIED="access_denied",t.UNSUPPORTED_RESPONSE_TYPE="unsupported_response_type",t.INVALID_SCOPE="invalid_scope",t.INVALID_GRANT="invalid_grant",t.SERVER_ERROR="server_error",t.TEMPORARILY_UNAVAILABLE="temporarily_unavailable",t.INTERACTION_REQUIRED="interaction_required",t.LOGIN_REQUIRED="login_required",t.ACCOUNT_SELECTION_REQUIRED="account_selection_required",t.CONSENT_REQUIRED="consent_required",t.INVALID_REQUEST_URI="invalid_request_uri",t.INVALID_REQUEST_OBJECT="invalid_request_object",t.REQUEST_NOT_SUPPORTED="request_not_supported",t.REQUEST_URI_NOT_SUPPORTED="request_uri_not_supported",t.REGISTRATION_NOT_SUPPORTED="registration_not_supported",t.CAPTCHA_REQUIRED="captcha_required",t.CAPTCHA_INVALID="captcha_invalid"})(ci||(ci={}));const py={SIGN_OUT:"sign_out",SIGN_IN:"sign_in",CREDENTIALS_ERROR:"credentials_error"},zo={SIGNED_OUT:"SIGNED_OUT",SIGNED_IN:"SIGNED_IN",INITIAL_SESSION:"INITIAL_SESSION",PASSWORD_RECOVERY:"PASSWORD_RECOVERY",TOKEN_REFRESHED:"TOKEN_REFRESHED",USER_UPDATED:"USER_UPDATED",BIND_IDENTITY:"BIND_IDENTITY"},bn={LOGIN_STATE_CHANGED:"loginStateChanged",AUTH_STATE_CHANGED:"authStateChanged"},hs={SIGN_IN:"sign_in",BIND_IDENTITY:"bind_identity"};var BC;(function(t){t.CLIENT_ID="client_id",t.CLIENT_SECRET="client_secret",t.RESPONSE_TYPE="response_type",t.SCOPE="scope",t.STATE="state",t.REDIRECT_URI="redirect_uri",t.ERROR="error",t.ERROR_DESCRIPTION="error_description",t.ERROR_URI="error_uri",t.GRANT_TYPE="grant_type",t.CODE="code",t.ACCESS_TOKEN="access_token",t.TOKEN_TYPE="token_type",t.EXPIRES_IN="expires_in",t.USERNAME="username",t.PASSWORD="password",t.REFRESH_TOKEN="refresh_token"})(BC||(BC={}));function X5(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}const my=t=>{const e=n=>{for(const i in t)t.hasOwnProperty(i)&&(n[i]=my(t[i]));return n},r=t==null?"NullOrUndefined":Object.prototype.toString.call(t).slice(8,-1);if(["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"].includes(r))return t.slice();switch(r){case"Object":return e(Object.create(Object.getPrototypeOf(t)));case"Array":return e([]);case"Date":return new Date(t.valueOf());case"RegExp":return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""));default:return t}},zC=t=>{const e=/^(?:http(s)?:\/\/[^\/]+)?(\/[^\?#]*)/,r=t.match(e);return r&&r[2]||""};let Nh=new Map;class Z5{constructor(e){this.clientId=e?.clientId||"",Nh=Nh||new Map}async run(e,r){e=`${this.clientId}_${e}`;let n=Nh.get(e);return n||(n=new Promise((i,o)=>{(async()=>{try{await this.runIdlePromise();const u=r();i(await u)}catch(u){o(u)}finally{Nh.delete(e)}})()}),Nh.set(e,n)),n}runIdlePromise(){return Promise.resolve()}}const Su="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g9=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function b9(t){t=String(t);let e,r,n,i,o="",u=0;const f=t.length%3;for(;u<t.length;){if((r=t.charCodeAt(u++))>255||(n=t.charCodeAt(u++))>255||(i=t.charCodeAt(u++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");e=r<<16|n<<8|i,o+=Su.charAt(e>>18&63)+Su.charAt(e>>12&63)+Su.charAt(e>>6&63)+Su.charAt(e&63)}return f?o.slice(0,f-3)+"===".substring(f):o}const ej=function(t){if(t=String(t).replace(/[\t\n\f\r ]+/g,""),!g9.test(t))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");t+="==".slice(2-(t.length&3));let e,r="",n,i,o=0;for(;o<t.length;)e=Su.indexOf(t.charAt(o++))<<18|Su.indexOf(t.charAt(o++))<<12|(n=Su.indexOf(t.charAt(o++)))<<6|(i=Su.indexOf(t.charAt(o++))),r+=n===64?String.fromCharCode(e>>16&255):i===64?String.fromCharCode(e>>16&255,e>>8&255):String.fromCharCode(e>>16&255,e>>8&255,e&255);return r};function _9(t){return decodeURIComponent(ej(t).replace(/(.)/g,e=>{let r=e.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r=`0${r}`),`%${r}`}))}function w9(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("Illegal base64url string!")}try{return _9(e)}catch{return ej(e)}}function S9(t){if(typeof t!="string")throw new Error("Invalid token specified");try{const e=t.split(".").map((r,n)=>n===2?r:JSON.parse(w9(r)));return{claims:e[1],header:e[0],signature:e[2]}}catch(e){throw new Error(`Invalid token specified: ${e}`?e.message:"")}}function C2(){if(typeof globalThis>"u")return!1;const{wx:t}=globalThis;if(typeof t>"u"||globalThis.Page===void 0||!t.getDeviceInfo||!t.getStorageSync||!t.setStorageSync||!t.connectSocket||!t.request)return!1;try{if(!t.getDeviceInfo()||t.getDeviceInfo().platform==="qq")return!1}catch{return!1}return!0}let Vy=!1;function $C(){Vy=Vy||typeof window!==void 0&&window.__wxjs_environment==="miniprogram"}try{C2()||(Vy=Vy||!!navigator.userAgent.match(/miniprogram/i)||window.__wxjs_environment==="miniprogram",window&&window.WeixinJSBridge&&window.WeixinJSBridge.invoke?$C():typeof document<"u"&&document.addEventListener("WeixinJSBridgeReady",$C,!1))}catch{}const FC="x-request-id",HC="x-device-id",GC="device_id",E9=async function(t,e){let r=null,n=null;try{const i=Object.assign({},e);i.method||(i.method="GET"),i.body&&typeof i.body!="string"&&(i.body=JSON.stringify(i.body));const u=await(await fetch(t,i)).json();u?.error?(n=u,n.error_uri=new URL(t).pathname):r=u}catch(i){n={error:ci.UNREACHABLE,error_description:i.message,error_uri:new URL(t).pathname}}if(n)throw n;return r};function T9(){return X5()}class A9{constructor(e){this._env=e?.env||""}async getItem(e){return window.localStorage.getItem(`${e}${this._env}`)}async removeItem(e){window.localStorage.removeItem(`${e}${this._env}`)}async setItem(e,r){window.localStorage.setItem(`${e}${this._env}`,r)}getItemSync(e){return window.localStorage.getItem(`${e}${this._env}`)}removeItemSync(e){window.localStorage.removeItem(`${e}${this._env}`)}setItemSync(e,r){window.localStorage.setItem(`${e}${this._env}`,r)}}const I2=new A9;function tj(t){let e=!0;return t?.expires_at&&t?.access_token&&(e=t.expires_at<new Date),e}class O9{constructor(e){this.credentials=null,this.accessKeyCredentials=null,this.singlePromise=null,this.tokenSectionName=e.tokenSectionName,this.storage=e.storage,this.clientId=e.clientId,this.singlePromise=new Z5({clientId:this.clientId}),this.credentials=e.credentials||null}getStorageCredentialsSync(){let e=null;const r=this.storage.getItemSync(this.tokenSectionName);if(r!=null)try{e=JSON.parse(r),e?.expires_at&&(e.expires_at=new Date(e.expires_at))}catch{this.storage.removeItem(this.tokenSectionName),e=null}return e}async setCredentials(e){if(e?.expires_in){if(e?.expires_at||(e.expires_at=new Date(Date.now()+(e.expires_in-30)*1e3)),this.storage){const r=JSON.stringify(e);await this.storage.setItem(this.tokenSectionName,r)}this.credentials=e}else this.storage&&await this.storage.removeItem(this.tokenSectionName),this.credentials=null}setAccessKeyCredentials(e){this.accessKeyCredentials=e}async getCredentials(){return this.singlePromise.run("getCredentials",async()=>{if(tj(this.credentials)){const{credentials:e,isAccessKeyCredentials:r}=await this.getStorageCredentials();if(r)return e;this.credentials=e}return this.credentials})}async getStorageCredentials(){return this.singlePromise.run("_getStorageCredentials",async()=>{let e=null,r=!1;const n=await this.storage.getItem(this.tokenSectionName);if(n)try{e=JSON.parse(n),e?.expires_at&&(e.expires_at=new Date(e.expires_at))}catch{await this.storage.removeItem(this.tokenSectionName),e=null}else e=this.accessKeyCredentials||null,r=!0;return{credentials:e,isAccessKeyCredentials:r}})}}class Ho{constructor(e){this.initializePromise=null,this.lockAcquired=!1,this.pendingInLock=[],this.singlePromise=null,e.clientSecret||(e.clientSecret=""),!e.clientId&&e.env&&(e.clientId=e.env),this.apiOrigin=e.apiOrigin,this.apiPath=e.apiPath||xg,this.clientId=e.clientId,this.i18n=e.i18n,this.eventBus=e.eventBus,this.singlePromise=new Z5({clientId:this.clientId}),this.retry=this.formatRetry(e.retry,Ho.defaultRetry),e.baseRequest?this.baseRequest=e.baseRequest:this.baseRequest=E9,this.tokenInURL=e.tokenInURL,this.headers=e.headers,this.storage=e.storage||I2,this.localCredentials=new O9({tokenSectionName:`credentials_${e.clientId}`,storage:this.storage,clientId:e.clientId}),this.clientSecret=e.clientSecret,e.clientId&&(this.basicAuth=`Basic ${b9(`${e.clientId}:${this.clientSecret}`)}`),this.wxCloud=e.wxCloud;try{C2()&&(this.useWxCloud=e.useWxCloud,this.wxCloud===void 0&&e.env&&(wx.cloud.init({env:e.env}),this.wxCloud=wx.cloud))}catch{}this.refreshTokenFunc=e.refreshTokenFunc||this.defaultRefreshTokenFunc,this.anonymousSignInFunc=e.anonymousSignInFunc,this.onCredentialsError=e.onCredentialsError,this.getInitialSession=e.getInitialSession,this.onInitialSessionObtained=e.onInitialSessionObtained,this.logDebugMessages=e.debug??!1,Eg.on(Tg,r=>{this.i18n=r.data?.i18n||this.i18n})}setGetInitialSession(e){this.getInitialSession=e}setOnInitialSessionObtained(e){this.onInitialSessionObtained=e}async initialize(e){return this.initializePromise?await this.initializePromise:e!==void 0?(this.initializePromise=e,await this.initializePromise):(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async setCredentials(e){return await this.initializePromise,this._acquireLock(-1,async()=>this.localCredentials.setCredentials(e))}setAccessKeyCredentials(e){return this.localCredentials.setAccessKeyCredentials(e)}async getAccessToken(){await this.initializePromise;const e=await this.getCredentials();if(e?.access_token)return Promise.resolve(e.access_token);const r={error:ci.UNAUTHENTICATED};return Promise.reject(r)}async request(e,r){r||(r={});const n=this.formatRetry(r.retry,this.retry);if(r.headers={...r.headers,[this.i18n?.LANG_HEADER_KEY]:this.i18n?.lang},this.headers&&(r.headers={...this.headers,...r.headers}),r.headers[FC]||(r.headers[FC]=T9()),!r.headers[HC]){const u=await this.getDeviceId();r.headers[HC]=u}if(r?.withBasicAuth&&this.basicAuth&&(r.headers.Authorization=this.basicAuth),r?.withCredentials){const u=r.getCredentials?await r.getCredentials():await this.getCredentials();u&&(this.tokenInURL?(e.indexOf("?")<0&&(e+="?"),e+=`access_token=${u.access_token}`):r.headers.Authorization=`${u.token_type} ${u.access_token}`)}else this.clientId&&e.indexOf("client_id")<0&&(e+=e.indexOf("?")<0?"?":"&",e+=`client_id=${this.clientId}`);e.startsWith("/")&&(e=`${this.apiOrigin}${this.apiPath}${e}`);let i=null;const o=n+1;for(let u=0;u<o;u++){try{if(r.useWxCloud||this.useWxCloud?i=await this.wxCloudCallFunction(e,r):i=await this.baseRequest(e,r),i?.code)throw{error:i.code,error_description:i.message,error_uri:new URL(e).pathname};break}catch(f){if(r.withCredentials&&f&&f.error===ci.UNAUTHENTICATED)return await this.setCredentials(null),Promise.reject(f);if(u===n||!f||f.error!=="unreachable")return Promise.reject(f)}await this.sleep(Ho.retryInterval)}return i}async wxCloudCallFunction(e,r){let n=null,i=null;try{let o="";try{o=await wx.getRendererUserAgent()}catch{}const{result:u}=await this.wxCloud.callFunction({name:"httpOverCallFunction",data:{url:e,method:r.method,headers:{origin:"https://servicewechat.com","User-Agent":o,...r.headers},body:r.body}});u?.body?.error_code?(i=u?.body,i.error_uri=zC(e)):n=u?.body}catch(o){i={error:ci.UNREACHABLE,error_description:o.message,error_uri:zC(e)}}if(i)throw i;return n}async getCredentials(){return await this.initializePromise,this._acquireLock(-1,async()=>this._getCredentials())}getCredentialsSync(){return this.localCredentials.getStorageCredentialsSync()}getCredentialsAsync(){return this.getCredentials()}async getScope(){const e=await this.localCredentials.getCredentials();if(!e){const r="credentials not found";return this.onCredentialsError?.({msg:r}),this.unAuthenticatedError(r)}return e.scope}async getGroups(){const e=await this.localCredentials.getCredentials();if(!e){const r="credentials not found";return this.onCredentialsError?.({msg:r}),this.unAuthenticatedError(r)}return e.groups}async refreshToken(e,r){return await this.initializePromise,this._acquireLock(-1,async()=>this._refreshToken(e,r))}async _refreshToken(e,r){return this.singlePromise.run("_refreshToken",async()=>{if(!e||!e.refresh_token){const n="no refresh token found in credentials";return this.onCredentialsError?.({msg:n}),this.unAuthenticatedError(n)}try{const n=await this.refreshTokenFunc(e.refresh_token,e);return await this.localCredentials.setCredentials(n),this.eventBus?.fire(bn.AUTH_STATE_CHANGED,{event:zo.TOKEN_REFRESHED}),n}catch(n){if(r?.throwError)throw n;if(n.error===ci.INVALID_GRANT){await this.localCredentials.setCredentials(null);const i=n.error_description;return this.onCredentialsError?.({msg:i}),this.unAuthenticatedError(i)}return this.onCredentialsError?.({msg:n.error_description}),Promise.reject(n)}})}async anonymousLogin(e){return this.singlePromise.run("_anonymousLogin",async()=>(this.anonymousSignInFunc?e=await this.anonymousSignInFunc(e)||await this.localCredentials.getCredentials():e=await this.anonymousSignIn(e),e))}checkRetry(e){let r=null;if((typeof e!="number"||e<Ho.minRetry||e>Ho.maxRetry)&&(r={error:ci.UNREACHABLE,error_description:"wrong options param: retry"}),r)throw r;return e}formatRetry(e,r){return typeof e>"u"?r:this.checkRetry(e)}async sleep(e){return new Promise(r=>{setTimeout(()=>{r()},e)})}async anonymousSignIn(e){return this.singlePromise.run("_anonymous",async()=>{if(!e||e.scope!=="anonymous")return this.unAuthenticatedError("no anonymous in credentials");try{const r=await this.request(Ye.AUTH_SIGN_IN_ANONYMOUSLY_URL,{method:"POST",withBasicAuth:!0,body:{}});return await this.localCredentials.setCredentials(r),r}catch(r){return r.error===ci.INVALID_GRANT?(await this.localCredentials.setCredentials(null),this.unAuthenticatedError(r.error_description)):Promise.reject(r)}})}async defaultRefreshTokenFunc(e,r){if(e===void 0||e===""){const o="refresh token not found";return this.onCredentialsError?.({msg:o}),this.unAuthenticatedError(o)}let n=Ye.AUTH_TOKEN_URL;return r?.version==="v2"&&(n=Wf.AUTH_TOKEN_URL),{...await this.request(n,{method:"POST",body:{client_id:this.clientId,client_secret:this.clientSecret,grant_type:"refresh_token",refresh_token:e}}),version:r?.version||"v1"}}async getDeviceId(){if(this.deviceID)return this.deviceID;let e=await this.storage.getItem(GC);return typeof e=="string"&&e.length>=16&&e.length<=48||(e=X5(),await this.storage.setItem(GC,e)),this.deviceID=e,e}unAuthenticatedError(e){const r={error:ci.UNAUTHENTICATED,error_description:e};return Promise.reject(r)}_debug(...e){this.logDebugMessages&&console.log("[OAuth2Client]",...e)}async _initialize(){try{if(!this.getInitialSession)return this._debug("#_initialize()","no getInitialSession callback set, skipping"),{error:null};this._debug("#_initialize()","calling getInitialSession callback");try{const{data:e,error:r}=await this.getInitialSession();if(e?.session&&(this._debug("#_initialize()","session obtained from getInitialSession",e.session),await this.localCredentials.setCredentials(e?.session)),this.onInitialSessionObtained){this._debug("#_initialize()","calling onInitialSessionObtained callback");try{await this.onInitialSessionObtained(e,r)}catch(n){this._debug("#_initialize()","error in onInitialSessionObtained",n)}}return r?(this._debug("#_initialize()","error from getInitialSession",r),{error:r}):{error:null}}catch(e){return this._debug("#_initialize()","exception during getInitialSession",e),{error:e instanceof Error?e:new Error(String(e))}}}catch(e){return this._debug("#_initialize()","unexpected error",e),{error:e instanceof Error?e:new Error(String(e))}}finally{this._debug("#_initialize()","end")}}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}this._debug("#_acquireLock","acquiring lock for client",this.clientId);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","releasing lock for client",this.clientId),this.lockAcquired=!1}}finally{this._debug("#_acquireLock","end")}}async _getCredentials(){let e=await this.localCredentials.getCredentials();if(!e){const r="credentials not found";return this.onCredentialsError?.({msg:r}),this.unAuthenticatedError(r)}if(tj(e))if(e.refresh_token)try{e=await this._refreshToken(e)}catch(r){if(e.scope==="anonymous")e=await this.anonymousLogin(e);else return this.onCredentialsError?.({msg:r.error_description}),Promise.reject(r)}else if(e.scope==="anonymous")e=await this.anonymousLogin(e);else{const r="no refresh token found in credentials";return this.onCredentialsError?.({msg:r}),this.unAuthenticatedError(r)}return e}}Ho.defaultRetry=2;Ho.minRetry=0;Ho.maxRetry=5;Ho.retryInterval=1e3;const R9="modulepreload",C9=function(t,e){return new URL(t,e).href},WC={},I9=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){let l=function(d){return Promise.all(d.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};const u=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),p=f?.nonce||f?.getAttribute("nonce");i=l(r.map(d=>{if(d=C9(d,n),d in WC)return;WC[d]=!0;const m=d.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(n)for(let w=u.length-1;w>=0;w--){const S=u[w];if(S.href===d&&(!m||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${y}`))return;const b=document.createElement("link");if(b.rel=m?"stylesheet":R9,m||(b.as="script"),b.crossOrigin="",b.href=d,p&&b.setAttribute("nonce",p),document.head.appendChild(b),m)return new Promise((w,S)=>{b.addEventListener("load",w),b.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return i.then(u=>{for(const f of u||[])f.status==="rejected"&&o(f.reason);return e().catch(o)})};var kr={},Ph={},_l={},xn={},VC;function rj(){if(VC)return xn;VC=1;var t={};Object.defineProperty(xn,"__esModule",{value:!0}),xn.COMMUNITY_SITE_URL=xn.IS_DEBUG_MODE=xn.getProtocol=xn.setProtocol=xn.getSdkName=xn.setSdkName=void 0;var e="@cloudbase/js-sdk";function r(f){e=f}xn.setSdkName=r;function n(){return e}xn.getSdkName=n;var i="https:";function o(f){i=f}xn.setProtocol=o;function u(){return i}return xn.getProtocol=u,xn.IS_DEBUG_MODE=!1,xn.COMMUNITY_SITE_URL="https://support.qq.com/products/148793",xn}var Uh={},YC;function x9(){return YC||(YC=1,Object.defineProperty(Uh,"__esModule",{value:!0}),Uh.ERRORS=void 0,Uh.ERRORS={INVALID_PARAMS:"INVALID_PARAMS",INVALID_SYNTAX:"INVALID_SYNTAX",INVALID_OPERATION:"INVALID_OPERATION",OPERATION_FAIL:"OPERATION_FAIL",NETWORK_ERROR:"NETWORK_ERROR",UNKOWN_ERROR:"UNKOWN_ERROR"}),Uh}var KC;function Ng(){return KC||(KC=1,(function(t){var e=_l&&_l.__createBinding||(Object.create?(function(n,i,o,u){u===void 0&&(u=o);var f=Object.getOwnPropertyDescriptor(i,o);(!f||("get"in f?!i.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(n,u,f)}):(function(n,i,o,u){u===void 0&&(u=o),n[u]=i[o]})),r=_l&&_l.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.OATUH_LOGINTYPE=void 0,r(rj(),t),r(x9(),t),t.OATUH_LOGINTYPE="constants"})(_l)),_l}var QC;function yd(){return QC||(QC=1,(function(t){var e=Ph&&Ph.__rest||function(L,H){var Q={};for(var ce in L)Object.prototype.hasOwnProperty.call(L,ce)&&H.indexOf(ce)<0&&(Q[ce]=L[ce]);if(L!=null&&typeof Object.getOwnPropertySymbols=="function")for(var M=0,ce=Object.getOwnPropertySymbols(L);M<ce.length;M++)H.indexOf(ce[M])<0&&Object.prototype.propertyIsEnumerable.call(L,ce[M])&&(Q[ce[M]]=L[ce[M]]);return Q};Object.defineProperty(t,"__esModule",{value:!0}),t.parseCaptcha=t.parseQueryString=t.transformPhone=t.sleep=t.printGroupLog=t.throwError=t.printInfo=t.printError=t.printWarn=t.execCallback=t.createPromiseCallback=t.removeParam=t.getHash=t.getQuery=t.toQueryString=t.formatUrl=t.generateRequestId=t.genSeqId=t.isFormData=t.isInstanceOf=t.isNull=t.isPalinObject=t.isUndefined=t.isString=t.isArray=void 0;var r=Ng();function n(L){return Object.prototype.toString.call(L)==="[object Array]"}t.isArray=n;function i(L){return typeof L=="string"}t.isString=i;function o(L){return typeof L>"u"}t.isUndefined=o;function u(L){return Object.prototype.toString.call(L)==="[object Object]"}t.isPalinObject=u;function f(L){return Object.prototype.toString.call(L)==="[object Null]"}t.isNull=f;function p(L,H){return L instanceof H}t.isInstanceOf=p;function l(L){return Object.prototype.toString.call(L)==="[object FormData]"}t.isFormData=l;function d(){return Math.random().toString(16).slice(2)}t.genSeqId=d;function m(){var L=new Date().getTime(),H=Date?.now&&Date.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Q){var ce=Math.random()*16;return L>0?(ce=(L+ce)%16|0,L=Math.floor(L/16)):(ce=(H+ce)%16|0,H=Math.floor(H/16)),(Q==="x"?ce:ce&7|8).toString(16)})}t.generateRequestId=m;function y(L,H,Q){Q===void 0&&(Q={});var ce=/\?/.test(H),M="";return Object.keys(Q).forEach(function(J){M===""?!ce&&(H+="?"):M+="&",M+="".concat(J,"=").concat(encodeURIComponent(Q[J]))}),H+=M,/^http(s)?:\/\//.test(H)?H:"".concat(L).concat(H)}t.formatUrl=y;function b(L){L===void 0&&(L={});var H=[];return Object.keys(L).forEach(function(Q){H.push("".concat(Q,"=").concat(encodeURIComponent(L[Q])))}),H.join("&")}t.toQueryString=b;function w(L,H){if(typeof window>"u")return!1;var Q=H||decodeURIComponent(window.location.search),ce=new RegExp("(^|&)".concat(L,"=([^&]*)(&|$)")),M=Q.substr(Q.indexOf("?")+1).match(ce);return M!=null?M[2]:""}t.getQuery=w;var S=function(L){if(typeof window>"u")return"";var H=window.location.hash.match(new RegExp("[#?&/]".concat(L,"=([^&#]*)")));return H?H[1]:""};t.getHash=S;function E(L,H){var Q=H.split("?")[0],ce,M=[],J=H.indexOf("?")!==-1?H.split("?")[1]:"";if(J!==""){M=J.split("&");for(var Z=M.length-1;Z>=0;Z-=1)ce=M[Z].split("=")[0],ce===L&&M.splice(Z,1);Q="".concat(Q,"?").concat(M.join("&"))}return Q}t.removeParam=E;function R(){var L={};if(!Promise){L=function(){},L.promise={};var H=function(){throw new Error('Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.')};return Object.defineProperty(L.promise,"then",{get:H}),Object.defineProperty(L.promise,"catch",{get:H}),L}var Q=new Promise(function(ce,M){L=function(J,Z){return J?M(J):ce(Z)}});return L.promise=Q,L}t.createPromiseCallback=R;function O(L,H,Q){if(Q===void 0&&(Q=null),L&&typeof L=="function")return L(H,Q);if(H)throw H;return Q}t.execCallback=O;function C(L,H){console.warn("[".concat((0,r.getSdkName)(),"][").concat(L,"]:").concat(H))}t.printWarn=C;function I(L,H){console.error({code:L,msg:"[".concat((0,r.getSdkName)(),"][").concat(L,"]:").concat(H)})}t.printError=I;function P(L,H){console.log("[".concat((0,r.getSdkName)(),"][").concat(L,"]:").concat(H))}t.printInfo=P;function D(L,H){throw new Error(JSON.stringify({code:L,msg:"[".concat((0,r.getSdkName)(),"][").concat(L,"]:").concat(H)}))}t.throwError=D;function j(L){var H,Q=L.title,ce=L.subtitle,M=ce===void 0?"":ce,J=L.content,Z=J===void 0?[]:J,Ae=L.printTrace,Re=Ae===void 0?!1:Ae,z=L.collapsed,se=z===void 0?!1:z;se?(console.groupCollapsed||console.error)(Q,M):(console.group||console.error)(Q,M);for(var ae=0,fe=Z;ae<fe.length;ae++){var pe=fe[ae],be=pe.type,Se=pe.body;switch(be){case"info":console.log(Se);break;case"warn":console.warn(Se);break;case"error":console.error(Se);break}}Re&&(console.trace||console.log)("stack trace:"),(H=console.groupEnd)===null||H===void 0||H.call(console)}t.printGroupLog=j;var q=function(L){return L===void 0&&(L=0),new Promise(function(H){return setTimeout(H,L)})};t.sleep=q;function U(L){return"+86".concat(L)}t.transformPhone=U;var Y=function(L){L=L.replace(/^\?/,"");var H={},Q=L.split("&");return Q.forEach(function(ce){var M=ce.split("="),J=M[0],Z=M[1];J=decodeURIComponent(J),Z=decodeURIComponent(Z),J&&(H[J]?Array.isArray(H[J])?H[J].push(Z):H[J]=[H[J],Z]:H[J]=Z)}),H};t.parseQueryString=Y;function $(L){var H={},Q=L.match(/^(data:.*?)(\?[^#\s]*)?$/);if(Q){L=Q[1];var ce=Q[2];ce&&(H=(0,t.parseQueryString)(ce))}var M=H.token,J=e(H,["token"]);return/^data:/.test(L)&&!M?{error:"invalid_argument",error_description:"invalid captcha data: ".concat(L)}:M?{state:J.state,token:M,captchaData:L}:{error:"unimplemented",error_description:"need to impl captcha data"}}t.parseCaptcha=$})(Ph)),Ph}var JC;function N9(){if(JC)return kr;JC=1;var t=kr&&kr.__extends||(function(){var y=function(b,w){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,E){S.__proto__=E}||function(S,E){for(var R in E)Object.prototype.hasOwnProperty.call(E,R)&&(S[R]=E[R])},y(b,w)};return function(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");y(b,w);function S(){this.constructor=b}b.prototype=w===null?Object.create(w):(S.prototype=w.prototype,new S)}})(),e=kr&&kr.__spreadArray||function(y,b,w){if(w||arguments.length===2)for(var S=0,E=b.length,R;S<E;S++)(R||!(S in b))&&(R||(R=Array.prototype.slice.call(b,0,S)),R[S]=b[S]);return y.concat(R||Array.prototype.slice.call(b))};Object.defineProperty(kr,"__esModule",{value:!0}),kr.removeEventListener=kr.activateEvent=kr.addEventListener=kr.CloudbaseEventEmitter=kr.IErrorEvent=kr.CloudbaseEvent=void 0;var r=yd();function n(y,b,w){w[y]=w[y]||[],w[y].push(b)}function i(y,b,w){if(w?.[y]){var S=w[y].indexOf(b);S!==-1&&w[y].splice(S,1)}}var o=(function(){function y(b,w){this.data=w||null,this.name=b}return y})();kr.CloudbaseEvent=o;var u=(function(y){t(b,y);function b(w,S){var E=y.call(this,"error",{error:w,data:S})||this;return E.error=w,E}return b})(o);kr.IErrorEvent=u;var f=(function(){function y(){this.listeners={}}return y.prototype.on=function(b,w){return n(b,w,this.listeners),this},y.prototype.off=function(b,w){return i(b,w,this.listeners),this},y.prototype.fire=function(b,w){if((0,r.isInstanceOf)(b,u))return console.error(b.error),this;var S=(0,r.isString)(b)?new o(b,w||{}):b,E=S.name;if(this.listens(E)){S.target=this;for(var R=this.listeners[E]?e([],this.listeners[E],!0):[],O=0,C=R;O<C.length;O++){var I=C[O];I.call(this,S)}}return this},y.prototype.listens=function(b){return this.listeners[b]&&this.listeners[b].length>0},y})();kr.CloudbaseEventEmitter=f;var p=new f;function l(y,b){p.on(y,b)}kr.addEventListener=l;function d(y,b){b===void 0&&(b={}),p.fire(y,b)}kr.activateEvent=d;function m(y,b){p.off(y,b)}return kr.removeEventListener=m,kr}var nj=N9(),Vf=yd();const XC=(t,e)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>t.apply(null,n),e)}},ij=new nj.CloudbaseEventEmitter,oj={CAPTCHA_DATA_CHANGE:"captchaDataChange",RESOLVE_CAPTCHA_DATA:"resolveCaptchaData"},Xn={overlay:"position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:999",modal:"position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:320px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,0.2);z-index:1000",prompt:"margin-bottom:15px",captchaWrap:"display:flex;align-items:center;justify-content:space-between;margin-bottom:15px",captchaImg:"width:100%;height:auto;border:1px solid #eee",refreshBtn:"padding:10px 8px;background:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;flex:1;white-space:nowrap;margin-left:10px",input:"width:100%;padding:14px 16px;margin-bottom:15px;box-sizing:border-box;border:2px solid #e8ecf4;border-radius:10px;font-size:15px",confirmBtn:"width:100%;padding:10px;background:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer",loading:"background:#6c757d;cursor:not-allowed"},P9=({oauthInstance:t,captchaState:e})=>{const r="captcha-image",n=async()=>{try{const w=await t.createCaptchaData({state:e.state});e={...e,captchaData:w.data,token:w.token},document.getElementById(r).src=w.data}catch(w){console.error("",w)}},i=(w,S,E)=>{const R=document.createElement(w);return S&&(R.style.cssText=S),E&&(R.textContent=E),R},o=i("div",Xn.overlay),u=i("div",Xn.modal);u.appendChild(i("p",Xn.prompt,""));const f=i("div",Xn.captchaWrap),p=i("img",Xn.captchaImg);p.id=r,p.src=e.captchaData,f.appendChild(p);const l=i("button",Xn.refreshBtn,"");l.onclick=XC(async()=>{l.textContent="...",l.disabled=!0,l.style.cssText=`${Xn.refreshBtn};${Xn.loading}`;try{await n()}finally{l.textContent="",l.disabled=!1,l.style.cssText=Xn.refreshBtn}},500),f.appendChild(l),u.appendChild(f);const d=i("input",Xn.input);d.type="text",d.placeholder="",d.maxLength=4,u.appendChild(d);const m=i("div","color:#dc3545;font-size:12px;margin-bottom:10px;display:none;padding:8px;background:#f8d7da;border:1px solid #f5c6cb;border-radius:4px");u.appendChild(m);const y=w=>{m.textContent=w,m.style.display="block"},b=i("button",Xn.confirmBtn,"");b.onclick=XC(async()=>{const w=d.value.trim();if(!w){y("");return}m.style.display="none",b.textContent="...",b.disabled=!0,b.style.cssText=`${Xn.confirmBtn};${Xn.loading}`;try{const S=await t.verifyCaptchaData({token:e.token,key:w});ij.fire(oj.RESOLVE_CAPTCHA_DATA,S),console.log(""),document.body.removeChild(o),document.body.removeChild(u)}catch(S){console.error("",S);const E=S.error_description||"";y(E),d.value="",d.focus(),await n()}finally{b.textContent="",b.disabled=!1,b.style.cssText=Xn.confirmBtn}},500),u.appendChild(b),document.body.appendChild(o),document.body.appendChild(u)},U9=async(t,e)=>{const{captchaData:r,state:n,token:i}=Vf.parseCaptcha(t);return P9({oauthInstance:e,captchaState:{captchaData:r,state:n,token:i}}),new Promise(o=>{console.log("..."),ij.on(oj.RESOLVE_CAPTCHA_DATA,u=>{o(u?.data)})})};class q9{constructor(e){e.openURIWithCallback||(e.openURIWithCallback=this.getDefaultOpenURIWithCallback()),e.storage||(e.storage=I2),this.config=e,this.tokenSectionName=`captcha_${e.clientId||e.env}`}isMatch(){return this.config?.adapter?.isMatch?.()||C2()}async request(e,r){r||(r={}),r.method||(r.method="GET");const n=`${r.method}:${e}`;let i=e;r.withCaptcha&&(i=await this.appendCaptchaTokenToURL(e,n,!1));let o;try{o=await this.config.request(i,r)}catch(u){return u.error===ci.CAPTCHA_REQUIRED||u.error===ci.CAPTCHA_INVALID?(e=await this.appendCaptchaTokenToURL(e,n,u.error===ci.CAPTCHA_INVALID),this.config.request(e,r)):Promise.reject(u)}return o}getDefaultOpenURIWithCallback(){return e=>U9(e,this.config.oauthInstance)}async getCaptchaToken(e,r){if(!e){const u=await this.findCaptchaToken();if(u)return u}const n=await this.config.request(Ye.CAPTCHA_DATA_URL,{method:"POST",body:{state:r,redirect_uri:""},withCredentials:!1}),i=`${n.data}?state=${encodeURIComponent(r)}&token=${encodeURIComponent(n.token)}`,o=await this.config.openURIWithCallback(i);return this.saveCaptchaToken(o),o.captcha_token}async appendCaptchaTokenToURL(e,r,n){const i=await this.getCaptchaToken(n,r);return e.indexOf("?")>0?e+=`&captcha_token=${i}`:e+=`?captcha_token=${i}`,e}async saveCaptchaToken(e){e.expires_at=new Date(Date.now()+(e.expires_in-10)*1e3);const r=JSON.stringify(e);await this.config.storage.setItem(this.tokenSectionName,r)}async findCaptchaToken(){const e=await this.config.storage.getItem(this.tokenSectionName);if(e!=null)try{const r=JSON.parse(e);return r?.expires_at&&(r.expires_at=new Date(r.expires_at)),r.expires_at<new Date?null:r.captcha_token}catch{return await this.config.storage.removeItem(this.tokenSectionName),null}return null}}class Cv{constructor(e){if(this.params={},typeof e=="string")this.parse(e);else if(e&&typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.append(r,e[r])}parse(e){e.split("&").forEach(n=>{const[i,o]=n.split("=").map(decodeURIComponent);this.append(i,o)})}append(e,r){this.params[e]?this.params[e]=this.params[e].concat([r]):this.params[e]=[r]}get(e){return this.params[e]?this.params[e][0]:null}getAll(e){return this.params[e]||[]}delete(e){delete this.params[e]}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}set(e,r){this.params[e]=[r]}toString(){const e=[];for(const r in this.params)Object.prototype.hasOwnProperty.call(this.params,r)&&this.params[r].forEach(n=>{e.push(`${encodeURIComponent(r)}=${encodeURIComponent(n)}`)});return e.join("&")}}class rt extends Error{constructor(e){super(e.error_description||e.message),this.__isAuthError=!0,this.name="AuthError",this.status=e.error,this.code=e.error_code}}var D9={};async function E_(t,e){const r=async()=>{try{return require("../utils/encrypt")}catch{try{return await I9(()=>import("./encrypt-nNoK7rl2.js"),[],import.meta.url)}catch{return}}};try{if((e?.root?.globalThis||globalThis).IS_MP_BUILD)return;if(!D9.IS_MP_BUILD&&t)return r()}catch{if(t)return r()}}let j9=class vy{static parseParamsToSearch(e){return Object.keys(e).forEach(n=>{e[n]||delete e[n]}),new Cv(e).toString()}constructor(e){let{request:r}=e,n=e.credentialsClient;if(!n){const i={apiOrigin:e.apiOrigin,apiPath:e.apiPath,clientId:e.clientId,storage:e.storage,env:e.env,baseRequest:e.baseRequest,anonymousSignInFunc:e.anonymousSignInFunc,wxCloud:e.wxCloud,onCredentialsError:e.onCredentialsError,headers:e.headers||{},i18n:e.i18n,debug:e.debug};n=new Ho(i)}if(!r){const i=n.request.bind(n),o=new q9({env:e.env,clientId:e.clientId,request:i,storage:e.storage,adapter:e.adapter,oauthInstance:this,...e.captchaOptions});r=o.request.bind(o)}this.config={env:e.env,apiOrigin:e.apiOrigin,apiPath:e.apiPath,clientId:e.clientId,request:r,credentialsClient:n,storage:e.storage||I2,adapter:e.adapter}}getParamsByVersion(e,r){const n=my(e),i={v2:Wf}[n?.version]?.[r]||Ye[r];return n&&delete n.version,{params:n,url:i}}async signIn(e){const r=e.version||"v1",n=this.getParamsByVersion(e,"AUTH_SIGN_IN_URL");n.params.query&&delete n.params.query;const i=await this.getEncryptParams(n.params),o=await this.config.request(n.url,{method:"POST",body:i});return await this.config.credentialsClient.setCredentials({...o,version:r}),Promise.resolve(o)}async signInAnonymously(e={},r=!1){const n=await this.config.request(Ye.AUTH_SIGN_IN_ANONYMOUSLY_URL,{method:"POST",body:e,useWxCloud:r});return await this.config.credentialsClient.setCredentials(n),Promise.resolve(n)}async signUp(e){const r=await this.config.request(Ye.AUTH_SIGN_UP_URL,{method:"POST",body:e});return await this.config.credentialsClient.setCredentials(r),Promise.resolve(r)}async signOut(e){let r={};if(e){try{r=await this.config.request(Ye.AUTH_SIGNOUT_URL,{method:"POST",withCredentials:!0,body:e})}catch(o){o.error!==ci.UNAUTHENTICATED&&console.log("sign_out_error",o)}return await this.config.credentialsClient.setCredentials(),r}const n=await this.config.credentialsClient.getAccessToken(),i=await this.config.request(Ye.AUTH_REVOKE_URL,{method:"POST",body:{token:n}});return await this.config.credentialsClient.setCredentials(),Promise.resolve(i)}async revokeAllDevices(){await this.config.request(Ye.AUTH_REVOKE_ALL_URL,{method:"DELETE",withCredentials:!0})}async revokeDevice(e){await this.config.request(Ye.AUTHORIZED_DEVICES_DELETE_URL+e.device_id,{method:"DELETE",withCredentials:!0})}async getVerification(e,r){let n=!1;(e.target==="CUR_USER"||await this.hasLoginState())&&(n=!0);const i=my(e);return i.phone_number&&!/^\+\d{1,3}\s+\d+/.test(i.phone_number)&&(i.phone_number=`+86 ${i.phone_number}`),this.config.request(Ye.VERIFICATION_URL,{method:"POST",body:i,withCaptcha:r?.withCaptcha||!1,withCredentials:n})}async verify(e){const r=this.getParamsByVersion(e,"VERIFY_URL"),n=await this.config.request(r.url,{method:"POST",body:r.params});return e?.version==="v2"&&await this.config.credentialsClient.setCredentials({...n,version:"v2"}),n}async genProviderRedirectUri(e){const{provider_redirect_uri:r,other_params:n={},...i}=e;r&&!i.redirect_uri&&(i.redirect_uri=r);let o=`${Ye.PROVIDER_URI_URL}?${vy.parseParamsToSearch(i)}`;return Object.keys(n).forEach(u=>{const f=n[u];u==="sign_out_uri"&&!(f?.length>0)||(o+=`&other_params[${u}]=${encodeURIComponent(f)}`)}),this.config.request(o,{method:"GET"})}async grantProviderToken(e,r=!1){return this.config.request(Ye.PROVIDER_TOKEN_URL,{method:"POST",body:e,useWxCloud:r})}async patchProviderToken(e){return this.config.request(Ye.PROVIDER_TOKEN_URL,{method:"PATCH",body:e})}async signInWithProvider(e,r=!1){const n=this.getParamsByVersion(e,"AUTH_SIGN_IN_WITH_PROVIDER_URL"),i=await this.config.request(n.url,{method:"POST",body:n.params,useWxCloud:r});return await this.config.credentialsClient.setCredentials({...i,version:e?.version||"v1"}),Promise.resolve(i)}async toBindIdentity(e){const r=e.credentials||await this.config.credentialsClient.localCredentials.getCredentials();let n;try{await this.bindWithProvider({provider_token:e.provider_token},r),n={data:{type:hs.BIND_IDENTITY,provider:e.provider},error:null}}catch(i){n={data:{type:hs.BIND_IDENTITY},error:new rt(i)}}return e.fireEvent&&this.config.eventBus?.fire?.(bn.AUTH_STATE_CHANGED,{event:zo.BIND_IDENTITY,info:n}),n}async getInitialSession(){let e={};try{if(typeof window>"u"||typeof document>"u")return{data:null,error:null};const r=new URLSearchParams(location?.search),n=r.get("code"),i=r.get("state");if(!n||!i)return{data:null,error:null};let o=null;try{o=JSON.parse(sessionStorage.getItem(i)||"null")}catch{}e={type:o?.type};const u=r.get("error"),f=r.get("error_description");if(u||f)return{data:e,error:new rt({message:f||u||"Unknown error from OAuth provider"})};const p=o?.provider||r.get("provider");if(!p)return{data:e,error:new rt({message:"Provider is required for OAuth verification"})};const l=location.origin+location.pathname,{provider_token:d}=await this.grantProviderToken({provider_id:p,provider_redirect_uri:l,provider_code:n});let m,y=null,b;if(o.type===hs.BIND_IDENTITY)m=await this.config.credentialsClient.localCredentials.getCredentials(),b=await this.toBindIdentity({provider:p,provider_token:d,credentials:m});else if(o.type===hs.SIGN_IN){b=this.getParamsByVersion({provider:p},"AUTH_SIGN_IN_WITH_PROVIDER_URL"),m=await this.config.request(b.url,{method:"POST",body:{provider_token:d}});try{y=await this.getUserInfo({credentials:m})}catch(w){console.error("get user info error",w)}b={data:{...e,session:m,user:y},error:null}}r.delete("code"),r.delete("state"),r.delete("provider"),this.restoreUrlState(o?.search===void 0?`?${r.toString()}`:o.search,o?.hash||location.hash);try{sessionStorage.removeItem(i)}catch{}return b}catch(r){return{data:e,error:new rt(r)}}}async signInCustom(e){const r=await this.config.request(Ye.AUTH_SIGN_IN_CUSTOM,{method:"POST",body:e});return await this.config.credentialsClient.setCredentials(r),Promise.resolve(r)}async signInWithWechat(e={}){const r=await this.config.request(Ye.AUTH_SIGN_IN_WITH_WECHAT_URL,{method:"POST",body:e});return await this.config.credentialsClient.setCredentials(r),Promise.resolve(r)}async bindWithProvider(e,r){return this.config.request(Ye.PROVIDER_BIND_URL,{method:"POST",body:e,withCredentials:!0,getCredentials:r?()=>r:void 0})}async getUserProfile(e){return this.getUserInfo(e)}async getUserInfo(e={}){const r=this.getParamsByVersion(e,"USER_ME_URL");if(r.params?.query){const i=new Cv(r.params.query);r.url+=`?${i.toString()}`}const n=await this.config.request(r.url,{method:"GET",withCredentials:!0,getCredentials:e.credentials?()=>e.credentials:void 0});return n.sub&&(n.uid=n.sub),n}async getWedaUserInfo(){return await this.config.request(Ye.WEDA_USER_URL,{method:"GET",withCredentials:!0})}async deleteMe(e){const r=this.getParamsByVersion(e,"USER_ME_URL"),n=`${r.url}?${vy.parseParamsToSearch(r.params)}`;return this.config.request(n,{method:"DELETE",withCredentials:!0})}async hasLoginState(){try{return await this.config.credentialsClient.getAccessToken(),!0}catch{return!1}}hasLoginStateSync(){return this.config.credentialsClient.getCredentialsSync()}async getLoginState(){return this.config.credentialsClient.getCredentialsAsync()}async transByProvider(e){return this.config.request(Ye.USER_TRANS_BY_PROVIDER_URL,{method:"PATCH",body:e,withCredentials:!0})}async grantToken(e){const r=this.getParamsByVersion(e,"AUTH_TOKEN_URL");return this.config.request(r.url,{method:"POST",body:r.params})}async getProviders(){return this.config.request(Ye.PROVIDER_LIST,{method:"GET",withCredentials:!0})}async unbindProvider(e){return this.config.request(`${Ye.PROVIDER_UNBIND_URL}/${e.provider_id}`,{method:"DELETE",withCredentials:!0})}async checkPassword(e){return this.config.request(`${Ye.CHECK_PWD_URL}`,{method:"POST",withCredentials:!0,body:e})}async editContact(e){return this.config.request(`${Ye.BIND_CONTACT_URL}`,{method:"PATCH",withCredentials:!0,body:e})}async setPassword(e){return this.config.request(`${Ye.AUTH_SET_PASSWORD}`,{method:"PATCH",withCredentials:!0,body:e})}async updatePasswordByOld(e){const r=await this.sudo({password:e.old_password});return this.setPassword({sudo_token:r.sudo_token,new_password:e.new_password})}async sudo(e){return this.config.request(`${Ye.SUDO_URL}`,{method:"POST",withCredentials:!0,body:e})}async sendVerificationCodeToCurrentUser(e){return e.target="CUR_USER",this.config.request(Ye.VERIFICATION_URL,{method:"POST",body:e,withCredentials:!0,withCaptcha:!0})}async changeBoundProvider(e){return this.config.request(`${Ye.PROVIDER_LIST}/${e.provider_id}/trans`,{method:"POST",body:{provider_trans_token:e.trans_token},withCredentials:!0})}async setUserProfile(e){return this.config.request(Ye.USER_PRIFILE_URL,{method:"PATCH",body:e,withCredentials:!0})}async updateUserBasicInfo(e){return this.config.request(Ye.USER_BASIC_EDIT_URL,{method:"POST",withCredentials:!0,body:e})}async queryUserProfile(e){const r=new Cv(e);return this.config.request(`${Ye.USER_QUERY_URL}?${r.toString()}`,{method:"GET",withCredentials:!0})}setCustomSignFunc(e){this.getCustomSignTicketFn=e}async signInWithCustomTicket(){const e=this.getCustomSignTicketFn;if(!e)return Promise.reject({error:"failed_precondition",error_description:"please use setCustomSignFunc to set custom sign function"});const r=await e();return this.signInCustom({provider_id:"custom",ticket:r})}async resetPassword(e){return this.config.request(Ye.AUTH_RESET_PASSWORD,{method:"POST",body:e})}async authorize(e){return this.config.request(Ye.AUTHORIZE_URL,{method:"POST",withCredentials:!0,body:e})}async authorizeDevice(e){return this.config.request(Ye.AUTHORIZE_DEVICE_URL,{method:"POST",withCredentials:!0,body:e})}async deviceAuthorize(e){return this.config.request(Ye.AUTH_GET_DEVICE_CODE,{method:"POST",body:e,withCredentials:!0})}async authorizeInfo(e){const r=`${Ye.AUTHORIZE_INFO_URL}?${vy.parseParamsToSearch(e)}`;let n=!0,i=!1;return await this.hasLoginState()&&(i=!0,n=!1),this.config.request(r,{method:"GET",withBasicAuth:n,withCredentials:i})}async checkUsername(e){return this.config.request(Ye.CHECK_USERNAME,{method:"GET",body:e,withCredentials:!0})}async checkIfUserExist(e){const r=new Cv(e);return this.config.request(`${Ye.CHECK_IF_USER_EXIST}?${r.toString()}`,{method:"GET"})}async loginScope(){return this.config.credentialsClient.getScope()}async loginGroups(){return this.config.credentialsClient.getGroups()}async refreshTokenForce(e){const r=await this.config.credentialsClient.getCredentials();return await this.config.credentialsClient.refreshToken({...r,version:e?.version||"v1"})}async getCredentials(){return this.config.credentialsClient.getCredentials()}async getPublicKey(){return this.config.request(Wf.AUTH_PUBLIC_KEY,{method:"POST",body:{}})}async getEncryptParams(e){const{isEncrypt:r}=e;delete e.isEncrypt;const n=my(e),i=await E_(r,this.config.adapter);if(!i)return e;let o="",u="";try{const f=await this.getPublicKey();if(o=f.public_key,u=f.public_key_thumbprint,!o||!u)throw f}catch(f){throw f}return{params:i.getEncryptInfo({publicKey:o,payload:n}),public_key_thumbprint:u}}async getProviderSubType(){return this.config.request(Ye.GET_PROVIDER_TYPE,{method:"POST",body:{provider_id:"weda"}})}async verifyCaptchaData({token:e,key:r}){return this.config.request(Ye.VERIFY_CAPTCHA_DATA_URL,{method:"POST",body:{token:e,key:r},withCredentials:!1})}async createCaptchaData({state:e,redirect_uri:r=void 0}){return this.config.request(Ye.CAPTCHA_DATA_URL,{method:"POST",body:{state:e,redirect_uri:r},withCredentials:!1})}async getMiniProgramCode(e){return this.config.request(Ye.GET_MINIPROGRAM_QRCODE,{method:"POST",body:e})}async getMiniProgramQrCodeStatus(e){return this.config.request(Ye.GET_MINIPROGRAM_QRCODE_STATUS,{method:"POST",body:e})}async getUserBehaviorLog(e){const r={LOGIN:"query[action]=USER_LOGIN",MODIFY:"ne_query[action]=USER_LOGIN"},n=`${Ye.GET_USER_BEHAVIOR_LOG}?${r[e.type]}&limit=${e.limit}${e.page_token?`&page_token=${e.page_token}`:""}`;return this.config.request(n,{method:"GET",withCredentials:!0})}async modifyPassword(e){let r="",n="";const i=await E_(!0,this.config.adapter);if(!i)throw new Error("do not support encrypt, a encrypt util required.");try{const f=await this.getPublicKey();if(r=f.public_key,n=f.public_key_thumbprint,!r||!n)throw f}catch(f){throw f}const o=e.password?i.getEncryptInfo({publicKey:r,payload:e.password}):"",u=i.getEncryptInfo({publicKey:r,payload:e.new_password});return this.config.request(Ye.USER_BASIC_EDIT_URL,{method:"POST",withCredentials:!0,body:{user_id:e.user_id,encrypt_password:o,encrypt_new_password:u,public_key_thumbprint:n}})}async modifyPasswordWithoutLogin(e){let r="",n="";const i=await E_(!0,this.config.adapter);if(!i)throw new Error("do not support encrypt, a encrypt util required.");try{const f=await this.getPublicKey();if(r=f.public_key,n=f.public_key_thumbprint,!r||!n)throw f}catch(f){throw f}const o=e.password?i.getEncryptInfo({publicKey:r,payload:e.password}):"",u=i.getEncryptInfo({publicKey:r,payload:e.new_password});return this.config.request(Wf.AUTH_RESET_PASSWORD,{method:"POST",body:{username:e.username,password:o,new_password:u,public_key_thumbprint:n}})}restoreUrlState(e,r){if(e!==void 0)try{const n=new URL(window.location.href);n.search=e,n.hash=r||"",window.history.replaceState(null,"",n.toString())}catch{}}};class L9{constructor(e){const{apiOrigin:r,apiPath:n=xg,clientId:i,env:o,storage:u,request:f,baseRequest:p,anonymousSignInFunc:l,wxCloud:d,adapter:m,onCredentialsError:y,headers:b,i18n:w,useWxCloud:S,eventBus:E,detectSessionInUrl:R,debug:O}=e;this.detectSessionInUrl=R??!1,this.oauth2client=new Ho({apiOrigin:r,apiPath:n,clientId:i,env:o,storage:u,baseRequest:p||f,anonymousSignInFunc:l,wxCloud:d,onCredentialsError:y,headers:b||{},i18n:w,useWxCloud:S,eventBus:E,debug:O}),this.authApi=new j9({credentialsClient:this.oauth2client,...e,request:f?this.oauth2client.request.bind(this.oauth2client):void 0,adapter:m}),R&&this.oauth2client.setGetInitialSession(this.authApi.getInitialSession.bind(this.authApi))}initializeSession(e){if(!this.detectSessionInUrl){this.oauth2client.initialize(Promise.resolve({error:null}));return}this.oauth2client.setOnInitialSessionObtained(e),this.oauth2client.initialize()}}var Vt=Ng(),wl={},rs={},ZC;function k9(){if(ZC)return rs;ZC=1;var t=rs&&rs.__awaiter||function(d,m,y,b){function w(S){return S instanceof y?S:new y(function(E){E(S)})}return new(y||(y=Promise))(function(S,E){function R(I){try{C(b.next(I))}catch(P){E(P)}}function O(I){try{C(b.throw(I))}catch(P){E(P)}}function C(I){I.done?S(I.value):w(I.value).then(R,O)}C((b=b.apply(d,m||[])).next())})},e=rs&&rs.__generator||function(d,m){var y={label:0,sent:function(){if(S[0]&1)throw S[1];return S[1]},trys:[],ops:[]},b,w,S,E;return E={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function R(C){return function(I){return O([C,I])}}function O(C){if(b)throw new TypeError("Generator is already executing.");for(;E&&(E=0,C[0]&&(y=0)),y;)try{if(b=1,w&&(S=C[0]&2?w.return:C[0]?w.throw||((S=w.return)&&S.call(w),0):w.next)&&!(S=S.call(w,C[1])).done)return S;switch(w=0,S&&(C=[C[0]&2,S.value]),C[0]){case 0:case 1:S=C;break;case 4:return y.label++,{value:C[1],done:!1};case 5:y.label++,w=C[1],C=[0];continue;case 7:C=y.ops.pop(),y.trys.pop();continue;default:if(S=y.trys,!(S=S.length>0&&S[S.length-1])&&(C[0]===6||C[0]===2)){y=0;continue}if(C[0]===3&&(!S||C[1]>S[0]&&C[1]<S[3])){y.label=C[1];break}if(C[0]===6&&y.label<S[1]){y.label=S[1],S=C;break}if(S&&y.label<S[2]){y.label=S[2],y.ops.push(C);break}S[2]&&y.ops.pop(),y.trys.pop();continue}C=m.call(d,y)}catch(I){C=[6,I],w=0}finally{b=S=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}};Object.defineProperty(rs,"__esModule",{value:!0}),rs.catchErrorsDecorator=void 0;var r=yd(),n=Ng(),i=!1;typeof navigator<"u"&&navigator.userAgent&&(i=navigator.userAgent.indexOf("Firefox")!==-1);var o=i?/(\.js\/)?__decorate(\$\d+)?<@.*\d$/:/(\/\w+\.js\.)?__decorate(\$\d+)?\s*\(.*\)$/,u=/https?:\/\/.+:\d*\/.*\.js:\d+:\d+/;function f(d){var m=d.mode,y=m===void 0?"async":m,b=d.customInfo,w=b===void 0?{}:b,S=d.title,E=d.messages,R=E===void 0?[]:E;return function(O,C,I){if(n.IS_DEBUG_MODE){var P=w.className||O.constructor.name,D=w.methodName||C,j=I.value,q=p(new Error);y==="sync"?I.value=function(){for(var U=[],Y=0;Y<arguments.length;Y++)U[Y]=arguments[Y];var $=l({err:new Error,className:P,methodName:D,sourceLink:q});try{return j.apply(this,U)}catch(Z){var L=Z,H=Z.message,Q=Z.error,ce=Z.error_description,M={title:S||"".concat(P,".").concat(D," failed"),content:[{type:"error",body:Z}]};if(H&&/^\{.*\}$/.test(H)){var J=JSON.parse(H);M.subtitle=H,J.code&&($?($.code=J.code,$.msg=J.msg):(Z.code=J.code,Z.message=J.msg),L=$||Z,M.content=R.map(function(Ae){return{type:"info",body:Ae}}))}throw Q&&ce&&(M.subtitle=ce,$?($.code=Q,$.msg=ce):(Z.code=Q,Z.message=ce),L=$||Z,M.content=R.map(function(Ae){return{type:"info",body:Ae}})),(0,r.printGroupLog)(M),L}}:I.value=function(){for(var U=[],Y=0;Y<arguments.length;Y++)U[Y]=arguments[Y];return t(this,void 0,void 0,function(){var $,L,H,Q,ce,M,J,Z;return e(this,function(Ae){switch(Ae.label){case 0:$=l({err:new Error,className:P,methodName:D,sourceLink:q}),Ae.label=1;case 1:return Ae.trys.push([1,3,,4]),[4,j.apply(this,U)];case 2:return[2,Ae.sent()];case 3:throw L=Ae.sent(),H=L,Q=L.message,ce=L.error,M=L.error_description,J={title:S||"".concat(P,".").concat(D," failed"),content:[{type:"error",body:L}]},Q&&/^\{.*\}$/.test(Q)&&(Z=JSON.parse(Q),J.subtitle=Z,Z.code&&($?($.code=Z.code,$.message=Z.msg):(L.code=Z.code,L.message=Z.msg),H=$||L,J.content=R.map(function(Re){return{type:"info",body:Re}}))),ce&&M&&(J.subtitle=M,$?($.code=ce,$.msg=M):(L.code=ce,L.message=M),H=$||L,J.content=R.map(function(Re){return{type:"info",body:Re}})),(0,r.printGroupLog)(J),H;case 4:return[2]}})})}}}}rs.catchErrorsDecorator=f;function p(d){var m="",y=d.stack.split(`
`),b=y.findIndex(function(S){return o.test(S)});if(b!==-1){var w=u.exec(y[b+1]||"");m=w?w[0]:""}return m}function l(d){var m=d.err,y=d.className,b=d.methodName,w=d.sourceLink;if(!w)return null;var S=m.stack.split(`
`),E=i?/^catchErrorsDecorator\/<\/descriptor.value@.*\d$/:new RegExp("".concat(y,"\\.descriptor.value\\s*\\[as\\s").concat(b,"\\]\\s*\\(.*\\)$")),R=i?/^catchErrorsDecorator\/<\/descriptor.value/:new RegExp("".concat(y,"\\.descriptor.value\\s*\\[as\\s").concat(b,"\\]")),O=S.findIndex(function(P){return E.test(P)}),C;if(O!==-1){var I=S.filter(function(P,D){return D>O});I.unshift(S[O].replace(R,"".concat(y,".").concat(b)).replace(u,w)),C=new Error,C.stack="".concat(i?"@debugger":"Error",`
`).concat(I.join(`
`))}return C}return rs}var eI;function M9(){return eI||(eI=1,(function(t){var e=wl&&wl.__createBinding||(Object.create?(function(n,i,o,u){u===void 0&&(u=o);var f=Object.getOwnPropertyDescriptor(i,o);(!f||("get"in f?!i.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(n,u,f)}):(function(n,i,o,u){u===void 0&&(u=o),n[u]=i[o]})),r=wl&&wl.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(k9(),t)})(wl)),wl}var yr=M9(),xo={};const aj=H6(L8);var tI;function B9(){if(tI)return xo;tI=1;var t={},e=xo&&xo.__extends||(function(){var d=function(m,y){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(b[S]=w[S])},d(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");d(m,y);function b(){this.constructor=m}m.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}})(),r=xo&&xo.__awaiter||function(d,m,y,b){function w(S){return S instanceof y?S:new y(function(E){E(S)})}return new(y||(y=Promise))(function(S,E){function R(I){try{C(b.next(I))}catch(P){E(P)}}function O(I){try{C(b.throw(I))}catch(P){E(P)}}function C(I){I.done?S(I.value):w(I.value).then(R,O)}C((b=b.apply(d,m||[])).next())})},n=xo&&xo.__generator||function(d,m){var y={label:0,sent:function(){if(S[0]&1)throw S[1];return S[1]},trys:[],ops:[]},b,w,S,E;return E={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function R(C){return function(I){return O([C,I])}}function O(C){if(b)throw new TypeError("Generator is already executing.");for(;E&&(E=0,C[0]&&(y=0)),y;)try{if(b=1,w&&(S=C[0]&2?w.return:C[0]?w.throw||((S=w.return)&&S.call(w),0):w.next)&&!(S=S.call(w,C[1])).done)return S;switch(w=0,S&&(C=[C[0]&2,S.value]),C[0]){case 0:case 1:S=C;break;case 4:return y.label++,{value:C[1],done:!1};case 5:y.label++,w=C[1],C=[0];continue;case 7:C=y.ops.pop(),y.trys.pop();continue;default:if(S=y.trys,!(S=S.length>0&&S[S.length-1])&&(C[0]===6||C[0]===2)){y=0;continue}if(C[0]===3&&(!S||C[1]>S[0]&&C[1]<S[3])){y.label=C[1];break}if(C[0]===6&&y.label<S[1]){y.label=S[1],S=C;break}if(S&&y.label<S[2]){y.label=S[2],y.ops.push(C);break}S[2]&&y.ops.pop(),y.trys.pop();continue}C=m.call(d,y)}catch(I){C=[6,I],w=0}finally{b=S=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}};Object.defineProperty(xo,"__esModule",{value:!0}),xo.CloudbaseCache=void 0;var i=aj,o=yd(),u=Ng(),f=(function(d){e(m,d);function m(y){var b=d.call(this)||this;return b.root=y,y.tcbCacheObject||(y.tcbCacheObject={}),b}return m.prototype.setItem=function(y,b){this.root.tcbCacheObject[y]=b},m.prototype.getItem=function(y){return this.root.tcbCacheObject[y]},m.prototype.removeItem=function(y){delete this.root.tcbCacheObject[y]},m.prototype.clear=function(){delete this.root.tcbCacheObject},m})(i.AbstractStorage);function p(d,m){switch(d){case"local":return m.localStorage?m.localStorage:((0,o.printWarn)(u.ERRORS.INVALID_PARAMS,"localStorage is not supported on current platform"),new f(m.root));case"none":return new f(m.root);default:return m.localStorage?m.localStorage:((0,o.printWarn)(u.ERRORS.INVALID_PARAMS,"localStorage is not supported on current platform"),new f(m.root))}}var l=(function(){function d(m){this.keys={};var y=m.persistence,b=m.platformInfo,w=b===void 0?{}:b,S=m.keys,E=S===void 0?{}:S;this.platformInfo=w,this.storage||(this.persistenceTag=this.platformInfo.adapter.primaryStorage||y,this.storage=p(this.persistenceTag,this.platformInfo.adapter),this.keys=E)}return Object.defineProperty(d.prototype,"mode",{get:function(){return this.storage.mode||"sync"},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"persistence",{get:function(){return this.persistenceTag},enumerable:!1,configurable:!0}),d.prototype.setStore=function(m,y,b){if(this.mode==="async"){(0,o.printWarn)(u.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use setStoreAsync insteed");return}if(this.storage)try{var w={version:b||"localCachev1",content:y};this.storage.setItem(m,JSON.stringify(w))}catch(S){throw new Error(JSON.stringify({code:u.ERRORS.OPERATION_FAIL,msg:"[".concat((0,u.getSdkName)(),"][").concat(u.ERRORS.OPERATION_FAIL,"]setStore failed"),info:S}))}},d.prototype.setStoreAsync=function(m,y,b){return r(this,void 0,void 0,function(){var w;return n(this,function(S){switch(S.label){case 0:if(!this.storage)return[2];S.label=1;case 1:return S.trys.push([1,3,,4]),w={version:b||"localCachev1",content:y},[4,this.storage.setItem(m,JSON.stringify(w))];case 2:return S.sent(),[3,4];case 3:return S.sent(),[2];case 4:return[2]}})})},d.prototype.getStore=function(m,y){var b;if(this.mode==="async"){(0,o.printWarn)(u.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use getStoreAsync insteed");return}try{if(typeof process<"u"&&(!((b=t)===null||b===void 0)&&b.tcb_token))return t.tcb_token;if(!this.storage)return""}catch{return""}y=y||"localCachev1";var w=this.storage.getItem(m);if(!w)return"";if(w.indexOf(y)>=0){var S=JSON.parse(w);return S.content}return""},d.prototype.getStoreAsync=function(m,y){var b;return r(this,void 0,void 0,function(){var w,S;return n(this,function(E){switch(E.label){case 0:try{if(typeof process<"u"&&(!((b=t)===null||b===void 0)&&b.tcb_token))return[2,t.tcb_token];if(!this.storage)return[2,""]}catch{return[2,""]}return y=y||"localCachev1",[4,this.storage.getItem(m)];case 1:return w=E.sent(),w?w.indexOf(y)>=0?(S=JSON.parse(w),[2,S.content]):[2,""]:[2,""]}})})},d.prototype.removeStore=function(m){if(this.mode==="async"){(0,o.printWarn)(u.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use removeStoreAsync insteed");return}this.storage.removeItem(m)},d.prototype.removeStoreAsync=function(m){return r(this,void 0,void 0,function(){return n(this,function(y){switch(y.label){case 0:return[4,this.storage.removeItem(m)];case 1:return y.sent(),[2]}})})},d})();return xo.CloudbaseCache=l,xo}var z9=B9(),No={},Nn={},rI;function $9(){if(rI)return Nn;rI=1;var t=Nn&&Nn.__extends||(function(){var l=function(d,m){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(y[w]=b[w])},l(d,m)};return function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");l(d,m);function y(){this.constructor=d}d.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}})(),e=Nn&&Nn.__assign||function(){return e=Object.assign||function(l){for(var d,m=1,y=arguments.length;m<y;m++){d=arguments[m];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(l[b]=d[b])}return l},e.apply(this,arguments)},r=Nn&&Nn.__awaiter||function(l,d,m,y){function b(w){return w instanceof m?w:new m(function(S){S(w)})}return new(m||(m=Promise))(function(w,S){function E(C){try{O(y.next(C))}catch(I){S(I)}}function R(C){try{O(y.throw(C))}catch(I){S(I)}}function O(C){C.done?w(C.value):b(C.value).then(E,R)}O((y=y.apply(l,d||[])).next())})},n=Nn&&Nn.__generator||function(l,d){var m={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},y,b,w,S;return S={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function E(O){return function(C){return R([O,C])}}function R(O){if(y)throw new TypeError("Generator is already executing.");for(;S&&(S=0,O[0]&&(m=0)),m;)try{if(y=1,b&&(w=O[0]&2?b.return:O[0]?b.throw||((w=b.return)&&w.call(b),0):b.next)&&!(w=w.call(b,O[1])).done)return w;switch(b=0,w&&(O=[O[0]&2,w.value]),O[0]){case 0:case 1:w=O;break;case 4:return m.label++,{value:O[1],done:!1};case 5:m.label++,b=O[1],O=[0];continue;case 7:O=m.ops.pop(),m.trys.pop();continue;default:if(w=m.trys,!(w=w.length>0&&w[w.length-1])&&(O[0]===6||O[0]===2)){m=0;continue}if(O[0]===3&&(!w||O[1]>w[0]&&O[1]<w[3])){m.label=O[1];break}if(O[0]===6&&m.label<w[1]){m.label=w[1],w=O;break}if(w&&m.label<w[2]){m.label=w[2],m.ops.push(O);break}w[2]&&m.ops.pop(),m.trys.pop();continue}O=d.call(l,m)}catch(C){O=[6,C],b=0}finally{y=w=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}};Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.WebRequest=Nn.genAdapter=void 0;var i=aj,o=yd(),u=rj(),f=(function(l){t(d,l);function d(m){var y=l.call(this)||this,b=m.timeout,w=m.timeoutMsg,S=m.restrictedMethods;return y.timeout=b||0,y.timeoutMsg=w||"",y.restrictedMethods=S||["get","post","upload","download"],y}return d.prototype.get=function(m){return this.request(e(e({},m),{method:"get"}),this.restrictedMethods.includes("get"))},d.prototype.post=function(m){return this.request(e(e({},m),{method:"post"}),this.restrictedMethods.includes("post"))},d.prototype.put=function(m){return this.request(e(e({},m),{method:"put"}))},d.prototype.upload=function(m){var y=m.data,b=m.file,w=m.name,S=m.method,E=m.headers,R=E===void 0?{}:E,O={post:"post",put:"put"}[S?.toLowerCase()]||"put",C=new FormData;return O==="post"?(Object.keys(y).forEach(function(I){C.append(I,y[I])}),C.append("key",w),C.append("file",b),this.request(e(e({},m),{data:C,method:O}),this.restrictedMethods.includes("upload"))):this.request(e(e({},m),{method:"put",headers:R,body:b}),this.restrictedMethods.includes("upload"))},d.prototype.download=function(m){return r(this,void 0,void 0,function(){var y,b,w,S;return n(this,function(E){switch(E.label){case 0:return E.trys.push([0,2,,3]),[4,this.get(e(e({},m),{headers:{},responseType:"blob"}))];case 1:return y=E.sent().data,b=window.URL.createObjectURL(new Blob([y])),w=decodeURIComponent(new URL(m.url).pathname.split("/").pop()||""),S=document.createElement("a"),S.href=b,S.setAttribute("download",w),S.style.display="none",document.body.appendChild(S),S.click(),window.URL.revokeObjectURL(b),document.body.removeChild(S),[3,3];case 2:return E.sent(),[3,3];case 3:return[2,new Promise(function(R){R({statusCode:200,tempFilePath:m.url})})]}})})},d.prototype.fetch=function(m){var y;return r(this,void 0,void 0,function(){var b,w,S,E,R,O,C,I,P,D,j,q,U,Y=this;return n(this,function($){switch($.label){case 0:return b=new AbortController,w=m.url,S=m.enableAbort,E=S===void 0?!1:S,R=m.stream,O=R===void 0?!1:R,C=m.signal,I=m.timeout,P=m.shouldThrowOnError,D=P===void 0?!0:P,j=I??this.timeout,C&&(C.aborted&&b.abort(),C.addEventListener("abort",function(){return b.abort()})),q=null,E&&j&&(q=setTimeout(function(){console.warn(Y.timeoutMsg),b.abort(new Error(Y.timeoutMsg))},j)),[4,fetch(w,e(e({},m),{signal:b.signal})).then(function(L){return r(Y,void 0,void 0,function(){var H,Q,ce;return n(this,function(M){switch(M.label){case 0:return clearTimeout(q),D?L.ok?(H=L,[3,3]):[3,1]:[3,4];case 1:return ce=(Q=Promise).reject,[4,L.json()];case 2:H=ce.apply(Q,[M.sent()]),M.label=3;case 3:return[2,H];case 4:return[2,L]}})})}).catch(function(L){if(clearTimeout(q),D)return Promise.reject(L)})];case 1:return U=$.sent(),[2,{data:O?U.body:!((y=U.headers.get("content-type"))===null||y===void 0)&&y.includes("application/json")?U.json():U.text(),statusCode:U.status,header:U.headers}]}})})},d.prototype.request=function(m,y){var b=this;y===void 0&&(y=!1);var w=String(m.method).toLowerCase()||"get";return new Promise(function(S){var E=m.url,R=m.headers,O=R===void 0?{}:R,C=m.data,I=m.responseType,P=m.withCredentials,D=m.body,j=m.onUploadProgress,q=(0,o.formatUrl)((0,u.getProtocol)(),E,w==="get"?C:{}),U=new XMLHttpRequest;U.open(w,q),I&&(U.responseType=I),Object.keys(O).forEach(function(L){U.setRequestHeader(L,O[L])});var Y;j&&U.upload.addEventListener("progress",j),U.onreadystatechange=function(){var L={};if(U.readyState===4){var H=U.getAllResponseHeaders(),Q=H.trim().split(/[\r\n]+/),ce={};Q.forEach(function(M){var J=M.split(": "),Z=J.shift().toLowerCase(),Ae=J.join(": ");ce[Z]=Ae}),L.header=ce,L.statusCode=U.status;try{L.data=I==="blob"?U.response:JSON.parse(U.responseText)}catch{L.data=I==="blob"?U.response:U.responseText}clearTimeout(Y),S(L)}},y&&b.timeout&&(Y=setTimeout(function(){console.warn(b.timeoutMsg),U.abort()},b.timeout));var $;(0,o.isFormData)(C)?$=C:O["content-type"]==="application/x-www-form-urlencoded"?$=(0,o.toQueryString)(C):D?$=D:$=C?JSON.stringify(C):void 0,P&&(U.withCredentials=!0),U.send($)})},d})(i.AbstractSDKRequest);Nn.WebRequest=f;function p(){var l={type:"default",root:window,reqClass:f,wsClass:WebSocket,localStorage};return l}return Nn.genAdapter=p,Nn}var nI;function F9(){return nI||(nI=1,(function(t){var e=No&&No.__assign||function(){return e=Object.assign||function(d){for(var m,y=1,b=arguments.length;y<b;y++){m=arguments[y];for(var w in m)Object.prototype.hasOwnProperty.call(m,w)&&(d[w]=m[w])}return d},e.apply(this,arguments)},r=No&&No.__createBinding||(Object.create?(function(d,m,y,b){b===void 0&&(b=y);var w=Object.getOwnPropertyDescriptor(m,y);(!w||("get"in w?!m.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return m[y]}}),Object.defineProperty(d,b,w)}):(function(d,m,y,b){b===void 0&&(b=y),d[b]=m[y]})),n=No&&No.__setModuleDefault||(Object.create?(function(d,m){Object.defineProperty(d,"default",{enumerable:!0,value:m})}):function(d,m){d.default=m}),i=No&&No.__importStar||function(d){if(d&&d.__esModule)return d;var m={};if(d!=null)for(var y in d)y!=="default"&&Object.prototype.hasOwnProperty.call(d,y)&&r(m,d,y);return n(m,d),m};Object.defineProperty(t,"__esModule",{value:!0}),t.useDefaultAdapter=t.useAdapters=t.RUNTIME=void 0;var o=i($9()),u=yd(),f;(function(d){d.WEB="web",d.WX_MP="wx_mp"})(f=t.RUNTIME||(t.RUNTIME={}));function p(d,m){for(var y=(0,u.isArray)(d)?d:[d],b=0,w=y;b<w.length;b++){var S=w[b],E=S.isMatch,R=S.genAdapter,O=S.runtime;if(E())return{adapter:e({isMatch:E},R(m)),runtime:O}}}t.useAdapters=p;function l(){return{adapter:e({},o.genAdapter()),runtime:f.WEB}}t.useDefaultAdapter=l})(No)),No}var H9=F9(),xi=function(){return xi=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},xi.apply(this,arguments)},pp=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},mp=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},sj=(function(){function t(e){var r,n;try{this.localStorage=e?.localStorage||(((n=(r=e?.adapter)===null||r===void 0?void 0:r.root)===null||n===void 0?void 0:n.globalThis)||globalThis).localStorage}catch{this.localStorage=e?.localStorage||{}}}return t.prototype.getItem=function(e){return pp(this,void 0,void 0,function(){return mp(this,function(r){return[2,this.localStorage.getItem(e)]})})},t.prototype.removeItem=function(e){return pp(this,void 0,void 0,function(){return mp(this,function(r){return this.localStorage.removeItem(e),[2]})})},t.prototype.setItem=function(e,r){return pp(this,void 0,void 0,function(){return mp(this,function(n){return this.localStorage.setItem(e,r),[2]})})},t.prototype.getItemSync=function(e){return this.localStorage.getItem(e)},t.prototype.setItemSync=function(e,r){this.localStorage.setItem(e,r)},t.prototype.removeItemSync=function(e){this.localStorage.removeItem(e)},t})(),G9=/^[^:]+:\/\/[^/]+(\/[^?#]+)/,uj=function(t,e){var r,n,i,o=(r=e?.headers)===null||r===void 0?void 0:r["x-request-id"];return t||(t={}),(t?.code||!((n=t?.data)===null||n===void 0)&&n.error_code)&&(t={error:t.code||t.data.error,error_description:t.data.error_description||t.message||t.code||t.data.error_code,request_id:t.requestId,error_code:(i=t.data)===null||i===void 0?void 0:i.error_code}),t?.request_id||(t.request_id=t.request_id||o),t?.error?(t.error_uri=V9(e?.url),t):t?.data||{}};function W9(t){return function(e,r){return pp(this,void 0,void 0,function(){return mp(this,function(n){return[2,new Promise(function(i,o){var u=Object.assign({},r);u.body&&typeof u.body!="string"&&(u.body=JSON.stringify(u.body));var f=wx.request({url:e,data:u.body,timeout:t._timeout,method:u.method||"GET",header:u.headers,success:function(p){p=uj(p,xi(xi({},r),{url:e})),p.error&&o(p),i(p)},fail:function(p){o({error:"unreachable",error_description:p.message})},complete:function(p){if(!(!p||!p.errMsg)&&!(!t._timeout||t._restrictedMethods.indexOf("request")===-1)){var l=p.errMsg;if(l==="request:fail timeout"){console.warn(t._timeoutMsg);try{f.abort()}catch{}}}}})})]})})}}function V9(t){return G9.test(t)?RegExp.$1:t}var Y9=function(t,e){var r=xi({},t);try{if(!t?.storage&&e?.localStorage&&(r.storage=new sj({localStorage:e.localStorage,adapter:e})),!t.captchaOptions&&e?.captchaOptions&&(r.captchaOptions=e.captchaOptions),!t.baseRequest&&!t.request&&e?.reqClass){var n={timeout:1e4,restrictedMethods:["get","post","upload","download","request"]},i=new e.reqClass(n);r.baseRequest=function(o,u){var f,p,l,d,m;return pp(this,void 0,void 0,function(){var y,b,w,S;return mp(this,function(E){switch(E.label){case 0:if(y={},b=((f=u.method)===null||f===void 0?void 0:f.toLocaleLowerCase())||"post",w=(l=(p=i?.[b])===null||p===void 0?void 0:p.bind)===null||l===void 0?void 0:l.call(p,i),typeof w!="function")throw new Error("invalid ".concat(b," request method"));E.label=1;case 1:return E.trys.push([1,3,,4]),(!(!((d=u.headers)===null||d===void 0)&&d["content-type"])||!((m=u.headers)===null||m===void 0)&&m["content-type"].includes("application/json"))&&!["string","undefined"].includes(typeof u.body)&&(u.data=u.data||u.body,u.body=JSON.stringify(u.body)),[4,w(xi({url:o},u))];case 2:return y=E.sent(),y=uj(y,xi(xi({},u),{url:o})),[3,4];case 3:throw S=E.sent(),y=xi(xi({},S?.data),S),y;case 4:if(y?.error)throw y;return[2,y]}})})}}}catch(o){console.error("user adapter generate fail:",o)}return r},K9=function(t,e){var r=xi({},t),n={};if(e?.captchaOptions&&(r.captchaOptions=e.captchaOptions),!ba.isMatch()||t.storage&&t.baseRequest)return r;try{var i=ba.genAdapter({}),o=i.localStorage,u=i.reqClass;if(o&&(n.storage=new sj({localStorage:o,adapter:e})),u){var f=new u({timeout:1e4,restrictedMethods:["get","post","upload","download","request"]});n.request=W9(f)}return r.captchaOptions&&(n.baseRequest=n.request,n.request=void 0),xi(xi({},r),n)}catch(p){console.error("adapter generate fail:",p)}return r},Q9=function(t){return t.adapter&&t.adapter.type!=="default"?Y9(t,t.adapter):K9(t,t.adapter)};function J9(t,e){try{sessionStorage.setItem(t,JSON.stringify(e))}catch(r){console.error("Failed to save to browser session:",r)}}function X9(t){try{var e=JSON.parse(sessionStorage.getItem(t));return e}catch(r){return console.error("Failed to get browser session:",r),null}}function Z9(t){try{return sessionStorage.removeItem(t),!0}catch(e){return console.error("Failed to remove browser session:",e),null}}function ez(t,e){if(t!==void 0){var r=new URL(window.location.href);r.search=t,r.hash=e||r.hash,window.history.replaceState({},"",r.href)}}var Qe=function(){return Qe=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Qe.apply(this,arguments)},gr=function(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var f=t.length-1;f>=0;f--)(u=t[f])&&(o=(i<3?u(o):i>3?u(e,r,o):u(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o},De=function(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)},me=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},ve=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},tz=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},iI=function(){return typeof window<"u"&&typeof document<"u"},rz="auth",nz=function(t){return function(e){t.fire(bn.LOGIN_STATE_CHANGED,Qe(Qe({},e),{eventType:py.CREDENTIALS_ERROR}))}},iz=(function(){function t(e){var r=e.cache,n=e.oauthInstance;this.cache=r,this.oauthInstance=n,this.setUserInfo()}return t.prototype.checkLocalInfo=function(){return me(this,void 0,void 0,function(){return ve(this,function(e){return this.uid=this.getLocalUserInfo("uid"),this.gender=this.getLocalUserInfo("gender"),this.picture=this.getLocalUserInfo("picture"),this.email=this.getLocalUserInfo("email"),this.emailVerified=this.getLocalUserInfo("email_verified"),this.phoneNumber=this.getLocalUserInfo("phone_number"),this.username=this.getLocalUserInfo("username"),this.name=this.getLocalUserInfo("name"),this.birthdate=this.getLocalUserInfo("birthdate"),this.zoneinfo=this.getLocalUserInfo("zoneinfo"),this.locale=this.getLocalUserInfo("locale"),this.sub=this.getLocalUserInfo("sub"),this.createdFrom=this.getLocalUserInfo("created_from"),this.providers=this.getLocalUserInfo("providers"),[2]})})},t.prototype.checkLocalInfoAsync=function(){return me(this,void 0,void 0,function(){var e,r,n,i;return ve(this,function(o){switch(o.label){case 0:return e=this,[4,this.getLocalUserInfoAsync("uid")];case 1:return e.uid=o.sent(),r=this,[4,this.getLocalUserInfoAsync("gender")];case 2:return r.gender=o.sent(),this.picture=this.getLocalUserInfo("picture"),n=this,[4,this.getLocalUserInfoAsync("email")];case 3:return n.email=o.sent(),this.emailVerified=this.getLocalUserInfo("email_verified"),this.phoneNumber=this.getLocalUserInfo("phone_number"),i=this,[4,this.getLocalUserInfoAsync("username")];case 4:return i.username=o.sent(),this.name=this.getLocalUserInfo("name"),this.birthdate=this.getLocalUserInfo("birthdate"),this.zoneinfo=this.getLocalUserInfo("zoneinfo"),this.locale=this.getLocalUserInfo("locale"),this.sub=this.getLocalUserInfo("sub"),this.createdFrom=this.getLocalUserInfo("created_from"),this.providers=this.getLocalUserInfo("providers"),[2]}})})},t.prototype.update=function(e){return me(this,void 0,void 0,function(){var r;return ve(this,function(n){switch(n.label){case 0:return[4,this.oauthInstance.authApi.setUserProfile(Qe({},e))];case 1:return r=n.sent(),this.setLocalUserInfo(r),[2]}})})},t.prototype.updateUserBasicInfo=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.updateUserBasicInfo(Qe({},e))];case 1:return r.sent(),[4,this.refresh()];case 2:return r.sent(),[2]}})})},t.prototype.updatePassword=function(e,r){return this.oauthInstance.authApi.updatePasswordByOld({old_password:r,new_password:e})},t.prototype.updateUsername=function(e){return typeof e!="string"&&Vf.throwError(Vt.ERRORS.INVALID_PARAMS,"username must be a string"),this.update({username:e})},t.prototype.refresh=function(e){return me(this,void 0,void 0,function(){var r;return ve(this,function(n){switch(n.label){case 0:return[4,this.oauthInstance.authApi.getUserInfo(e)];case 1:if(r=n.sent(),r.code==="INVALID_ACCESS_TOKEN")throw this.setLocalUserInfo({}),r;return this.setLocalUserInfo(r),[2,r]}})})},t.prototype.getLocalUserInfo=function(e){var r=this.cache.keys.userInfoKey,n=this.cache.getStore(r);return e?n[e]:n||{}},t.prototype.setLocalUserInfo=function(e){var r=this.cache.keys.userInfoKey;this.cache.setStore(r,e),this.setUserInfo()},t.prototype.getLocalUserInfoAsync=function(e){return me(this,void 0,void 0,function(){var r,n;return ve(this,function(i){switch(i.label){case 0:return r=this.cache.keys.userInfoKey,[4,this.cache.getStoreAsync(r)];case 1:return n=i.sent(),[2,n[e]]}})})},t.prototype.setUserInfo=function(){var e=this,r=this.cache.keys.userInfoKey,n=this.cache.getStore(r);["uid","email","name","gender","picture","email_verified","phone_number","birthdate","zoneinfo","locale","sub","created_from","providers","username","created_at"].forEach(function(i){e[i]=n[i]})},gr([yr.catchErrorsDecorator({title:"",messages:["","  1 -  User.update() ","  2 - ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[Object]),De("design:returntype",Promise)],t.prototype,"update",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 -  User.updatePassword() ","  3 - ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[String,String]),De("design:returntype",void 0)],t.prototype,"updatePassword",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 -  User.updateUsername() ","  2 - ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[String]),De("design:returntype",void 0)],t.prototype,"updateUsername",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 -  User.refresh() ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[Object]),De("design:returntype",Promise)],t.prototype,"refresh",null),t})(),T_=(function(){function t(e){var r=e.envId,n=e.cache,i=e.oauthInstance;r||Vf.throwError(Vt.ERRORS.INVALID_PARAMS,"envId is not defined"),this.cache=n,this.oauthInstance=i,this.user=new iz({cache:this.cache,oauthInstance:i})}return t.prototype.checkLocalState=function(){var e;this.oauthLoginState=(e=this.oauthInstance)===null||e===void 0?void 0:e.authApi.hasLoginStateSync(),this.user.checkLocalInfo()},t.prototype.checkLocalStateAsync=function(){var e;return me(this,void 0,void 0,function(){return ve(this,function(r){switch(r.label){case 0:return[4,(e=this.oauthInstance)===null||e===void 0?void 0:e.authApi.getLoginState()];case 1:return r.sent(),[4,this.user.checkLocalInfoAsync()];case 2:return r.sent(),[2]}})})},t})(),oz=(function(){function t(e){this.listeners=new Map,this.hasListenerSetUp=!1,this.config=e,this.oauthInstance=e.oauthInstance,this.cache=e.cache,this.init(),this.setAccessKey()}return t.prototype.bindPhoneNumber=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.editContact(e)]})})},t.prototype.unbindProvider=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.unbindProvider(e)]})})},t.prototype.bindEmail=function(e){return this.oauthInstance.authApi.editContact(e)},t.prototype.verify=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.verify(e)]})})},t.prototype.getVerification=function(e,r){return me(this,void 0,void 0,function(){return ve(this,function(n){return[2,this.oauthInstance.authApi.getVerification(e,r)]})})},Object.defineProperty(t.prototype,"currentUser",{get:function(){if(this.cache.mode==="async"){Vf.printWarn(Vt.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use getCurrentUser instead");return}var e=this.hasLoginState();return e&&e.user||null},enumerable:!1,configurable:!0}),t.prototype.getCurrentUser=function(){return me(this,void 0,void 0,function(){var e,r;return ve(this,function(n){switch(n.label){case 0:return[4,this.getLoginState()];case 1:return e=n.sent(),e?(r=e.user.getLocalUserInfo(),[4,e.user.checkLocalInfoAsync()]):[3,3];case 2:return n.sent(),[2,Qe(Qe({},e.user),r)];case 3:return[2,null]}})})},t.prototype.signInAnonymouslyInWx=function(e){var r=e===void 0?{}:e,n=r.useWxCloud;return me(this,void 0,void 0,function(){var i,o,u=this;return ve(this,function(f){switch(f.label){case 0:if(!ba.isMatch())throw Error("wx api undefined");return i=wx.getAccountInfoSync().miniProgram,o=function(p){return me(u,void 0,void 0,function(){var l,d,m;return ve(this,function(y){switch(y.label){case 0:l=void 0,d=void 0,y.label=1;case 1:return y.trys.push([1,4,,5]),[4,this.oauthInstance.authApi.grantProviderToken({provider_id:i?.appId,provider_code:p,provider_params:{provider_code_type:"open_id",appid:i?.appId}},n)];case 2:if(l=y.sent(),l?.error_code||!l.provider_token)throw l;return[4,this.oauthInstance.authApi.signInAnonymously({provider_token:l.provider_token},n)];case 3:if(d=y.sent(),d?.error_code)throw d;return[3,5];case 4:throw m=y.sent(),m;case 5:return[2]}})})},[4,new Promise(function(p,l){wx.login({success:function(d){return me(u,void 0,void 0,function(){var m;return ve(this,function(y){switch(y.label){case 0:return y.trys.push([0,2,,3]),[4,o(d.code)];case 1:return y.sent(),p(!0),[3,3];case 2:return m=y.sent(),l(m),[3,3];case 3:return[2]}})})},fail:function(d){var m=new Error(d?.errMsg);m.code=d?.errno,l(m)}})})];case 1:return f.sent(),[2,this.createLoginState(void 0,{asyncRefreshUser:!0})]}})})},t.prototype.bindOpenId=function(){return me(this,void 0,void 0,function(){var e,r,n=this;return ve(this,function(i){switch(i.label){case 0:if(!ba.isMatch())throw Error("wx api undefined");return e=wx.getAccountInfoSync().miniProgram,r=function(o){return me(n,void 0,void 0,function(){var u,f;return ve(this,function(p){switch(p.label){case 0:u=void 0,p.label=1;case 1:return p.trys.push([1,4,,5]),[4,this.oauthInstance.authApi.grantProviderToken({provider_id:e?.appId,provider_code:o,provider_params:{provider_code_type:"open_id",appid:e?.appId}})];case 2:if(u=p.sent(),u?.error_code||!u.provider_token)throw u;return[4,this.oauthInstance.authApi.bindWithProvider({provider_token:u.provider_token})];case 3:return p.sent(),[3,5];case 4:throw f=p.sent(),f;case 5:return[2]}})})},[4,new Promise(function(o,u){wx.login({success:function(f){return me(n,void 0,void 0,function(){var p;return ve(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,r(f.code)];case 1:return l.sent(),o(!0),[3,3];case 2:return p=l.sent(),u(p),[3,3];case 3:return[2]}})})},fail:function(f){var p=new Error(f?.errMsg);p.code=f?.errno,u(p)}})})];case 1:return i.sent(),[2]}})})},t.prototype.signInWithUnionId=function(){return me(this,void 0,void 0,function(){var e,r=this;return ve(this,function(n){switch(n.label){case 0:if(!ba.isMatch())throw Error("wx api undefined");n.label=1;case 1:return n.trys.push([1,3,,4]),[4,new Promise(function(i,o){var u=wx.getAccountInfoSync().miniProgram;wx.login({success:function(f){return me(r,void 0,void 0,function(){var p,l,d,m,y;return ve(this,function(b){switch(b.label){case 0:p=u?.appId,b.label=1;case 1:return b.trys.push([1,4,,5]),[4,this.oauthInstance.authApi.grantProviderToken({provider_code:f.code,provider_id:p,provider_params:{provider_code_type:"union_id",appid:u?.appId}})];case 2:return l=b.sent(),d=l.provider_token,d?[4,this.oauthInstance.authApi.signInWithProvider({provider_id:p,provider_token:d})]:(o(l),[2]);case 3:return m=b.sent(),m?.error_code?(o(m),[2]):(i(!0),[3,5]);case 4:return y=b.sent(),o(y),[3,5];case 5:return[2]}})})},fail:function(f){var p=new Error(f?.errMsg);p.code=f?.errno,o(p)}})})];case 2:return n.sent(),[3,4];case 3:throw e=n.sent(),e;case 4:return[2,this.createLoginState()]}})})},t.prototype.signInWithSms=function(e){var r=e.verificationInfo,n=r===void 0?{verification_id:"",is_user:!1}:r,i=e.verificationCode,o=i===void 0?"":i,u=e.phoneNum,f=u===void 0?"":u,p=e.bindInfo,l=p===void 0?void 0:p;return me(this,void 0,void 0,function(){return ve(this,function(d){try{return[2,this.signInWithUsername({verificationInfo:n,verificationCode:o,bindInfo:l,username:f,loginType:"sms"})]}catch(m){throw m}return[2]})})},t.prototype.signInWithEmail=function(e){var r=e.verificationInfo,n=r===void 0?{verification_id:"",is_user:!1}:r,i=e.verificationCode,o=i===void 0?"":i,u=e.bindInfo,f=u===void 0?void 0:u,p=e.email,l=p===void 0?"":p;return me(this,void 0,void 0,function(){return ve(this,function(d){try{return[2,this.signInWithUsername({verificationInfo:n,verificationCode:o,bindInfo:f,username:l,loginType:"email"})]}catch(m){throw m}return[2]})})},t.prototype.setCustomSignFunc=function(e){this.oauthInstance.authApi.setCustomSignFunc(e)},t.prototype.signIn=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.signIn(e)];case 1:return r.sent(),[2,this.createLoginState(e)]}})})},t.prototype.setPassword=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.setPassword(e)]})})},t.prototype.isUsernameRegistered=function(e){return me(this,void 0,void 0,function(){var r;return ve(this,function(n){switch(n.label){case 0:return typeof e!="string"&&Vf.throwError(Vt.ERRORS.INVALID_PARAMS,"username must be a string"),[4,this.oauthInstance.authApi.checkIfUserExist({username:e})];case 1:return r=n.sent().exist,[2,r]}})})},t.prototype.hasLoginState=function(){var e;if(this.cache.mode==="async"){Vf.printWarn(Vt.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use getLoginState instead");return}var r=(e=this.oauthInstance)===null||e===void 0?void 0:e.authApi.hasLoginStateSync();if(r){var n=new T_({envId:this.config.env,cache:this.cache,oauthInstance:this.oauthInstance});return n}return null},t.prototype.getLoginState=function(){return me(this,void 0,void 0,function(){var e,r;return ve(this,function(n){switch(n.label){case 0:e=null,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.oauthInstance.authApi.getLoginState()];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[2,null];case 4:return e?(r=new T_({envId:this.config.env,cache:this.cache,oauthInstance:this.oauthInstance}),[2,r]):[2,null]}})})},t.prototype.getUserInfo=function(){return me(this,void 0,void 0,function(){return ve(this,function(e){return[2,this.getCurrentUser()]})})},t.prototype.getWedaUserInfo=function(){return me(this,void 0,void 0,function(){return ve(this,function(e){return[2,this.oauthInstance.authApi.getWedaUserInfo()]})})},t.prototype.updateUserBasicInfo=function(e){return me(this,void 0,void 0,function(){var r;return ve(this,function(n){switch(n.label){case 0:return[4,this.getLoginState()];case 1:return r=n.sent(),r?[4,r.user.updateUserBasicInfo(e)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.getAuthHeader=function(){return console.error("Auth.getAuthHeader API "),{}},t.prototype.bindWithProvider=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.bindWithProvider(e)]})})},t.prototype.queryUser=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.queryUserProfile(e)]})})},t.prototype.getAccessToken=function(){return me(this,void 0,void 0,function(){var e;return ve(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.oauth2client.getAccessToken()];case 1:return e=r.sent(),[2,{accessToken:e,env:this.config.env}]}})})},t.prototype.grantProviderToken=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.grantProviderToken(e)]})})},t.prototype.patchProviderToken=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.patchProviderToken(e)]})})},t.prototype.signInWithProvider=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.signInWithProvider(e)];case 1:return r.sent(),[2,this.createLoginState(e)]}})})},t.prototype.signInWithWechat=function(e){return e===void 0&&(e={}),me(this,void 0,void 0,function(){return ve(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.signInWithWechat(e)];case 1:return r.sent(),[2,this.createLoginState(e)]}})})},t.prototype.grantToken=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.grantToken(e)];case 1:return r.sent(),[2,this.createLoginState()]}})})},t.prototype.genProviderRedirectUri=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.genProviderRedirectUri(e)]})})},t.prototype.resetPassword=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.resetPassword(e)]})})},t.prototype.deviceAuthorize=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.deviceAuthorize(e)]})})},t.prototype.sudo=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.sudo(e)]})})},t.prototype.deleteMe=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.deleteMe(e)]})})},t.prototype.getProviders=function(){return me(this,void 0,void 0,function(){return ve(this,function(e){return[2,this.oauthInstance.authApi.getProviders()]})})},t.prototype.loginScope=function(){return me(this,void 0,void 0,function(){return ve(this,function(e){return[2,this.oauthInstance.authApi.loginScope()]})})},t.prototype.loginGroups=function(){return me(this,void 0,void 0,function(){return ve(this,function(e){return[2,this.oauthInstance.authApi.loginGroups()]})})},t.prototype.onLoginStateChanged=function(e){var r;return me(this,void 0,void 0,function(){var n,i=this;return ve(this,function(o){switch(o.label){case 0:return(r=this.config.eventBus)===null||r===void 0||r.on(bn.LOGIN_STATE_CHANGED,function(u){return me(i,void 0,void 0,function(){var f,p,l;return ve(this,function(d){switch(d.label){case 0:return((l=u?.data)===null||l===void 0?void 0:l.eventType)===py.CREDENTIALS_ERROR?[3,2]:[4,this.getLoginState()];case 1:return p=d.sent(),[3,3];case 2:p={},d.label=3;case 3:return f=p,e.call(this,Qe(Qe({},u),f)),[2]}})})}),[4,this.getLoginState()];case 1:return n=o.sent(),e.call(this,n),[2]}})})},t.prototype.refreshTokenForce=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.refreshTokenForce(e)]})})},t.prototype.getCredentials=function(){return me(this,void 0,void 0,function(){return ve(this,function(e){return[2,this.oauthInstance.authApi.getCredentials()]})})},t.prototype.setCredentials=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.oauth2client.setCredentials(e)];case 1:return r.sent(),[2]}})})},t.prototype.getProviderSubType=function(){return me(this,void 0,void 0,function(){return ve(this,function(e){return[2,this.oauthInstance.authApi.getProviderSubType()]})})},t.prototype.createCaptchaData=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.createCaptchaData(e)]})})},t.prototype.verifyCaptchaData=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.verifyCaptchaData(e)]})})},t.prototype.getMiniProgramQrCode=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.getMiniProgramCode(e)]})})},t.prototype.getMiniProgramQrCodeStatus=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.getMiniProgramQrCodeStatus(e)]})})},t.prototype.modifyPassword=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.modifyPassword(e)]})})},t.prototype.modifyPasswordWithoutLogin=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.modifyPasswordWithoutLogin(e)]})})},t.prototype.getUserBehaviorLog=function(e){return me(this,void 0,void 0,function(){return ve(this,function(r){return[2,this.oauthInstance.authApi.getUserBehaviorLog(e)]})})},t.prototype.signInWithUsername=function(e){var r=e.verificationInfo,n=r===void 0?{verification_id:"",is_user:!1}:r,i=e.verificationCode,o=i===void 0?"":i,u=e.username,f=u===void 0?"":u,p=e.bindInfo,l=p===void 0?void 0:p,d=e.loginType,m=d===void 0?"":d;return me(this,void 0,void 0,function(){var y,b,w,S,E,R,O,C;return ve(this,function(I){switch(I.label){case 0:return I.trys.push([0,8,,9]),[4,this.oauthInstance.authApi.verify({verification_id:n.verification_id,verification_code:o})];case 1:if(y=I.sent(),y?.error_code)throw y;return b=y.verification_token,w=/^\+\d{1,3}\s+/.test(f)?f:"+86 ".concat(f),S={phone_number:w},m==="email"&&(w=f,S={email:w}),n.is_user?[4,this.oauthInstance.authApi.signIn({username:w,verification_token:b})]:[3,5];case 2:if(E=I.sent(),E?.error_code)throw E;return l?[4,this.oauthInstance.authApi.bindWithProvider({provider_token:l?.providerToken})]:[3,4];case 3:if(R=I.sent(),R?.error_code)throw R;I.label=4;case 4:return[3,7];case 5:return[4,this.oauthInstance.authApi.signUp(Qe(Qe({},S),{verification_token:b,provider_token:l?.providerId}))];case 6:if(O=I.sent(),O?.error_code)throw O;I.label=7;case 7:return[2,this.createLoginState()];case 8:throw C=I.sent(),C;case 9:return[2]}})})},t.prototype.createLoginState=function(e,r){var n,i;return me(this,void 0,void 0,function(){var o;return ve(this,function(u){switch(u.label){case 0:return o=new T_({envId:this.config.env,cache:this.cache,oauthInstance:this.oauthInstance}),[4,o.checkLocalStateAsync()];case 1:return u.sent(),r?.userInfo?(o.user.setLocalUserInfo(r.userInfo),[3,5]):[3,2];case 2:return r?.asyncRefreshUser?(o.user.refresh(e),[3,5]):[3,3];case 3:return[4,o.user.refresh(e)];case 4:u.sent(),u.label=5;case 5:return(n=this.config.eventBus)===null||n===void 0||n.fire(bn.LOGIN_STATE_CHANGED,{eventType:py.SIGN_IN}),(i=this.config.eventBus)===null||i===void 0||i.fire(bn.AUTH_STATE_CHANGED,{event:zo.SIGNED_IN}),[2,o]}})})},t.prototype.setAccessKey=function(){return me(this,void 0,void 0,function(){return ve(this,function(e){if(this.config.accessKey)try{this.oauthInstance.oauth2client.setAccessKeyCredentials({access_token:this.config.accessKey,token_type:"Bearer",scope:"accessKey",expires_at:new Date(+new Date+ +new Date),expires_in:+new Date+ +new Date})}catch(r){console.warn("accessKey error: ",r)}return[2]})})},t.prototype.signInAnonymously=function(e){return me(this,void 0,void 0,function(){var r,n,i,o,u;return ve(this,function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),[4,this.oauthInstance.authApi.signInAnonymously(e)];case 1:return f.sent(),[4,this.createLoginState()];case 2:return r=f.sent(),[4,this.getSession()];case 3:return n=f.sent().data,i=n===void 0?{}:n,o=i.session,[2,Qe(Qe({},r),{data:{user:o.user,session:o},error:null})];case 4:return u=f.sent(),[2,{data:{},error:new rt(u)}];case 5:return[2]}})})},t.prototype.signUp=function(e){return me(this,void 0,void 0,function(){var r,n,i=this;return ve(this,function(o){switch(o.label){case 0:return e.phone_number||e.verification_code||e.verification_token||e.provider_token?[4,this.oauthInstance.authApi.signUp(e)]:[3,2];case 1:return o.sent(),[2,this.createLoginState()];case 2:return o.trys.push([2,4,,5]),this.validateAtLeastOne(e,[["email"],["phone"]],"You must provide either an email or phone number"),[4,this.getVerification(e.email?{email:e.email}:{phone_number:this.formatPhone(e.phone)})];case 3:return r=o.sent(),[2,{data:{verifyOtp:function(u){var f=u.token,p=u.messageId,l=p===void 0?r.verification_id:p;return me(i,void 0,void 0,function(){var d,m,y,b,w,S;return ve(this,function(E){switch(E.label){case 0:return E.trys.push([0,8,,9]),[4,this.verify({verification_id:l||r.verification_id,verification_code:f})];case 1:return d=E.sent(),r.is_user?[4,this.signIn({username:e.email||this.formatPhone(e.phone),verification_token:d.verification_token})]:[3,3];case 2:return E.sent(),[3,6];case 3:return m=JSON.parse(JSON.stringify(e)),delete m.email,delete m.phone,[4,this.oauthInstance.authApi.signUp(Qe(Qe(Qe({},m),e.email?{email:e.email}:{phone_number:this.formatPhone(e.phone)}),{verification_token:d.verification_token,verification_code:f}))];case 4:return E.sent(),[4,this.createLoginState()];case 5:E.sent(),E.label=6;case 6:return[4,this.getSession()];case 7:return y=E.sent().data,b=y===void 0?{}:y,w=b.session,[2,{data:{user:w.user,session:w},error:null}];case 8:return S=E.sent(),[2,{data:{},error:new rt(S)}];case 9:return[2]}})})}},error:null}];case 4:return n=o.sent(),[2,{data:{},error:new rt(n)}];case 5:return[2]}})})},t.prototype.signOut=function(e){var r,n;return me(this,void 0,void 0,function(){var i,o,u;return ve(this,function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),i=this.cache.keys.userInfoKey,[4,this.oauthInstance.authApi.signOut(e)];case 1:return o=f.sent(),[4,this.cache.removeStoreAsync(i)];case 2:return f.sent(),this.setAccessKey(),(r=this.config.eventBus)===null||r===void 0||r.fire(bn.LOGIN_STATE_CHANGED,{eventType:py.SIGN_OUT}),(n=this.config.eventBus)===null||n===void 0||n.fire(bn.AUTH_STATE_CHANGED,{event:zo.SIGNED_OUT}),[2,Qe(Qe({},o),{data:{},error:null})];case 3:return u=f.sent(),[2,{data:{},error:new rt(u)}];case 4:return[2]}})})},t.prototype.onAuthStateChange=function(e){var r=this;this.hasListenerSetUp||(this.setupListeners(),this.hasListenerSetUp=!0);var n=Math.random().toString(36);this.listeners.has(n)||this.listeners.set(n,new Set),this.listeners.get(n).add(e);var i={id:n,callback:e,unsubscribe:function(){var o=r.listeners.get(n);o&&(o.delete(e),o.size===0&&r.listeners.delete(n))}};return{data:{subscription:i}}},t.prototype.signInWithPassword=function(e){return me(this,void 0,void 0,function(){var r,n,i,o;return ve(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),this.validateAtLeastOne(e,[["username"],["email"],["phone"]],"You must provide either username, email, or phone"),this.validateParams(e,{password:{required:!0,message:"Password is required"}}),[4,this.signIn(Qe({username:e.username||e.email||this.formatPhone(e.phone),password:e.password},e.is_encrypt?{isEncrypt:!0,version:"v2"}:{}))];case 1:return u.sent(),[4,this.getSession()];case 2:return r=u.sent().data,n=r===void 0?{}:r,i=n.session,[2,{data:{user:i.user,session:i},error:null}];case 3:return o=u.sent(),[2,{data:{},error:new rt(o)}];case 4:return[2]}})})},t.prototype.signInWithIdToken=function(e){return me(this,void 0,void 0,function(){var r,n,i,o;return ve(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),this.validateParams(e,{token:{required:!0,message:"Token is required"}}),[4,this.signInWithProvider({provider_token:e.token})];case 1:return u.sent(),[4,this.getSession()];case 2:return r=u.sent().data,n=r===void 0?{}:r,i=n.session,[2,{data:{user:i.user,session:i},error:null}];case 3:return o=u.sent(),[2,{data:{},error:new rt(o)}];case 4:return[2]}})})},t.prototype.signInWithOtp=function(e){return me(this,void 0,void 0,function(){var r,n,i=this;return ve(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.validateAtLeastOne(e,[["email"],["phone"]],"You must provide either an email or phone number"),[4,this.getVerification(e.email?{email:e.email}:{phone_number:this.formatPhone(e.phone)})];case 1:return r=o.sent(),[2,{data:{user:null,session:null,verifyOtp:function(u){var f=u.token,p=u.messageId,l=p===void 0?r.verification_id:p;return me(i,void 0,void 0,function(){return ve(this,function(d){return[2,this.verifyOtp({email:e.email,phone:e.phone,token:f,messageId:l})]})})}},error:null}];case 2:return n=o.sent(),[2,{data:{},error:new rt(n)}];case 3:return[2]}})})},t.prototype.verifyOAuth=function(e){return me(this,void 0,void 0,function(){var r,n,i,o,u,f,p,l,d;return ve(this,function(m){switch(m.label){case 0:r={},m.label=1;case 1:return m.trys.push([1,7,,8]),n=e?.code||i_("code"),i=e?.state||i_("state"),n?i?(o=X9(i),r.type=o?.type,u=e?.provider||o?.provider||i_("provider"),u?[4,this.grantProviderToken({provider_id:u,provider_redirect_uri:location.origin+location.pathname,provider_code:n})]:[2,{data:r,error:new rt({message:"Provider is required"})}]):[2,{data:{},error:new rt({message:"State is required"})}]:[2,{data:{},error:new rt({message:"Code is required"})}];case 2:return f=m.sent().provider_token,p=void 0,o.type!==hs.BIND_IDENTITY?[3,4]:[4,this.oauthInstance.authApi.toBindIdentity({provider_token:f,provider:u,fireEvent:!0})];case 3:return p=m.sent(),[3,6];case 4:return[4,this.signInWithIdToken({token:f})];case 5:p=m.sent(),p.data=Qe(Qe({},r),p.data),m.label=6;case 6:return l=new URLSearchParams(location?.search),l.delete("code"),l.delete("state"),ez(o?.search===void 0?"?".concat(l.toString()):o?.search,o?.hash||location.hash),Z9(i),[2,p];case 7:return d=m.sent(),[2,{data:r,error:new rt(d)}];case 8:return[2]}})})},t.prototype.signInWithOAuth=function(e){var r,n,i,o,u;return me(this,void 0,void 0,function(){var f,p,l,d,m,y,b,w,S;return ve(this,function(E){switch(E.label){case 0:return E.trys.push([0,2,,3]),this.validateParams(e,{provider:{required:!0,message:"Provider is required"}}),f=((r=e.options)===null||r===void 0?void 0:r.redirectTo)||location.href,p=new URL(f),l=p.origin+p.pathname,d=((n=e.options)===null||n===void 0?void 0:n.state)||"prd-".concat(e.provider,"-").concat(Math.random().toString(36).slice(2)),[4,this.genProviderRedirectUri({provider_id:e.provider,provider_redirect_uri:l,state:d})];case 1:return m=E.sent().uri,y=decodeURIComponent(m),b=y,!((i=e.options)===null||i===void 0)&&i.queryParams&&(w=new URL(y),Object.entries(e.options.queryParams).forEach(function(R){var O=R[0],C=R[1];w.searchParams.set(O,C)}),b=w.toString()),J9(d,{provider:e.provider,search:p.search,hash:p.hash,type:((o=e.options)===null||o===void 0?void 0:o.type)||hs.SIGN_IN}),iI()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(b),[2,{data:{url:b,provider:e.provider},error:null}];case 2:return S=E.sent(),[2,{data:{},error:new rt(S)}];case 3:return[2]}})})},t.prototype.getClaims=function(){return me(this,void 0,void 0,function(){var e,r,n;return ve(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getAccessToken()];case 1:return e=i.sent().accessToken,r=S9(e),[2,{data:r,error:null}];case 2:return n=i.sent(),[2,{data:{},error:new rt(n)}];case 3:return[2]}})})},t.prototype.resetPasswordForEmail=function(e,r){return me(this,void 0,void 0,function(){var n,i,o,u,f,p,l=this;return ve(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),this.validateParams({emailOrPhone:e},{emailOrPhone:{required:!0,message:"Email or phone is required"}}),n=(r||{}).redirectTo,i=e.includes("@"),o=void 0,i?o={email:e}:(u=this.formatPhone(e),o={phone_number:u}),[4,this.getVerification(o)];case 1:return f=d.sent(),[2,{data:{updateUser:function(m){return me(l,void 0,void 0,function(){var y,b,w,S;return ve(this,function(E){switch(E.label){case 0:this.validateParams(m,{nonce:{required:!0,message:"Nonce is required"},password:{required:!0,message:"Password is required"}}),E.label=1;case 1:return E.trys.push([1,5,,6]),[4,this.verify({verification_id:f.verification_id,verification_code:m.nonce})];case 2:return y=E.sent(),[4,this.oauthInstance.authApi.resetPassword({email:i?e:void 0,phone_number:i?void 0:e,new_password:m.password,verification_token:y.verification_token})];case 3:return E.sent(),(S=this.config.eventBus)===null||S===void 0||S.fire(bn.AUTH_STATE_CHANGED,{event:zo.PASSWORD_RECOVERY}),[4,this.signInWithPassword({email:i?e:void 0,phone:i?void 0:e,password:m.password})];case 4:return b=E.sent(),n&&iI()&&window.location.assign(n),[2,b];case 5:return w=E.sent(),[2,{data:{},error:new rt(w)}];case 6:return[2]}})})}},error:null}];case 2:return p=d.sent(),[2,{data:{},error:new rt(p)}];case 3:return[2]}})})},t.prototype.resetPasswordForOld=function(e){return me(this,void 0,void 0,function(){var r,n,i,o;return ve(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),[4,this.oauthInstance.authApi.updatePasswordByOld({old_password:e.old_password,new_password:e.new_password})];case 1:return u.sent(),[4,this.getSession()];case 2:return r=u.sent().data,n=r===void 0?{}:r,i=n.session,[2,{data:{user:i.user,session:i},error:null}];case 3:return o=u.sent(),[2,{data:{},error:new rt(o)}];case 4:return[2]}})})},t.prototype.verifyOtp=function(e){return me(this,void 0,void 0,function(){var r,n,i,o,u;return ve(this,function(f){switch(f.label){case 0:return f.trys.push([0,6,,7]),r=e.type,this.validateParams(e,{token:{required:!0,message:"Token is required"},messageId:{required:!0,message:"messageId is required"}}),["phone_change","email_change"].includes(r)?[4,this.verify({verification_id:e.messageId,verification_code:e.token})]:[3,2];case 1:return f.sent(),[3,4];case 2:return[4,this.signInWithUsername({verificationInfo:{verification_id:e.messageId,is_user:!0},verificationCode:e.token,username:e.email||this.formatPhone(e.phone)||"",loginType:e.email?"email":"phone"})];case 3:f.sent(),f.label=4;case 4:return[4,this.getSession()];case 5:return n=f.sent().data,i=n===void 0?{}:n,o=i.session,[2,{data:{user:o.user,session:o},error:null}];case 6:return u=f.sent(),[2,{data:{},error:new rt(u)}];case 7:return[2]}})})},t.prototype.getSession=function(){return me(this,void 0,void 0,function(){var e,r,n,i,o;return ve(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),[4,this.oauthInstance.oauth2client.getCredentials()];case 1:return e=u.sent(),!e||e.scope==="accessKey"?[2,{data:{session:null},error:null}]:[4,this.getUser()];case 2:return r=u.sent().data,n=r===void 0?{}:r,i=n.user,[2,{data:{session:Qe(Qe({},e),{user:i}),user:i},error:null}];case 3:return o=u.sent(),[2,{data:{},error:new rt(o)}];case 4:return[2]}})})},t.prototype.refreshSession=function(e){return me(this,void 0,void 0,function(){var r,n,i,o,u,f;return ve(this,function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),[4,this.oauthInstance.oauth2client.localCredentials.getCredentials()];case 1:return r=p.sent(),r.refresh_token=e||r.refresh_token,[4,this.oauthInstance.oauth2client.refreshToken(r)];case 2:return n=p.sent(),[4,this.getUser()];case 3:return i=p.sent().data,o=i===void 0?{}:i,u=o.user,[2,{data:{user:u,session:Qe(Qe({},n),{user:u})},error:null}];case 4:return f=p.sent(),[2,{data:{},error:new rt(f)}];case 5:return[2]}})})},t.prototype.getUser=function(){return me(this,void 0,void 0,function(){var e,r,n;return ve(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),r=this.convertToUser,[4,this.getUserInfo()];case 1:return e=r.apply(this,[i.sent()]),[2,{data:{user:e},error:null}];case 2:return n=i.sent(),[2,{data:{},error:new rt(n)}];case 3:return[2]}})})},t.prototype.refreshUser=function(){return me(this,void 0,void 0,function(){var e,r,n,i;return ve(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.currentUser.refresh()];case 1:return o.sent(),[4,this.getSession()];case 2:return e=o.sent().data,r=e===void 0?{}:e,n=r.session,[2,{data:{user:n.user,session:n},error:null}];case 3:return i=o.sent(),[2,{data:{},error:new rt(i)}];case 4:return[2]}})})},t.prototype.updateUser=function(e){var r;return me(this,void 0,void 0,function(){var n,i,o,u,f,p,l,d,m,y,b,w,S,E,R=this;return ve(this,function(O){switch(O.label){case 0:if(O.trys.push([0,8,,9]),n=Object.keys(e).some(function(C){return e[C]!==void 0&&e[C]!==null&&e[C]!==""}),!n)throw new rt({message:"At least one field must be provided for update"});return i=e.email,o=e.phone,u=tz(e,["email","phone"]),f=i!==void 0,p=o!==void 0,l={},f||p?(d=void 0,f?(d={email:e.email},m="email_change"):(y=this.formatPhone(e.phone),d={phone_number:y},m="phone_change"),[4,this.getVerification(d)]):[3,4];case 1:return b=O.sent(),w=Object.keys(u).length>0,w?[4,this.updateUserBasicInfo(u)]:[3,3];case 2:w=O.sent(),O.label=3;case 3:return l={messageId:b.verification_id,verifyOtp:function(C){return me(R,void 0,void 0,function(){var I,P,D;return ve(this,function(j){switch(j.label){case 0:return j.trys.push([0,11,,12]),C.email&&e.email===C.email?[4,this.verifyOtp({type:"email_change",email:e.email,token:C.token,messageId:b.verification_id})]:[3,3];case 1:return j.sent(),[4,this.updateUserBasicInfo({email:e.email})];case 2:return j.sent(),[3,9];case 3:return C.phone&&e.phone===C.phone?[4,this.verifyOtp({type:"phone_change",phone:e.phone,token:C.token,messageId:b.verification_id})]:[3,6];case 4:return j.sent(),[4,this.updateUserBasicInfo({phone:this.formatPhone(e.phone)})];case 5:return j.sent(),[3,9];case 6:return[4,this.verifyOtp({type:m,email:f?e.email:void 0,phone:f?void 0:e.phone,token:C.token,messageId:b.verification_id})];case 7:return j.sent(),[4,this.updateUserBasicInfo(e)];case 8:j.sent(),j.label=9;case 9:return[4,this.getUser()];case 10:return I=j.sent().data.user,(D=this.config.eventBus)===null||D===void 0||D.fire(bn.AUTH_STATE_CHANGED,{event:zo.USER_UPDATED}),[2,{data:{user:I},error:null}];case 11:return P=j.sent(),[2,{data:{},error:new rt(P)}];case 12:return[2]}})})}},[3,6];case 4:return[4,this.updateUserBasicInfo(e)];case 5:O.sent(),O.label=6;case 6:return[4,this.getUser()];case 7:return S=O.sent().data.user,(r=this.config.eventBus)===null||r===void 0||r.fire(bn.AUTH_STATE_CHANGED,{event:zo.USER_UPDATED}),[2,{data:Qe({user:S},l),error:null}];case 8:return E=O.sent(),[2,{data:{},error:new rt(E)}];case 9:return[2]}})})},t.prototype.getUserIdentities=function(){var e;return me(this,void 0,void 0,function(){var r,n;return ve(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.oauthInstance.authApi.getProviders()];case 1:return r=i.sent(),[2,{data:{identities:(e=r?.data)===null||e===void 0?void 0:e.filter(function(o){return!!o.bind})},error:null}];case 2:return n=i.sent(),[2,{data:{},error:new rt(n)}];case 3:return[2]}})})},t.prototype.linkIdentity=function(e){return me(this,void 0,void 0,function(){var r;return ve(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.validateParams(e,{provider:{required:!0,message:"Provider is required"}}),[4,this.signInWithOAuth({provider:e.provider,options:{type:hs.BIND_IDENTITY}})];case 1:return n.sent(),[2,{data:{provider:e.provider},error:null}];case 2:return r=n.sent(),[2,{data:{},error:new rt(r)}];case 3:return[2]}})})},t.prototype.unlinkIdentity=function(e){return me(this,void 0,void 0,function(){var r;return ve(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.validateParams(e,{provider:{required:!0,message:"Provider is required"}}),[4,this.oauthInstance.authApi.unbindProvider({provider_id:e.provider})];case 1:return n.sent(),[2,{data:{},error:null}];case 2:return r=n.sent(),[2,{data:{},error:new rt(r)}];case 3:return[2]}})})},t.prototype.reauthenticate=function(){return me(this,void 0,void 0,function(){var e,r,n,i,o=this;return ve(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),[4,this.getUser()];case 1:return e=u.sent().data.user,this.validateAtLeastOne(e,[["email","phone"]],"You must provide either an email or phone number"),r=e.email?{email:e.email}:{phone_number:this.formatPhone(e.phone)},[4,this.getVerification(r)];case 2:return n=u.sent(),[2,{data:{updateUser:function(f){return me(o,void 0,void 0,function(){var p,l,d,m,y,b;return ve(this,function(w){switch(w.label){case 0:this.validateParams(f,{nonce:{required:!0,message:"Nonce is required"}}),w.label=1;case 1:return w.trys.push([1,9,,10]),f.password?[4,this.verify({verification_id:n.verification_id,verification_code:f.nonce})]:[3,5];case 2:return p=w.sent(),[4,this.oauthInstance.authApi.sudo({verification_token:p.verification_token})];case 3:return l=w.sent(),[4,this.oauthInstance.authApi.setPassword({new_password:f.password,sudo_token:l.sudo_token})];case 4:return w.sent(),[3,7];case 5:return[4,this.signInWithUsername(Qe(Qe({verificationInfo:n,verificationCode:f.nonce},r),{loginType:r.email?"email":"phone"}))];case 6:w.sent(),w.label=7;case 7:return[4,this.getSession()];case 8:return d=w.sent().data,m=d===void 0?{}:d,y=m.session,[2,{data:{user:y.user,session:y},error:null}];case 9:return b=w.sent(),[2,{data:{},error:new rt(b)}];case 10:return[2]}})})}},error:null}];case 3:return i=u.sent(),[2,{data:{},error:new rt(i)}];case 4:return[2]}})})},t.prototype.resend=function(e){return me(this,void 0,void 0,function(){var r,n,i,o;return ve(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),this.validateAtLeastOne(e,[["email"],["phone"]],"You must provide either an email or phone number"),r=e.type==="signup"?"ANY":"USER",n={target:r},"email"in e&&(n.email=e.email),"phone"in e&&(n.phone_number=this.formatPhone(e.phone)),[4,this.oauthInstance.authApi.getVerification(n)];case 1:return i=u.sent().verification_id,[2,{data:{messageId:i},error:null}];case 2:return o=u.sent(),[2,{data:{},error:new rt(o)}];case 3:return[2]}})})},t.prototype.setSession=function(e){var r;return me(this,void 0,void 0,function(){var n,i,o,u;return ve(this,function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),this.validateParams(e,{access_token:{required:!0,message:"Access token is required"},refresh_token:{required:!0,message:"Refresh token is required"}}),[4,this.oauthInstance.oauth2client.refreshToken(e,{throwError:!0})];case 1:return f.sent(),[4,this.getSession()];case 2:return n=f.sent().data,i=n===void 0?{}:n,o=i.session,(r=this.config.eventBus)===null||r===void 0||r.fire(bn.AUTH_STATE_CHANGED,{event:zo.SIGNED_IN}),[2,{data:{user:o.user,session:o},error:null}];case 3:return u=f.sent(),[2,{data:{},error:new rt(u)}];case 4:return[2]}})})},t.prototype.exchangeCodeForSession=function(){return me(this,void 0,void 0,function(){return ve(this,function(e){return[2]})})},t.prototype.deleteUser=function(e){return me(this,void 0,void 0,function(){var r,n;return ve(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),this.validateParams(e,{password:{required:!0,message:"Password is required"}}),[4,this.oauthInstance.authApi.sudo(e)];case 1:return r=i.sent().sudo_token,[4,this.oauthInstance.authApi.deleteMe({sudo_token:r})];case 2:return i.sent(),[2,{data:{},error:null}];case 3:return n=i.sent(),[2,{data:{},error:new rt(n)}];case 4:return[2]}})})},t.prototype.toDefaultLoginPage=function(e){return e===void 0&&(e={}),me(this,void 0,void 0,function(){var r,n,i,o,u;return ve(this,function(f){try{return r=e.config_version||"env",n=Object.keys(e.query||{}).map(function(p){return"".concat(p,"=").concat(e.query[p])}).join("&"),ba.isMatch()?wx.navigateTo({url:"/packages/$wd_system/pages/login/index".concat(n?"?".concat(n):"")}):(i=e.redirect_uri||window.location.href,o=new URL(i),u="".concat(o.origin,"/__auth/?app_id=").concat(e.app_id||"","&env_id=").concat(this.config.env,"&client_id=").concat(this.config.clientId||this.config.env,"&config_version=").concat(r,"&redirect_uri=").concat(encodeURIComponent(i)).concat(n?"&".concat(n):""),window.location.href=u),[2,{data:{},error:null}]}catch(p){return[2,{data:{},error:new rt(p)}]}return[2]})})},t.prototype.signInWithCustomTicket=function(e){return me(this,void 0,void 0,function(){var r,n,i,o,u;return ve(this,function(f){switch(f.label){case 0:e&&this.setCustomSignFunc(e),f.label=1;case 1:return f.trys.push([1,5,,6]),[4,this.oauthInstance.authApi.signInWithCustomTicket()];case 2:return f.sent(),[4,this.createLoginState()];case 3:return r=f.sent(),[4,this.getSession()];case 4:return n=f.sent().data,i=n===void 0?{}:n,o=i.session,[2,Qe(Qe({},r),{data:{user:o.user,session:o},error:null})];case 5:return u=f.sent(),[2,{data:{},error:new rt(u)}];case 6:return[2]}})})},t.prototype.signInWithOpenId=function(e){var r=e===void 0?{}:e,n=r.useWxCloud,i=n===void 0?!0:n;return me(this,void 0,void 0,function(){var o,u,f,p,l,d,m,y=this;return ve(this,function(b){switch(b.label){case 0:if(!ba.isMatch())throw Error("wx api undefined");o=wx.getAccountInfoSync().miniProgram,u=function(w){return me(y,void 0,void 0,function(){var S,E,R;return ve(this,function(O){switch(O.label){case 0:S=void 0,E=void 0,O.label=1;case 1:return O.trys.push([1,4,,5]),[4,this.oauthInstance.authApi.grantProviderToken({provider_id:o?.appId,provider_code:w,provider_params:{provider_code_type:"open_id",appid:o?.appId}},i)];case 2:if(S=O.sent(),S?.error_code||!S.provider_token)throw S;return[4,this.oauthInstance.authApi.signInWithProvider({provider_token:S.provider_token},i)];case 3:if(E=O.sent(),E?.error_code)throw E;return[3,5];case 4:throw R=O.sent(),R;case 5:return[4,this.oauthInstance.oauth2client.setCredentials(E)];case 6:return O.sent(),[2]}})})},b.label=1;case 1:return b.trys.push([1,5,,6]),[4,new Promise(function(w,S){wx.login({success:function(E){return me(y,void 0,void 0,function(){var R;return ve(this,function(O){switch(O.label){case 0:return O.trys.push([0,2,,3]),[4,u(E.code)];case 1:return O.sent(),w(!0),[3,3];case 2:return R=O.sent(),S(R),[3,3];case 3:return[2]}})})},fail:function(E){var R=new Error(E?.errMsg);R.code=E?.errno,S(R)}})})];case 2:return b.sent(),[4,this.createLoginState()];case 3:return f=b.sent(),[4,this.getSession()];case 4:return p=b.sent().data,l=p===void 0?{}:p,d=l.session,[2,Qe(Qe({},f),{data:{user:d.user,session:d},error:null})];case 5:return m=b.sent(),[2,{data:{},error:new rt(m)}];case 6:return[2]}})})},t.prototype.signInWithPhoneAuth=function(e){var r=e.phoneCode,n=r===void 0?"":r;return me(this,void 0,void 0,function(){var i,o,u,f,p,l,d,m,y,b;return ve(this,function(w){switch(w.label){case 0:return ba.isMatch()?(i=wx.getAccountInfoSync().miniProgram,o={provider_params:{provider_code_type:"phone"},provider_id:i.appId},[4,wx.login()]):[2,{data:{},error:new rt({message:"wx api undefined"})}];case 1:u=w.sent().code,o.provider_code=u,w.label=2;case 2:return w.trys.push([2,6,,7]),[4,this.oauthInstance.authApi.grantProviderToken(o)];case 3:if(f=w.sent(),f.error_code)throw f;return[4,this.oauthInstance.authApi.patchProviderToken({provider_token:f.provider_token,provider_id:i.appId,provider_params:{code:n,provider_code_type:"phone"}})];case 4:if(f=w.sent(),f.error_code)throw f;return[4,this.oauthInstance.authApi.signInWithProvider({provider_token:f.provider_token})];case 5:if(p=w.sent(),p?.error_code)throw p;return[3,7];case 6:return l=w.sent(),[2,{data:{},error:new rt(l)}];case 7:return[4,this.createLoginState()];case 8:return d=w.sent(),[4,this.getSession()];case 9:return m=w.sent().data,y=m===void 0?{}:m,b=y.session,[2,Qe(Qe({},d),{data:{user:b.user,session:b},error:null})]}})})},t.prototype.formatPhone=function(e){return!/\s+/.test(e)&&/^\+\d{1,3}\d+/.test(e)?e.replace(/^(\+\d{1,2})(\d+)$/,"$1 $2"):/^\+\d{1,3}\s+/.test(e)?e:"+86 ".concat(e)},t.prototype.notifyListeners=function(e,r,n){this.listeners.forEach(function(i){i.forEach(function(o){try{o(e,r,n)}catch(u){console.error("Error in auth state change callback:",u)}})})},t.prototype.setupListeners=function(){var e=this,r;(r=this.config.eventBus)===null||r===void 0||r.on(bn.AUTH_STATE_CHANGED,function(n){return me(e,void 0,void 0,function(){var i,o,u,f,p;return ve(this,function(l){switch(l.label){case 0:return i=(f=n?.data)===null||f===void 0?void 0:f.event,o=(p=n?.data)===null||p===void 0?void 0:p.info,[4,this.getSession()];case 1:return u=l.sent().data.session,this.notifyListeners(i,u,o),[2]}})})})},t.prototype.convertToUser=function(e){var r,n,i,o,u;if(!e)return null;var f=e?.email||"",p=e?.phone_number||"",l=e?.sub||e?.uid||"";return{id:l,aud:"authenticated",role:(n=(r=e.groups)===null||r===void 0?void 0:r.map)===null||n===void 0?void 0:n.call(r,function(d){return typeof d=="string"?d:d.id}),email:f||"",email_confirmed_at:(e?.email_verified,e.created_at),phone:p,phone_confirmed_at:p?e.created_at:void 0,confirmed_at:e.created_at,last_sign_in_at:e.last_sign_in_at,app_metadata:{provider:((i=e.loginType)===null||i===void 0?void 0:i.toLowerCase())||"cloudbase",providers:[((o=e.loginType)===null||o===void 0?void 0:o.toLowerCase())||"cloudbase"]},user_metadata:{name:e?.name,picture:e?.picture,username:e?.username,gender:e?.gender,locale:e?.locale,uid:e.uid,nickName:e.nickName||e?.name,avatarUrl:e.avatarUrl||e.picture,location:e.location,hasPassword:e.hasPassword},identities:((u=e?.providers)===null||u===void 0?void 0:u.map(function(d){return{id:d.id||"",identity_id:d.id||"",user_id:l,identity_data:{provider_id:d.id,provider_user_id:d.provider_user_id,name:d.name},provider:d.id||"cloudbase",created_at:e.created_at,updated_at:e.updated_at,last_sign_in_at:e.last_sign_in_at}}))||[],created_at:e.created_at,updated_at:e.updated_at,is_anonymous:e.name==="anonymous"}},t.prototype.validateParams=function(e,r){for(var n=0,i=Object.entries(r);n<i.length;n++){var o=i[n],u=o[0],f=o[1];if(f.required&&(e?.[u]===void 0||e?.[u]===null||e?.[u]===""))throw new rt({message:f.message})}},t.prototype.validateAtLeastOne=function(e,r,n){var i=r.some(function(o){return o.some(function(u){return e?.[u]!==void 0&&e?.[u]!==null&&e?.[u]!==""})});if(!i)throw new rt({message:n})},t.prototype.init=function(){var e;return me(this,void 0,void 0,function(){var r;return ve(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.oauthInstance.oauth2client.localCredentials.getCredentials()];case 1:return r=n.sent(),r&&((e=this.config.eventBus)===null||e===void 0||e.fire(bn.AUTH_STATE_CHANGED,{event:zo.INITIAL_SESSION})),[3,3];case 2:return n.sent(),[3,3];case 3:return[2,{error:null}]}})})},gr([yr.catchErrorsDecorator({title:"",messages:["","  1 -  auth().bindPhoneNumber() ","  2 - ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[Object]),De("design:returntype",Promise)],t.prototype,"bindPhoneNumber",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 -  auth().unbindProvider() ","  2 - ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[Object]),De("design:returntype",Promise)],t.prototype,"unbindProvider",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 -  auth().bindEmail() ","  2 - ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[Object]),De("design:returntype",void 0)],t.prototype,"bindEmail",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 -  auth().verify() ","  2 - /","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[Object]),De("design:returntype",Promise)],t.prototype,"verify",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 -  auth().getVerification() ","  2 - /","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[Object,Object]),De("design:returntype",Promise)],t.prototype,"getVerification",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 -  auth().getCurrentUser() ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[]),De("design:returntype",Promise)],t.prototype,"getCurrentUser",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 - ","  2 -  auth().signInAnonymouslyInWx() ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[Object]),De("design:returntype",Promise)],t.prototype,"signInAnonymouslyInWx",null),gr([yr.catchErrorsDecorator({title:"OpenID",messages:["","  1 - openId","  2 -  auth().bindOpenId() ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[]),De("design:returntype",Promise)],t.prototype,"bindOpenId",null),gr([yr.catchErrorsDecorator({title:"unionId",messages:["","  1 - unionId","  2 -  auth().signInWithUnionId() ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[]),De("design:returntype",Promise)],t.prototype,"signInWithUnionId",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 - ","  2 -  auth().signInWithSms() ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[Object]),De("design:returntype",Promise)],t.prototype,"signInWithSms",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 - ","  2 -  auth().signInWithEmail() ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[Object]),De("design:returntype",Promise)],t.prototype,"signInWithEmail",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 -  auth().isUsernameRegistered() ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[String]),De("design:returntype",Promise)],t.prototype,"isUsernameRegistered",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 -  auth().getLoginState() ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[]),De("design:returntype",Promise)],t.prototype,"getLoginState",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 - ","  2 -  auth().getUserInfo() ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[]),De("design:returntype",Promise)],t.prototype,"getUserInfo",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 - ","  2 -  auth().getWedaUserInfo() ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[]),De("design:returntype",Promise)],t.prototype,"getWedaUserInfo",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 -  auth().bindWithProvider() ","  2 - ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[Object]),De("design:returntype",Promise)],t.prototype,"bindWithProvider",null),gr([yr.catchErrorsDecorator({title:"",messages:["","  1 -  auth().getProviderSubType() ","".concat(Vt.COMMUNITY_SITE_URL)]}),De("design:type",Function),De("design:paramtypes",[]),De("design:returntype",Promise)],t.prototype,"getProviderSubType",null),t})();function az(t,e){var r=this,n=t.region,i=n===void 0?"ap-shanghai":n,o=t.i18n,u=t.accessKey,f=t.useWxCloud,p=e?.platform||H9.useDefaultAdapter.bind(e)(),l=p.runtime,d=p.adapter,m=e||{},y=m.env,b=m.clientId,w=m.debug,S=m.cache,E=m.app,R=(e||{}).apiOrigin;R||(R="https://".concat(y,".").concat(i,".tcb-api.tencentcloudapi.com"));var O={env:y,clientId:b,i18n:o,accessKey:u,useWxCloud:f,eventBus:new nj.CloudbaseEventEmitter},C=new L9(Q9(Qe(Qe({},O),{apiOrigin:R,apiPath:t?.apiPath||xg,storage:t?.storage,baseRequest:t?.baseRequest,request:t?.request,anonymousSignInFunc:t?.anonymousSignInFunc,captchaOptions:t?.captchaOptions,wxCloud:t?.wxCloud,adapter:d,onCredentialsError:nz(O.eventBus),headers:Qe({"X-SDK-Version":"@cloudbase/js-sdk/".concat(t.sdkVersion)},t.headers||{}),detectSessionInUrl:t.detectSessionInUrl,debug:w}))),I=new oz(Qe(Qe({},O),{region:i,persistence:t.persistence,debug:w,cache:S||new z9.CloudbaseCache({persistence:t.persistence,keys:{userInfoKey:"user_info_".concat(y)},platformInfo:p}),runtime:l||"web",_fromApp:E,oauthInstance:C}));return C.initializeSession(function(P,D){return me(r,void 0,void 0,function(){return ve(this,function(j){return P?(P.type===hs.SIGN_IN?D?O.eventBus.fire(bn.AUTH_STATE_CHANGED,{event:zo.SIGNED_IN,info:Qe(Qe({},P),{error:D})}):P.user&&I.createLoginState({},{userInfo:P.user}):P.type===hs.BIND_IDENTITY&&O.eventBus.fire(bn.AUTH_STATE_CHANGED,{event:zo.BIND_IDENTITY,info:Qe(Qe({},P),{error:D})}),[2]):[2]})})}),{authInstance:I,oauthInstance:C}}var oI="auth",lj={name:rz,namespace:oI,entity:function(t){var e=function(n){var i;if(this.authInstance&&!n)return this.authInstance;n=n||{region:"",persistence:"local",apiPath:xg};var o=this.platform.adapter,u=n.persistence||o.primaryStorage;u&&u!==this.config.persistence&&this.updateConfig({persistence:u});var f=az(Qe(Qe({wxCloud:this.config.wxCloud,storage:this.config.storage},n),{persistence:this.config.persistence,i18n:this.config.i18n,accessKey:this.config.accessKey,useWxCloud:this.config.useWxCloud,sdkVersion:this.version,detectSessionInUrl:(i=this.config.auth)===null||i===void 0?void 0:i.detectSessionInUrl}),{env:this.config.env,clientId:this.config.clientId,apiOrigin:this.request.getBaseEndPoint(this.config.endPointMode||"CLOUD_API"),platform:this.platform,cache:this.cache,app:this,debug:this.config.debug}),p=f.authInstance,l=f.oauthInstance;return this.oauthInstance=l,this.authInstance=p,this.authInstance},r=e.call(this,t);return Object.assign(e,r),Object.setPrototypeOf(e,Object.getPrototypeOf(r)),this[oI]=e,e}};try{cloudbase.registerComponent(lj)}catch{}function sz(t){try{t.registerComponent(lj)}catch(e){console.warn(e)}}var ad=function(){return ad=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ad.apply(this,arguments)},cj=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},fj=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},aI=Bn,SE="cloudrun",uz=(function(){function t(){}return t.prototype.callContainer=function(e,r){return cj(this,void 0,void 0,function(){var n,i,o;return fj(this,function(u){switch(u.label){case 0:if(n=e.name,i=e.data,!n)throw new Error(JSON.stringify({code:aI.INVALID_PARAMS,msg:"[".concat(SE,".callContainer] invalid name")}));try{o=i?JSON.stringify(i):""}catch{throw new Error(JSON.stringify({code:aI.INVALID_PARAMS,msg:"[".concat(SE,".callContainer] invalid data")}))}return[4,dj.call(this,ad(ad({},e),{data:o}),r)];case 1:return[2,u.sent()]}})})},t})();function dj(t,e){var r;return cj(this,void 0,void 0,function(){var n,i,o,u,f,p,l,d,m,y,b,w,S,E,R;return fj(this,function(O){switch(O.label){case 0:if(n=t.name,i=t.data,o=t.path,u=o===void 0?"":o,f=t.method,p=t.header,l=p===void 0?{}:p,d=this.getEndPointWithKey("GATEWAY"),m=d.BASE_URL,y=d.PROTOCOL,b="".concat(y).concat(m,"/cloudrun/").concat(n),w=u.startsWith("/")?u:"/".concat(u),S=["GET","HEAD"].includes((r=f?.toUpperCase)===null||r===void 0?void 0:r.call(f)),S)try{E={};try{E=JSON.parse(i)}catch{E=i||{}}w="".concat(w).concat(w.includes("?")?"&":"?").concat(Object.keys(E).map(function(C){return"".concat(C,"=").concat(E[C])}).join("&"))}catch{}return[4,this.request.fetch(ad(ad({method:f||"POST",headers:Object.assign({},{"Content-Type":"application/json; charset=utf-8"},l)},S?{}:{body:i}),{url:"".concat(b).concat(w),customReqOpts:e}))];case 1:return R=O.sent(),e?.from==="node-sdk"?[2,R]:[4,R.data];case 2:return[2,O.sent()]}})})}var lz=new uz,hj={name:SE,entity:{callContainer:lz.callContainer}};try{cloudbase.registerComponent(hj)}catch{}function pj(t){try{t.registerComponent(hj)}catch(e){console.warn(e)}}try{window.registerCloudrun=pj}catch{}var ql=function(){return ql=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ql.apply(this,arguments)},cz=function(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var f=t.length-1;f>=0;f--)(u=t[f])&&(o=(i<3?u(o):i>3?u(e,r,o):u(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o},A_=function(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)},fz=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},dz=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},hz=wg,O_=Bn,pz=Sg,qh=MD,mz=Ag,yy="functions",vz=(function(){function t(){}return t.prototype.callFunction=function(e,r,n){var i,o,u;return fz(this,void 0,void 0,function(){var f,p,l,d,m,y,b,w,S,E,R,O,C,$,I,P,D,j,q,U,Y,$,L;return dz(this,function(H){switch(H.label){case 0:if(f=e.name,p=e.data,l=e.query,d=e.parse,m=e.search,y=e.type,b=e.path,w=b===void 0?"":b,S=e.method,E=e.header,R=E===void 0?{}:E,!f)throw new Error(JSON.stringify({code:O_.INVALID_PARAMS,msg:"[".concat(yy,".callFunction] invalid function name")}));try{O=p?JSON.stringify(p):""}catch{throw new Error(JSON.stringify({code:O_.INVALID_PARAMS,msg:"[".concat(yy,".callFunction] invalid data")}))}return y!=="cloudrun"?[3,2]:(C=LD(),[4,dj.call(this,{name:f,data:O,path:w,method:S,header:ql(ql({},R),{"X-Request-Id":C})})]);case 1:return $=H.sent(),[2,{result:$,requestId:C}];case 2:I=this,P=I.request,D=I.config,j="functions.invokeFunction",q={inQuery:l,parse:d,search:m,function_name:f,request_data:O},U={},H.label=3;case 3:return H.trys.push([3,8,,9]),D.endPointMode!=="GATEWAY"?[3,5]:[4,P.gateWay(ql(ql({},e),{path:"functions"}),n)];case 4:return Y=H.sent(),U=ql({requestId:Y.requestId},!((i=Y.data)===null||i===void 0)&&i.code?Y.data:{data:{response_data:Y.data}}),[3,7];case 5:return[4,P.send(j,q,{defaultQuery:!((o=p?.params)===null||o===void 0)&&o.action?{action:(u=p?.params)===null||u===void 0?void 0:u.action}:{}},n)];case 6:U=H.sent(),H.label=7;case 7:if(U.code)return[2,qh(r,null,U)];if($=U.data.response_data,d||D.endPointMode==="GATEWAY")return[2,qh(r,null,{result:$,requestId:U.requestId})];try{return $=JSON.parse(U.data.response_data),[2,qh(r,null,{result:$,requestId:U.requestId})]}catch{qh(r,new Error("[".concat(hz(),"][").concat(O_.INVALID_PARAMS,"][").concat(yy,".callFunction] response data must be json")))}return[3,9];case 8:return L=H.sent(),qh(r,L),[3,9];case 9:return[2]}})})},cz([mz({customInfo:{},title:"",messages:["","  1 -  callFunction() ","  2 - ","  3 - ","".concat(pz)]}),A_("design:type",Function),A_("design:paramtypes",[Object,Function,Object]),A_("design:returntype",Promise)],t.prototype,"callFunction",null),t})(),yz=new vz,mj={name:yy,entity:{callFunction:yz.callFunction}};try{cloudbase.registerComponent(mj)}catch{}function gz(t){try{t.registerComponent(mj)}catch(e){console.warn(e)}}var Ir=function(){return Ir=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ir.apply(this,arguments)},ff=function(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var f=t.length-1;f>=0;f--)(u=t[f])&&(o=(i<3?u(o):i>3?u(e,r,o):u(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o},Wr=function(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)},uo=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},lo=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Mo;(function(t){t.put="put",t.post="post"})(Mo||(Mo={}));var bz=wg,Ji=Bn,df=Sg,R_=qD,Dh=DD,_z=M8,Xi=MD,hf=Ag,jn="storage",Iv={getUploadInfo:function(t,e,r){return uo(void 0,void 0,void 0,function(){var n,i,o;return lo(this,function(u){switch(u.label){case 0:return[4,t.gateWay({path:"storages",name:"get-objects-upload-info",data:[Ir({objectId:e.path},e.headers?{signedHeader:e.headers}:{})]},r)];case 1:return n=u.sent(),i=((o=n.data)===null||o===void 0?void 0:o[0])||{},n=Ir(Ir({},n),{data:Ir(Ir({},i.code?Ir({},i):{}),{authorization:i.authorization,token:i.token,url:i.uploadUrl,fileId:i.cloudObjectId,cosFileId:i.cloudObjectMeta,download_url:i.downloadUrl})}),[2,n]}})})},getDownLoadInfo:function(t,e,r){return uo(void 0,void 0,void 0,function(){var n,i;return lo(this,function(o){switch(o.label){case 0:return[4,t.gateWay({path:"storages",name:"get-objects-download-info",data:e.convertedFileList.map(function(u){return{cloudObjectId:u.fileid}})},r)];case 1:return n=o.sent(),n=Ir(Ir({},n),{data:{download_list:(i=n.data)===null||i===void 0?void 0:i.map(function(u){return{code:u.code||"SUCCESS",message:u.message,fileid:u.cloudObjectId,download_url:u.downloadUrl,fileID:u.cloudObjectId,tempFileURL:u.downloadUrl}})}}),[2,n]}})})},delete:function(t,e,r){return uo(void 0,void 0,void 0,function(){var n,i;return lo(this,function(o){switch(o.label){case 0:return[4,t.gateWay({path:"storages",name:"delete-objects",data:e.fileList.map(function(u){return{cloudObjectId:u}})},r)];case 1:return n=o.sent(),n=Ir(Ir({},n),{data:{delete_list:(i=n.data)===null||i===void 0?void 0:i.map(function(u){return{code:u.code||"SUCCESS",fileID:u.cloudObjectId,message:u.message}})}}),[2,n]}})})},copyFile:function(t,e,r){return uo(void 0,void 0,void 0,function(){var n,i;return lo(this,function(o){switch(o.label){case 0:return[4,t.gateWay({path:"storages",name:"copy-objects",data:e.convertedFileList.map(function(u){return{srcPath:u.src_path,dstPath:u.dst_path,overwrite:u.overwrite,removeOriginal:u.remove_original}})},r)];case 1:return n=o.sent(),n=Ir(Ir({},n),{data:{copy_list:(i=n.data)===null||i===void 0?void 0:i.map(function(u){return{code:u.code||"SUCCESS",fileID:u.cloudObjectId,message:u.message}})}}),[2,n]}})})}},vj=(function(){function t(){}return t.prototype.isGateWay=function(){var e=this.config,r=e.endPointMode||"CLOUD_API";return r==="GATEWAY"},t.prototype.uploadFile=function(e,r){return uo(this,void 0,void 0,function(){var n,i,o,u,f,p,l,d,m,y,b,w,S,E,R,O,C,I,P,D,j,q,U,Y;return lo(this,function($){switch($.label){case 0:if(n=e.cloudPath,i=e.filePath,o=e.onUploadProgress,u=(q=e.method,q===void 0?"put":q),f=(U=e.headers,U===void 0?{}:U),p=e.fileContent,!Dh(n)||!i&&!p)throw new Error(JSON.stringify({code:Ji.INVALID_PARAMS,msg:"[".concat(jn,".uploadFile] invalid params")}));return l={put:Mo.put,post:Mo.post}[u.toLocaleLowerCase()]||Mo.put,[4,this.getUploadMetadata({cloudPath:n,method:l,headers:l===Mo.put?f:void 0,customReqOpts:e.customReqOpts})];case 1:return d=$.sent(),m=d.data,y=d.requestId,b=m.url,w=m.authorization,S=m.token,E=m.fileId,R=m.cosFileId,O=m.download_url,C={url:b,file:i,name:n,onUploadProgress:o,fileContent:p,fileId:E,requestId:y},I=Ir(Ir({},C),{method:Mo.put,headers:Ir(Ir({},f),{authorization:w,"x-cos-meta-fileid":R,"x-cos-security-token":S})}),P=Ir(Ir({},C),{method:Mo.post,data:{key:n,signature:w,"x-cos-meta-fileid":R,success_action_status:"201","x-cos-security-token":S}}),D=(Y={},Y[Mo.put]={params:I,isSuccess:function(L){return L>=200&&L<300}},Y[Mo.post]={params:P,isSuccess:function(L){return L===201}},Y),[4,this.request.upload(D[l].params)];case 2:return j=$.sent(),D[l].isSuccess(j.statusCode)?[2,Xi(r,null,{fileID:E,download_url:O,requestId:y})]:[2,Xi(r,new Error("[".concat(bz(),"][").concat(Ji.OPERATION_FAIL,"][").concat(jn,"]:").concat(j.data)))]}})})},t.prototype.getUploadMetadata=function(e,r){return uo(this,void 0,void 0,function(){var n,i,o,u,f,p,l,d;return lo(this,function(m){switch(m.label){case 0:if(n=e.cloudPath,i=e.method,o=e.headers,!Dh(n))throw new Error(JSON.stringify({code:Ji.INVALID_PARAMS,msg:"[".concat(jn,".getUploadMetadata] invalid cloudPath")}));u=this.request,f="storage.getUploadMetadata",m.label=1;case 1:return m.trys.push([1,6,,7]),p=void 0,l={path:n},i&&(l.method=i),i===Mo.put&&o&&(l.headers=o),this.isGateWay()?[4,Iv.getUploadInfo(u,l,e.customReqOpts)]:[3,3];case 2:return p=m.sent(),[3,5];case 3:return[4,u.send(f,l,e.customReqOpts)];case 4:p=m.sent(),m.label=5;case 5:return[2,Xi(r,null,p)];case 6:return d=m.sent(),[2,Xi(r,d)];case 7:return[2]}})})},t.prototype.deleteFile=function(e,r){return uo(this,void 0,void 0,function(){var n,i,o,u,f,p,l,d;return lo(this,function(m){switch(m.label){case 0:if(n=e.fileList,!n||!R_(n)||n.length===0)throw new Error(JSON.stringify({code:Ji.INVALID_PARAMS,msg:"[".concat(jn,".deleteFile] fileList must not be empty")}));for(i=0,o=n;i<o.length;i++)if(u=o[i],!u||!Dh(u))throw new Error(JSON.stringify({code:Ji.INVALID_PARAMS,msg:"[".concat(jn,".deleteFile] fileID must be string")}));return f="storage.batchDeleteFile",p=this.request,l={},this.isGateWay()?[4,Iv.delete(p,{fileList:n},e.customReqOpts)]:[3,2];case 1:return l=m.sent(),[3,4];case 2:return[4,p.send(f,{fileid_list:n},e.customReqOpts)];case 3:l=m.sent(),m.label=4;case 4:return l.code?[2,Xi(r,null,l)]:(d={fileList:l.data.delete_list,requestId:l.requestId},[2,Xi(r,null,d)])}})})},t.prototype.getTempFileURL=function(e,r){return uo(this,void 0,void 0,function(){var n,i,o,u,f,p,l,d;return lo(this,function(m){switch(m.label){case 0:if(n=e.fileList,!n||!R_(n)||n.length===0)throw new Error(JSON.stringify({code:Ji.INVALID_PARAMS,msg:"[".concat(jn,".getTempFileURL] fileList must not be empty")}));for(i=[],o=0,u=n;o<u.length;o++)if(f=u[o],_z(f)){if(!Object.prototype.hasOwnProperty.call(f,"fileID"))throw new Error(JSON.stringify({code:Ji.INVALID_PARAMS,msg:"[".concat(jn,".getTempFileURL] file info must include fileID")}));i.push({fileid:f.fileID,max_age:f.maxAge||7200})}else if(Dh(f))i.push({fileid:f});else throw new Error(JSON.stringify({code:Ji.INVALID_PARAMS,msg:"[".concat(jn,".getTempFileURL] invalid fileList")}));return p="storage.batchGetDownloadUrl",l=this.request,d={},this.isGateWay()?[4,Iv.getDownLoadInfo(l,{convertedFileList:i},e.customReqOpts)]:[3,2];case 1:return d=m.sent(),[3,4];case 2:return[4,l.send(p,{file_list:i},e.customReqOpts)];case 3:d=m.sent(),m.label=4;case 4:return d.code?[2,Xi(r,null,d)]:[2,Xi(r,null,{fileList:d.data.download_list,requestId:d.requestId})]}})})},t.prototype.downloadFile=function(e,r){return uo(this,void 0,void 0,function(){var n,i,o,u,f,p;return lo(this,function(l){switch(l.label){case 0:if(n=e.fileID,!Dh(n))throw new Error(JSON.stringify({code:Ji.INVALID_PARAMS,msg:"[".concat(jn,".getTempFileURL] fileID must be string")}));return[4,this.getTempFileURL.call(this,{fileList:[{fileID:n,maxAge:600}],customReqOpts:e.customReqOpts})];case 1:return i=l.sent(),o=i.fileList[0],o.code!=="SUCCESS"?[2,Xi(r,o)]:(u=this.request,f=encodeURI(o.download_url),[4,u.download({url:f,tempFilePath:e.tempFilePath})]);case 2:return p=l.sent(),[2,Xi(r,null,p)]}})})},t.prototype.copyFile=function(e,r){return uo(this,void 0,void 0,function(){var n,i,o,u,f,p,l,d,m,y;return lo(this,function(b){switch(b.label){case 0:if(n=e.fileList,!n||!R_(n)||n.length===0)throw new Error(JSON.stringify({code:Ji.INVALID_PARAMS,msg:"[".concat(jn,".copyFile] fileList must not be empty")}));for(i=[],o=0,u=n;o<u.length;o++){if(f=u[o],p=f.srcPath,l=f.dstPath,!p||!l||typeof p!="string"||typeof l!="string")throw new Error(JSON.stringify({code:Ji.INVALID_PARAMS,msg:"[".concat(jn,".copyFile] srcPath and dstPath may not be empty")}));if(p===l)throw new Error(JSON.stringify({code:Ji.INVALID_PARAMS,msg:"[".concat(jn,".copyFile] srcPath and dstPath can not be the same")}));i.push({src_path:p,dst_path:l,overwrite:f.overwrite,remove_original:f.removeOriginal})}return d=this.request,m={},this.isGateWay()?[4,Iv.copyFile(d,{convertedFileList:i},e.customReqOpts)]:[3,2];case 1:return m=b.sent(),[3,4];case 2:return y="storage.batchCopyFile",[4,d.send(y,{file_list:i},e.customReqOpts)];case 3:m=b.sent(),b.label=4;case 4:return m.code?[2,Xi(r,null,m)]:[2,Xi(r,null,{fileList:m.data.copy_list,requestId:m.requestId})]}})})},t.prototype.getFileInfo=function(e){var r;return uo(this,void 0,void 0,function(){var n,i,o=this;return lo(this,function(u){switch(u.label){case 0:return[4,this.getTempFileURL(e)];case 1:return n=u.sent(),n?.fileList&&((r=n?.fileList)===null||r===void 0?void 0:r.length)>0?[4,Promise.all(n.fileList.map(function(f){return uo(o,void 0,void 0,function(){var p,l,d,m,y,b,w;return lo(this,function(S){switch(S.label){case 0:if(f.code!=="SUCCESS")return[2,{code:f.code,fileID:f.fileID,tempFileURL:f.tempFileURL,message:f.message}];S.label=1;case 1:return S.trys.push([1,3,,4]),p=this.request,[4,p.fetch({url:f.tempFileURL,method:"HEAD"})];case 2:return l=S.sent(),d=l.header,Headers&&d instanceof Headers&&(d=Object.fromEntries(l.header.entries())),m=parseInt(d["content-length"])||0,y=d["content-type"]||"",[400,404].includes(Number(l.statusCode))?[2,{code:"FILE_NOT_FOUND",fileID:f.fileID,tempFileURL:f.tempFileURL,message:"file not found"}]:(b={code:f.code,fileID:f.fileID,tempFileURL:f.tempFileURL,cloudId:f.fileID,fileName:f.fileID.split("/").pop(),contentType:y,mime:y.split(";")[0].trim(),size:m,etag:d.etag||"",lastModified:d["last-modified"]||"",cacheControl:d["cache-control"]||""},[2,b]);case 3:return w=S.sent(),[2,{code:"FETCH_FILE_INFO_ERROR",fileID:f.fileID,tempFileURL:f.tempFileURL,message:w.message}];case 4:return[2]}})})}))]:[3,3];case 2:return i=u.sent(),[2,{fileList:i,requestId:n.requestId}];case 3:return[2,{fileList:[],requestId:n.requestId}]}})})},ff([hf({customInfo:{},title:"",messages:["","  1 -  uploadFile() ","  2 - https://console.cloud.tencent.com/tcb/env/safety","  3 - ","".concat(df)]}),Wr("design:type",Function),Wr("design:paramtypes",[Object,Function]),Wr("design:returntype",Promise)],t.prototype,"uploadFile",null),ff([hf({customInfo:{},title:"",messages:["","  1 -  getUploadMetadata() ","  2 - https://console.cloud.tencent.com/tcb/env/safety","  3 - ","".concat(df)]}),Wr("design:type",Function),Wr("design:paramtypes",[Object,Function]),Wr("design:returntype",Promise)],t.prototype,"getUploadMetadata",null),ff([hf({customInfo:{},title:"",messages:["","  1 -  deleteFile() ","  2 - https://console.cloud.tencent.com/tcb/env/safety","  3 - ","".concat(df)]}),Wr("design:type",Function),Wr("design:paramtypes",[Object,Function]),Wr("design:returntype",Promise)],t.prototype,"deleteFile",null),ff([hf({customInfo:{},title:"",messages:["","  1 -  getTempFileURL() ","  2 - https://console.cloud.tencent.com/tcb/env/safety","  3 - ","".concat(df)]}),Wr("design:type",Function),Wr("design:paramtypes",[Object,Function]),Wr("design:returntype",Promise)],t.prototype,"getTempFileURL",null),ff([hf({customInfo:{},title:"",messages:["","  1 -  downloadFile() ","  2 - https://console.cloud.tencent.com/tcb/env/safety","  3 - ","".concat(df)]}),Wr("design:type",Function),Wr("design:paramtypes",[Object,Function]),Wr("design:returntype",Promise)],t.prototype,"downloadFile",null),ff([hf({customInfo:{},title:"",messages:["","  1 -  copyFile() ","  2 - https://console.cloud.tencent.com/tcb/env/safety","  3 - ","".concat(df)]}),Wr("design:type",Function),Wr("design:paramtypes",[Object,Function]),Wr("design:returntype",Promise)],t.prototype,"copyFile",null),t})(),x2=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Dn=(function(t){x2(e,t);function e(r){var n=t.call(this,r)||this;return n.__isStorageError=!0,n.name="StorageError",n}return e})(Error);function Sl(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}(function(t){x2(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.name="StorageApiError",o.status=n,o.statusCode=i,o}return e.prototype.toJSON=function(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}},e})(Dn);(function(t){x2(e,t);function e(r,n){var i=t.call(this,r)||this;return i.name="StorageUnknownError",i.originalError=n,i}return e})(Dn);var wz=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),vp=function(){return vp=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},vp.apply(this,arguments)},Pn=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},Un=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Sz=Bn,Ez=(function(t){wz(e,t);function e(r){var n=t.call(this)||this;return n.shouldThrowOnError=!1,n.bucketId="",n.context=r,n}return Object.defineProperty(e.prototype,"config",{get:function(){var r;return(r=this.context)===null||r===void 0?void 0:r.config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"request",{get:function(){var r;return(r=this.context)===null||r===void 0?void 0:r.request},enumerable:!1,configurable:!0}),e.prototype.throwOnError=function(){return this.shouldThrowOnError=!0,this},e.prototype.from=function(r){return this.bucketId=r||"",this},e.prototype.upload=function(r,n,i){return Pn(this,void 0,void 0,function(){var o,u,f,p,l,d,m,y,b;return Un(this,function(w){switch(w.label){case 0:o=vp({upsert:!0},i),u=o.cacheControl,f=o.contentType,p=o.metadata,w.label=1;case 1:return w.trys.push([1,3,,4]),l=this._getCloudPath(r),d={cloudPath:l,filePath:n},(u||f||p)&&(m={},u&&(m["cache-control"]=u),f&&(m["content-type"]=f),p&&(m["x-cos-metadata-metadata"]=this.toBase64(JSON.stringify(p))),d.headers=m),[4,this.uploadFile(d)];case 2:if(y=w.sent(),!y.fileID)throw new Error(JSON.stringify({code:Sz.OPERATION_FAIL,msg:"[".concat(jn,".update] no fileID returned")}));return[2,{data:{id:y.fileID,path:r,fullPath:r},error:null}];case 3:if(b=w.sent(),this.shouldThrowOnError)throw b;if(Sl(b))return[2,{data:null,error:b}];throw b;case 4:return[2]}})})},e.prototype.uploadToSignedUrl=function(r,n,i,o){return Pn(this,void 0,void 0,function(){return Un(this,function(u){return[2,this.upload(r,i,o)]})})},e.prototype.createSignedUploadUrl=function(r){return Pn(this,void 0,void 0,function(){var n,i,o;return Un(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),n=this._getCloudPath(r),[4,this.getUploadMetadata({cloudPath:n})];case 1:return i=u.sent().data,[2,{data:{signedUrl:i.url,token:i.token,path:r,authorization:i.authorization,id:i.fileId,cosFileId:i.cosFileId,downloadUrl:i.download_url},error:null}];case 2:if(o=u.sent(),this.shouldThrowOnError)throw o;return[2,{data:null,error:o instanceof Dn?o:new Dn(o.message)}];case 3:return[2]}})})},e.prototype.update=function(r,n,i){return Pn(this,void 0,void 0,function(){return Un(this,function(o){return[2,this.upload(r,n,vp(vp({},i),{upsert:!0}))]})})},e.prototype.move=function(r,n){return Pn(this,void 0,void 0,function(){var i,o;return Un(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.copyFile({fileList:[{srcPath:this._getCloudPath(r),dstPath:this._getCloudPath(n),overwrite:!0,removeOriginal:!0}]})];case 1:if(i=u.sent(),i.fileList[0].code&&i.fileList[0].code!=="SUCCESS")throw new Dn(i.fileList[0].message||"Move failed");return[2,{data:{message:"File moved from ".concat(r," to ").concat(n)},error:null}];case 2:if(o=u.sent(),this.shouldThrowOnError)throw o;if(Sl(o))return[2,{data:null,error:o}];throw o;case 3:return[2]}})})},e.prototype.copy=function(r,n){return Pn(this,void 0,void 0,function(){var i,o;return Un(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.copyFile({fileList:[{srcPath:this._getCloudPath(r),dstPath:this._getCloudPath(n),overwrite:!0,removeOriginal:!1}]})];case 1:if(i=u.sent(),i.fileList[0].code&&i.fileList[0].code!=="SUCCESS")throw new Dn(i.fileList[0].message||"Copy failed");return[2,{data:{path:this._getCloudPath(n)},error:null}];case 2:if(o=u.sent(),this.shouldThrowOnError)throw o;if(Sl(o))return[2,{data:null,error:o}];throw o;case 3:return[2]}})})},e.prototype.createSignedUrl=function(r,n,i){return Pn(this,void 0,void 0,function(){var o,u,f,p,l,d,m;return Un(this,function(y){switch(y.label){case 0:return y.trys.push([0,2,,3]),o=this._normalizeCloudId(r),[4,this.getTempFileURL({fileList:[{fileID:o,maxAge:n}]})];case 1:if(u=y.sent(),u.fileList[0].code!=="SUCCESS")throw new Dn("Failed to create signed URL: [".concat(u.fileList[0].code,"] ").concat(u.fileList[0].fileID));return f=u.fileList[0].download_url,p=[],i?.download!==void 0&&(typeof i.download=="string"?p.push("download=".concat(encodeURIComponent(i.download))):i.download===!0&&p.push("download=true")),i?.transform&&(l=this._transformOptsToQueryString(i.transform),l&&p.push(l)),p.length>0&&(d=f.includes("?")?"&":"?",f="".concat(f).concat(d).concat(p.join("&"))),[2,{data:{signedUrl:f},error:null}];case 2:if(m=y.sent(),this.shouldThrowOnError)throw m;if(Sl(m))return[2,{data:null,error:m}];throw m;case 3:return[2]}})})},e.prototype.createSignedUrls=function(r,n){return Pn(this,void 0,void 0,function(){var i,o,u,f=this;return Un(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),i=r.map(function(l){return{fileID:f._normalizeCloudId(l),maxAge:n}}),[4,this.getTempFileURL({fileList:i})];case 1:return o=p.sent(),[2,{data:o.fileList.map(function(l,d){return{path:r[d],signedUrl:l.tempFileURL||"",error:l.code==="SUCCESS"?null:l.message}}),error:null}];case 2:if(u=p.sent(),this.shouldThrowOnError)throw u;if(Sl(u))return[2,{data:null,error:u}];throw u;case 3:return[2]}})})},e.prototype.download=function(r,n){return Pn(this,void 0,void 0,function(){var i,o,u=this;return Un(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),o={},[4,(function(){return Pn(u,void 0,void 0,function(){var p,l,d,m;return Un(this,function(y){switch(y.label){case 0:return[4,this.createSignedUrl(r,600,{transform:n})];case 1:if(p=y.sent(),p.error)throw p.error;return l=encodeURI((m=p.data)===null||m===void 0?void 0:m.signedUrl),[4,this.request.reqClass.get({url:l,headers:{},responseType:"blob"})];case 2:if(d=y.sent().data,!d)throw new Dn("Download failed: no file content");return[2,new Blob([d])]}})})})()];case 1:return[2,(o.data=f.sent(),o.error=null,o)];case 2:if(i=f.sent(),this.shouldThrowOnError)throw i;if(Sl(i))return[2,{data:null,error:i}];throw i;case 3:return[2]}})})},e.prototype.info=function(r){return Pn(this,void 0,void 0,function(){var n,i,o,u,f,p,l,d;return Un(this,function(m){switch(m.label){case 0:return m.trys.push([0,2,,3]),n=r.startsWith("cloud://"),i=n?this._extractPathFromFileId(r):r,o=n?this._extractBucketFromFileId(r):this.bucketId,[4,this.getFileInfo({fileList:[this._normalizeCloudId(r)]})];case 1:if(u=m.sent(),f=u.fileList[0],f.code!=="SUCCESS")throw new Dn(f.message);return p=new Date().toISOString(),l=(f.lastModified?new Date(f.lastModified):new Date).toISOString(),[2,{data:{id:f.fileID,version:"1",name:i,bucketId:o,updatedAt:l,createdAt:l,lastAccessedAt:p,size:f.size,cacheControl:f.cacheControl,contentType:f.contentType,etag:f.etag,lastModified:l,metadata:{}},error:null}];case 2:if(d=m.sent(),this.shouldThrowOnError)throw d;return[2,{data:null,error:d instanceof Dn?d:new Dn(d.message)}];case 3:return[2]}})})},e.prototype.exists=function(r){return Pn(this,void 0,void 0,function(){var n,i,o;return Un(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.getFileInfo({fileList:[this._normalizeCloudId(r)]})];case 1:if(n=u.sent(),i=n.fileList[0],i.code==="FILE_NOT_FOUND")return[2,{data:!1,error:null}];if(i.code!=="SUCCESS")throw new Dn(i.message);return[2,{data:!0,error:null}];case 2:throw o=u.sent(),this.shouldThrowOnError,o;case 3:return[2]}})})},e.prototype.getPublicUrl=function(r,n){return Pn(this,void 0,void 0,function(){var i;return Un(this,function(o){switch(o.label){case 0:return[4,this.createSignedUrl(r,600,n)];case 1:return i=o.sent(),i.data?[2,{data:{publicUrl:i.data.signedUrl}}]:[2,{data:null,error:i.error}]}})})},e.prototype.remove=function(r){return Pn(this,void 0,void 0,function(){var n,i,o,u,f,p,l,d,m,y,b=this;return Un(this,function(w){switch(w.label){case 0:for(w.trys.push([0,3,,4]),n=10,i=[],o=0;o<r.length;o+=n)i.push(r.slice(o,o+n));return[4,Promise.all(i.map(function(S){return Promise.all(S.map(function(E){return b.info(E)}))}))];case 1:return u=w.sent(),f=new Map,u.flat().forEach(function(S,E){S.data&&f.set(r[Math.floor(E/n)*n+E%n],S.data)}),p=r.map(function(S){return b._normalizeCloudId(S)}),[4,this.deleteFile({fileList:p})];case 2:if(l=w.sent(),d=l.fileList.filter(function(S){return S.code!=="SUCCESS"}),d.length>0)throw new Dn("Delete failed for ".concat(d.length," file(s)"));return m=new Date().toISOString(),[2,{data:r.map(function(S){var E=f.get(S);return{name:E?.name,id:E?.id,bucket_id:E?.bucketId,owner:void 0,updated_at:E?.updatedAt||m,created_at:E?.createdAt,last_accessed_at:E?.lastAccessedAt||m,metadata:E?.metadata||{},buckets:{id:E?.bucketId,name:E?.bucketId,owner:void 0,public:!1,created_at:"",updated_at:m}}}),error:null}];case 3:if(y=w.sent(),this.shouldThrowOnError)throw y;if(Sl(y))return[2,{data:null,error:y}];throw y;case 4:return[2]}})})},e.prototype.list=function(){return Pn(this,void 0,void 0,function(){return Un(this,function(r){throw new Dn("Not implemented")})})},e.prototype._getCloudPath=function(r){var n=r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/");return n},e.prototype._normalizeCloudId=function(r){var n;if(/^cloud:\/\//.test(r))return r;var i=this._getCloudPath(r);if(this.bucketId){var o=((n=this.config)===null||n===void 0?void 0:n.env)||"";if(o)return"cloud://".concat(o,".").concat(this.bucketId,"/").concat(i)}else throw new Dn("bucketId is not set")},e.prototype.toBase64=function(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)},e.prototype._transformOptsToQueryString=function(r){var n=["imageMogr2"];if(r.width||r.height){var i=r.width||"",o=r.height||"";r.resize==="fill"?n.push("thumbnail/".concat(i,"x").concat(o,"!")):r.resize==="contain"?n.push("thumbnail/".concat(i,"x").concat(o)):n.push("thumbnail/".concat(i,"x").concat(o,"^"))}if(r.format&&r.format!=="origin"&&n.push("format/".concat(r.format)),r.quality!==void 0){var u=Math.max(1,Math.min(100,r.quality));n.push("quality/".concat(u))}return n.join("/")},e.prototype._extractPathFromFileId=function(r){var n=r.replace(/^cloud:\/\//,""),i=n.split("/");return i.length<2?r:i.slice(1).join("/")},e.prototype._extractBucketFromFileId=function(r){var n=r.replace(/^cloud:\/\//,""),i=n.split("/");if(i.length<1)return"";var o=i[0],u=o.indexOf(".");return u===-1?o:o.substring(u+1)},e})(vj),ru=new vj,yj={name:jn,entity:{uploadFile:ru.uploadFile,deleteFile:ru.deleteFile,getTempFileURL:ru.getTempFileURL,downloadFile:ru.downloadFile,getUploadMetadata:ru.getUploadMetadata,copyFile:ru.copyFile,getFileInfo:ru.getFileInfo,isGateWay:ru.isGateWay}},gj={name:"".concat(jn,"/supabase"),IIFE:!0,entity:function(){var t=new WeakMap;Object.defineProperty(this.prototype,"storage",{get:function(){if(t.has(this))return t.get(this);var e=this,r=new Proxy({},{get:function(i,o){if(o==="config")return e.config;if(o==="request")return e.request}}),n=new Ez(r);return t.set(this,n),n},configurable:!0,enumerable:!0})}};try{cloudbase.registerComponent(yj),cloudbase.registerComponent(gj)}catch{}function bj(t){try{t.registerComponent(yj),t.registerComponent(gj)}catch(e){console.warn(e)}}try{window.registerStorage=bj}catch{}var C_,sI;function _j(){if(sI)return C_;sI=1;var t=typeof Rf=="object"&&Rf&&Rf.Object===Object&&Rf;return C_=t,C_}var I_,uI;function Ra(){if(uI)return I_;uI=1;var t=_j(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return I_=r,I_}var x_,lI;function Pg(){if(lI)return x_;lI=1;var t=Ra(),e=t.Symbol;return x_=e,x_}var N_,cI;function Tz(){if(cI)return N_;cI=1;var t=Pg(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,i=t?t.toStringTag:void 0;function o(u){var f=r.call(u,i),p=u[i];try{u[i]=void 0;var l=!0}catch{}var d=n.call(u);return l&&(f?u[i]=p:delete u[i]),d}return N_=o,N_}var P_,fI;function Az(){if(fI)return P_;fI=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return P_=r,P_}var U_,dI;function Hp(){if(dI)return U_;dI=1;var t=Pg(),e=Tz(),r=Az(),n="[object Null]",i="[object Undefined]",o=t?t.toStringTag:void 0;function u(f){return f==null?f===void 0?i:n:o&&o in Object(f)?e(f):r(f)}return U_=u,U_}var q_,hI;function gd(){if(hI)return q_;hI=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return q_=t,q_}var D_,pI;function wj(){if(pI)return D_;pI=1;var t=Hp(),e=gd(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function u(f){if(!e(f))return!1;var p=t(f);return p==n||p==i||p==r||p==o}return D_=u,D_}var j_,mI;function Oz(){if(mI)return j_;mI=1;var t=Ra(),e=t["__core-js_shared__"];return j_=e,j_}var L_,vI;function Rz(){if(vI)return L_;vI=1;var t=Oz(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return L_=r,L_}var k_,yI;function Sj(){if(yI)return k_;yI=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return k_=r,k_}var M_,gI;function Cz(){if(gI)return M_;gI=1;var t=wj(),e=Rz(),r=gd(),n=Sj(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,u=Function.prototype,f=Object.prototype,p=u.toString,l=f.hasOwnProperty,d=RegExp("^"+p.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(y){if(!r(y)||e(y))return!1;var b=t(y)?d:o;return b.test(n(y))}return M_=m,M_}var B_,bI;function Iz(){if(bI)return B_;bI=1;function t(e,r){return e?.[r]}return B_=t,B_}var z_,_I;function fc(){if(_I)return z_;_I=1;var t=Cz(),e=Iz();function r(n,i){var o=e(n,i);return t(o)?o:void 0}return z_=r,z_}var $_,wI;function xz(){if(wI)return $_;wI=1;var t=fc(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return $_=e,$_}var F_,SI;function Ej(){if(SI)return F_;SI=1;var t=xz();function e(r,n,i){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return F_=e,F_}var H_,EI;function Tj(){if(EI)return H_;EI=1;function t(e,r){return e===r||e!==e&&r!==r}return H_=t,H_}var G_,TI;function N2(){if(TI)return G_;TI=1;var t=Ej(),e=Tj(),r=Object.prototype,n=r.hasOwnProperty;function i(o,u,f){var p=o[u];(!(n.call(o,u)&&e(p,f))||f===void 0&&!(u in o))&&t(o,u,f)}return G_=i,G_}var W_,AI;function bd(){if(AI)return W_;AI=1;var t=Array.isArray;return W_=t,W_}var V_,OI;function _d(){if(OI)return V_;OI=1;function t(e){return e!=null&&typeof e=="object"}return V_=t,V_}var Y_,RI;function P2(){if(RI)return Y_;RI=1;var t=Hp(),e=_d(),r="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&t(i)==r}return Y_=n,Y_}var K_,CI;function Nz(){if(CI)return K_;CI=1;var t=bd(),e=P2(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,u){if(t(o))return!1;var f=typeof o;return f=="number"||f=="symbol"||f=="boolean"||o==null||e(o)?!0:n.test(o)||!r.test(o)||u!=null&&o in Object(u)}return K_=i,K_}var Q_,II;function Ug(){if(II)return Q_;II=1;var t=fc(),e=t(Object,"create");return Q_=e,Q_}var J_,xI;function Pz(){if(xI)return J_;xI=1;var t=Ug();function e(){this.__data__=t?t(null):{},this.size=0}return J_=e,J_}var X_,NI;function Uz(){if(NI)return X_;NI=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return X_=t,X_}var Z_,PI;function qz(){if(PI)return Z_;PI=1;var t=Ug(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(o){var u=this.__data__;if(t){var f=u[o];return f===e?void 0:f}return n.call(u,o)?u[o]:void 0}return Z_=i,Z_}var ew,UI;function Dz(){if(UI)return ew;UI=1;var t=Ug(),e=Object.prototype,r=e.hasOwnProperty;function n(i){var o=this.__data__;return t?o[i]!==void 0:r.call(o,i)}return ew=n,ew}var tw,qI;function jz(){if(qI)return tw;qI=1;var t=Ug(),e="__lodash_hash_undefined__";function r(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=t&&i===void 0?e:i,this}return tw=r,tw}var rw,DI;function Lz(){if(DI)return rw;DI=1;var t=Pz(),e=Uz(),r=qz(),n=Dz(),i=jz();function o(u){var f=-1,p=u==null?0:u.length;for(this.clear();++f<p;){var l=u[f];this.set(l[0],l[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,rw=o,rw}var nw,jI;function kz(){if(jI)return nw;jI=1;function t(){this.__data__=[],this.size=0}return nw=t,nw}var iw,LI;function qg(){if(LI)return iw;LI=1;var t=Tj();function e(r,n){for(var i=r.length;i--;)if(t(r[i][0],n))return i;return-1}return iw=e,iw}var ow,kI;function Mz(){if(kI)return ow;kI=1;var t=qg(),e=Array.prototype,r=e.splice;function n(i){var o=this.__data__,u=t(o,i);if(u<0)return!1;var f=o.length-1;return u==f?o.pop():r.call(o,u,1),--this.size,!0}return ow=n,ow}var aw,MI;function Bz(){if(MI)return aw;MI=1;var t=qg();function e(r){var n=this.__data__,i=t(n,r);return i<0?void 0:n[i][1]}return aw=e,aw}var sw,BI;function zz(){if(BI)return sw;BI=1;var t=qg();function e(r){return t(this.__data__,r)>-1}return sw=e,sw}var uw,zI;function $z(){if(zI)return uw;zI=1;var t=qg();function e(r,n){var i=this.__data__,o=t(i,r);return o<0?(++this.size,i.push([r,n])):i[o][1]=n,this}return uw=e,uw}var lw,$I;function Dg(){if($I)return lw;$I=1;var t=kz(),e=Mz(),r=Bz(),n=zz(),i=$z();function o(u){var f=-1,p=u==null?0:u.length;for(this.clear();++f<p;){var l=u[f];this.set(l[0],l[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,lw=o,lw}var cw,FI;function U2(){if(FI)return cw;FI=1;var t=fc(),e=Ra(),r=t(e,"Map");return cw=r,cw}var fw,HI;function Fz(){if(HI)return fw;HI=1;var t=Lz(),e=Dg(),r=U2();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return fw=n,fw}var dw,GI;function Hz(){if(GI)return dw;GI=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return dw=t,dw}var hw,WI;function jg(){if(WI)return hw;WI=1;var t=Hz();function e(r,n){var i=r.__data__;return t(n)?i[typeof n=="string"?"string":"hash"]:i.map}return hw=e,hw}var pw,VI;function Gz(){if(VI)return pw;VI=1;var t=jg();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return pw=e,pw}var mw,YI;function Wz(){if(YI)return mw;YI=1;var t=jg();function e(r){return t(this,r).get(r)}return mw=e,mw}var vw,KI;function Vz(){if(KI)return vw;KI=1;var t=jg();function e(r){return t(this,r).has(r)}return vw=e,vw}var yw,QI;function Yz(){if(QI)return yw;QI=1;var t=jg();function e(r,n){var i=t(this,r),o=i.size;return i.set(r,n),this.size+=i.size==o?0:1,this}return yw=e,yw}var gw,JI;function Aj(){if(JI)return gw;JI=1;var t=Fz(),e=Gz(),r=Wz(),n=Vz(),i=Yz();function o(u){var f=-1,p=u==null?0:u.length;for(this.clear();++f<p;){var l=u[f];this.set(l[0],l[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,gw=o,gw}var bw,XI;function Kz(){if(XI)return bw;XI=1;var t=Aj(),e="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var u=arguments,f=i?i.apply(this,u):u[0],p=o.cache;if(p.has(f))return p.get(f);var l=n.apply(this,u);return o.cache=p.set(f,l)||p,l};return o.cache=new(r.Cache||t),o}return r.Cache=t,bw=r,bw}var _w,ZI;function Qz(){if(ZI)return _w;ZI=1;var t=Kz(),e=500;function r(n){var i=t(n,function(u){return o.size===e&&o.clear(),u}),o=i.cache;return i}return _w=r,_w}var ww,ex;function Jz(){if(ex)return ww;ex=1;var t=Qz(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(u,f,p,l){o.push(p?l.replace(r,"$1"):f||u)}),o});return ww=n,ww}var Sw,tx;function Xz(){if(tx)return Sw;tx=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,o=Array(i);++n<i;)o[n]=r(e[n],n,e);return o}return Sw=t,Sw}var Ew,rx;function Zz(){if(rx)return Ew;rx=1;var t=Pg(),e=Xz(),r=bd(),n=P2(),i=t?t.prototype:void 0,o=i?i.toString:void 0;function u(f){if(typeof f=="string")return f;if(r(f))return e(f,u)+"";if(n(f))return o?o.call(f):"";var p=f+"";return p=="0"&&1/f==-1/0?"-0":p}return Ew=u,Ew}var Tw,nx;function e$(){if(nx)return Tw;nx=1;var t=Zz();function e(r){return r==null?"":t(r)}return Tw=e,Tw}var Aw,ix;function q2(){if(ix)return Aw;ix=1;var t=bd(),e=Nz(),r=Jz(),n=e$();function i(o,u){return t(o)?o:e(o,u)?[o]:r(n(o))}return Aw=i,Aw}var Ow,ox;function Oj(){if(ox)return Ow;ox=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,i){var o=typeof n;return i=i??t,!!i&&(o=="number"||o!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return Ow=r,Ow}var Rw,ax;function D2(){if(ax)return Rw;ax=1;var t=P2();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return Rw=e,Rw}var Cw,sx;function t$(){if(sx)return Cw;sx=1;var t=N2(),e=q2(),r=Oj(),n=gd(),i=D2();function o(u,f,p,l){if(!n(u))return u;f=e(f,u);for(var d=-1,m=f.length,y=m-1,b=u;b!=null&&++d<m;){var w=i(f[d]),S=p;if(w==="__proto__"||w==="constructor"||w==="prototype")return u;if(d!=y){var E=b[w];S=l?l(E,w,b):void 0,S===void 0&&(S=n(E)?E:r(f[d+1])?[]:{})}t(b,w,S),b=b[w]}return u}return Cw=o,Cw}var Iw,ux;function r$(){if(ux)return Iw;ux=1;var t=t$();function e(r,n,i){return r==null?r:t(r,n,i)}return Iw=e,Iw}var n$=r$();const i$=Bp(n$);var xw,lx;function o$(){if(lx)return xw;lx=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return xw=t,xw}var Nw,cx;function a$(){if(cx)return Nw;cx=1;var t=q2(),e=D2();function r(n,i){i=t(i,n);for(var o=0,u=i.length;n!=null&&o<u;)n=n[e(i[o++])];return o&&o==u?n:void 0}return Nw=r,Nw}var Pw,fx;function s$(){if(fx)return Pw;fx=1;function t(e,r,n){var i=-1,o=e.length;r<0&&(r=-r>o?0:o+r),n=n>o?o:n,n<0&&(n+=o),o=r>n?0:n-r>>>0,r>>>=0;for(var u=Array(o);++i<o;)u[i]=e[i+r];return u}return Pw=t,Pw}var Uw,dx;function u$(){if(dx)return Uw;dx=1;var t=a$(),e=s$();function r(n,i){return i.length<2?n:t(n,e(i,0,-1))}return Uw=r,Uw}var qw,hx;function l$(){if(hx)return qw;hx=1;var t=q2(),e=o$(),r=u$(),n=D2();function i(o,u){return u=t(u,o),o=r(o,u),o==null||delete o[n(e(u))]}return qw=i,qw}var Dw,px;function c$(){if(px)return Dw;px=1;var t=l$();function e(r,n){return r==null?!0:t(r,n)}return Dw=e,Dw}var f$=c$();const d$=Bp(f$);var jw,mx;function h$(){if(mx)return jw;mx=1;var t=Dg();function e(){this.__data__=new t,this.size=0}return jw=e,jw}var Lw,vx;function p$(){if(vx)return Lw;vx=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return Lw=t,Lw}var kw,yx;function m$(){if(yx)return kw;yx=1;function t(e){return this.__data__.get(e)}return kw=t,kw}var Mw,gx;function v$(){if(gx)return Mw;gx=1;function t(e){return this.__data__.has(e)}return Mw=t,Mw}var Bw,bx;function y$(){if(bx)return Bw;bx=1;var t=Dg(),e=U2(),r=Aj(),n=200;function i(o,u){var f=this.__data__;if(f instanceof t){var p=f.__data__;if(!e||p.length<n-1)return p.push([o,u]),this.size=++f.size,this;f=this.__data__=new r(p)}return f.set(o,u),this.size=f.size,this}return Bw=i,Bw}var zw,_x;function g$(){if(_x)return zw;_x=1;var t=Dg(),e=h$(),r=p$(),n=m$(),i=v$(),o=y$();function u(f){var p=this.__data__=new t(f);this.size=p.size}return u.prototype.clear=e,u.prototype.delete=r,u.prototype.get=n,u.prototype.has=i,u.prototype.set=o,zw=u,zw}var $w,Sx;function b$(){if(Sx)return $w;Sx=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i&&r(e[n],n,e)!==!1;);return e}return $w=t,$w}var Fw,Ex;function Lg(){if(Ex)return Fw;Ex=1;var t=N2(),e=Ej();function r(n,i,o,u){var f=!o;o||(o={});for(var p=-1,l=i.length;++p<l;){var d=i[p],m=u?u(o[d],n[d],d,o,n):void 0;m===void 0&&(m=n[d]),f?e(o,d,m):t(o,d,m)}return o}return Fw=r,Fw}var Hw,Tx;function _$(){if(Tx)return Hw;Tx=1;function t(e,r){for(var n=-1,i=Array(e);++n<e;)i[n]=r(n);return i}return Hw=t,Hw}var Gw,Ax;function w$(){if(Ax)return Gw;Ax=1;var t=Hp(),e=_d(),r="[object Arguments]";function n(i){return e(i)&&t(i)==r}return Gw=n,Gw}var Ww,Ox;function S$(){if(Ox)return Ww;Ox=1;var t=w$(),e=_d(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,o=t((function(){return arguments})())?t:function(u){return e(u)&&n.call(u,"callee")&&!i.call(u,"callee")};return Ww=o,Ww}var ep={exports:{}},Vw,Rx;function E$(){if(Rx)return Vw;Rx=1;function t(){return!1}return Vw=t,Vw}ep.exports;var Cx;function Rj(){return Cx||(Cx=1,(function(t,e){var r=Ra(),n=E$(),i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,u=o&&o.exports===i,f=u?r.Buffer:void 0,p=f?f.isBuffer:void 0,l=p||n;t.exports=l})(ep,ep.exports)),ep.exports}var Yw,Ix;function Cj(){if(Ix)return Yw;Ix=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return Yw=e,Yw}var Kw,xx;function T$(){if(xx)return Kw;xx=1;var t=Hp(),e=Cj(),r=_d(),n="[object Arguments]",i="[object Array]",o="[object Boolean]",u="[object Date]",f="[object Error]",p="[object Function]",l="[object Map]",d="[object Number]",m="[object Object]",y="[object RegExp]",b="[object Set]",w="[object String]",S="[object WeakMap]",E="[object ArrayBuffer]",R="[object DataView]",O="[object Float32Array]",C="[object Float64Array]",I="[object Int8Array]",P="[object Int16Array]",D="[object Int32Array]",j="[object Uint8Array]",q="[object Uint8ClampedArray]",U="[object Uint16Array]",Y="[object Uint32Array]",$={};$[O]=$[C]=$[I]=$[P]=$[D]=$[j]=$[q]=$[U]=$[Y]=!0,$[n]=$[i]=$[E]=$[o]=$[R]=$[u]=$[f]=$[p]=$[l]=$[d]=$[m]=$[y]=$[b]=$[w]=$[S]=!1;function L(H){return r(H)&&e(H.length)&&!!$[t(H)]}return Kw=L,Kw}var Qw,Nx;function j2(){if(Nx)return Qw;Nx=1;function t(e){return function(r){return e(r)}}return Qw=t,Qw}var tp={exports:{}};tp.exports;var Px;function L2(){return Px||(Px=1,(function(t,e){var r=_j(),n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===n,u=o&&r.process,f=(function(){try{var p=i&&i.require&&i.require("util").types;return p||u&&u.binding&&u.binding("util")}catch{}})();t.exports=f})(tp,tp.exports)),tp.exports}var Jw,Ux;function A$(){if(Ux)return Jw;Ux=1;var t=T$(),e=j2(),r=L2(),n=r&&r.isTypedArray,i=n?e(n):t;return Jw=i,Jw}var Xw,qx;function Ij(){if(qx)return Xw;qx=1;var t=_$(),e=S$(),r=bd(),n=Rj(),i=Oj(),o=A$(),u=Object.prototype,f=u.hasOwnProperty;function p(l,d){var m=r(l),y=!m&&e(l),b=!m&&!y&&n(l),w=!m&&!y&&!b&&o(l),S=m||y||b||w,E=S?t(l.length,String):[],R=E.length;for(var O in l)(d||f.call(l,O))&&!(S&&(O=="length"||b&&(O=="offset"||O=="parent")||w&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||i(O,R)))&&E.push(O);return E}return Xw=p,Xw}var Zw,Dx;function k2(){if(Dx)return Zw;Dx=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||t;return r===i}return Zw=e,Zw}var eS,jx;function xj(){if(jx)return eS;jx=1;function t(e,r){return function(n){return e(r(n))}}return eS=t,eS}var tS,Lx;function O$(){if(Lx)return tS;Lx=1;var t=xj(),e=t(Object.keys,Object);return tS=e,tS}var rS,kx;function R$(){if(kx)return rS;kx=1;var t=k2(),e=O$(),r=Object.prototype,n=r.hasOwnProperty;function i(o){if(!t(o))return e(o);var u=[];for(var f in Object(o))n.call(o,f)&&f!="constructor"&&u.push(f);return u}return rS=i,rS}var nS,Mx;function Nj(){if(Mx)return nS;Mx=1;var t=wj(),e=Cj();function r(n){return n!=null&&e(n.length)&&!t(n)}return nS=r,nS}var iS,Bx;function M2(){if(Bx)return iS;Bx=1;var t=Ij(),e=R$(),r=Nj();function n(i){return r(i)?t(i):e(i)}return iS=n,iS}var oS,zx;function C$(){if(zx)return oS;zx=1;var t=Lg(),e=M2();function r(n,i){return n&&t(i,e(i),n)}return oS=r,oS}var aS,$x;function I$(){if($x)return aS;$x=1;function t(e){var r=[];if(e!=null)for(var n in Object(e))r.push(n);return r}return aS=t,aS}var sS,Fx;function x$(){if(Fx)return sS;Fx=1;var t=gd(),e=k2(),r=I$(),n=Object.prototype,i=n.hasOwnProperty;function o(u){if(!t(u))return r(u);var f=e(u),p=[];for(var l in u)l=="constructor"&&(f||!i.call(u,l))||p.push(l);return p}return sS=o,sS}var uS,Hx;function B2(){if(Hx)return uS;Hx=1;var t=Ij(),e=x$(),r=Nj();function n(i){return r(i)?t(i,!0):e(i)}return uS=n,uS}var lS,Gx;function N$(){if(Gx)return lS;Gx=1;var t=Lg(),e=B2();function r(n,i){return n&&t(i,e(i),n)}return lS=r,lS}var rp={exports:{}};rp.exports;var Wx;function P$(){return Wx||(Wx=1,(function(t,e){var r=Ra(),n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===n,u=o?r.Buffer:void 0,f=u?u.allocUnsafe:void 0;function p(l,d){if(d)return l.slice();var m=l.length,y=f?f(m):new l.constructor(m);return l.copy(y),y}t.exports=p})(rp,rp.exports)),rp.exports}var cS,Vx;function U$(){if(Vx)return cS;Vx=1;function t(e,r){var n=-1,i=e.length;for(r||(r=Array(i));++n<i;)r[n]=e[n];return r}return cS=t,cS}var fS,Yx;function q$(){if(Yx)return fS;Yx=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,o=0,u=[];++n<i;){var f=e[n];r(f,n,e)&&(u[o++]=f)}return u}return fS=t,fS}var dS,Kx;function Pj(){if(Kx)return dS;Kx=1;function t(){return[]}return dS=t,dS}var hS,Qx;function z2(){if(Qx)return hS;Qx=1;var t=q$(),e=Pj(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(u){return u==null?[]:(u=Object(u),t(i(u),function(f){return n.call(u,f)}))}:e;return hS=o,hS}var pS,Jx;function D$(){if(Jx)return pS;Jx=1;var t=Lg(),e=z2();function r(n,i){return t(n,e(n),i)}return pS=r,pS}var mS,Xx;function Uj(){if(Xx)return mS;Xx=1;function t(e,r){for(var n=-1,i=r.length,o=e.length;++n<i;)e[o+n]=r[n];return e}return mS=t,mS}var vS,Zx;function qj(){if(Zx)return vS;Zx=1;var t=xj(),e=t(Object.getPrototypeOf,Object);return vS=e,vS}var yS,eN;function Dj(){if(eN)return yS;eN=1;var t=Uj(),e=qj(),r=z2(),n=Pj(),i=Object.getOwnPropertySymbols,o=i?function(u){for(var f=[];u;)t(f,r(u)),u=e(u);return f}:n;return yS=o,yS}var gS,tN;function j$(){if(tN)return gS;tN=1;var t=Lg(),e=Dj();function r(n,i){return t(n,e(n),i)}return gS=r,gS}var bS,rN;function jj(){if(rN)return bS;rN=1;var t=Uj(),e=bd();function r(n,i,o){var u=i(n);return e(n)?u:t(u,o(n))}return bS=r,bS}var _S,nN;function L$(){if(nN)return _S;nN=1;var t=jj(),e=z2(),r=M2();function n(i){return t(i,r,e)}return _S=n,_S}var wS,iN;function k$(){if(iN)return wS;iN=1;var t=jj(),e=Dj(),r=B2();function n(i){return t(i,r,e)}return wS=n,wS}var SS,oN;function M$(){if(oN)return SS;oN=1;var t=fc(),e=Ra(),r=t(e,"DataView");return SS=r,SS}var ES,aN;function B$(){if(aN)return ES;aN=1;var t=fc(),e=Ra(),r=t(e,"Promise");return ES=r,ES}var TS,sN;function z$(){if(sN)return TS;sN=1;var t=fc(),e=Ra(),r=t(e,"Set");return TS=r,TS}var AS,uN;function $$(){if(uN)return AS;uN=1;var t=fc(),e=Ra(),r=t(e,"WeakMap");return AS=r,AS}var OS,lN;function $2(){if(lN)return OS;lN=1;var t=M$(),e=U2(),r=B$(),n=z$(),i=$$(),o=Hp(),u=Sj(),f="[object Map]",p="[object Object]",l="[object Promise]",d="[object Set]",m="[object WeakMap]",y="[object DataView]",b=u(t),w=u(e),S=u(r),E=u(n),R=u(i),O=o;return(t&&O(new t(new ArrayBuffer(1)))!=y||e&&O(new e)!=f||r&&O(r.resolve())!=l||n&&O(new n)!=d||i&&O(new i)!=m)&&(O=function(C){var I=o(C),P=I==p?C.constructor:void 0,D=P?u(P):"";if(D)switch(D){case b:return y;case w:return f;case S:return l;case E:return d;case R:return m}return I}),OS=O,OS}var RS,cN;function F$(){if(cN)return RS;cN=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n){var i=n.length,o=new n.constructor(i);return i&&typeof n[0]=="string"&&e.call(n,"index")&&(o.index=n.index,o.input=n.input),o}return RS=r,RS}var CS,fN;function H$(){if(fN)return CS;fN=1;var t=Ra(),e=t.Uint8Array;return CS=e,CS}var IS,dN;function F2(){if(dN)return IS;dN=1;var t=H$();function e(r){var n=new r.constructor(r.byteLength);return new t(n).set(new t(r)),n}return IS=e,IS}var xS,hN;function G$(){if(hN)return xS;hN=1;var t=F2();function e(r,n){var i=n?t(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return xS=e,xS}var NS,pN;function W$(){if(pN)return NS;pN=1;var t=/\w*$/;function e(r){var n=new r.constructor(r.source,t.exec(r));return n.lastIndex=r.lastIndex,n}return NS=e,NS}var PS,mN;function V$(){if(mN)return PS;mN=1;var t=Pg(),e=t?t.prototype:void 0,r=e?e.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return PS=n,PS}var US,vN;function Y$(){if(vN)return US;vN=1;var t=F2();function e(r,n){var i=n?t(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return US=e,US}var qS,yN;function K$(){if(yN)return qS;yN=1;var t=F2(),e=G$(),r=W$(),n=V$(),i=Y$(),o="[object Boolean]",u="[object Date]",f="[object Map]",p="[object Number]",l="[object RegExp]",d="[object Set]",m="[object String]",y="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",S="[object Float32Array]",E="[object Float64Array]",R="[object Int8Array]",O="[object Int16Array]",C="[object Int32Array]",I="[object Uint8Array]",P="[object Uint8ClampedArray]",D="[object Uint16Array]",j="[object Uint32Array]";function q(U,Y,$){var L=U.constructor;switch(Y){case b:return t(U);case o:case u:return new L(+U);case w:return e(U,$);case S:case E:case R:case O:case C:case I:case P:case D:case j:return i(U,$);case f:return new L;case p:case m:return new L(U);case l:return r(U);case d:return new L;case y:return n(U)}}return qS=q,qS}var DS,gN;function Q$(){if(gN)return DS;gN=1;var t=gd(),e=Object.create,r=(function(){function n(){}return function(i){if(!t(i))return{};if(e)return e(i);n.prototype=i;var o=new n;return n.prototype=void 0,o}})();return DS=r,DS}var jS,bN;function J$(){if(bN)return jS;bN=1;var t=Q$(),e=qj(),r=k2();function n(i){return typeof i.constructor=="function"&&!r(i)?t(e(i)):{}}return jS=n,jS}var LS,_N;function X$(){if(_N)return LS;_N=1;var t=$2(),e=_d(),r="[object Map]";function n(i){return e(i)&&t(i)==r}return LS=n,LS}var kS,wN;function Z$(){if(wN)return kS;wN=1;var t=X$(),e=j2(),r=L2(),n=r&&r.isMap,i=n?e(n):t;return kS=i,kS}var MS,SN;function e7(){if(SN)return MS;SN=1;var t=$2(),e=_d(),r="[object Set]";function n(i){return e(i)&&t(i)==r}return MS=n,MS}var BS,EN;function t7(){if(EN)return BS;EN=1;var t=e7(),e=j2(),r=L2(),n=r&&r.isSet,i=n?e(n):t;return BS=i,BS}var zS,TN;function r7(){if(TN)return zS;TN=1;var t=g$(),e=b$(),r=N2(),n=C$(),i=N$(),o=P$(),u=U$(),f=D$(),p=j$(),l=L$(),d=k$(),m=$2(),y=F$(),b=K$(),w=J$(),S=bd(),E=Rj(),R=Z$(),O=gd(),C=t7(),I=M2(),P=B2(),D=1,j=2,q=4,U="[object Arguments]",Y="[object Array]",$="[object Boolean]",L="[object Date]",H="[object Error]",Q="[object Function]",ce="[object GeneratorFunction]",M="[object Map]",J="[object Number]",Z="[object Object]",Ae="[object RegExp]",Re="[object Set]",z="[object String]",se="[object Symbol]",ae="[object WeakMap]",fe="[object ArrayBuffer]",pe="[object DataView]",be="[object Float32Array]",Se="[object Float64Array]",Ie="[object Int8Array]",$e="[object Int16Array]",pt="[object Int32Array]",Ot="[object Uint8Array]",Kt="[object Uint8ClampedArray]",Jr="[object Uint16Array]",Er="[object Uint32Array]",st={};st[U]=st[Y]=st[fe]=st[pe]=st[$]=st[L]=st[be]=st[Se]=st[Ie]=st[$e]=st[pt]=st[M]=st[J]=st[Z]=st[Ae]=st[Re]=st[z]=st[se]=st[Ot]=st[Kt]=st[Jr]=st[Er]=!0,st[H]=st[Q]=st[ae]=!1;function Pr(tt,cr,qt,mi,vi,Dt){var Ft,Zt=cr&D,Li=cr&j,En=cr&q;if(qt&&(Ft=vi?qt(tt,mi,vi,Dt):qt(tt)),Ft!==void 0)return Ft;if(!O(tt))return tt;var Qo=S(tt);if(Qo){if(Ft=y(tt),!Zt)return u(tt,Ft)}else{var ir=m(tt),ln=ir==Q||ir==ce;if(E(tt))return o(tt,Zt);if(ir==Z||ir==U||ln&&!vi){if(Ft=Li||ln?{}:w(tt),!Zt)return Li?p(tt,i(Ft,tt)):f(tt,n(Ft,tt))}else{if(!st[ir])return vi?tt:{};Ft=b(tt,ir,Zt)}}Dt||(Dt=new t);var Tn=Dt.get(tt);if(Tn)return Tn;Dt.set(tt,Ft),C(tt)?tt.forEach(function(or){Ft.add(Pr(or,cr,qt,or,tt,Dt))}):R(tt)&&tt.forEach(function(or,Yt){Ft.set(Yt,Pr(or,cr,qt,Yt,tt,Dt))});var ki=En?Li?d:l:Li?P:I,zn=Qo?void 0:ki(tt);return e(zn||tt,function(or,Yt){zn&&(Yt=or,or=tt[Yt]),r(Ft,Yt,Pr(or,cr,qt,Yt,tt,Dt))}),Ft}return zS=Pr,zS}var $S,AN;function n7(){if(AN)return $S;AN=1;var t=r7(),e=1,r=4;function n(i){return t(i,e|r)}return $S=n,$S}var i7=n7();const o7=Bp(i7);function Nf(t){return t===void 0&&(t=""),"".concat(t?"".concat(t,"_"):"").concat(+new Date,"_").concat(Math.random())}var a7=(function(){function t(e){this.close=e.close,this.onChange=e.onChange,this.onError=e.onError,e.debug&&Object.defineProperty(this,"virtualClient",{get:function(){return e.virtualClient}})}return t})(),ON=(function(){function t(e){var r=e.id,n=e.docChanges,i=e.docs,o=e.msgType,u=e.type,f,p;Object.defineProperties(this,{id:{get:function(){return r},enumerable:!0},docChanges:{get:function(){return f||(f=JSON.parse(JSON.stringify(n))),f},enumerable:!0},docs:{get:function(){return p||(p=JSON.parse(JSON.stringify(i))),p},enumerable:!0},msgType:{get:function(){return o},enumerable:!0},type:{get:function(){return u},enumerable:!0}})}return t})(),kg=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),s7=(function(t){kg(e,t);function e(r){var n=t.call(this,"Watch Error ".concat(JSON.stringify(r.msgData)," (requestid: ").concat(r.requestId,")"))||this;return n.isRealtimeErrorMessageError=!0,n.payload=r,n}return e})(Error),RN=function(t){return t?.isRealtimeErrorMessageError},u7=(function(t){kg(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="timeout",r.payload=null,r.generic=!0,r}return e})(Error),l7=function(t){return t.type==="timeout"},c7=(function(t){kg(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="cancelled",r.payload=null,r.generic=!0,r}return e})(Error),f7=function(t){return t.type==="cancelled"},oo=(function(t){kg(e,t);function e(r){var n=t.call(this,r.errMsg)||this;return n.errCode="UNKNOWN_ERROR",Object.defineProperties(n,{message:{get:function(){return"errCode: ".concat(this.errCode," ").concat(ai[this.errCode]||""," | errMsg: ").concat(this.errMsg)},set:function(i){this.errMsg=i}}}),n.errCode=r.errCode||"UNKNOWN_ERROR",n.errMsg=r.errMsg,n}return Object.defineProperty(e.prototype,"message",{get:function(){return"errCode: ".concat(this.errCode," | errMsg: ").concat(this.errMsg)},set:function(r){this.errMsg=r},enumerable:!1,configurable:!0}),e})(Error),ai={UNKNOWN_ERROR:"UNKNOWN_ERROR",SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG:"SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG",SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA:"SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR:"SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED:"SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED",SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL:"SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL",SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR:"SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR"},EE=function(t){return t===void 0&&(t=0),new Promise(function(e){return setTimeout(e,t)})},Ci=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},Zn=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},CN=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Wt;(function(t){t.LOGGINGIN="LOGGINGIN",t.INITING="INITING",t.REBUILDING="REBUILDING",t.ACTIVE="ACTIVE",t.ERRORED="ERRORED",t.CLOSING="CLOSING",t.CLOSED="CLOSED",t.PAUSED="PAUSED",t.RESUMING="RESUMING"})(Wt||(Wt={}));var d7=100,xv=2,h7=2,p7=10*1e3,m7=10*1e3,v7=10*1e3,y7=(function(){function t(e){var r=this;this.watchStatus=Wt.INITING,this.wsLogin=function(n,i){return Ci(r,void 0,void 0,function(){var o;return Zn(this,function(u){switch(u.label){case 0:return this.watchStatus=Wt.LOGGINGIN,[4,this.login(n,i)];case 1:return o=u.sent(),this.envId||(this.envId=o.envId),[2,o]}})})},this.initWatch=function(n){return Ci(r,void 0,void 0,function(){var i,o=this;return Zn(this,function(u){switch(u.label){case 0:if(this.initWatchPromise!==null&&this.initWatchPromise!==void 0)return[2,this.initWatchPromise];this.initWatchPromise=new Promise(function(f,p){(function(){return Ci(o,void 0,void 0,function(){var l,d,m,y,b,w,S,E,R,O,C;return Zn(this,function(I){switch(I.label){case 0:return I.trys.push([0,3,,4]),this.watchStatus===Wt.PAUSED?(console.log("[realtime] initWatch cancelled on pause"),[2,f()]):[4,this.wsLogin(this.envId,n)];case 1:return l=I.sent().envId,this.watchStatus===Wt.PAUSED?(console.log("[realtime] initWatch cancelled on pause"),[2,f()]):(this.watchStatus=Wt.INITING,d={watchId:this.watchId,requestId:Nf(),msgType:"INIT_WATCH",msgData:{envId:l,collName:this.collectionName,query:this.query,limit:this.limit,orderBy:this.orderBy}},[4,this.send({msg:d,waitResponse:!0,skipOnMessage:!0,timeout:m7})]);case 2:if(m=I.sent(),y=m.msgData,b=y.events,w=y.currEvent,this.sessionInfo={queryID:m.msgData.queryID,currentEventId:w-1,currentDocs:[]},b.length>0){for(S=0,E=b;S<E.length;S++)R=E[S],R.ID=w;this.handleServerEvents(m)}else this.sessionInfo.currentEventId=w,O=new ON({id:w,docChanges:[],docs:[],type:"init"}),this.listener.onChange(O),this.scheduleSendACK();return this.onWatchStart(this,this.sessionInfo.queryID),this.watchStatus=Wt.ACTIVE,this.availableRetries.INIT_WATCH=xv,f(),[3,4];case 3:return C=I.sent(),this.handleWatchEstablishmentError(C,{operationName:"INIT_WATCH",resolve:f,reject:p}),[3,4];case 4:return[2]}})})})()}),i=!1,u.label=1;case 1:return u.trys.push([1,,3,4]),[4,this.initWatchPromise];case 2:return u.sent(),i=!0,[3,4];case 3:return this.initWatchPromise=void 0,[7];case 4:return console.log("[realtime] initWatch ".concat(i?"success":"fail")),[2]}})})},this.rebuildWatch=function(n){return Ci(r,void 0,void 0,function(){var i,o=this;return Zn(this,function(u){switch(u.label){case 0:if(this.rebuildWatchPromise!==null&&this.rebuildWatchPromise!==void 0)return[2,this.rebuildWatchPromise];this.rebuildWatchPromise=new Promise(function(f,p){(function(){return Ci(o,void 0,void 0,function(){var l,d,m,y;return Zn(this,function(b){switch(b.label){case 0:return b.trys.push([0,3,,4]),this.watchStatus===Wt.PAUSED?(console.log("[realtime] rebuildWatch cancelled on pause"),[2,f()]):[4,this.wsLogin(this.envId,n)];case 1:if(l=b.sent().envId,!this.sessionInfo)throw new Error("can not rebuildWatch without a successful initWatch (lack of sessionInfo)");return this.watchStatus===Wt.PAUSED?(console.log("[realtime] rebuildWatch cancelled on pause"),[2,f()]):(this.watchStatus=Wt.REBUILDING,d={watchId:this.watchId,requestId:Nf(),msgType:"REBUILD_WATCH",msgData:{envId:l,collName:this.collectionName,queryID:this.sessionInfo.queryID,eventID:this.sessionInfo.currentEventId}},[4,this.send({msg:d,waitResponse:!0,skipOnMessage:!1,timeout:v7})]);case 2:return m=b.sent(),this.handleServerEvents(m),this.watchStatus=Wt.ACTIVE,this.availableRetries.REBUILD_WATCH=xv,f(),[3,4];case 3:return y=b.sent(),this.handleWatchEstablishmentError(y,{operationName:"REBUILD_WATCH",resolve:f,reject:p}),[3,4];case 4:return[2]}})})})()}),i=!1,u.label=1;case 1:return u.trys.push([1,,3,4]),[4,this.rebuildWatchPromise];case 2:return u.sent(),i=!0,[3,4];case 3:return this.rebuildWatchPromise=void 0,[7];case 4:return console.log("[realtime] rebuildWatch ".concat(i?"success":"fail")),[2]}})})},this.handleWatchEstablishmentError=function(n,i){return Ci(r,void 0,void 0,function(){var o,u,f,p=this;return Zn(this,function(l){return o=i.operationName==="INIT_WATCH",u=function(){p.closeWithError(new oo({errCode:o?ai.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:ai.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:n})),i.reject(n)},f=function(d){p.useRetryTicket(i.operationName)?o?(p.initWatchPromise=void 0,i.resolve(p.initWatch(d))):(p.rebuildWatchPromise=void 0,i.resolve(p.rebuildWatch(d))):u()},this.handleCommonError(n,{onSignError:function(){return f(!0)},onTimeoutError:function(){return f(!1)},onNotRetryableError:u,onCancelledError:i.reject,onUnknownError:function(){(function(){return Ci(p,void 0,void 0,function(){var d,m=this;return Zn(this,function(y){switch(y.label){case 0:return y.trys.push([0,8,,9]),d=function(){return Ci(m,void 0,void 0,function(){return Zn(this,function(b){switch(b.label){case 0:return this.pause(),[4,this.onceWSConnected()];case 1:return b.sent(),f(!0),[2]}})})},this.isWSConnected()?[3,2]:[4,d()];case 1:return y.sent(),[3,7];case 2:return[4,EE(d7)];case 3:return y.sent(),this.watchStatus!==Wt.PAUSED?[3,4]:(i.reject(new c7("".concat(i.operationName," cancelled due to pause after unknownError"))),[3,7]);case 4:return this.isWSConnected()?[3,6]:[4,d()];case 5:return y.sent(),[3,7];case 6:f(!1),y.label=7;case 7:return[3,9];case 8:return y.sent(),f(!0),[3,9];case 9:return[2]}})})})()}}),[2]})})},this.closeWatch=function(){return Ci(r,void 0,void 0,function(){var n,i,o;return Zn(this,function(u){switch(u.label){case 0:if(n=this.sessionInfo?this.sessionInfo.queryID:"",this.watchStatus!==Wt.ACTIVE)return this.watchStatus=Wt.CLOSED,this.onWatchClose(this,n),[2];u.label=1;case 1:return u.trys.push([1,3,4,5]),this.watchStatus=Wt.CLOSING,i={watchId:this.watchId,requestId:Nf(),msgType:"CLOSE_WATCH",msgData:null},[4,this.send({msg:i})];case 2:return u.sent(),this.sessionInfo=void 0,this.watchStatus=Wt.CLOSED,[3,5];case 3:return o=u.sent(),this.closeWithError(new oo({errCode:ai.SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL,errMsg:o})),[3,5];case 4:return this.onWatchClose(this,n),[7];case 5:return[2]}})})},this.scheduleSendACK=function(){r.clearACKSchedule(),r.ackTimeoutId=setTimeout(function(){r.waitExpectedTimeoutId?r.scheduleSendACK():r.sendACK()},p7)},this.clearACKSchedule=function(){r.ackTimeoutId&&clearTimeout(r.ackTimeoutId)},this.sendACK=function(){return Ci(r,void 0,void 0,function(){var n,i,o;return Zn(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),this.watchStatus!==Wt.ACTIVE?(this.scheduleSendACK(),[2]):this.sessionInfo?(n={watchId:this.watchId,requestId:Nf(),msgType:"CHECK_LAST",msgData:{queryID:this.sessionInfo.queryID,eventID:this.sessionInfo.currentEventId}},[4,this.send({msg:n})]):(console.warn("[realtime listener] can not send ack without a successful initWatch (lack of sessionInfo)"),[2]);case 1:return u.sent(),this.scheduleSendACK(),[3,3];case 2:if(i=u.sent(),RN(i))switch(o=i.payload,o.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return this.rebuildWatch(),[2];case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":return this.closeWithError(new oo({errCode:ai.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:o.msgData.code})),[2]}return this.availableRetries.CHECK_LAST&&this.availableRetries.CHECK_LAST>0?(this.availableRetries.CHECK_LAST-=1,this.scheduleSendACK()):this.closeWithError(new oo({errCode:ai.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:i})),[3,3];case 3:return[2]}})})},this.handleCommonError=function(n,i){if(RN(n)){var o=n.payload;switch(o.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":{i.onSignError(n);return}case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":{i.onNotRetryableError(n);return}default:{i.onNotRetryableError(n);return}}}else if(l7(n)){i.onTimeoutError(n);return}else if(f7(n)){i.onCancelledError(n);return}i.onUnknownError(n)},this.watchId="watchid_".concat(+new Date,"_").concat(Math.random()),this.envId=e.envId,this.collectionName=e.collectionName,this.query=e.query,this.limit=e.limit,this.orderBy=e.orderBy,this.send=e.send,this.login=e.login,this.isWSConnected=e.isWSConnected,this.onceWSConnected=e.onceWSConnected,this.getWaitExpectedTimeoutLength=e.getWaitExpectedTimeoutLength,this.onWatchStart=e.onWatchStart,this.onWatchClose=e.onWatchClose,this.debug=e.debug,this.availableRetries={INIT_WATCH:xv,REBUILD_WATCH:xv,CHECK_LAST:h7},this.listener=new a7({close:function(){r.closeWatch()},onChange:e.onChange,onError:e.onError,debug:this.debug,virtualClient:this}),this.initWatch()}return t.prototype.onMessage=function(e){var r=this;switch(this.watchStatus){case Wt.PAUSED:{if(e.msgType!=="ERROR")return;break}case Wt.LOGGINGIN:case Wt.INITING:case Wt.REBUILDING:{console.warn("[realtime listener] internal non-fatal error: unexpected message received while ".concat(this.watchStatus));return}case Wt.CLOSED:{console.warn("[realtime listener] internal non-fatal error: unexpected message received when the watch has closed");return}case Wt.ERRORED:{console.warn("[realtime listener] internal non-fatal error: unexpected message received when the watch has ended with error");return}}if(!this.sessionInfo){console.warn("[realtime listener] internal non-fatal error: sessionInfo not found while message is received.");return}switch(this.scheduleSendACK(),e.msgType){case"NEXT_EVENT":{console.warn("nextevent ".concat(e.msgData.currEvent," ignored"),e),this.handleServerEvents(e);break}case"CHECK_EVENT":{this.sessionInfo.currentEventId<e.msgData.currEvent&&(this.sessionInfo.expectEventId=e.msgData.currEvent,this.clearWaitExpectedEvent(),this.waitExpectedTimeoutId=setTimeout(function(){r.rebuildWatch()},this.getWaitExpectedTimeoutLength()),console.log("[realtime] waitExpectedTimeoutLength ".concat(this.getWaitExpectedTimeoutLength())));break}case"ERROR":{this.closeWithError(new oo({errCode:ai.SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG,errMsg:"".concat(e.msgData.code," - ").concat(e.msgData.message)}));break}default:{console.warn("[realtime listener] virtual client receive unexpected msg ".concat(e.msgType,": "),e);break}}},t.prototype.closeWithError=function(e){var r;this.watchStatus=Wt.ERRORED,this.clearACKSchedule(),this.listener.onError(e),this.onWatchClose(this,((r=this.sessionInfo)===null||r===void 0?void 0:r.queryID)||""),console.log("[realtime] client closed (".concat(this.collectionName," ").concat(this.query,") (watchId ").concat(this.watchId,")"))},t.prototype.pause=function(){this.watchStatus=Wt.PAUSED,console.log("[realtime] client paused (".concat(this.collectionName," ").concat(this.query,") (watchId ").concat(this.watchId,")"))},t.prototype.resume=function(){return Ci(this,void 0,void 0,function(){var e;return Zn(this,function(r){switch(r.label){case 0:this.watchStatus=Wt.RESUMING,console.log("[realtime] client resuming with ".concat(this.sessionInfo?"REBUILD_WATCH":"INIT_WATCH"," (").concat(this.collectionName," ").concat(this.query,") (").concat(this.watchId,")")),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.sessionInfo?this.rebuildWatch():this.initWatch()];case 2:return r.sent(),console.log("[realtime] client successfully resumed (".concat(this.collectionName," ").concat(this.query,") (").concat(this.watchId,")")),[3,4];case 3:return e=r.sent(),console.error("[realtime] client resume failed (".concat(this.collectionName," ").concat(this.query,") (").concat(this.watchId,")"),e),[3,4];case 4:return[2]}})})},t.prototype.useRetryTicket=function(e){return this.availableRetries[e]&&this.availableRetries[e]>0?(this.availableRetries[e]-=1,console.log("[realtime] ".concat(e," use a retry ticket, now only ").concat(this.availableRetries[e]," retry left")),!0):!1},t.prototype.handleServerEvents=function(e){return Ci(this,void 0,void 0,function(){var r;return Zn(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.scheduleSendACK(),[4,this.handleServerEventsInternel(e)];case 1:return n.sent(),this.postHandleServerEventsValidityCheck(e),[3,3];case 2:throw r=n.sent(),console.error("[realtime listener] internal non-fatal error: handle server events failed with error: ",r),r;case 3:return[2]}})})},t.prototype.handleServerEventsInternel=function(e){return Ci(this,void 0,void 0,function(){var r,n,i,o,u,f,p,l,d,m,y,b;return Zn(this,function(w){switch(w.label){case 0:if(r=e.requestId,n=e.msgData.events,i=e.msgType,!n.length||!this.sessionInfo)return[2];o=this.sessionInfo;try{u=n.map(g7)}catch(S){return this.closeWithError(new oo({errCode:ai.SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA,errMsg:S})),[2]}f=CN([],o.currentDocs,!0),p=!1,l=function(S,E){var R,O,C,I,P,D,q,q,j,j,q,U,U,Y,$,L;return Zn(this,function(H){switch(H.label){case 0:return R=u[S],o.currentEventId>=R.id?(!u[S-1]||R.id>u[S-1].id?console.warn("[realtime] duplicate event received, cur ".concat(o.currentEventId," but got ").concat(R.id)):console.error("[realtime listener] server non-fatal error: events out of order (the latter event's id is smaller than that of the former) (requestId ".concat(r,")")),[2,"continue"]):[3,1];case 1:if(o.currentEventId!==R.id-1)return[3,2];switch(R.dataType){case"update":{if(!R.doc)switch(R.queueType){case"update":case"dequeue":{if(O=f.find(function(Q){return Q._id===R.docId}),O){if(C=o7(O),R.updatedFields&&Object.keys(R.updatedFields).forEach(function(Q){i$(C,Q,R.updatedFields[Q])}),R.removedFields)for(I=0,P=R.removedFields;I<P.length;I++)D=P[I],d$(C,D);R.doc=C}else console.error("[realtime listener] internal non-fatal server error: unexpected update dataType event where no doc is associated.");break}case"enqueue":throw q=new oo({errCode:ai.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="update" and queueType="enqueue" (requestId '.concat(e.requestId,")")}),d.closeWithError(q),q}break}case"replace":{if(!R.doc)throw q=new oo({errCode:ai.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="replace" (requestId '.concat(e.requestId,")")}),d.closeWithError(q),q;break}case"remove":{j=f.find(function(Q){return Q._id===R.docId}),j?R.doc=j:console.error("[realtime listener] internal non-fatal server error: unexpected remove event where no doc is associated.");break}case"limit":{if(!R.doc)switch(R.queueType){case"dequeue":{j=f.find(function(Q){return Q._id===R.docId}),j?R.doc=j:console.error("[realtime listener] internal non-fatal server error: unexpected limit dataType event where no doc is associated.");break}case"enqueue":throw q=new oo({errCode:ai.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="limit" and queueType="enqueue" (requestId '.concat(e.requestId,")")}),d.closeWithError(q),q}break}}switch(R.queueType){case"init":{p?f.push(R.doc):(p=!0,f=[R.doc]);break}case"enqueue":{f.push(R.doc);break}case"dequeue":{U=f.findIndex(function(Q){return Q._id===R.docId}),U>-1?f.splice(U,1):console.error("[realtime listener] internal non-fatal server error: unexpected dequeue event where no doc is associated.");break}case"update":{U=f.findIndex(function(Q){return Q._id===R.docId}),U>-1?f[U]=R.doc:console.error("[realtime listener] internal non-fatal server error: unexpected queueType update event where no doc is associated.");break}}return(S===E-1||u[S+1]&&u[S+1].id!==R.id)&&(Y=CN([],f,!0),$=u.slice(0,S+1).filter(function(Q){return Q.id===R.id}),d.sessionInfo.currentEventId=R.id,d.sessionInfo.currentDocs=f,L=new ON({id:R.id,docChanges:$,docs:Y,msgType:i}),d.listener.onChange(L)),[3,4];case 2:return console.warn("[realtime listener] event received is out of order, cur ".concat(d.sessionInfo.currentEventId," but got ").concat(R.id)),[4,d.rebuildWatch()];case 3:return H.sent(),[2,{value:void 0}];case 4:return[2]}})},d=this,m=0,y=u.length,w.label=1;case 1:return m<y?[5,l(m,y)]:[3,4];case 2:if(b=w.sent(),typeof b=="object")return[2,b.value];w.label=3;case 3:return m++,[3,1];case 4:return[2]}})})},t.prototype.postHandleServerEventsValidityCheck=function(e){if(!this.sessionInfo){console.error("[realtime listener] internal non-fatal error: sessionInfo lost after server event handling, this should never occur");return}if(this.sessionInfo.expectEventId&&this.sessionInfo.currentEventId>=this.sessionInfo.expectEventId&&this.clearWaitExpectedEvent(),this.sessionInfo.currentEventId<e.msgData.currEvent){console.warn("[realtime listener] internal non-fatal error: client eventId does not match with server event id after server event handling");return}},t.prototype.clearWaitExpectedEvent=function(){this.waitExpectedTimeoutId&&(clearTimeout(this.waitExpectedTimeoutId),this.waitExpectedTimeoutId=void 0)},t})();function g7(t){var e={id:t.ID,dataType:t.DataType,queueType:t.QueueType,docId:t.DocID,doc:t.Doc&&t.Doc!=="{}"?JSON.parse(t.Doc):void 0};return t.DataType==="update"&&(t.UpdatedFields&&(e.updatedFields=JSON.parse(t.UpdatedFields)),(t.removedFields||t.RemovedFields)&&(e.removedFields=JSON.parse(t.removedFields))),e}var Lj={1e3:{code:1e3,name:"Normal Closure",description:"Normal closure; the connection successfully completed whatever purpose for which it was created."},1001:{code:1001,name:"Going Away",description:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{code:1002,name:"Protocol Error",description:"The endpoint is terminating the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data)."},1005:{code:1005,name:"No Status Received",description:"Indicates that no status code was provided even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{code:1007,name:"Invalid frame payload data",description:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{code:1008,name:"Policy Violation",description:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{code:1009,name:"Message too big",description:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{code:1010,name:"Missing Extension",description:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{code:1011,name:"Internal Error",description:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{code:1012,name:"Service Restart",description:"The server is terminating the connection because it is restarting."},1013:{code:1013,name:"Try Again Later",description:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{code:1014,name:"Bad Gateway",description:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{code:1015,name:"TLS Handshake",description:"Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},3e3:{code:3e3,name:"Reconnect WebSocket",description:"The client is terminating the connection because it wants to reconnect"},3001:{code:3001,name:"No Realtime Listeners",description:"The client is terminating the connection because no more realtime listeners exist"},3002:{code:3002,name:"Heartbeat Ping Error",description:"The client is terminating the connection due to its failure in sending heartbeat messages"},3003:{code:3003,name:"Heartbeat Pong Timeout Error",description:"The client is terminating the connection because no heartbeat response is received from the server"},3050:{code:3050,name:"Server Close",description:"The client is terminating the connection because no heartbeat response is received from the server"}},no;(function(t){t[t.NormalClosure=1e3]="NormalClosure",t[t.GoingAway=1001]="GoingAway",t[t.ProtocolError=1002]="ProtocolError",t[t.UnsupportedData=1003]="UnsupportedData",t[t.NoStatusReceived=1005]="NoStatusReceived",t[t.AbnormalClosure=1006]="AbnormalClosure",t[t.InvalidFramePayloadData=1007]="InvalidFramePayloadData",t[t.PolicyViolation=1008]="PolicyViolation",t[t.MessageTooBig=1009]="MessageTooBig",t[t.MissingExtension=1010]="MissingExtension",t[t.InternalError=1011]="InternalError",t[t.ServiceRestart=1012]="ServiceRestart",t[t.TryAgainLater=1013]="TryAgainLater",t[t.BadGateway=1014]="BadGateway",t[t.TLSHandshake=1015]="TLSHandshake",t[t.ReconnectWebSocket=3e3]="ReconnectWebSocket",t[t.NoRealtimeListeners=3001]="NoRealtimeListeners",t[t.HeartbeatPingError=3002]="HeartbeatPingError",t[t.HeartbeatPongTimeoutError=3003]="HeartbeatPongTimeoutError",t[t.NoAuthentication=3050]="NoAuthentication"})(no||(no={}));var FS=function(t,e){var r=Lj[t],n=r?"".concat(r.name,", code ").concat(t,", reason ").concat(e||r.description):"code ".concat(t);return new oo({errCode:ai.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED,errMsg:n})},kj=null,Mj="web";function b7(){return kj}function _7(t){kj=t}function IN(){return Mj}function w7(t){Mj=t}var Yy=function(){return Yy=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Yy.apply(this,arguments)},Po=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},Uo=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},HS={OPEN:1},xN=3,S7=5e3,E7=1e4,T7=5,A7=1e4,O7=2,R7=2,C7=5e3,I7=(function(){function t(e){var r=this;this.virtualWSClient=new Set,this.queryIdClientMap=new Map,this.watchIdClientMap=new Map,this.pingFailed=0,this.pongMissed=0,this.logins=new Map,this.wsReadySubsribers=[],this.wsResponseWait=new Map,this.rttObserved=[],this.send=function(n){return Po(r,void 0,void 0,function(){var i=this;return Uo(this,function(o){return[2,new Promise(function(u,f){(function(){return Po(i,void 0,void 0,function(){var p,l,d,m,y,b,w,S,E=this;return Uo(this,function(R){switch(R.label){case 0:l=!1,d=!1,m=function(O){l=!0,p&&clearTimeout(p),u(O)},y=function(O){d=!0,p&&clearTimeout(p),f(O)},n.timeout&&(p=setTimeout(function(){(function(){return Po(E,void 0,void 0,function(){return Uo(this,function(O){switch(O.label){case 0:return!l||!d?[4,EE(0)]:[3,2];case 1:O.sent(),(!l||!d)&&y(new u7("wsclient.send timedout")),O.label=2;case 2:return[2]}})})})()},n.timeout)),R.label=1;case 1:return R.trys.push([1,8,,9]),this.wsInitPromise!==void 0||this.wsInitPromise!==null?[4,this.wsInitPromise]:[3,3];case 2:R.sent(),R.label=3;case 3:if(!this.ws)return y(new Error("invalid state: ws connection not exists, can not send message")),[2];if(this.ws.readyState!==HS.OPEN)return y(new Error("ws readyState invalid: ".concat(this.ws.readyState,", can not send message"))),[2];n.waitResponse&&(b={resolve:m,reject:y,skipOnMessage:n.skipOnMessage},this.wsResponseWait.set(n.msg.requestId,b)),R.label=4;case 4:return R.trys.push([4,6,,7]),[4,this.ws.send(JSON.stringify(n.msg))];case 5:return R.sent(),n.waitResponse||m(void 0),[3,7];case 6:return w=R.sent(),w&&(y(w),n.waitResponse&&this.wsResponseWait.delete(n.msg.requestId)),[3,7];case 7:return[3,9];case 8:return S=R.sent(),y(S),[3,9];case 9:return[2]}})})})()})]})})},this.closeAllClients=function(n){r.virtualWSClient.forEach(function(i){i.closeWithError(n)})},this.pauseClients=function(n){(n||r.virtualWSClient).forEach(function(i){i.pause()})},this.resumeClients=function(n){(n||r.virtualWSClient).forEach(function(i){i.resume()})},this.initWebSocketConnection=function(n,i){return i===void 0&&(i=r.maxReconnect),Po(r,void 0,void 0,function(){var o=this;return Uo(this,function(u){switch(u.label){case 0:if(n&&this.reconnectState)return[2];if(n&&(this.reconnectState=!0),this.wsInitPromise!==void 0&&this.wsInitPromise!==null)return[2,this.wsInitPromise];n&&this.pauseClients(),this.close(no.ReconnectWebSocket),this.wsInitPromise=new Promise(function(f,p){(function(){return Po(o,void 0,void 0,function(){var l,d,m,y=this;return Uo(this,function(b){switch(b.label){case 0:return b.trys.push([0,6,,11]),[4,this.getWsSign()];case 1:return l=b.sent(),[4,new Promise(function(w){var S=l.wsUrl||"wss://tcb-ws.tencentcloudapi.com",E=b7();y.ws=E?new E(S):new WebSocket(S),w(void 0)})];case 2:return b.sent(),this.ws.connect?[4,this.ws.connect()]:[3,4];case 3:b.sent(),b.label=4;case 4:return[4,this.initWebSocketEvent()];case 5:return b.sent(),f(),n&&(this.resumeClients(),this.reconnectState=!1),[3,11];case 6:return d=b.sent(),console.error("[realtime] initWebSocketConnection connect fail",d),i>0?(m=!0,this.wsInitPromise=void 0,m?[4,EE(this.reconnectInterval)]:[3,8]):[3,9];case 7:b.sent(),n&&(this.reconnectState=!1),b.label=8;case 8:return f(this.initWebSocketConnection(n,i-1)),[3,10];case 9:p(d),n&&this.closeAllClients(new oo({errCode:ai.SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL,errMsg:d})),b.label=10;case 10:return[3,11];case 11:return[2]}})})})()}),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.wsInitPromise];case 2:return u.sent(),this.wsReadySubsribers.forEach(function(f){var p=f.resolve;return p()}),[3,5];case 3:return u.sent(),this.wsReadySubsribers.forEach(function(f){var p=f.reject;return p()}),[3,5];case 4:return this.wsInitPromise=void 0,this.wsReadySubsribers=[],[7];case 5:return[2]}})})},this.initWebSocketEvent=function(){return new Promise(function(n,i){if(!r.ws)throw new Error("can not initWebSocketEvent, ws not exists");var o=!1;r.ws.onopen=function(u){console.warn("[realtime] ws event: open",u),o=!0,n()},r.ws.onerror=function(u){r.logins=new Map,o?(console.error("[realtime] ws event: error",u),r.clearHeartbeat(),r.virtualWSClient.forEach(function(f){return f.closeWithError(new oo({errCode:ai.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR,errMsg:u}))})):(console.error("[realtime] ws open failed with ws event: error",u),i(u))},r.ws.onclose=function(u){switch(console.warn("[realtime] ws event: close",u),r.logins=new Map,r.clearHeartbeat(),u.code){case no.ReconnectWebSocket:break;case no.NoRealtimeListeners:break;case no.HeartbeatPingError:case no.HeartbeatPongTimeoutError:case no.NormalClosure:case no.AbnormalClosure:{r.maxReconnect>0?r.initWebSocketConnection(!0,r.maxReconnect):r.closeAllClients(FS(u.code));break}case no.NoAuthentication:{r.closeAllClients(FS(u.code,u.reason));break}default:r.maxReconnect>0?r.initWebSocketConnection(!0,r.maxReconnect):r.closeAllClients(FS(u.code))}},r.ws.onmessage=function(u){var f,p=((f=u.data)===null||f===void 0?void 0:f.data)||u.data;r.heartbeat();var l;try{l=typeof p=="string"?JSON.parse(p):p}catch(O){throw new Error("[realtime] onMessage parse res.data error: ".concat(O))}if(l.msgType==="ERROR"){var d=null;r.virtualWSClient.forEach(function(O){O.watchId===l.watchId&&(d=O)}),d&&d.listener.onError(l)}var m=r.wsResponseWait.get(l.requestId);if(m){try{l.msgType==="ERROR"?m.reject(new s7(l)):m.resolve(l)}catch(O){console.error("ws onMessage responseWaitSpec.resolve(msg) errored:",O)}finally{r.wsResponseWait.delete(l.requestId)}if(m.skipOnMessage)return}if(l.msgType==="PONG"){if(r.lastPingSendTS){var y=Date.now()-r.lastPingSendTS;if(y>E7){console.warn("[realtime] untrusted rtt observed: ".concat(y));return}r.rttObserved.length>=xN&&r.rttObserved.splice(0,r.rttObserved.length-xN+1),r.rttObserved.push(y)}return}var b=l.watchId&&r.watchIdClientMap.get(l.watchId);if(b)b.onMessage(l);else switch(console.error("[realtime] no realtime listener found responsible for watchId ".concat(l.watchId,": "),l),l.msgType){case"INIT_EVENT":case"NEXT_EVENT":case"CHECK_EVENT":{b=r.queryIdClientMap.get(l.msgData.queryID),b&&b.onMessage(l);break}default:for(var w=0,S=Array.from(r.watchIdClientMap.entries());w<S.length;w++){var E=S[w],R=E[1];R.onMessage(l);break}}},r.heartbeat()})},this.isWSConnected=function(){return!!(r.ws&&r.ws.readyState===HS.OPEN)},this.onceWSConnected=function(){return Po(r,void 0,void 0,function(){var n=this;return Uo(this,function(i){return this.isWSConnected()?[2]:this.wsInitPromise!==null&&this.wsInitPromise!==void 0?[2,this.wsInitPromise]:[2,new Promise(function(o,u){n.wsReadySubsribers.push({resolve:o,reject:u})})]})})},this.webLogin=function(n,i){return Po(r,void 0,void 0,function(){var o,u,f,p,l,d,m,y,b=this;return Uo(this,function(w){switch(w.label){case 0:if(!i){if(n){if(o=this.logins.get(n),o){if(o.loggedIn&&o.loginResult)return[2,o.loginResult];if(o.loggingInPromise!==null&&o.loggingInPromise!==void 0)return[2,o.loggingInPromise]}}else if(u=this.logins.get(""),u?.loggingInPromise!==null&&u?.loggingInPromise!==void 0)return[2,u.loggingInPromise]}f=new Promise(function(S,E){(function(){return Po(b,void 0,void 0,function(){var R,O,C,I,P;return Uo(this,function(D){switch(D.label){case 0:return D.trys.push([0,3,,4]),[4,this.getWsSign()];case 1:return R=D.sent(),O={envId:R.envId||"",accessToken:"",referrer:"web",sdkVersion:"",dataVersion:""},C={watchId:void 0,requestId:Nf(),msgType:"LOGIN",msgData:O,exMsgData:{runtime:IN(),signStr:R.signStr,secretVersion:R.secretVersion}},[4,this.send({msg:C,waitResponse:!0,skipOnMessage:!0,timeout:C7})];case 2:return I=D.sent(),I.msgData.code?E(new Error("".concat(I.msgData.code," ").concat(I.msgData.message))):S({envId:R.envId}),[3,4];case 3:return P=D.sent(),E(P),[3,4];case 4:return[2]}})})})()}),p=n&&this.logins.get(n),l=Date.now(),p?(p.loggedIn=!1,p.loggingInPromise=f,p.loginStartTS=l):(p={loggedIn:!1,loggingInPromise:f,loginStartTS:l},this.logins.set(n||"",p)),w.label=1;case 1:return w.trys.push([1,3,,4]),[4,f];case 2:if(d=w.sent(),m=n&&this.logins.get(n),m&&m===p&&m.loginStartTS===l)return p.loggedIn=!0,p.loggingInPromise=void 0,p.loginStartTS=void 0,p.loginResult=d,[2,d];if(m){if(m.loggedIn&&m.loginResult)return[2,m.loginResult];if(m.loggingInPromise!==null&&m.loggingInPromise!==void 0)return[2,m.loggingInPromise];throw new Error("ws unexpected login info")}else throw new Error("ws login info reset");case 3:throw y=w.sent(),p.loggedIn=!1,p.loggingInPromise=void 0,p.loginStartTS=void 0,p.loginResult=void 0,y;case 4:return[2]}})})},this.getWsSign=function(){return Po(r,void 0,void 0,function(){var n,i,o,u,f,p,l;return Uo(this,function(d){switch(d.label){case 0:return this.wsSign&&this.wsSign.expiredTs>Date.now()?[2,this.wsSign]:(n=Date.now()+6e4,[4,this.context.appConfig.request.send("auth.wsWebSign",{runtime:IN()})]);case 1:if(i=d.sent(),i.code)throw new Error("[tcb-js-sdk] : ".concat(i.code));if(i.data)return o=i.data,u=o.signStr,f=o.wsUrl,p=o.secretVersion,l=o.envId,[2,{signStr:u,wsUrl:f,secretVersion:p,envId:l,expiredTs:n}];throw new Error("[tcb-js-sdk] ")}})})},this.getWaitExpectedTimeoutLength=function(){return r.rttObserved.length?r.rttObserved.reduce(function(n,i){return n+i})/r.rttObserved.length*1.5:S7},this.ping=function(){return Po(r,void 0,void 0,function(){var n;return Uo(this,function(i){switch(i.label){case 0:return n={watchId:void 0,requestId:Nf(),msgType:"PING",msgData:null},[4,this.send({msg:n})];case 1:return i.sent(),[2]}})})},this.onWatchStart=function(n,i){r.queryIdClientMap.set(i,n)},this.onWatchClose=function(n,i){i&&r.queryIdClientMap.delete(i),r.watchIdClientMap.delete(n.watchId),r.virtualWSClient.delete(n),r.virtualWSClient.size||r.close(no.NoRealtimeListeners)},this.maxReconnect=e.maxReconnect||T7,this.reconnectInterval=e.reconnectInterval||A7,this.context=e.context}return t.prototype.clearHeartbeat=function(){this.pingTimeoutId&&clearTimeout(this.pingTimeoutId),this.pongTimeoutId&&clearTimeout(this.pongTimeoutId)},t.prototype.close=function(e){this.clearHeartbeat(),this.ws&&(this.ws.close(e,Lj[e].name),this.ws=void 0)},t.prototype.watch=function(e){!this.ws&&(this.wsInitPromise===void 0||this.wsInitPromise===null)&&this.initWebSocketConnection(!1);var r=new y7(Yy(Yy({},e),{send:this.send,login:this.webLogin,isWSConnected:this.isWSConnected,onceWSConnected:this.onceWSConnected,getWaitExpectedTimeoutLength:this.getWaitExpectedTimeoutLength,onWatchStart:this.onWatchStart,onWatchClose:this.onWatchClose,debug:!0}));return this.virtualWSClient.add(r),this.watchIdClientMap.set(r.watchId,r),r.listener},t.prototype.heartbeat=function(e){var r=this;this.clearHeartbeat(),this.pingTimeoutId=setTimeout(function(){(function(){return Po(r,void 0,void 0,function(){var n=this;return Uo(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),!this.ws||this.ws.readyState!==HS.OPEN?[2]:(this.lastPingSendTS=Date.now(),[4,this.ping()]);case 1:return i.sent(),this.pingFailed=0,this.pongTimeoutId=setTimeout(function(){console.error("pong timed out"),n.pongMissed<R7?(n.pongMissed+=1,n.heartbeat(!0)):n.initWebSocketConnection(!0)},this.context.appConfig.realtimePongWaitTimeout),[3,3];case 2:return i.sent(),this.pingFailed<O7?(this.pingFailed+=1,this.heartbeat()):this.close(no.HeartbeatPingError),[3,3];case 3:return[2]}})})})()},e?0:this.context.appConfig.realtimePingInterval)},t})(),Bj={target:"database",entity:function(){var t=this.platform,e=t.adapter,r=t.runtime;_7(e.wsClass),w7(r)}},zj={name:"realtime",IIFE:!0,entity:function(){this.prototype.wsClientClass=I7}};try{cloudbase.registerComponent(zj),cloudbase.registerHook(Bj)}catch{}function x7(t){try{t.registerComponent(zj),t.registerHook(Bj)}catch(e){console.warn(e)}}var N7=function(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var f=t.length-1;f>=0;f--)(u=t[f])&&(o=(i<3?u(o):i>3?u(e,r,o):u(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o},GS=function(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)},P7=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},U7=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},q7=Bn,D7=Sg,j7=Ag,$j="analytics",L7=["mall"];function k7(t){if(Object.prototype.toString.call(t).slice(8,-1)!=="Object")return!1;var e=t.report_data,r=t.report_type;return!(L7.includes(r)===!1||Object.prototype.toString.call(e).slice(8,-1)!=="Object"||e.action_time!==void 0&&!Number.isInteger(e.action_time)||typeof e.action_type!="string")}var M7=(function(){function t(){}return t.prototype.analytics=function(e){return P7(this,void 0,void 0,function(){var r,n,i,o,u;return U7(this,function(f){if(!k7(e))throw new Error(JSON.stringify({code:q7.INVALID_PARAMS,msg:"[".concat($j,".analytics] invalid report data")}));return r="analytics.report",n=e.report_data.action_time===void 0?Math.floor(Date.now()/1e3):e.report_data.action_time,i={analytics_scene:e.report_type,analytics_data:Object.assign({},e.report_data,{action_time:n})},o={requestData:i},u=this.request,u.send(r,o),[2]})})},N7([j7({customInfo:{},title:"",messages:["","  1 -  analytics() ","".concat(D7)]}),GS("design:type",Function),GS("design:paramtypes",[Object]),GS("design:returntype",Promise)],t.prototype,"analytics",null),t})(),B7=new M7,Fj={name:$j,entity:{analytics:B7.analytics}};try{cloudbase.registerComponent(Fj)}catch{}function z7(t){try{t.registerComponent(Fj)}catch(e){console.warn(e)}}var Nv={},TE=function(t,e){return TE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},TE(t,e)};function Ip(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}TE(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var lr=function(){return lr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},lr.apply(this,arguments)};function gs(t,e,r,n){return new(r||(r=Promise))(function(i,o){function u(l){try{p(n.next(l))}catch(d){o(d)}}function f(l){try{p(n.throw(l))}catch(d){o(d)}}function p(l){var d;l.done?i(l.value):(d=l.value,d instanceof r?d:new r(function(m){m(d)})).then(u,f)}p((n=n.apply(t,[])).next())})}function bs(t,e){var r,n,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function f(p){return function(l){return(function(d){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(i=2&d[0]?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return u.label++,{value:d[1],done:!1};case 5:u.label++,n=d[1],d=[0];continue;case 7:d=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!((i=i.length>0&&i[i.length-1])||d[0]!==6&&d[0]!==2)){u=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){u.label=d[1];break}if(d[0]===6&&u.label<i[1]){u.label=i[1],i=d;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(d);break}i[2]&&u.ops.pop(),u.trys.pop();continue}d=e.call(t,u)}catch(m){d=[6,m],n=0}finally{r=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}})([p,l])}}}var Fl=(function(t){function e(r,n){var i=t.call(this,r)||this;return i.name="WxCloudSDKError",i.code=n?.code,i.requestId=n?.requestId,i.originError=n?.originError,i}return Ip(e,t),e})(Error);function AE(){return typeof window<"u"&&window||typeof globalThis<"u"&&globalThis}function $7(){try{var t=AE();return t?typeof wx>"u"?AE().location.href:t.__wxRoute:void 0}catch{}}var Hj=function(t){return gs(void 0,0,void 0,function(){var e,r,n,i;return bs(this,function(o){switch(o.label){case 0:if(!(!((n=t?.auth)===null||n===void 0)&&n.getSession))return[2,""];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,t.auth.getSession()];case 2:return e=o.sent().data,[2,((i=e.session)===null||i===void 0?void 0:i.access_token)||""];case 3:return r=o.sent(),console.log("[WxCloudSDKError] getAccessToken failed",r),[2,""];case 4:return[2]}})})},F7=function(t){var e=t.dataSourceName,r=t.methodName,n=t.params,i=t.realMethodName,o=t.callFunction,u=t.envType,f=u===void 0?"prod":u,p=t.mode,l=t.cloud;return gs(void 0,0,void 0,function(){var d,m,y,b,w,S,E;return bs(this,function(R){switch(R.label){case 0:return d={data:{},requestId:""},[4,Hj(l)];case 1:m=R.sent(),R.label=2;case 2:return R.trys.push([2,4,,5]),[4,o({name:"lowcode-datasource",data:lr({dataSourceName:e,methodName:r,params:n,userAgent:(C=AE(),C?.navigator?C.navigator.userAgent:typeof wx<"u"&&wx.getSystemInfo?(wx.getSystemInfo({success:function(I){I&&(O=["brand","model","version","system","platform","SDKVersion","language"].map(function(P){return"".concat(P,": ").concat(I[P])}).join(", "))}}),O):void 0),referrer:$7(),"x-sdk-version":"1.8.5",envType:f,mode:p},m?{access_token:m}:{})})];case 3:if(y=R.sent(),b=((S=y?.result)===null||S===void 0?void 0:S.requestId)||y?.requestId||y?.requestID,y?.result.code)throw new Fl("".concat(y?.result.message,`
 models.`).concat(e?"".concat(e,"."):"").concat(i,`
`).concat(y?.result.code,`
ID`).concat(b||"N/A"),{code:y?.result.code,requestId:b});return d.data=((E=y?.result)===null||E===void 0?void 0:E.data)||{},d.requestId=b,[3,5];case 4:throw(w=R.sent()).name==="WxCloudSDKError"?w:(console.log(w),new Fl("".concat(w.message,`
       models.`).concat(e?"".concat(e,"."):"").concat(i,`
      IDN/A`),{code:"UnknownError",originError:w}));case 5:return[2,d]}var O,C})})},NN=function(t){var e=t.sql,r=t.params,n=t.config,i=t.callFunction,o=t.unsafe,u=o!==void 0&&o,f=t.cloud;return gs(void 0,0,void 0,function(){return bs(this,function(p){return[2,F7({realMethodName:"$runSQL",methodName:"callWedaApi",params:{action:"RunMysqlCommand",data:{sqlTemplate:e,config:n,parameter:u?"":Object.entries(r||{}).reduce(function(l,d){var m=d[0],y=d[1];if(y!==void 0){var b="OBJECT";switch(typeof y){case"boolean":b="BOOLEAN";break;case"number":b="NUMBER";break;case"string":b="STRING";break;default:b=Array.isArray(y)?"ARRAY":"OBJECT"}l.push({key:m,type:b,value:b==="STRING"?y:JSON.stringify(y)})}return l},[])||[]}},callFunction:i,mode:"sdk",cloud:f})]})})},H7=function(t,e){return{$runSQL:function(r,n,i){return gs(this,0,void 0,function(){return bs(this,function(o){switch(o.label){case 0:return[4,NN({sql:r,params:n,config:lr(lr({},i),{preparedStatements:!0}),callFunction:t,cloud:e})];case 1:return[2,o.sent()]}})})},$runSQLRaw:function(r,n){return gs(this,0,void 0,function(){return bs(this,function(i){switch(i.label){case 0:return[4,NN({sql:r,params:[],config:lr(lr({},n),{preparedStatements:!1}),callFunction:t,cloud:e})];case 1:return[2,i.sent()]}})})}}},PN={filter:{where:{}},select:{$master:!0}};function ns(t){return{getUrl:function(e){return"".concat(e,"/").concat(t)},method:"post"}}var G7={get:lr(lr({},ns("get")),{defaultParams:lr({},PN)}),list:lr(lr({},ns("list")),{defaultParams:lr({},PN)}),create:ns("create"),createMany:ns("createMany"),update:lr(lr({},ns("update")),{method:"put"}),updateMany:lr(lr({},ns("updateMany")),{method:"put"}),upsert:ns("upsert"),delete:ns("delete"),deleteMany:ns("deleteMany")},Pv="Unknown error occurred",UN="NotSupported",W7=function(t,e,r,n){var i=H7(t,n?.cloud);return new Proxy({},{get:function(o,u){if(typeof u=="string")return Object.prototype.hasOwnProperty.call(i,u)?i[u]:V7(r,u,e,n)}})},qN=function(t,e,r,n,i){return new Fl("".concat(t,`
 models.`).concat(e,".").concat(r,`
`).concat(n,`
ID`).concat(i),{code:n,requestId:i})},V7=function(t,e,r,n){var i=new Proxy({},{get:function(o,u){if(u!=="runSQLTemplate"){var f=G7[u];if(!f){var p=new Error(": ".concat(u));throw new Fl(p.message||Pv,{originError:p,code:UN,requestId:"N/A"})}return function(l){return l===void 0&&(l={}),gs(void 0,0,void 0,function(){var d,m,y,b,w,S,E,R,O,C;return bs(this,function(I){switch(I.label){case 0:d=f.getUrl,m=f.method,y=f.defaultParams,b=y===void 0?{}:y,w=Object.assign({},b,l),S=w.envType==="pre"?"pre":"prod",E=[t,S,d(e)].join("/"),I.label=1;case 1:return I.trys.push([1,3,,4]),[4,r({url:E,body:JSON.stringify(w),method:m})];case 2:if((R=I.sent()).code)throw qN(R?.message,e,u,R?.code,R?.requestId);return u==="get"&&Object.assign(R,{data:(C=R.data.record)!==null&&C!==void 0?C:R.data}),[2,R];case 3:throw O=I.sent(),new Fl(O?.message||Pv,{originError:O});case 4:return[2]}})})}}if(!n?.sqlBaseUrl)throw p=new Error(": ".concat(u)),new Fl(p.message||Pv,{originError:p,code:UN,requestId:"N/A"});return function(l){return gs(void 0,0,void 0,function(){var d,m,y,b,w,S,E,R,O,C,I,P,D,j,q,U;return bs(this,function(Y){switch(Y.label){case 0:d=l.params,m=l.templateName,y=l.envType,b=y==="pre"?"pre":"prod",w=[n.sqlBaseUrl,b,m,"run"].join("/"),S=Object.entries(d||{}).reduce(function($,L){var H=L[0],Q=L[1];if(Q!==void 0){var ce="OBJECT";switch(typeof Q){case"boolean":ce="BOOLEAN";break;case"number":ce="NUMBER";break;case"string":ce="STRING";break;default:ce=Array.isArray(Q)?"ARRAY":"OBJECT"}$.push({key:H,type:ce,value:ce==="STRING"?Q:JSON.stringify(Q)})}return $},[]),Y.label=1;case 1:return Y.trys.push([1,3,,4]),[4,r({url:w,body:JSON.stringify({parameter:S}),method:"POST"})];case 2:if(E=Y.sent(),(O=E?.Response)===null||O===void 0?void 0:O.Error)throw qN((I=(C=E?.Response)===null||C===void 0?void 0:C.Error)===null||I===void 0?void 0:I.Message,e,u,(D=(P=E?.Response)===null||P===void 0?void 0:P.Error)===null||D===void 0?void 0:D.Code,(j=E?.Response)===null||j===void 0?void 0:j.RequestId);return[2,lr(lr({},(q=E?.Response)!==null&&q!==void 0?q:{}),{data:(U=E?.Response)===null||U===void 0?void 0:U.Data})];case 3:throw R=Y.sent(),new Fl(R?.message||Pv,{originError:R});case 4:return[2]}})})}}});return i},Y7=(function(){function t(e){var r=this;this.map=new Map,e&&(e instanceof Headers?e.forEach(function(n,i){r.append(i,n)}):Array.isArray(e)?e.forEach(function(n){var i=n[0],o=n[1];r.append(i,o)}):typeof e=="object"&&Object.keys(e).forEach(function(n){r.append(n,e[n])}))}return t.prototype.append=function(e,r){var n=e.toLowerCase(),i=this.map.get(n);i?this.map.set(n,"".concat(i,", ").concat(r)):this.map.set(n,String(r))},t.prototype.delete=function(e){this.map.delete(e.toLowerCase())},t.prototype.forEach=function(e,r){var n=this;this.map.forEach(function(i,o){e.call(r,i,o,n)})},t.prototype.get=function(e){return this.map.get(e.toLowerCase())||null},t.prototype.has=function(e){return this.map.has(e.toLowerCase())},t.prototype.set=function(e,r){this.map.set(e.toLowerCase(),String(r))},t.prototype.entries=function(){return this.map.entries()},t.prototype.keys=function(){return this.map.keys()},t.prototype.values=function(){return this.map.values()},t.prototype.getSetCookie=function(){var e=[];return this.map.forEach(function(r,n){n==="set-cookie"&&e.push(r)}),e},t.prototype.toJSON=function(){var e={};return this.map.forEach(function(r,n){e[n]=r}),e},t.prototype[Symbol.iterator]=function(){return this.entries()},t})();typeof globalThis!="object"||globalThis.Headers||(globalThis.Headers=Y7);var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nu,gy,qi=function(t){try{return!!t()}catch{return!0}},Mg=!qi(function(){var t=(function(){}).bind();return typeof t!="function"||t.hasOwnProperty("prototype")}),Wj=Mg,Vj=Function.prototype,OE=Vj.call,K7=Wj&&Vj.bind.bind(OE,OE),Sn=Wj?K7:function(t){return function(){return OE.apply(t,arguments)}},Yj=Sn,Q7=Yj({}.toString),J7=Yj("".slice),H2=function(t){return J7(Q7(t),8,-1)},X7=qi,Z7=H2,WS=Object,eF=Sn("".split),Kj=X7(function(){return!WS("z").propertyIsEnumerable(0)})?function(t){return Z7(t)==="String"?eF(t,""):WS(t)}:WS,G2=function(t){return t==null},tF=G2,rF=TypeError,W2=function(t){if(tF(t))throw new rF("Can't call method on "+t);return t},nF=Kj,iF=W2,Gp=function(t){return nF(iF(t))},Wp={},jh=function(t){return t&&t.Math===Math&&t},hi=jh(typeof globalThis=="object"&&globalThis)||jh(typeof window=="object"&&window)||jh(typeof self=="object"&&self)||jh(typeof Pf=="object"&&Pf)||jh(typeof Pf=="object"&&Pf)||(function(){return this})()||Function("return this")(),VS=typeof document=="object"&&document.all,pi=VS===void 0&&VS!==void 0?function(t){return typeof t=="function"||t===VS}:function(t){return typeof t=="function"},oF=pi,DN=hi.WeakMap,aF=oF(DN)&&/native code/.test(String(DN)),sF=pi,dc=function(t){return typeof t=="object"?t!==null:sF(t)},vo=!qi(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),hc={},jN=dc,RE=hi.document,uF=jN(RE)&&jN(RE.createElement),Qj=function(t){return uF?RE.createElement(t):{}},lF=Qj,Jj=!vo&&!qi(function(){return Object.defineProperty(lF("div"),"a",{get:function(){return 7}}).a!==7}),Xj=vo&&qi(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),cF=dc,fF=String,dF=TypeError,pc=function(t){if(cF(t))return t;throw new dF(fF(t)+" is not an object")},hF=Mg,Uv=Function.prototype.call,_s=hF?Uv.bind(Uv):function(){return Uv.apply(Uv,arguments)},V2={},YS=V2,KS=hi,pF=pi,LN=function(t){return pF(t)?t:void 0},wd=function(t,e){return arguments.length<2?LN(YS[t])||LN(KS[t]):YS[t]&&YS[t][e]||KS[t]&&KS[t][e]},Zj=Sn({}.isPrototypeOf),kN=hi.navigator,MN=kN&&kN.userAgent,eL=hi,QS=MN?String(MN):"",BN=eL.process,zN=eL.Deno,$N=BN&&BN.versions||zN&&zN.version,FN=$N&&$N.v8;FN&&(gy=(nu=FN.split("."))[0]>0&&nu[0]<4?1:+(nu[0]+nu[1])),!gy&&QS&&(!(nu=QS.match(/Edge\/(\d+)/))||nu[1]>=74)&&(nu=QS.match(/Chrome\/(\d+)/))&&(gy=+nu[1]);var HN=gy,mF=qi,vF=hi.String,tL=!!Object.getOwnPropertySymbols&&!mF(function(){var t=Symbol("symbol detection");return!vF(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&HN&&HN<41}),rL=tL&&!Symbol.sham&&typeof Symbol.iterator=="symbol",yF=wd,gF=pi,bF=Zj,_F=Object,nL=rL?function(t){return typeof t=="symbol"}:function(t){var e=yF("Symbol");return gF(e)&&bF(e.prototype,_F(t))},wF=String,iL=function(t){try{return wF(t)}catch{return"Object"}},SF=pi,EF=iL,TF=TypeError,Y2=function(t){if(SF(t))return t;throw new TF(EF(t)+" is not a function")},AF=Y2,OF=G2,K2=function(t,e){var r=t[e];return OF(r)?void 0:AF(r)},GN=_s,WN=pi,VN=dc,RF=TypeError,oL={exports:{}},YN=hi,CF=Object.defineProperty,IF=hi,xF=function(t,e){try{CF(YN,t,{value:e,configurable:!0,writable:!0})}catch{YN[t]=e}return e},KN="__core-js_shared__",QN=oL.exports=IF[KN]||xF(KN,{});(QN.versions||(QN.versions=[])).push({version:"3.45.0",mode:"pure",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.0/LICENSE",source:"https://github.com/zloirock/core-js"});var Q2=oL.exports,JN=Q2,aL=function(t,e){return JN[t]||(JN[t]=e||{})},NF=W2,PF=Object,Bg=function(t){return PF(NF(t))},UF=Bg,qF=Sn({}.hasOwnProperty),Ca=Object.hasOwn||function(t,e){return qF(UF(t),e)},DF=Sn,jF=0,LF=Math.random(),kF=DF(1.1.toString),sL=function(t){return"Symbol("+(t===void 0?"":t)+")_"+kF(++jF+LF,36)},MF=aL,XN=Ca,BF=sL,zF=tL,$F=rL,Uf=hi.Symbol,JS=MF("wks"),FF=$F?Uf.for||Uf:Uf&&Uf.withoutSetter||BF,Ia=function(t){return XN(JS,t)||(JS[t]=zF&&XN(Uf,t)?Uf[t]:FF("Symbol."+t)),JS[t]},HF=_s,ZN=dc,eP=nL,GF=K2,WF=function(t,e){var r,n;if(WN(r=t.toString)&&!VN(n=GN(r,t))||WN(r=t.valueOf)&&!VN(n=GN(r,t)))return n;throw new RF("Can't convert object to primitive value")},VF=TypeError,YF=Ia("toPrimitive"),KF=function(t,e){if(!ZN(t)||eP(t))return t;var r,n=GF(t,YF);if(n){if(r=HF(n,t,e),!ZN(r)||eP(r))return r;throw new VF("Can't convert object to primitive value")}return WF(t)},QF=nL,uL=function(t){var e=KF(t,"string");return QF(e)?e:e+""},JF=vo,XF=Jj,ZF=Xj,qv=pc,tP=uL,eH=TypeError,XS=Object.defineProperty,tH=Object.getOwnPropertyDescriptor,ZS="enumerable",e1="configurable",t1="writable";hc.f=JF?ZF?function(t,e,r){if(qv(t),e=tP(e),qv(r),typeof t=="function"&&e==="prototype"&&"value"in r&&t1 in r&&!r[t1]){var n=tH(t,e);n&&n[t1]&&(t[e]=r.value,r={configurable:e1 in r?r[e1]:n[e1],enumerable:ZS in r?r[ZS]:n[ZS],writable:!1})}return XS(t,e,r)}:XS:function(t,e,r){if(qv(t),e=tP(e),qv(r),XF)try{return XS(t,e,r)}catch{}if("get"in r||"set"in r)throw new eH("Accessors not supported");return"value"in r&&(t[e]=r.value),t};var Ky,yp,Qy,Vp=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},rH=hc,nH=Vp,zg=vo?function(t,e,r){return rH.f(t,e,nH(1,r))}:function(t,e,r){return t[e]=r,t},iH=sL,rP=aL("keys"),J2=function(t){return rP[t]||(rP[t]=iH(t))},X2={},oH=aF,lL=hi,aH=dc,sH=zg,r1=Ca,n1=Q2,uH=J2,lH=X2,nP="Object already initialized",CE=lL.TypeError,cH=lL.WeakMap;if(oH||n1.state){var pa=n1.state||(n1.state=new cH);pa.get=pa.get,pa.has=pa.has,pa.set=pa.set,Ky=function(t,e){if(pa.has(t))throw new CE(nP);return e.facade=t,pa.set(t,e),e},yp=function(t){return pa.get(t)||{}},Qy=function(t){return pa.has(t)}}else{var pf=uH("state");lH[pf]=!0,Ky=function(t,e){if(r1(t,pf))throw new CE(nP);return e.facade=t,sH(t,pf,e),e},yp=function(t){return r1(t,pf)?t[pf]:{}},Qy=function(t){return r1(t,pf)}}var $g={set:Ky,get:yp,has:Qy,enforce:function(t){return Qy(t)?yp(t):Ky(t,{})},getterFor:function(t){return function(e){var r;if(!aH(e)||(r=yp(e)).type!==t)throw new CE("Incompatible receiver, "+t+" required");return r}}},fH=Mg,cL=Function.prototype,iP=cL.apply,oP=cL.call,dH=typeof Reflect=="object"&&Reflect.apply||(fH?oP.bind(iP):function(){return oP.apply(iP,arguments)}),hH=H2,pH=Sn,IE=function(t){if(hH(t)==="Function")return pH(t)},fL={},Z2={},dL={}.propertyIsEnumerable,hL=Object.getOwnPropertyDescriptor,mH=hL&&!dL.call({1:2},1);Z2.f=mH?function(t){var e=hL(this,t);return!!e&&e.enumerable}:dL;var vH=vo,yH=_s,gH=Z2,bH=Vp,_H=Gp,wH=uL,SH=Ca,EH=Jj,aP=Object.getOwnPropertyDescriptor;fL.f=vH?aP:function(t,e){if(t=_H(t),e=wH(e),EH)try{return aP(t,e)}catch{}if(SH(t,e))return bH(!yH(gH.f,t,e),t[e])};var TH=qi,AH=pi,OH=/#|\.prototype\./,Yp=function(t,e){var r=CH[RH(t)];return r===xH||r!==IH&&(AH(e)?TH(e):!!e)},RH=Yp.normalize=function(t){return String(t).replace(OH,".").toLowerCase()},CH=Yp.data={},IH=Yp.NATIVE="N",xH=Yp.POLYFILL="P",NH=Yp,PH=Y2,UH=Mg,qH=IE(IE.bind),Fg=function(t,e){return PH(t),e===void 0?t:UH?qH(t,e):function(){return t.apply(e,arguments)}},Lh=hi,DH=dH,jH=IE,LH=pi,kH=fL.f,MH=NH,mf=V2,BH=Fg,vf=zg,sP=Ca,zH=function(t){var e=function(r,n,i){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(r);case 2:return new t(r,n)}return new t(r,n,i)}return DH(t,this,arguments)};return e.prototype=t.prototype,e},Sd=function(t,e){var r,n,i,o,u,f,p,l,d,m=t.target,y=t.global,b=t.stat,w=t.proto,S=y?Lh:b?Lh[m]:Lh[m]&&Lh[m].prototype,E=y?mf:mf[m]||vf(mf,m,{})[m],R=E.prototype;for(o in e)n=!(r=MH(y?o:m+(b?".":"#")+o,t.forced))&&S&&sP(S,o),f=E[o],n&&(p=t.dontCallGetSet?(d=kH(S,o))&&d.value:S[o]),u=n&&p?p:e[o],(r||w||typeof f!=typeof u)&&(l=t.bind&&n?BH(u,Lh):t.wrap&&n?zH(u):w&&LH(u)?jH(u):u,(t.sham||u&&u.sham||f&&f.sham)&&vf(l,"sham",!0),vf(E,o,l),w&&(sP(mf,i=m+"Prototype")||vf(mf,i,{}),vf(mf[i],o,u),t.real&&R&&(r||!R[o])&&vf(R,o,u)))},xE=vo,$H=Ca,pL=Function.prototype,FH=xE&&Object.getOwnPropertyDescriptor,uP=$H(pL,"name"),HH={PROPER:uP&&(function(){}).name==="something",CONFIGURABLE:uP&&(!xE||xE&&FH(pL,"name").configurable)},mL={},GH=Math.ceil,WH=Math.floor,VH=Math.trunc||function(t){var e=+t;return(e>0?WH:GH)(e)},YH=VH,eT=function(t){var e=+t;return e!=e||e===0?0:YH(e)},KH=eT,QH=Math.max,JH=Math.min,vL=function(t,e){var r=KH(t);return r<0?QH(r+e,0):JH(r,e)},XH=eT,ZH=Math.min,eG=function(t){var e=XH(t);return e>0?ZH(e,9007199254740991):0},yL=function(t){return eG(t.length)},tG=Gp,rG=vL,nG=yL,iG=function(t){return function(e,r,n){var i=tG(e),o=nG(i);if(o===0)return!t&&-1;var u,f=rG(n,o);if(t&&r!=r){for(;o>f;)if((u=i[f++])!=u)return!0}else for(;o>f;f++)if((t||f in i)&&i[f]===r)return t||f||0;return!t&&-1}},oG={indexOf:iG(!1)},i1=Ca,aG=Gp,sG=oG.indexOf,uG=X2,lP=Sn([].push),gL=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],lG=function(t,e){var r,n=aG(t),i=0,o=[];for(r in n)!i1(uG,r)&&i1(n,r)&&lP(o,r);for(;e.length>i;)i1(n,r=e[i++])&&(~sG(o,r)||lP(o,r));return o},cG=gL,bL=Object.keys||function(t){return lG(t,cG)},fG=vo,dG=Xj,hG=hc,pG=pc,mG=Gp,vG=bL;mL.f=fG&&!dG?Object.defineProperties:function(t,e){pG(t);for(var r,n=mG(e),i=vG(e),o=i.length,u=0;o>u;)hG.f(t,r=i[u++],n[r]);return t};var Dv,yG=wd("document","documentElement"),gG=pc,bG=mL,cP=gL,_G=X2,wG=yG,SG=Qj,NE="prototype",PE="script",_L=J2("IE_PROTO"),o1=function(){},wL=function(t){return"<"+PE+">"+t+"</"+PE+">"},fP=function(t){t.write(wL("")),t.close();var e=t.parentWindow.Object;return t=null,e},by=function(){try{Dv=new ActiveXObject("htmlfile")}catch{}var t,e,r;by=typeof document<"u"?document.domain&&Dv?fP(Dv):(e=SG("iframe"),r="java"+PE+":",e.style.display="none",wG.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(wL("document.F=Object")),t.close(),t.F):fP(Dv);for(var n=cP.length;n--;)delete by[NE][cP[n]];return by()};_G[_L]=!0;var Ql,dP,hP,tT=Object.create||function(t,e){var r;return t!==null?(o1[NE]=gG(t),r=new o1,o1[NE]=null,r[_L]=t):r=by(),e===void 0?r:bG.f(r,e)},EG=!qi(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),TG=Ca,AG=pi,OG=Bg,RG=EG,pP=J2("IE_PROTO"),UE=Object,CG=UE.prototype,SL=RG?UE.getPrototypeOf:function(t){var e=OG(t);if(TG(e,pP))return e[pP];var r=e.constructor;return AG(r)&&e instanceof r?r.prototype:e instanceof UE?CG:null},IG=zg,Kp=function(t,e,r,n){return n&&n.enumerable?t[e]=r:IG(t,e,r),t},xG=qi,NG=pi,PG=dc,UG=tT,mP=SL,qG=Kp,qE=Ia("iterator"),EL=!1;[].keys&&("next"in(hP=[].keys())?(dP=mP(mP(hP)))!==Object.prototype&&(Ql=dP):EL=!0);var DG=!PG(Ql)||xG(function(){var t={};return Ql[qE].call(t)!==t});NG((Ql=DG?{}:UG(Ql))[qE])||qG(Ql,qE,function(){return this});var TL={IteratorPrototype:Ql,BUGGY_SAFARI_ITERATORS:EL},AL={};AL[Ia("toStringTag")]="z";var rT=String(AL)==="[object z]",jG=rT,LG=pi,_y=H2,kG=Ia("toStringTag"),MG=Object,BG=_y((function(){return arguments})())==="Arguments",Qp=jG?_y:function(t){var e,r,n;return t===void 0?"Undefined":t===null?"Null":typeof(r=(function(i,o){try{return i[o]}catch{}})(e=MG(t),kG))=="string"?r:BG?_y(e):(n=_y(e))==="Object"&&LG(e.callee)?"Arguments":n},zG=Qp,$G=rT?{}.toString:function(){return"[object "+zG(this)+"]"},FG=rT,HG=hc.f,GG=zg,WG=Ca,VG=$G,vP=Ia("toStringTag"),Hg=function(t,e,r,n){var i=r?t:t&&t.prototype;i&&(WG(i,vP)||HG(i,vP,{configurable:!0,value:e}),n&&!FG&&GG(i,"toString",VG))},YG=TL.IteratorPrototype,KG=tT,QG=Vp,JG=Hg,XG=Wp,ZG=function(){return this},OL=function(t,e,r,n){var i=e+" Iterator";return t.prototype=KG(YG,{next:QG(+!n,r)}),JG(t,i,!1,!0),XG[i]=ZG,t},eW=Sd,tW=_s,rW=HH,nW=OL,iW=SL,oW=Hg,yP=Kp,gP=Wp,aW=TL,sW=rW.PROPER,jv=aW.BUGGY_SAFARI_ITERATORS,a1=Ia("iterator"),bP="keys",Lv="values",_P="entries",uW=function(){return this},RL=function(t,e,r,n,i,o,u){nW(r,e,n);var f,p,l,d=function(R){if(R===i&&S)return S;if(!jv&&R&&R in b)return b[R];switch(R){case bP:case Lv:case _P:return function(){return new r(this,R)}}return function(){return new r(this)}},m=e+" Iterator",y=!1,b=t.prototype,w=b[a1]||b["@@iterator"]||i&&b[i],S=!jv&&w||d(i),E=e==="Array"&&b.entries||w;if(E&&(f=iW(E.call(new t)))!==Object.prototype&&f.next&&(oW(f,m,!0,!0),gP[m]=uW),sW&&i===Lv&&w&&w.name!==Lv&&(y=!0,S=function(){return tW(w,this)}),i)if(p={values:d(Lv),keys:o?S:d(bP),entries:d(_P)},u)for(l in p)(jv||y||!(l in b))&&yP(b,l,p[l]);else eW({target:e,proto:!0,forced:jv||y},p);return u&&b[a1]!==S&&yP(b,a1,S,{}),gP[e]=S,p},nT=function(t,e){return{value:t,done:e}},lW=Gp,wP=Wp,CL=$g;hc.f;var cW=RL,kv=nT,IL="Array Iterator",fW=CL.set,dW=CL.getterFor(IL);cW(Array,"Array",function(t,e){fW(this,{type:IL,target:lW(t),index:0,kind:e})},function(){var t=dW(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,kv(void 0,!0);switch(t.kind){case"keys":return kv(r,!1);case"values":return kv(e[r],!1)}return kv([r,e[r]],!1)},"values"),wP.Arguments=wP.Array;var hW=Sd,pW=Sn,mW=vL,vW=RangeError,SP=String.fromCharCode,EP=String.fromCodePoint,yW=pW([].join);hW({target:"String",stat:!0,forced:!!EP&&EP.length!==1},{fromCodePoint:function(t){for(var e,r=[],n=arguments.length,i=0;n>i;){if(e=+arguments[i++],mW(e,1114111)!==e)throw new vW(e+" is not a valid code point");r[i]=e<65536?SP(e):SP(55296+((e-=65536)>>10),e%1024+56320)}return yW(r,"")}});var TP=hi,gW=vo,bW=Object.getOwnPropertyDescriptor,_W=qi,wW=!0,SW=Ia("iterator"),Gg=!_W(function(){var t=new URL("b?a=1&b=2&c=3","https://a"),e=t.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return t.pathname="c%20d",e.forEach(function(i,o){e.delete("b"),n+=o+i}),r.delete("a",2),r.delete("b",void 0),!t.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b")||!e.size&&wW||!e.sort||t.href!=="https://a/c%20d?a=1&c=3"||e.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!e[SW]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://").host!=="xn--e1aybc"||new URL("https://a#").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"}),EW=hc,xL=function(t,e,r){return EW.f(t,e,r)},TW=Kp,AW=Zj,OW=TypeError,NL=function(t,e){if(AW(e,t))return t;throw new OW("Incorrect invocation")},RW=Qp,CW=String,Ed=function(t){if(RW(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return CW(t)},IW=Qp,AP=K2,xW=G2,NW=Wp,PW=Ia("iterator"),iT=function(t){if(!xW(t))return AP(t,PW)||AP(t,"@@iterator")||NW[IW(t)]},UW=_s,qW=Y2,DW=pc,jW=iL,LW=iT,kW=TypeError,PL=function(t,e){var r=arguments.length<2?LW(t):e;if(qW(r))return DW(UW(r,t));throw new kW(jW(t)+" is not iterable")},MW=TypeError,Wg=function(t,e){if(t<e)throw new MW("Not enough arguments");return t},UL=Sn([].slice),OP=UL,BW=Math.floor,DE=function(t,e){var r=t.length;if(r<8)for(var n,i,o=1;o<r;){for(i=o,n=t[o];i&&e(t[i-1],n)>0;)t[i]=t[--i];i!==o++&&(t[i]=n)}else for(var u=BW(r/2),f=DE(OP(t,0,u),e),p=DE(OP(t,u),e),l=f.length,d=p.length,m=0,y=0;m<l||y<d;)t[m+y]=m<l&&y<d?e(f[m],p[y])<=0?f[m++]:p[y++]:m<l?f[m++]:p[y++];return t},s1=Sd,qL=hi,oT=function(t){if(!gW)return TP[t];var e=bW(TP,t);return e&&e.value},zW=wd,Mv=_s,Yo=Sn,np=vo,RP=Gg,CP=Kp,$W=xL,FW=function(t,e,r){for(var n in e)r&&r.unsafe&&t[n]?t[n]=e[n]:TW(t,n,e[n],r);return t},HW=Hg,GW=OL,aT=$g,DL=NL,u1=pi,WW=Ca,VW=Fg,YW=Qp,KW=pc,jL=dc,kn=Ed,QW=tT,IP=Vp,xP=PL,JW=iT,Bv=nT,yf=Wg,XW=DE,ZW=Ia("iterator"),sd="URLSearchParams",LL=sd+"Iterator",kL=aT.set,io=aT.getterFor(sd),eV=aT.getterFor(LL),NP=oT("fetch"),Jy=oT("Request"),gp=oT("Headers"),l1=Jy&&Jy.prototype,PP=gp&&gp.prototype,tV=qL.TypeError,rV=qL.encodeURIComponent,nV=String.fromCharCode,iV=zW("String","fromCodePoint"),oV=parseInt,wy=Yo("".charAt),UP=Yo([].join),Eu=Yo([].push),ML=Yo("".replace),aV=Yo([].shift),qP=Yo([].splice),DP=Yo("".split),BL=Yo("".slice),sV=Yo(/./.exec),uV=/\+/g,lV=/^[0-9a-f]+$/i,jP=function(t,e){var r=BL(t,e,e+2);return sV(lV,r)?oV(r,16):NaN},cV=function(t){for(var e=0,r=128;r>0&&(t&r)!==0;r>>=1)e++;return e},fV=function(t){var e=null;switch(t.length){case 1:e=t[0];break;case 2:e=(31&t[0])<<6|63&t[1];break;case 3:e=(15&t[0])<<12|(63&t[1])<<6|63&t[2];break;case 4:e=(7&t[0])<<18|(63&t[1])<<12|(63&t[2])<<6|63&t[3]}return e>1114111?null:e},LP=function(t){for(var e=(t=ML(t,uV," ")).length,r="",n=0;n<e;){var i=wy(t,n);if(i==="%"){if(wy(t,n+1)==="%"||n+3>e){r+="%",n++;continue}var o=jP(t,n+1);if(o!=o){r+=i,n++;continue}n+=2;var u=cV(o);if(u===0)i=nV(o);else{if(u===1||u>4){r+="",n++;continue}for(var f=[o],p=1;p<u&&!(++n+3>e||wy(t,n)!=="%");){var l=jP(t,n+1);if(l!=l){n+=3;break}if(l>191||l<128)break;Eu(f,l),n+=2,p++}if(f.length!==u){r+="";continue}var d=fV(f);d===null?r+="":i=iV(d)}}r+=i,n++}return r},dV=/[!'()~]|%20/g,hV={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},pV=function(t){return hV[t]},kP=function(t){return ML(rV(t),dV,pV)},c1=GW(function(t,e){kL(this,{type:LL,target:io(t).entries,index:0,kind:e})},sd,function(){var t=eV(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,Bv(void 0,!0);var n=e[r];switch(t.kind){case"keys":return Bv(n.key,!1);case"values":return Bv(n.value,!1)}return Bv([n.key,n.value],!1)},!0),zL=function(t){this.entries=[],this.url=null,t!==void 0&&(jL(t)?this.parseObject(t):this.parseQuery(typeof t=="string"?wy(t,0)==="?"?BL(t,1):t:kn(t)))};zL.prototype={type:sd,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,r,n,i,o,u,f,p=this.entries,l=JW(t);if(l)for(r=(e=xP(t,l)).next;!(n=Mv(r,e)).done;){if(o=(i=xP(KW(n.value))).next,(u=Mv(o,i)).done||(f=Mv(o,i)).done||!Mv(o,i).done)throw new tV("Expected sequence with length 2");Eu(p,{key:kn(u.value),value:kn(f.value)})}else for(var d in t)WW(t,d)&&Eu(p,{key:d,value:kn(t[d])})},parseQuery:function(t){if(t)for(var e,r,n=this.entries,i=DP(t,"&"),o=0;o<i.length;)(e=i[o++]).length&&(r=DP(e,"="),Eu(n,{key:LP(aV(r)),value:LP(UP(r,"="))}))},serialize:function(){for(var t,e=this.entries,r=[],n=0;n<e.length;)t=e[n++],Eu(r,kP(t.key)+"="+kP(t.value));return UP(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Xy=function(){DL(this,Of);var t=kL(this,new zL(arguments.length>0?arguments[0]:void 0));np||(this.size=t.entries.length)},Of=Xy.prototype;if(FW(Of,{append:function(t,e){var r=io(this);yf(arguments.length,2),Eu(r.entries,{key:kn(t),value:kn(e)}),np||this.length++,r.updateURL()},delete:function(t){for(var e=io(this),r=yf(arguments.length,1),n=e.entries,i=kn(t),o=r<2?void 0:arguments[1],u=o===void 0?o:kn(o),f=0;f<n.length;){var p=n[f];if(p.key!==i||u!==void 0&&p.value!==u)f++;else if(qP(n,f,1),u!==void 0)break}np||(this.size=n.length),e.updateURL()},get:function(t){var e=io(this).entries;yf(arguments.length,1);for(var r=kn(t),n=0;n<e.length;n++)if(e[n].key===r)return e[n].value;return null},getAll:function(t){var e=io(this).entries;yf(arguments.length,1);for(var r=kn(t),n=[],i=0;i<e.length;i++)e[i].key===r&&Eu(n,e[i].value);return n},has:function(t){for(var e=io(this).entries,r=yf(arguments.length,1),n=kn(t),i=r<2?void 0:arguments[1],o=i===void 0?i:kn(i),u=0;u<e.length;){var f=e[u++];if(f.key===n&&(o===void 0||f.value===o))return!0}return!1},set:function(t,e){var r=io(this);yf(arguments.length,1);for(var n,i=r.entries,o=!1,u=kn(t),f=kn(e),p=0;p<i.length;p++)(n=i[p]).key===u&&(o?qP(i,p--,1):(o=!0,n.value=f));o||Eu(i,{key:u,value:f}),np||(this.size=i.length),r.updateURL()},sort:function(){var t=io(this);XW(t.entries,function(e,r){return e.key>r.key?1:-1}),t.updateURL()},forEach:function(t){for(var e,r=io(this).entries,n=VW(t,arguments.length>1?arguments[1]:void 0),i=0;i<r.length;)n((e=r[i++]).value,e.key,this)},keys:function(){return new c1(this,"keys")},values:function(){return new c1(this,"values")},entries:function(){return new c1(this,"entries")}},{enumerable:!0}),CP(Of,ZW,Of.entries,{}),CP(Of,"toString",function(){return io(this).serialize()},{enumerable:!0}),np&&$W(Of,"size",{get:function(){return io(this).entries.length},configurable:!0,enumerable:!0}),HW(Xy,sd),s1({global:!0,forced:!RP},{URLSearchParams:Xy}),!RP&&u1(gp)){var mV=Yo(PP.has),vV=Yo(PP.set),MP=function(t){if(jL(t)){var e,r=t.body;if(YW(r)===sd)return e=t.headers?new gp(t.headers):new gp,mV(e,"content-type")||vV(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),QW(t,{body:IP(0,kn(r)),headers:IP(0,e)})}return t};if(u1(NP)&&s1({global:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return NP(t,arguments.length>1?MP(arguments[1]):{})}}),u1(Jy)){var f1=function(t){return DL(this,l1),new Jy(t,arguments.length>1?MP(arguments[1]):{})};l1.constructor=f1,f1.prototype=l1,s1({global:!0,dontCallGetSet:!0,forced:!0},{Request:f1})}}var yV={URLSearchParams:Xy,getState:io},sT=Sn,gV=eT,bV=Ed,_V=W2,wV=sT("".charAt),BP=sT("".charCodeAt),SV=sT("".slice),zP=function(t){return function(e,r){var n,i,o=bV(_V(e)),u=gV(r),f=o.length;return u<0||u>=f?t?"":void 0:(n=BP(o,u))<55296||n>56319||u+1===f||(i=BP(o,u+1))<56320||i>57343?t?wV(o,u):n:t?SV(o,u,u+2):i-56320+(n-55296<<10)+65536}},$L={codeAt:zP(!1),charAt:zP(!0)},EV=$L.charAt,TV=Ed,FL=$g,AV=RL,$P=nT,HL="String Iterator",OV=FL.set,RV=FL.getterFor(HL);AV(String,"String",function(t){OV(this,{type:HL,string:TV(t),index:0})},function(){var t,e=RV(this),r=e.string,n=e.index;return n>=r.length?$P(void 0,!0):(t=EV(r,n),e.index+=t.length,$P(t,!1))});var GL={};GL.f=Object.getOwnPropertySymbols;var FP=vo,CV=Sn,IV=_s,xV=qi,d1=bL,NV=GL,PV=Z2,UV=Bg,qV=Kj,gf=Object.assign,HP=Object.defineProperty,DV=CV([].concat),jV=!gf||xV(function(){if(FP&&gf({b:1},gf(HP({},"a",{enumerable:!0,get:function(){HP(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var t={},e={},r=Symbol("assign detection"),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(i){e[i]=i}),gf({},t)[r]!==7||d1(gf({},e)).join("")!==n})?function(t,e){for(var r=UV(t),n=arguments.length,i=1,o=NV.f,u=PV.f;n>i;)for(var f,p=qV(arguments[i++]),l=o?DV(d1(p),o(p)):d1(p),d=l.length,m=0;d>m;)f=l[m++],FP&&!IV(u,p,f)||(r[f]=p[f]);return r}:gf,LV=_s,kV=pc,MV=K2,BV=pc,zV=function(t,e,r){var n;kV(t);try{if(!(n=MV(t,"return"))){if(e==="throw")throw r;return r}n=LV(n,t)}catch(i){n=i}throw r},$V=Wp,FV=Ia("iterator"),HV=Array.prototype,GV=pi,jE=Q2,WV=Sn(Function.toString);GV(jE.inspectSource)||(jE.inspectSource=function(t){return WV(t)});var VV=jE.inspectSource,YV=Sn,KV=qi,WL=pi,QV=Qp,JV=VV,VL=function(){},YL=wd("Reflect","construct"),uT=/^\s*(?:class|function)\b/,XV=YV(uT.exec),ZV=!uT.test(VL),kh=function(t){if(!WL(t))return!1;try{return YL(VL,[],t),!0}catch{return!1}},KL=function(t){if(!WL(t))return!1;switch(QV(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return ZV||!!XV(uT,JV(t))}catch{return!0}};KL.sham=!0;var Zi,eY=!YL||KV(function(){var t;return kh(kh.call)||!kh(Object)||!kh(function(){t=!0})||t})?KL:kh,tY=vo,rY=hc,nY=Vp,iY=Fg,oY=_s,aY=Bg,sY=function(t,e,r,n){try{return n?e(BV(r)[0],r[1]):e(r)}catch(i){zV(t,"throw",i)}},uY=function(t){return t!==void 0&&($V.Array===t||HV[FV]===t)},lY=eY,cY=yL,GP=function(t,e,r){tY?rY.f(t,e,nY(0,r)):t[e]=r},fY=PL,dY=iT,WP=Array,mc=Sn,h1=2147483647,hY=/[^\0-\u007E]/,QL=/[.\u3002\uFF0E\uFF61]/g,VP="Overflow: input needs wider integers to process",YP=RangeError,pY=mc(QL.exec),qf=Math.floor,p1=String.fromCharCode,KP=mc("".charCodeAt),JL=mc([].join),su=mc([].push),mY=mc("".replace),vY=mc("".split),yY=mc("".toLowerCase),QP=function(t){return t+22+75*(t<26)},gY=function(t,e,r){var n=0;for(t=r?qf(t/700):t>>1,t+=qf(t/e);t>455;)t=qf(t/35),n+=36;return qf(n+36*t/(t+38))},bY=function(t){var e=[];t=(function(R){for(var O=[],C=0,I=R.length;C<I;){var P=KP(R,C++);if(P>=55296&&P<=56319&&C<I){var D=KP(R,C++);(64512&D)==56320?su(O,((1023&P)<<10)+(1023&D)+65536):(su(O,P),C--)}else su(O,P)}return O})(t);var r,n,i=t.length,o=128,u=0,f=72;for(r=0;r<t.length;r++)(n=t[r])<128&&su(e,p1(n));var p=e.length,l=p;for(p&&su(e,"-");l<i;){var d=h1;for(r=0;r<t.length;r++)(n=t[r])>=o&&n<d&&(d=n);var m=l+1;if(d-o>qf((h1-u)/m))throw new YP(VP);for(u+=(d-o)*m,o=d,r=0;r<t.length;r++){if((n=t[r])<o&&++u>h1)throw new YP(VP);if(n===o){for(var y=u,b=36;;){var w=b<=f?1:b>=f+26?26:b-f;if(y<w)break;var S=y-w,E=36-w;su(e,p1(QP(w+S%E))),y=qf(S/E),b+=36}su(e,p1(QP(y))),f=gY(u,m,l===p),u=0,l++}}u++,o++}return JL(e,"")},_Y=Sd,lT=vo,wY=Gg,cT=hi,JP=Fg,yo=Sn,zv=Kp,eo=xL,SY=NL,LE=Ca,fT=jV,bf=function(t){var e=aY(t),r=lY(this),n=arguments.length,i=n>1?arguments[1]:void 0,o=i!==void 0;o&&(i=iY(i,n>2?arguments[2]:void 0));var u,f,p,l,d,m,y=dY(e),b=0;if(!y||this===WP&&uY(y))for(u=cY(e),f=r?new this(u):WP(u);u>b;b++)m=o?i(e[b],b):e[b],GP(f,b,m);else for(f=r?new this:[],d=(l=fY(e,y)).next;!(p=oY(d,l)).done;b++)m=o?sY(l,i,[p.value,b],!0):p.value,GP(f,b,m);return f.length=b,f},qo=UL,EY=$L.codeAt,TY=function(t){var e,r,n=[],i=vY(mY(yY(t),QL,"."),".");for(e=0;e<i.length;e++)r=i[e],su(n,pY(hY,r)?"xn--"+bY(r):r);return JL(n,".")},as=Ed,AY=Hg,OY=Wg,XL=yV,ZL=$g,RY=ZL.set,Zy=ZL.getterFor("URL"),CY=XL.URLSearchParams,IY=XL.getState,Mh=cT.URL,kE=cT.TypeError,$v=cT.parseInt,xY=Math.floor,XP=Math.pow,ao=yo("".charAt),ko=yo(/./.exec),ip=yo([].join),NY=yo(1.1.toString),PY=yo([].pop),_f=yo([].push),m1=yo("".replace),UY=yo([].shift),qY=yo("".split),op=yo("".slice),eg=yo("".toLowerCase),DY=yo([].unshift),v1="Invalid scheme",El="Invalid host",ZP="Invalid port",ek=/[a-z]/i,jY=/[\d+-.a-z]/i,y1=/\d/,LY=/^0x/i,kY=/^[0-7]+$/,MY=/^\d+$/,eU=/^[\da-f]+$/i,BY=/[\0\t\n\r #%/:<>?@[\\\]^|]/,zY=/[\0\t\n\r #/:<>?@[\\\]^|]/,$Y=/^[\u0000-\u0020]+/,FY=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,HY=/[\t\n\r]/g,Bh=function(t){var e,r,n,i;if(typeof t=="number"){for(e=[],r=0;r<4;r++)DY(e,t%256),t=xY(t/256);return ip(e,".")}if(typeof t=="object"){for(e="",n=(function(o){for(var u=null,f=1,p=null,l=0,d=0;d<8;d++)o[d]!==0?(l>f&&(u=p,f=l),p=null,l=0):(p===null&&(p=d),++l);return l>f?p:u})(t),r=0;r<8;r++)i&&t[r]===0||(i&&(i=!1),n===r?(e+=r?":":"::",i=!0):(e+=NY(t[r],16),r<7&&(e+=":")));return"["+e+"]"}return t},Sy={},tk=fT({},Sy,{" ":1,'"':1,"<":1,">":1,"`":1}),rk=fT({},tk,{"#":1,"?":1,"{":1,"}":1}),g1=fT({},rk,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),iu=function(t,e){var r=EY(t,0);return r>32&&r<127&&!LE(e,t)?t:encodeURIComponent(t)},Fv={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ap=function(t,e){var r;return t.length===2&&ko(ek,ao(t,0))&&((r=ao(t,1))===":"||!e&&r==="|")},tU=function(t){var e;return t.length>1&&ap(op(t,0,2))&&(t.length===2||(e=ao(t,2))==="/"||e==="\\"||e==="?"||e==="#")},GY=function(t){return t==="."||eg(t)==="%2e"},WY=function(t){return(t=eg(t))===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"},b1={},rU={},_1={},nU={},iU={},w1={},oU={},aU={},Hv={},Gv={},S1={},E1={},T1={},A1={},sU={},O1={},wf={},ma={},uU={},Tl={},is={},dT=function(t,e,r){var n,i,o,u=as(t);if(e){if(i=this.parse(u))throw new kE(i);this.searchParams=null}else{if(r!==void 0&&(n=new dT(r,!0)),i=this.parse(u,null,n))throw new kE(i);(o=IY(new CY)).bindURL(this),this.searchParams=o}};dT.prototype={type:"URL",parse:function(t,e,r){var n,i,o,u,f=this,p=e||b1,l=0,d="",m=!1,y=!1,b=!1;for(t=as(t),e||(f.scheme="",f.username="",f.password="",f.host=null,f.port=null,f.path=[],f.query=null,f.fragment=null,f.cannotBeABaseURL=!1,t=m1(t,$Y,""),t=m1(t,FY,"$1")),t=m1(t,HY,""),n=bf(t);l<=n.length;){switch(i=n[l],p){case b1:if(!i||!ko(ek,i)){if(e)return v1;p=_1;continue}d+=eg(i),p=rU;break;case rU:if(i&&(ko(jY,i)||i==="+"||i==="-"||i==="."))d+=eg(i);else{if(i!==":"){if(e)return v1;d="",p=_1,l=0;continue}if(e&&(f.isSpecial()!==LE(Fv,d)||d==="file"&&(f.includesCredentials()||f.port!==null)||f.scheme==="file"&&!f.host))return;if(f.scheme=d,e)return void(f.isSpecial()&&Fv[f.scheme]===f.port&&(f.port=null));d="",f.scheme==="file"?p=A1:f.isSpecial()&&r&&r.scheme===f.scheme?p=nU:f.isSpecial()?p=aU:n[l+1]==="/"?(p=iU,l++):(f.cannotBeABaseURL=!0,_f(f.path,""),p=uU)}break;case _1:if(!r||r.cannotBeABaseURL&&i!=="#")return v1;if(r.cannotBeABaseURL&&i==="#"){f.scheme=r.scheme,f.path=qo(r.path),f.query=r.query,f.fragment="",f.cannotBeABaseURL=!0,p=is;break}p=r.scheme==="file"?A1:w1;continue;case nU:if(i!=="/"||n[l+1]!=="/"){p=w1;continue}p=Hv,l++;break;case iU:if(i==="/"){p=Gv;break}p=ma;continue;case w1:if(f.scheme=r.scheme,i===Zi)f.username=r.username,f.password=r.password,f.host=r.host,f.port=r.port,f.path=qo(r.path),f.query=r.query;else if(i==="/"||i==="\\"&&f.isSpecial())p=oU;else if(i==="?")f.username=r.username,f.password=r.password,f.host=r.host,f.port=r.port,f.path=qo(r.path),f.query="",p=Tl;else{if(i!=="#"){f.username=r.username,f.password=r.password,f.host=r.host,f.port=r.port,f.path=qo(r.path),f.path.length--,p=ma;continue}f.username=r.username,f.password=r.password,f.host=r.host,f.port=r.port,f.path=qo(r.path),f.query=r.query,f.fragment="",p=is}break;case oU:if(!f.isSpecial()||i!=="/"&&i!=="\\"){if(i!=="/"){f.username=r.username,f.password=r.password,f.host=r.host,f.port=r.port,p=ma;continue}p=Gv}else p=Hv;break;case aU:if(p=Hv,i!=="/"||ao(d,l+1)!=="/")continue;l++;break;case Hv:if(i!=="/"&&i!=="\\"){p=Gv;continue}break;case Gv:if(i==="@"){m&&(d="%40"+d),m=!0,o=bf(d);for(var w=0;w<o.length;w++){var S=o[w];if(S!==":"||b){var E=iu(S,g1);b?f.password+=E:f.username+=E}else b=!0}d=""}else if(i===Zi||i==="/"||i==="?"||i==="#"||i==="\\"&&f.isSpecial()){if(m&&d==="")return"Invalid authority";l-=bf(d).length+1,d="",p=S1}else d+=i;break;case S1:case E1:if(e&&f.scheme==="file"){p=O1;continue}if(i!==":"||y){if(i===Zi||i==="/"||i==="?"||i==="#"||i==="\\"&&f.isSpecial()){if(f.isSpecial()&&d==="")return El;if(e&&d===""&&(f.includesCredentials()||f.port!==null))return;if(u=f.parseHost(d))return u;if(d="",p=wf,e)return;continue}i==="["?y=!0:i==="]"&&(y=!1),d+=i}else{if(d==="")return El;if(u=f.parseHost(d))return u;if(d="",p=T1,e===E1)return}break;case T1:if(!ko(y1,i)){if(i===Zi||i==="/"||i==="?"||i==="#"||i==="\\"&&f.isSpecial()||e){if(d!==""){var R=$v(d,10);if(R>65535)return ZP;f.port=f.isSpecial()&&R===Fv[f.scheme]?null:R,d=""}if(e)return;p=wf;continue}return ZP}d+=i;break;case A1:if(f.scheme="file",i==="/"||i==="\\")p=sU;else{if(!r||r.scheme!=="file"){p=ma;continue}switch(i){case Zi:f.host=r.host,f.path=qo(r.path),f.query=r.query;break;case"?":f.host=r.host,f.path=qo(r.path),f.query="",p=Tl;break;case"#":f.host=r.host,f.path=qo(r.path),f.query=r.query,f.fragment="",p=is;break;default:tU(ip(qo(n,l),""))||(f.host=r.host,f.path=qo(r.path),f.shortenPath()),p=ma;continue}}break;case sU:if(i==="/"||i==="\\"){p=O1;break}r&&r.scheme==="file"&&!tU(ip(qo(n,l),""))&&(ap(r.path[0],!0)?_f(f.path,r.path[0]):f.host=r.host),p=ma;continue;case O1:if(i===Zi||i==="/"||i==="\\"||i==="?"||i==="#"){if(!e&&ap(d))p=ma;else if(d===""){if(f.host="",e)return;p=wf}else{if(u=f.parseHost(d))return u;if(f.host==="localhost"&&(f.host=""),e)return;d="",p=wf}continue}d+=i;break;case wf:if(f.isSpecial()){if(p=ma,i!=="/"&&i!=="\\")continue}else if(e||i!=="?")if(e||i!=="#"){if(i!==Zi&&(p=ma,i!=="/"))continue}else f.fragment="",p=is;else f.query="",p=Tl;break;case ma:if(i===Zi||i==="/"||i==="\\"&&f.isSpecial()||!e&&(i==="?"||i==="#")){if(WY(d)?(f.shortenPath(),i==="/"||i==="\\"&&f.isSpecial()||_f(f.path,"")):GY(d)?i==="/"||i==="\\"&&f.isSpecial()||_f(f.path,""):(f.scheme==="file"&&!f.path.length&&ap(d)&&(f.host&&(f.host=""),d=ao(d,0)+":"),_f(f.path,d)),d="",f.scheme==="file"&&(i===Zi||i==="?"||i==="#"))for(;f.path.length>1&&f.path[0]==="";)UY(f.path);i==="?"?(f.query="",p=Tl):i==="#"&&(f.fragment="",p=is)}else d+=iu(i,rk);break;case uU:i==="?"?(f.query="",p=Tl):i==="#"?(f.fragment="",p=is):i!==Zi&&(f.path[0]+=iu(i,Sy));break;case Tl:e||i!=="#"?i!==Zi&&(i==="'"&&f.isSpecial()?f.query+="%27":f.query+=i==="#"?"%23":iu(i,Sy)):(f.fragment="",p=is);break;case is:i!==Zi&&(f.fragment+=iu(i,tk))}l++}},parseHost:function(t){var e,r,n;if(ao(t,0)==="["){if(ao(t,t.length-1)!=="]"||(e=(function(i){var o,u,f,p,l,d,m,y=[0,0,0,0,0,0,0,0],b=0,w=null,S=0,E=function(){return ao(i,S)};if(E()===":"){if(ao(i,1)!==":")return;S+=2,w=++b}for(;E();){if(b===8)return;if(E()!==":"){for(o=u=0;u<4&&ko(eU,E());)o=16*o+$v(E(),16),S++,u++;if(E()==="."){if(u===0||(S-=u,b>6))return;for(f=0;E();){if(p=null,f>0){if(!(E()==="."&&f<4))return;S++}if(!ko(y1,E()))return;for(;ko(y1,E());){if(l=$v(E(),10),p===null)p=l;else{if(p===0)return;p=10*p+l}if(p>255)return;S++}y[b]=256*y[b]+p,++f!==2&&f!==4||b++}if(f!==4)return;break}if(E()===":"){if(S++,!E())return}else if(E())return;y[b++]=o}else{if(w!==null)return;S++,w=++b}}if(w!==null)for(d=b-w,b=7;b!==0&&d>0;)m=y[b],y[b--]=y[w+d-1],y[w+--d]=m;else if(b!==8)return;return y})(op(t,1,-1)),!e))return El;this.host=e}else if(this.isSpecial()){if(t=TY(t),ko(BY,t)||(e=(function(i){var o,u,f,p,l,d,m,y=qY(i,".");if(y.length&&y[y.length-1]===""&&y.length--,(o=y.length)>4)return i;for(u=[],f=0;f<o;f++){if((p=y[f])==="")return i;if(l=10,p.length>1&&ao(p,0)==="0"&&(l=ko(LY,p)?16:8,p=op(p,l===8?1:2)),p==="")d=0;else{if(!ko(l===10?MY:l===8?kY:eU,p))return i;d=$v(p,l)}_f(u,d)}for(f=0;f<o;f++)if(d=u[f],f===o-1){if(d>=XP(256,5-o))return null}else if(d>255)return null;for(m=PY(u),f=0;f<u.length;f++)m+=u[f]*XP(256,3-f);return m})(t),e===null))return El;this.host=e}else{if(ko(zY,t))return El;for(e="",r=bf(t),n=0;n<r.length;n++)e+=iu(r[n],Sy);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return LE(Fv,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||this.scheme==="file"&&e===1&&ap(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,r=t.username,n=t.password,i=t.host,o=t.port,u=t.path,f=t.query,p=t.fragment,l=e+":";return i!==null?(l+="//",t.includesCredentials()&&(l+=r+(n?":"+n:"")+"@"),l+=Bh(i),o!==null&&(l+=":"+o)):e==="file"&&(l+="//"),l+=t.cannotBeABaseURL?u[0]:u.length?"/"+ip(u,"/"):"",f!==null&&(l+="?"+f),p!==null&&(l+="#"+p),l},setHref:function(t){var e=this.parse(t);if(e)throw new kE(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if(t==="blob")try{return new ud(t.path[0]).origin}catch{return"null"}return t!=="file"&&this.isSpecial()?t+"://"+Bh(this.host)+(e!==null?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(as(t)+":",b1)},getUsername:function(){return this.username},setUsername:function(t){var e=bf(as(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<e.length;r++)this.username+=iu(e[r],g1)}},getPassword:function(){return this.password},setPassword:function(t){var e=bf(as(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<e.length;r++)this.password+=iu(e[r],g1)}},getHost:function(){var t=this.host,e=this.port;return t===null?"":e===null?Bh(t):Bh(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,S1)},getHostname:function(){var t=this.host;return t===null?"":Bh(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,E1)},getPort:function(){var t=this.port;return t===null?"":as(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||((t=as(t))===""?this.port=null:this.parse(t,T1))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+ip(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,wf))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){(t=as(t))===""?this.query=null:(ao(t,0)==="?"&&(t=op(t,1)),this.query="",this.parse(t,Tl)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){(t=as(t))!==""?(ao(t,0)==="#"&&(t=op(t,1)),this.fragment="",this.parse(t,is)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var ud=function(t){var e=SY(this,qn),r=OY(arguments.length,1)>1?arguments[1]:void 0,n=RY(e,new dT(t,!1,r));lT||(e.href=n.serialize(),e.origin=n.getOrigin(),e.protocol=n.getProtocol(),e.username=n.getUsername(),e.password=n.getPassword(),e.host=n.getHost(),e.hostname=n.getHostname(),e.port=n.getPort(),e.pathname=n.getPathname(),e.search=n.getSearch(),e.searchParams=n.getSearchParams(),e.hash=n.getHash())},qn=ud.prototype,to=function(t,e){return{get:function(){return Zy(this)[t]()},set:e&&function(r){return Zy(this)[e](r)},configurable:!0,enumerable:!0}};if(lT&&(eo(qn,"href",to("serialize","setHref")),eo(qn,"origin",to("getOrigin")),eo(qn,"protocol",to("getProtocol","setProtocol")),eo(qn,"username",to("getUsername","setUsername")),eo(qn,"password",to("getPassword","setPassword")),eo(qn,"host",to("getHost","setHost")),eo(qn,"hostname",to("getHostname","setHostname")),eo(qn,"port",to("getPort","setPort")),eo(qn,"pathname",to("getPathname","setPathname")),eo(qn,"search",to("getSearch","setSearch")),eo(qn,"searchParams",to("getSearchParams")),eo(qn,"hash",to("getHash","setHash"))),zv(qn,"toJSON",function(){return Zy(this).serialize()},{enumerable:!0}),zv(qn,"toString",function(){return Zy(this).serialize()},{enumerable:!0}),Mh){var lU=Mh.createObjectURL,cU=Mh.revokeObjectURL;lU&&zv(ud,"createObjectURL",JP(lU,Mh)),cU&&zv(ud,"revokeObjectURL",JP(cU,Mh))}AY(ud,"URL"),_Y({global:!0,forced:!wY,sham:!lT},{URL:ud});var VY=Sd,nk=qi,YY=Wg,fU=Ed,KY=Gg,hT=wd("URL"),QY=KY&&nk(function(){hT.canParse()}),JY=nk(function(){return hT.canParse.length!==1});VY({target:"URL",stat:!0,forced:!QY||JY},{canParse:function(t){var e=YY(arguments.length,1),r=fU(t),n=e<2||arguments[1]===void 0?void 0:fU(arguments[1]);try{return!!new hT(r,n)}catch{return!1}}});var XY=Sd,ZY=Wg,dU=Ed,eK=Gg,tK=wd("URL");XY({target:"URL",stat:!0,forced:!eK},{parse:function(t){var e=ZY(arguments.length,1),r=dU(t),n=e<2||arguments[1]===void 0?void 0:dU(arguments[1]);try{return new tK(r,n)}catch{return null}}});var rK=Gj(V2.URL),nK=(function(t){function e(r){var n=t.call(this,r.message)||this;return n.name="PostgrestError",n.details=r.details,n.hint=r.hint,n.code=r.code,n}return Ip(e,t),e})(Error),iK=(function(){function t(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0&&r,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0&&n,e.fetch?this.fetch=e.fetch:this.fetch=fetch}return t.prototype.throwOnError=function(){return this.shouldThrowOnError=!0,this},t.prototype.setHeader=function(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this},t.prototype.then=function(e,r){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");var i=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(o){return gs(n,0,void 0,function(){var u,f,p,l,d,m,y,b,w,S,E,R;return bs(this,function(O){switch(O.label){case 0:return u=null,f=null,p=null,l=o.status,d=o.statusText,o.ok?this.method==="HEAD"?[3,2]:[4,o.text()]:[3,3];case 1:(b=O.sent())===""||(f=this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((w=this.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?b:JSON.parse(b)),O.label=2;case 2:return m=(S=this.headers.get("Prefer"))===null||S===void 0?void 0:S.match(/count=(exact|planned|estimated)/),y=(E=o.headers.get("content-range"))===null||E===void 0?void 0:E.split("/"),m&&y&&y.length>1&&(p=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(u={code:"PGRST116",details:"Results contain ".concat(f.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,l=406,d="Not Acceptable"):f=f.length===1?f[0]:null),[3,5];case 3:return[4,o.text()];case 4:b=O.sent();try{u=JSON.parse(b),Array.isArray(u)&&o.status===404&&(f=[],u=null,l=200,d="OK")}catch{o.status===404&&b===""?(l=204,d="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((R=u?.details)===null||R===void 0)&&R.includes("0 rows"))&&(u=null,l=200,d="OK"),u&&this.shouldThrowOnError)throw new nK(u);O.label=5;case 5:return[2,{error:u,data:f,count:p,status:l,statusText:d}]}})})});return this.shouldThrowOnError||(i=i.catch(function(o){var u,f,p;return{error:{message:"".concat((u=o?.name)!==null&&u!==void 0?u:"FetchError",": ").concat(o?.message),details:"".concat((f=o?.stack)!==null&&f!==void 0?f:""),hint:"",code:"".concat((p=o?.code)!==null&&p!==void 0?p:"")},data:null,count:null,status:0,statusText:""}})),i.then(e,r)},t.prototype.returns=function(){return this},t.prototype.overrideTypes=function(){return this},t})(),zh=(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return Ip(e,t),e.prototype.eq=function(r,n){return this.url.searchParams.append(r,"eq.".concat(n)),this},e.prototype.neq=function(r,n){return this.url.searchParams.append(r,"neq.".concat(n)),this},e.prototype.gt=function(r,n){return this.url.searchParams.append(r,"gt.".concat(n)),this},e.prototype.gte=function(r,n){return this.url.searchParams.append(r,"gte.".concat(n)),this},e.prototype.lt=function(r,n){return this.url.searchParams.append(r,"lt.".concat(n)),this},e.prototype.lte=function(r,n){return this.url.searchParams.append(r,"lte.".concat(n)),this},e.prototype.like=function(r,n){return this.url.searchParams.append(r,"like.".concat(n)),this},e.prototype.likeAllOf=function(r,n){return this.url.searchParams.append(r,"like(all).{".concat(n.join(","),"}")),this},e.prototype.likeAnyOf=function(r,n){return this.url.searchParams.append(r,"like(any).{".concat(n.join(","),"}")),this},e.prototype.ilike=function(r,n){return this.url.searchParams.append(r,"ilike.".concat(n)),this},e.prototype.ilikeAllOf=function(r,n){return this.url.searchParams.append(r,"ilike(all).{".concat(n.join(","),"}")),this},e.prototype.ilikeAnyOf=function(r,n){return this.url.searchParams.append(r,"ilike(any).{".concat(n.join(","),"}")),this},e.prototype.is=function(r,n){return this.url.searchParams.append(r,"is.".concat(n)),this},e.prototype.in=function(r,n){var i=Array.from(new Set(n)).map(function(o){return typeof o=="string"&&new RegExp("[,()]").test(o)?'"'.concat(o,'"'):"".concat(o)}).join(",");return this.url.searchParams.append(r,"in.(".concat(i,")")),this},e.prototype.contains=function(r,n){return typeof n=="string"?this.url.searchParams.append(r,"cs.".concat(n)):Array.isArray(n)?this.url.searchParams.append(r,"cs.{".concat(n.join(","),"}")):this.url.searchParams.append(r,"cs.".concat(JSON.stringify(n))),this},e.prototype.containedBy=function(r,n){return typeof n=="string"?this.url.searchParams.append(r,"cd.".concat(n)):Array.isArray(n)?this.url.searchParams.append(r,"cd.{".concat(n.join(","),"}")):this.url.searchParams.append(r,"cd.".concat(JSON.stringify(n))),this},e.prototype.rangeGt=function(r,n){return this.url.searchParams.append(r,"sr.".concat(n)),this},e.prototype.rangeGte=function(r,n){return this.url.searchParams.append(r,"nxl.".concat(n)),this},e.prototype.rangeLt=function(r,n){return this.url.searchParams.append(r,"sl.".concat(n)),this},e.prototype.rangeLte=function(r,n){return this.url.searchParams.append(r,"nxr.".concat(n)),this},e.prototype.rangeAdjacent=function(r,n){return this.url.searchParams.append(r,"adj.".concat(n)),this},e.prototype.overlaps=function(r,n){return typeof n=="string"?this.url.searchParams.append(r,"ov.".concat(n)):this.url.searchParams.append(r,"ov.{".concat(n.join(","),"}")),this},e.prototype.textSearch=function(r,n,i){var o=i===void 0?{}:i,u=o.config,f=o.type,p="";f==="plain"?p="pl":f==="phrase"?p="ph":f==="websearch"&&(p="w");var l=u===void 0?"":"(".concat(u,")");return this.url.searchParams.append(r,"".concat(p,"fts").concat(l,".").concat(n)),this},e.prototype.match=function(r){var n=this;return Object.entries(r).forEach(function(i){var o=i[0],u=i[1];n.url.searchParams.append(o,"eq.".concat(u))}),this},e.prototype.not=function(r,n,i){return this.url.searchParams.append(r,"not.".concat(n,".").concat(i)),this},e.prototype.or=function(r,n){var i=n===void 0?{}:n,o=i.foreignTable,u=i.referencedTable,f=u===void 0?o:u,p=f?"".concat(f,".or"):"or";return this.url.searchParams.append(p,"(".concat(r,")")),this},e.prototype.filter=function(r,n,i){return this.url.searchParams.append(r,"".concat(n,".").concat(i)),this},e})((function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return Ip(e,t),e.prototype.select=function(r){var n=!1,i=(r??"*").split("").map(function(o){return/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)}).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this},e.prototype.order=function(r,n){var i=n===void 0?{}:n,o=i.ascending,u=o===void 0||o,f=i.nullsFirst,p=i.foreignTable,l=i.referencedTable,d=l===void 0?p:l,m=d?"".concat(d,".order"):"order",y=this.url.searchParams.get(m);return this.url.searchParams.set(m,"".concat(y?"".concat(y,","):"").concat(r,".").concat(u?"asc":"desc").concat(f===void 0?"":f?".nullsfirst":".nullslast")),this},e.prototype.limit=function(r,n){var i=n===void 0?{}:n,o=i.foreignTable,u=i.referencedTable,f=u===void 0?o:u,p=f===void 0?"limit":"".concat(f,".limit");return this.url.searchParams.set(p,"".concat(r)),this},e.prototype.range=function(r,n,i){var o=i===void 0?{}:i,u=o.foreignTable,f=o.referencedTable,p=f===void 0?u:f,l=p===void 0?"offset":"".concat(p,".offset"),d=p===void 0?"limit":"".concat(p,".limit");return this.url.searchParams.set(l,"".concat(r)),this.url.searchParams.set(d,"".concat(n-r+1)),this},e.prototype.abortSignal=function(r){return this.signal=r,this},e.prototype.single=function(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this},e.prototype.maybeSingle=function(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this},e.prototype.csv=function(){return this.headers.set("Accept","text/csv"),this},e.prototype.geojson=function(){return this.headers.set("Accept","application/geo+json"),this},e.prototype.explain=function(r){var n,i=r===void 0?{}:r,o=i.analyze,u=o!==void 0&&o,f=i.verbose,p=f!==void 0&&f,l=i.settings,d=l!==void 0&&l,m=i.buffers,y=m!==void 0&&m,b=i.wal,w=b!==void 0&&b,S=i.format,E=S===void 0?"text":S,R=[u?"analyze":null,p?"verbose":null,d?"settings":null,y?"buffers":null,w?"wal":null].filter(Boolean).join("|"),O=(n=this.headers.get("Accept"))!==null&&n!==void 0?n:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(E,'; for="').concat(O,'"; options=').concat(R,";")),this},e.prototype.rollback=function(){return this.headers.append("Prefer","tx=rollback"),this},e.prototype.returns=function(){return this},e.prototype.maxAffected=function(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(r)),this},e})(iK)),oK=(function(){function t(e,r){var n=r.headers,i=n===void 0?{}:n,o=r.schema,u=r.fetch;this.url=e,this.headers=new Headers(i),this.schema=o,this.fetch=u}return t.prototype.select=function(e,r){var n=r===void 0?{}:r,i=n.head,o=i!==void 0&&i,u=n.count,f=o?"HEAD":"GET",p=!1,l=(e??"*").split("").map(function(d){return/\s/.test(d)&&!p?"":(d==='"'&&(p=!p),d)}).join("");return this.url.searchParams.set("select",l),u&&this.headers.append("Prefer","count=".concat(u)),new zh({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})},t.prototype.insert=function(e,r){var n,i=r===void 0?{}:r,o=i.count,u=i.defaultToNull,f=u===void 0||u;if(o&&this.headers.append("Prefer","count=".concat(o)),f||this.headers.append("Prefer","missing=default"),Array.isArray(e)){var p=e.reduce(function(d,m){return d.concat(Object.keys(m))},[]);if(p.length>0){var l=Array.from(new Set(p)).map(function(d){return'"'.concat(d,'"')});this.url.searchParams.set("columns",l.join(","))}}return new zh({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})},t.prototype.upsert=function(e,r){var n,i=r===void 0?{}:r,o=i.onConflict,u=i.ignoreDuplicates,f=u!==void 0&&u,p=i.count,l=i.defaultToNull,d=l===void 0||l;if(this.headers.append("Prefer","resolution=".concat(f?"ignore":"merge","-duplicates")),o!==void 0&&this.url.searchParams.set("on_conflict",o),p&&this.headers.append("Prefer","count=".concat(p)),d||this.headers.append("Prefer","missing=default"),Array.isArray(e)){var m=e.reduce(function(b,w){return b.concat(Object.keys(w))},[]);if(m.length>0){var y=Array.from(new Set(m)).map(function(b){return'"'.concat(b,'"')});this.url.searchParams.set("columns",y.join(","))}}return new zh({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})},t.prototype.update=function(e,r){var n,i=(r===void 0?{}:r).count;return i&&this.headers.append("Prefer","count=".concat(i)),new zh({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})},t.prototype.delete=function(e){var r,n=(e===void 0?{}:e).count;return n&&this.headers.append("Prefer","count=".concat(n)),new zh({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})},t})(),aK=(function(t){function e(r,n){var i=n.headers,o=i===void 0?{}:i,u=n.fetch;return t.call(this,r,{headers:o,schema:void 0,fetch:u})||this}return Ip(e,t),e})(oK),sK=(function(){function t(e,r){var n=r===void 0?{}:r,i=n.headers,o=i===void 0?{}:i,u=n.fetch;this.url=e,this.headers=new Headers(o),this.fetch=u}return t.prototype.from=function(e){var r=new rK("".concat(this.url,"/").concat(e));return new aK(r,{headers:this.headers,fetch:this.fetch})},t})();function uK(t,e,r){return(e=(function(n){var i=(function(o,u){if(typeof o!="object"||!o)return o;var f=o[Symbol.toPrimitive];if(f!==void 0){var p=f.call(o,u);if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(o)})(n,"string");return typeof i=="symbol"?i:i+""})(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ur(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hU(Object(r),!0).forEach(function(n){uK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const Vg="/auth";var Ke,Yf,pU,fi;(function(t){t.AUTH_SIGN_UP_URL="/v1/signup",t.AUTH_TOKEN_URL="/v1/token",t.AUTH_REVOKE_URL="/v1/revoke",t.WEDA_USER_URL="/v1/plugin/weda/userinfo",t.AUTH_RESET_PASSWORD="/v1/reset",t.AUTH_GET_DEVICE_CODE="/v1/device/code",t.CHECK_USERNAME="/v1/checkUsername",t.CHECK_IF_USER_EXIST="/v1/checkIfUserExist",t.GET_PROVIDER_TYPE="/v1/mgr/provider/providerSubType",t.AUTH_SIGN_IN_URL="/v1/signin",t.AUTH_SIGN_IN_ANONYMOUSLY_URL="/v1/signin/anonymously",t.AUTH_SIGN_IN_WITH_PROVIDER_URL="/v1/signin/with/provider",t.AUTH_SIGN_IN_WITH_WECHAT_URL="/v1/signin/wechat/noauth",t.AUTH_SIGN_IN_CUSTOM="/v1/signin/custom",t.PROVIDER_TOKEN_URL="/v1/provider/token",t.PROVIDER_URI_URL="/v1/provider/uri",t.USER_ME_URL="/v1/user/me",t.AUTH_SIGNOUT_URL="/v1/user/signout",t.USER_QUERY_URL="/v1/user/query",t.USER_PRIFILE_URL="/v1/user/profile",t.USER_BASIC_EDIT_URL="/v1/user/basic/edit",t.USER_TRANS_BY_PROVIDER_URL="/v1/user/trans/by/provider",t.PROVIDER_LIST="/v1/user/provider",t.PROVIDER_BIND_URL="/v1/user/provider/bind",t.PROVIDER_UNBIND_URL="/v1/user/provider",t.CHECK_PWD_URL="/v1/user/sudo",t.SUDO_URL="/v1/user/sudo",t.BIND_CONTACT_URL="/v1/user/contact",t.AUTH_SET_PASSWORD="/v1/user/password",t.AUTHORIZE_DEVICE_URL="/v1/user/device/authorize",t.AUTHORIZE_URL="/v1/user/authorize",t.AUTHORIZE_INFO_URL="/v1/user/authorize/info",t.AUTHORIZED_DEVICES_DELETE_URL="/v1/user/authorized/devices/",t.AUTH_REVOKE_ALL_URL="/v1/user/revoke/all",t.GET_USER_BEHAVIOR_LOG="/v1/user/security/history",t.VERIFICATION_URL="/v1/verification",t.VERIFY_URL="/v1/verification/verify",t.CAPTCHA_DATA_URL="/v1/captcha/data",t.VERIFY_CAPTCHA_DATA_URL="/v1/captcha/data/verify",t.GET_CAPTCHA_URL="/v1/captcha/init",t.GET_MINIPROGRAM_QRCODE="/v1/qrcode/generate",t.GET_MINIPROGRAM_QRCODE_STATUS="/v1/qrcode/get/status"})(Ke||(Ke={})),(function(t){t.AUTH_SIGN_IN_URL="/v2/signin/username",t.AUTH_TOKEN_URL="/v2/token",t.USER_ME_URL="/v2/user/me",t.VERIFY_URL="/v2/signin/verificationcode",t.AUTH_SIGN_IN_WITH_PROVIDER_URL="/v2/signin/with/provider",t.AUTH_PUBLIC_KEY="/v2/signin/publichkey",t.AUTH_RESET_PASSWORD="/v2/signin/password/update"})(Yf||(Yf={})),(function(t){t.REGISTER="REGISTER",t.SIGN_IN="SIGN_IN",t.PASSWORD_RESET="PASSWORD_RESET",t.EMAIL_ADDRESS_CHANGE="EMAIL_ADDRESS_CHANGE",t.PHONE_NUMBER_CHANGE="PHONE_NUMBER_CHANGE"})(pU||(pU={})),(function(t){t.UNREACHABLE="unreachable",t.LOCAL="local",t.CANCELLED="cancelled",t.UNKNOWN="unknown",t.UNAUTHENTICATED="unauthenticated",t.RESOURCE_EXHAUSTED="resource_exhausted",t.FAILED_PRECONDITION="failed_precondition",t.INVALID_ARGUMENT="invalid_argument",t.DEADLINE_EXCEEDED="deadline_exceeded",t.NOT_FOUND="not_found",t.ALREADY_EXISTS="already_exists",t.PERMISSION_DENIED="permission_denied",t.ABORTED="aborted",t.OUT_OF_RANGE="out_of_range",t.UNIMPLEMENTED="unimplemented",t.INTERNAL="internal",t.UNAVAILABLE="unavailable",t.DATA_LOSS="data_loss",t.INVALID_PASSWORD="invalid_password",t.PASSWORD_NOT_SET="password_not_set",t.INVALID_STATUS="invalid_status",t.USER_PENDING="user_pending",t.USER_BLOCKED="user_blocked",t.INVALID_VERIFICATION_CODE="invalid_verification_code",t.TWO_FACTOR_REQUIRED="two_factor_required",t.INVALID_TWO_FACTOR="invalid_two_factor",t.INVALID_TWO_FACTOR_RECOVERY="invalid_two_factor_recovery",t.UNDER_REVIEW="under_review",t.INVALID_REQUEST="invalid_request",t.UNAUTHORIZED_CLIENT="unauthorized_client",t.ACCESS_DENIED="access_denied",t.UNSUPPORTED_RESPONSE_TYPE="unsupported_response_type",t.INVALID_SCOPE="invalid_scope",t.INVALID_GRANT="invalid_grant",t.SERVER_ERROR="server_error",t.TEMPORARILY_UNAVAILABLE="temporarily_unavailable",t.INTERACTION_REQUIRED="interaction_required",t.LOGIN_REQUIRED="login_required",t.ACCOUNT_SELECTION_REQUIRED="account_selection_required",t.CONSENT_REQUIRED="consent_required",t.INVALID_REQUEST_URI="invalid_request_uri",t.INVALID_REQUEST_OBJECT="invalid_request_object",t.REQUEST_NOT_SUPPORTED="request_not_supported",t.REQUEST_URI_NOT_SUPPORTED="request_uri_not_supported",t.REGISTRATION_NOT_SUPPORTED="registration_not_supported",t.CAPTCHA_REQUIRED="captcha_required",t.CAPTCHA_INVALID="captcha_invalid"})(fi||(fi={}));const lK="sign_out",cK="sign_in",ik="credentials_error",fK="SIGNED_OUT",ME="SIGNED_IN",dK="INITIAL_SESSION",hK="PASSWORD_RECOVERY",pK="TOKEN_REFRESHED",mU="USER_UPDATED",ok="BIND_IDENTITY",Ey="loginStateChanged",co="authStateChanged",pT="sign_in",Kf="bind_identity";var vU;function yU(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=16*Math.random()|0;return(t==="x"?e:3&e|8).toString(16)})}(function(t){t.CLIENT_ID="client_id",t.CLIENT_SECRET="client_secret",t.RESPONSE_TYPE="response_type",t.SCOPE="scope",t.STATE="state",t.REDIRECT_URI="redirect_uri",t.ERROR="error",t.ERROR_DESCRIPTION="error_description",t.ERROR_URI="error_uri",t.GRANT_TYPE="grant_type",t.CODE="code",t.ACCESS_TOKEN="access_token",t.TOKEN_TYPE="token_type",t.EXPIRES_IN="expires_in",t.USERNAME="username",t.PASSWORD="password",t.REFRESH_TOKEN="refresh_token"})(vU||(vU={}));const bp=t=>{const e=n=>{for(const i in t)t.hasOwnProperty(i)&&(n[i]=bp(t[i]));return n},r=t==null?"NullOrUndefined":Object.prototype.toString.call(t).slice(8,-1);if(["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"].includes(r))return t.slice();switch(r){case"Object":return e(Object.create(Object.getPrototypeOf(t)));case"Array":return e([]);case"Date":return new Date(t.valueOf());case"RegExp":return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""));default:return t}},gU=t=>{const e=t.match(/^(?:http(s)?:\/\/[^\/]+)?(\/[^\?#]*)/);return e&&e[2]||""};let $h=new Map;class ak{constructor(e){this.clientId=e?.clientId||"",$h=$h||new Map}async run(e,r){e="".concat(this.clientId,"_").concat(e);let n=$h.get(e);return n||(n=new Promise((i,o)=>{(async()=>{try{await this.runIdlePromise();const u=r();i(await u)}catch(u){o(u)}finally{$h.delete(e)}})()}),$h.set(e,n)),n}runIdlePromise(){return Promise.resolve()}}const Tu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",mK=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/,bU=function(t){if(t=String(t).replace(/[\t\n\f\r ]+/g,""),!mK.test(t))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");let e;t+="==".slice(2-(3&t.length));let r,n,i="",o=0;for(;o<t.length;)e=Tu.indexOf(t.charAt(o++))<<18|Tu.indexOf(t.charAt(o++))<<12|(r=Tu.indexOf(t.charAt(o++)))<<6|(n=Tu.indexOf(t.charAt(o++))),i+=r===64?String.fromCharCode(e>>16&255):n===64?String.fromCharCode(e>>16&255,e>>8&255):String.fromCharCode(e>>16&255,e>>8&255,255&e);return i};function vK(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("Illegal base64url string!")}try{return(function(r){return decodeURIComponent(bU(r).replace(/(.)/g,n=>{let i=n.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0".concat(i)),"%".concat(i)}))})(e)}catch{return bU(e)}}function mT(){if(typeof globalThis>"u")return!1;const{wx:t}=globalThis;if(t===void 0||globalThis.Page===void 0||!t.getDeviceInfo||!t.getStorageSync||!t.setStorageSync||!t.connectSocket||!t.request)return!1;try{if(!t.getDeviceInfo()||t.getDeviceInfo().platform==="qq")return!1}catch{return!1}return!0}let tg=!1;function _U(){tg=tg||typeof window!==void 0&&window.__wxjs_environment==="miniprogram"}try{mT()||(tg=tg||!!navigator.userAgent.match(/miniprogram/i)||window.__wxjs_environment==="miniprogram",window&&window.WeixinJSBridge&&window.WeixinJSBridge.invoke?_U():typeof document<"u"&&document.addEventListener("WeixinJSBridgeReady",_U,!1))}catch{}var wU,br="https://support.qq.com/products/148793",Yg="INVALID_PARAMS",_p="INVALID_OPERATION",SU="OPERATION_FAIL";(function(t){t.local="local",t.none="none",t.session="session"})(wU||(wU={}));var yK=function(){},gK=function(){},bK=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r};function R1(t,e){if(typeof window>"u")return!1;var r=decodeURIComponent(window.location.search),n=new RegExp("(^|&)".concat(t,"=([^&]*)(&|$)")),i=r.substr(r.indexOf("?")+1).match(n);return i!=null?i[2]:""}function Df(t,e){console.warn("[".concat("@cloudbase/js-sdk","][").concat(t,"]:").concat(e))}function vT(t,e){throw new Error(JSON.stringify({code:t,msg:"[".concat("@cloudbase/js-sdk","][").concat(t,"]:").concat(e)}))}function _K(t){var e={},r=t.match(/^(data:.*?)(\?[^#\s]*)?$/);if(r){t=r[1];var n=r[2];n&&(e=(function(u){u=u.replace(/^\?/,"");var f={};return u.split("&").forEach(function(p){var l=p.split("="),d=l[0],m=l[1];d=decodeURIComponent(d),m=decodeURIComponent(m),d&&(f[d]?Array.isArray(f[d])?f[d].push(m):f[d]=[f[d],m]:f[d]=m)}),f})(n))}var i=e.token,o=bK(e,["token"]);return/^data:/.test(t)&&!i?{error:"invalid_argument",error_description:"invalid captcha data: ".concat(t)}:i?{state:o.state,token:i,captchaData:t}:{error:"unimplemented",error_description:"need to impl captcha data"}}var wK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),hn=function(){return hn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},hn.apply(this,arguments)},C1=function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function u(l){try{p(n.next(l))}catch(d){o(d)}}function f(l){try{p(n.throw(l))}catch(d){o(d)}}function p(l){var d;l.done?i(l.value):(d=l.value,d instanceof r?d:new r(function(m){m(d)})).then(u,f)}p((n=n.apply(t,[])).next())})},I1=function(t,e){var r,n,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function f(p){return function(l){return(function(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(u=0)),u;)try{if(r=1,n&&(i=2&d[0]?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return u.label++,{value:d[1],done:!1};case 5:u.label++,n=d[1],d=[0];continue;case 7:d=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!((i=i.length>0&&i[i.length-1])||d[0]!==6&&d[0]!==2)){u=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){u.label=d[1];break}if(d[0]===6&&u.label<i[1]){u.label=i[1],i=d;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(d);break}i[2]&&u.ops.pop(),u.trys.pop();continue}d=e.call(t,u)}catch(m){d=[6,m],n=0}finally{r=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}})([p,l])}}},SK=(function(t){function e(r){var n=t.call(this)||this,i=r.timeout,o=r.timeoutMsg,u=r.restrictedMethods;return n.timeout=i||0,n.timeoutMsg=o||"",n.restrictedMethods=u||["get","post","upload","download"],n}return wK(e,t),e.prototype.get=function(r){return this.request(hn(hn({},r),{method:"get"}),this.restrictedMethods.includes("get"))},e.prototype.post=function(r){return this.request(hn(hn({},r),{method:"post"}),this.restrictedMethods.includes("post"))},e.prototype.put=function(r){return this.request(hn(hn({},r),{method:"put"}))},e.prototype.upload=function(r){var n=r.data,i=r.file,o=r.name,u=r.method,f=r.headers,p=f===void 0?{}:f,l={post:"post",put:"put"}[u?.toLowerCase()]||"put",d=new FormData;return l==="post"?(Object.keys(n).forEach(function(m){d.append(m,n[m])}),d.append("key",o),d.append("file",i),this.request(hn(hn({},r),{data:d,method:l}),this.restrictedMethods.includes("upload"))):this.request(hn(hn({},r),{method:"put",headers:p,body:i}),this.restrictedMethods.includes("upload"))},e.prototype.download=function(r){return C1(this,void 0,void 0,function(){var n,i,o,u;return I1(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),[4,this.get(hn(hn({},r),{headers:{},responseType:"blob"}))];case 1:return n=f.sent().data,i=window.URL.createObjectURL(new Blob([n])),o=decodeURIComponent(new URL(r.url).pathname.split("/").pop()||""),(u=document.createElement("a")).href=i,u.setAttribute("download",o),u.style.display="none",document.body.appendChild(u),u.click(),window.URL.revokeObjectURL(i),document.body.removeChild(u),[3,3];case 2:return f.sent(),[3,3];case 3:return[2,new Promise(function(p){p({statusCode:200,tempFilePath:r.url})})]}})})},e.prototype.fetch=function(r){var n;return C1(this,void 0,void 0,function(){var i,o,u,f,p,l,d,m,y,b,w,S,E,R=this;return I1(this,function(O){switch(O.label){case 0:return i=new AbortController,o=r.url,u=r.enableAbort,f=u!==void 0&&u,p=r.stream,l=p!==void 0&&p,d=r.signal,m=r.timeout,y=r.shouldThrowOnError,b=y===void 0||y,w=m??this.timeout,d&&(d.aborted&&i.abort(),d.addEventListener("abort",function(){return i.abort()})),S=null,f&&w&&(S=setTimeout(function(){console.warn(R.timeoutMsg),i.abort(new Error(R.timeoutMsg))},w)),[4,fetch(o,hn(hn({},r),{signal:i.signal})).then(function(C){return C1(R,void 0,void 0,function(){var I,P,D;return I1(this,function(j){switch(j.label){case 0:return clearTimeout(S),b?C.ok?(I=C,[3,3]):[3,1]:[3,4];case 1:return D=(P=Promise).reject,[4,C.json()];case 2:I=D.apply(P,[j.sent()]),j.label=3;case 3:return[2,I];case 4:return[2,C]}})})}).catch(function(C){if(clearTimeout(S),b)return Promise.reject(C)})];case 1:return E=O.sent(),[2,{data:l?E.body:!((n=E.headers.get("content-type"))===null||n===void 0)&&n.includes("application/json")?E.json():E.text(),statusCode:E.status,header:E.headers}]}})})},e.prototype.request=function(r,n){var i=this;n===void 0&&(n=!1);var o=String(r.method).toLowerCase()||"get";return new Promise(function(u){var f,p,l,d=r.url,m=r.headers,y=m===void 0?{}:m,b=r.data,w=r.responseType,S=r.withCredentials,E=r.body,R=r.onUploadProgress,O=(function(I,P,D){D===void 0&&(D={});var j=/\?/.test(P),q="";return Object.keys(D).forEach(function(U){q===""?!j&&(P+="?"):q+="&",q+="".concat(U,"=").concat(encodeURIComponent(D[U]))}),/^http(s)?:\/\//.test(P+=q)?P:"".concat(I).concat(P)})("https:",d,o==="get"?b:{}),C=new XMLHttpRequest;C.open(o,O),w&&(C.responseType=w),Object.keys(y).forEach(function(I){C.setRequestHeader(I,y[I])}),R&&C.upload.addEventListener("progress",R),C.onreadystatechange=function(){var I={};if(C.readyState===4){var P=C.getAllResponseHeaders().trim().split(/[\r\n]+/),D={};P.forEach(function(j){var q=j.split(": "),U=q.shift().toLowerCase(),Y=q.join(": ");D[U]=Y}),I.header=D,I.statusCode=C.status;try{I.data=w==="blob"?C.response:JSON.parse(C.responseText)}catch{I.data=w==="blob"?C.response:C.responseText}clearTimeout(f),u(I)}},n&&i.timeout&&(f=setTimeout(function(){console.warn(i.timeoutMsg),C.abort()},i.timeout)),l=b,p=Object.prototype.toString.call(l)==="[object FormData]"?b:y["content-type"]==="application/x-www-form-urlencoded"?(function(I){I===void 0&&(I={});var P=[];return Object.keys(I).forEach(function(D){P.push("".concat(D,"=").concat(encodeURIComponent(I[D])))}),P.join("&")})(b):E||(b?JSON.stringify(b):void 0),S&&(C.withCredentials=!0),C.send(p)})},e})(yK),BE,zE=function(){return zE=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},zE.apply(this,arguments)};function EK(){return{adapter:zE({},{type:"default",root:window,reqClass:SK,wsClass:WebSocket,localStorage}),runtime:BE.WEB}}(function(t){t.WEB="web",t.WX_MP="wx_mp"})(BE||(BE={}));var TK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),x1=function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function u(l){try{p(n.next(l))}catch(d){o(d)}}function f(l){try{p(n.throw(l))}catch(d){o(d)}}function p(l){var d;l.done?i(l.value):(d=l.value,d instanceof r?d:new r(function(m){m(d)})).then(u,f)}p((n=n.apply(t,[])).next())})},N1=function(t,e){var r,n,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function f(p){return function(l){return(function(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(u=0)),u;)try{if(r=1,n&&(i=2&d[0]?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return u.label++,{value:d[1],done:!1};case 5:u.label++,n=d[1],d=[0];continue;case 7:d=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!((i=i.length>0&&i[i.length-1])||d[0]!==6&&d[0]!==2)){u=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){u.label=d[1];break}if(d[0]===6&&u.label<i[1]){u.label=i[1],i=d;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(d);break}i[2]&&u.ops.pop(),u.trys.pop();continue}d=e.call(t,u)}catch(m){d=[6,m],n=0}finally{r=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}})([p,l])}}},EU=(function(t){function e(r){var n=t.call(this)||this;return n.root=r,r.tcbCacheObject||(r.tcbCacheObject={}),n}return TK(e,t),e.prototype.setItem=function(r,n){this.root.tcbCacheObject[r]=n},e.prototype.getItem=function(r){return this.root.tcbCacheObject[r]},e.prototype.removeItem=function(r){delete this.root.tcbCacheObject[r]},e.prototype.clear=function(){delete this.root.tcbCacheObject},e})(gK),AK=(function(){function t(e){this.keys={};var r=e.persistence,n=e.platformInfo,i=n===void 0?{}:n,o=e.keys,u=o===void 0?{}:o;this.platformInfo=i,this.storage||(this.persistenceTag=this.platformInfo.adapter.primaryStorage||r,this.storage=(function(f,p){switch(f){case"local":default:return p.localStorage?p.localStorage:(Df(Yg,"localStorage is not supported on current platform"),new EU(p.root));case"none":return new EU(p.root)}})(this.persistenceTag,this.platformInfo.adapter),this.keys=u)}return Object.defineProperty(t.prototype,"mode",{get:function(){return this.storage.mode||"sync"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"persistence",{get:function(){return this.persistenceTag},enumerable:!1,configurable:!0}),t.prototype.setStore=function(e,r,n){if(this.mode!=="async"){if(this.storage)try{var i={version:n||"localCachev1",content:r};this.storage.setItem(e,JSON.stringify(i))}catch(o){throw new Error(JSON.stringify({code:SU,msg:"[".concat("@cloudbase/js-sdk","][").concat(SU,"]setStore failed"),info:o}))}}else Df(_p,"current platform's storage is asynchronous, please use setStoreAsync insteed")},t.prototype.setStoreAsync=function(e,r,n){return x1(this,void 0,void 0,function(){var i;return N1(this,function(o){switch(o.label){case 0:if(!this.storage)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),i={version:n||"localCachev1",content:r},[4,this.storage.setItem(e,JSON.stringify(i))];case 2:return o.sent(),[3,4];case 3:return o.sent(),[2];case 4:return[2]}})})},t.prototype.getStore=function(e,r){var n;if(this.mode!=="async"){try{if(typeof process<"u"&&(!((n=Nv)===null||n===void 0)&&n.tcb_token))return Nv.tcb_token;if(!this.storage)return""}catch{return""}r=r||"localCachev1";var i=this.storage.getItem(e);return i&&i.indexOf(r)>=0?JSON.parse(i).content:""}Df(_p,"current platform's storage is asynchronous, please use getStoreAsync insteed")},t.prototype.getStoreAsync=function(e,r){var n;return x1(this,void 0,void 0,function(){var i;return N1(this,function(o){switch(o.label){case 0:try{if(typeof process<"u"&&(!((n=Nv)===null||n===void 0)&&n.tcb_token))return[2,Nv.tcb_token];if(!this.storage)return[2,""]}catch{return[2,""]}return r=r||"localCachev1",[4,this.storage.getItem(e)];case 1:return(i=o.sent())&&i.indexOf(r)>=0?[2,JSON.parse(i).content]:[2,""]}})})},t.prototype.removeStore=function(e){this.mode!=="async"?this.storage.removeItem(e):Df(_p,"current platform's storage is asynchronous, please use removeStoreAsync insteed")},t.prototype.removeStoreAsync=function(e){return x1(this,void 0,void 0,function(){return N1(this,function(r){switch(r.label){case 0:return[4,this.storage.removeItem(e)];case 1:return r.sent(),[2]}})})},t})(),OK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),RK=function(t,e,r){for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))},sk=function(t,e){this.data=e||null,this.name=t},CK=(function(t){function e(r,n){var i=t.call(this,"error",{error:r,data:n})||this;return i.error=r,i}return OK(e,t),e})(sk),yT=(function(){function t(){this.listeners={}}return t.prototype.on=function(e,r){return(function(n,i,o){o[n]=o[n]||[],o[n].push(i)})(e,r,this.listeners),this},t.prototype.off=function(e,r){return(function(n,i,o){if(o?.[n]){var u=o[n].indexOf(i);u!==-1&&o[n].splice(u,1)}})(e,r,this.listeners),this},t.prototype.fire=function(e,r){if((function(f,p){return f instanceof p})(e,CK))return console.error(e.error),this;var n=typeof e=="string"?new sk(e,r||{}):e,i=n.name;if(this.listens(i)){n.target=this;for(var o=0,u=this.listeners[i]?RK([],this.listeners[i]):[];o<u.length;o++)u[o].call(this,n)}return this},t.prototype.listens=function(e){return this.listeners[e]&&this.listeners[e].length>0},t})(),IK=new yT;typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox");function _r(t){return t.mode,t.customInfo,t.title,t.messages,function(e,r,n){}}function TU(t){this.message=t}function AU(t){this.message=t}TU.prototype=new Error,TU.prototype.name="InvalidCharacterError",typeof window<"u"&&window.atob&&window.atob.bind(window),AU.prototype=new Error,AU.prototype.name="InvalidTokenError";const OU="x-request-id",RU="x-device-id",CU="device_id",xK=async function(t,e){let r=null,n=null;try{const i=Object.assign({},e);i.method||(i.method="GET"),i.body&&typeof i.body!="string"&&(i.body=JSON.stringify(i.body));const o=await fetch(t,i),u=await o.json();u!=null&&u.error?(n=u,n.error_uri=new URL(t).pathname):r=u}catch(i){n={error:fi.UNREACHABLE,error_description:i.message,error_uri:new URL(t).pathname}}if(n)throw n;return r},gT=new class{constructor(t){this._env=t?.env||""}async getItem(t){return window.localStorage.getItem("".concat(t).concat(this._env))}async removeItem(t){window.localStorage.removeItem("".concat(t).concat(this._env))}async setItem(t,e){window.localStorage.setItem("".concat(t).concat(this._env),e)}getItemSync(t){return window.localStorage.getItem("".concat(t).concat(this._env))}removeItemSync(t){window.localStorage.removeItem("".concat(t).concat(this._env))}setItemSync(t,e){window.localStorage.setItem("".concat(t).concat(this._env),e)}};function uk(t){let e=!0;return t!=null&&t.expires_at&&t!=null&&t.access_token&&(e=t.expires_at<new Date),e}class NK{constructor(e){this.credentials=null,this.accessKeyCredentials=null,this.singlePromise=null,this.tokenSectionName=e.tokenSectionName,this.storage=e.storage,this.clientId=e.clientId,this.singlePromise=new ak({clientId:this.clientId}),this.credentials=e.credentials||null}getStorageCredentialsSync(){let e=null;const r=this.storage.getItemSync(this.tokenSectionName);if(r!=null)try{var n;e=JSON.parse(r),(n=e)!==null&&n!==void 0&&n.expires_at&&(e.expires_at=new Date(e.expires_at))}catch{this.storage.removeItem(this.tokenSectionName),e=null}return e}async setCredentials(e){if(e!=null&&e.expires_in){if(e!=null&&e.expires_at||(e.expires_at=new Date(Date.now()+1e3*(e.expires_in-30))),this.storage){const r=JSON.stringify(e);await this.storage.setItem(this.tokenSectionName,r)}this.credentials=e}else this.storage&&await this.storage.removeItem(this.tokenSectionName),this.credentials=null}setAccessKeyCredentials(e){this.accessKeyCredentials=e}async getCredentials(){return this.singlePromise.run("getCredentials",async()=>{if(uk(this.credentials)){const{credentials:e,isAccessKeyCredentials:r}=await this.getStorageCredentials();if(r)return e;this.credentials=e}return this.credentials})}async getStorageCredentials(){return this.singlePromise.run("_getStorageCredentials",async()=>{let e=null,r=!1;const n=await this.storage.getItem(this.tokenSectionName);if(n)try{var i;e=JSON.parse(n),(i=e)!==null&&i!==void 0&&i.expires_at&&(e.expires_at=new Date(e.expires_at))}catch{await this.storage.removeItem(this.tokenSectionName),e=null}else e=this.accessKeyCredentials||null,r=!0;return{credentials:e,isAccessKeyCredentials:r}})}}class Go{constructor(e){var r;this.initializePromise=null,this.lockAcquired=!1,this.pendingInLock=[],this.singlePromise=null,e.clientSecret||(e.clientSecret=""),!e.clientId&&e.env&&(e.clientId=e.env),this.apiOrigin=e.apiOrigin,this.apiPath=e.apiPath||Vg,this.clientId=e.clientId,this.i18n=e.i18n,this.eventBus=e.eventBus,this.singlePromise=new ak({clientId:this.clientId}),this.retry=this.formatRetry(e.retry,Go.defaultRetry),e.baseRequest?this.baseRequest=e.baseRequest:this.baseRequest=xK,this.tokenInURL=e.tokenInURL,this.headers=e.headers,this.storage=e.storage||gT,this.localCredentials=new NK({tokenSectionName:"credentials_".concat(e.clientId),storage:this.storage,clientId:e.clientId}),this.clientSecret=e.clientSecret,e.clientId&&(this.basicAuth="Basic ".concat((function(n){let i,o,u,f,p="",l=0;const d=(n=String(n)).length%3;for(;l<n.length;){if((o=n.charCodeAt(l++))>255||(u=n.charCodeAt(l++))>255||(f=n.charCodeAt(l++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");i=o<<16|u<<8|f,p+=Tu.charAt(i>>18&63)+Tu.charAt(i>>12&63)+Tu.charAt(i>>6&63)+Tu.charAt(63&i)}return d?p.slice(0,d-3)+"===".substring(d):p})("".concat(e.clientId,":").concat(this.clientSecret)))),this.wxCloud=e.wxCloud;try{mT()&&(this.useWxCloud=e.useWxCloud,this.wxCloud===void 0&&e.env&&(wx.cloud.init({env:e.env}),this.wxCloud=wx.cloud))}catch{}this.refreshTokenFunc=e.refreshTokenFunc||this.defaultRefreshTokenFunc,this.anonymousSignInFunc=e.anonymousSignInFunc,this.onCredentialsError=e.onCredentialsError,this.getInitialSession=e.getInitialSession,this.onInitialSessionObtained=e.onInitialSessionObtained,this.logDebugMessages=(r=e.debug)!==null&&r!==void 0&&r,IK.on("lang_change",n=>{var i;this.i18n=((i=n.data)===null||i===void 0?void 0:i.i18n)||this.i18n})}setGetInitialSession(e){this.getInitialSession=e}setOnInitialSessionObtained(e){this.onInitialSessionObtained=e}async initialize(e){return this.initializePromise?await this.initializePromise:e!==void 0?(this.initializePromise=e,await this.initializePromise):(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async setCredentials(e){return await this.initializePromise,this._acquireLock(-1,async()=>this.localCredentials.setCredentials(e))}setAccessKeyCredentials(e){return this.localCredentials.setAccessKeyCredentials(e)}async getAccessToken(){await this.initializePromise;const e=await this.getCredentials();if(e!=null&&e.access_token)return Promise.resolve(e.access_token);const r={error:fi.UNAUTHENTICATED};return Promise.reject(r)}async request(e,r){var n,i,o,u;r||(r={});const f=this.formatRetry(r.retry,this.retry);if(r.headers=ur(ur({},r.headers),{},{[(n=this.i18n)===null||n===void 0?void 0:n.LANG_HEADER_KEY]:(i=this.i18n)===null||i===void 0?void 0:i.lang}),this.headers&&(r.headers=ur(ur({},this.headers),r.headers)),r.headers[OU]||(r.headers[OU]=yU()),!r.headers[RU]){const m=await this.getDeviceId();r.headers[RU]=m}if((o=r)!==null&&o!==void 0&&o.withBasicAuth&&this.basicAuth&&(r.headers.Authorization=this.basicAuth),(u=r)!==null&&u!==void 0&&u.withCredentials){const m=r.getCredentials?await r.getCredentials():await this.getCredentials();m&&(this.tokenInURL?(e.indexOf("?")<0&&(e+="?"),e+="access_token=".concat(m.access_token)):r.headers.Authorization="".concat(m.token_type," ").concat(m.access_token))}else this.clientId&&e.indexOf("client_id")<0&&(e+=e.indexOf("?")<0?"?":"&",e+="client_id=".concat(this.clientId));e.startsWith("/")&&(e="".concat(this.apiOrigin).concat(this.apiPath).concat(e));let p=null;const l=f+1;for(let m=0;m<l;m++){try{var d;if(p=r.useWxCloud||this.useWxCloud?await this.wxCloudCallFunction(e,r):await this.baseRequest(e,r),(d=p)!==null&&d!==void 0&&d.code)throw{error:p.code,error_description:p.message,error_uri:new URL(e).pathname};break}catch(y){if(r.withCredentials&&y&&y.error===fi.UNAUTHENTICATED)return await this.setCredentials(null),Promise.reject(y);if(m===f||!y||y.error!=="unreachable")return Promise.reject(y)}await this.sleep(Go.retryInterval)}return p}async wxCloudCallFunction(e,r){let n=null,i=null;try{var o;let u="";try{u=await wx.getRendererUserAgent()}catch{}const{result:f}=await this.wxCloud.callFunction({name:"httpOverCallFunction",data:{url:e,method:r.method,headers:ur({origin:"https://servicewechat.com","User-Agent":u},r.headers),body:r.body}});f!=null&&(o=f.body)!==null&&o!==void 0&&o.error_code?(i=f?.body,i.error_uri=gU(e)):n=f?.body}catch(u){i={error:fi.UNREACHABLE,error_description:u.message,error_uri:gU(e)}}if(i)throw i;return n}async getCredentials(){return await this.initializePromise,this._acquireLock(-1,async()=>this._getCredentials())}getCredentialsSync(){return this.localCredentials.getStorageCredentialsSync()}getCredentialsAsync(){return this.getCredentials()}async getScope(){const e=await this.localCredentials.getCredentials();if(!e){var r;const n="credentials not found";return(r=this.onCredentialsError)===null||r===void 0||r.call(this,{msg:n}),this.unAuthenticatedError(n)}return e.scope}async getGroups(){const e=await this.localCredentials.getCredentials();if(!e){var r;const n="credentials not found";return(r=this.onCredentialsError)===null||r===void 0||r.call(this,{msg:n}),this.unAuthenticatedError(n)}return e.groups}async refreshToken(e,r){return await this.initializePromise,this._acquireLock(-1,async()=>this._refreshToken(e,r))}async _refreshToken(e,r){return this.singlePromise.run("_refreshToken",async()=>{if(!e||!e.refresh_token){var n;const f="no refresh token found in credentials";return(n=this.onCredentialsError)===null||n===void 0||n.call(this,{msg:f}),this.unAuthenticatedError(f)}try{var i;const f=await this.refreshTokenFunc(e.refresh_token,e);return await this.localCredentials.setCredentials(f),(i=this.eventBus)===null||i===void 0||i.fire(co,{event:pK}),f}catch(f){var o;if(r!=null&&r.throwError)throw f;if(f.error===fi.INVALID_GRANT){var u;await this.localCredentials.setCredentials(null);const p=f.error_description;return(u=this.onCredentialsError)===null||u===void 0||u.call(this,{msg:p}),this.unAuthenticatedError(p)}return(o=this.onCredentialsError)===null||o===void 0||o.call(this,{msg:f.error_description}),Promise.reject(f)}})}async anonymousLogin(e){return this.singlePromise.run("_anonymousLogin",async()=>(this.anonymousSignInFunc?e=await this.anonymousSignInFunc(e)||await this.localCredentials.getCredentials():e=await this.anonymousSignIn(e),e))}checkRetry(e){let r=null;if((typeof e!="number"||e<Go.minRetry||e>Go.maxRetry)&&(r={error:fi.UNREACHABLE,error_description:"wrong options param: retry"}),r)throw r;return e}formatRetry(e,r){return e===void 0?r:this.checkRetry(e)}async sleep(e){return new Promise(r=>{setTimeout(()=>{r()},e)})}async anonymousSignIn(e){return this.singlePromise.run("_anonymous",async()=>{if(!e||e.scope!=="anonymous")return this.unAuthenticatedError("no anonymous in credentials");try{const r=await this.request(Ke.AUTH_SIGN_IN_ANONYMOUSLY_URL,{method:"POST",withBasicAuth:!0,body:{}});return await this.localCredentials.setCredentials(r),r}catch(r){return r.error===fi.INVALID_GRANT?(await this.localCredentials.setCredentials(null),this.unAuthenticatedError(r.error_description)):Promise.reject(r)}})}async defaultRefreshTokenFunc(e,r){if(e===void 0||e===""){var n;const o="refresh token not found";return(n=this.onCredentialsError)===null||n===void 0||n.call(this,{msg:o}),this.unAuthenticatedError(o)}let i=Ke.AUTH_TOKEN_URL;return r?.version==="v2"&&(i=Yf.AUTH_TOKEN_URL),ur(ur({},await this.request(i,{method:"POST",body:{client_id:this.clientId,client_secret:this.clientSecret,grant_type:"refresh_token",refresh_token:e}})),{},{version:r?.version||"v1"})}async getDeviceId(){if(this.deviceID)return this.deviceID;let e=await this.storage.getItem(CU);return typeof e=="string"&&e.length>=16&&e.length<=48||(e=yU(),await this.storage.setItem(CU,e)),this.deviceID=e,e}unAuthenticatedError(e){const r={error:fi.UNAUTHENTICATED,error_description:e};return Promise.reject(r)}_debug(){if(this.logDebugMessages){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];console.log("[OAuth2Client]",...r)}}async _initialize(){try{if(!this.getInitialSession)return this._debug("#_initialize()","no getInitialSession callback set, skipping"),{error:null};this._debug("#_initialize()","calling getInitialSession callback");try{const{data:e,error:r}=await this.getInitialSession();if(e!=null&&e.session&&(this._debug("#_initialize()","session obtained from getInitialSession",e.session),await this.localCredentials.setCredentials(e?.session)),this.onInitialSessionObtained){this._debug("#_initialize()","calling onInitialSessionObtained callback");try{await this.onInitialSessionObtained(e,r)}catch(n){this._debug("#_initialize()","error in onInitialSessionObtained",n)}}return r?(this._debug("#_initialize()","error from getInitialSession",r),{error:r}):{error:null}}catch(e){return this._debug("#_initialize()","exception during getInitialSession",e),{error:e instanceof Error?e:new Error(String(e))}}}catch(e){return this._debug("#_initialize()","unexpected error",e),{error:e instanceof Error?e:new Error(String(e))}}finally{this._debug("#_initialize()","end")}}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}this._debug("#_acquireLock","acquiring lock for client",this.clientId);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","releasing lock for client",this.clientId),this.lockAcquired=!1}}finally{this._debug("#_acquireLock","end")}}async _getCredentials(){let e=await this.localCredentials.getCredentials();if(!e){var r;const o="credentials not found";return(r=this.onCredentialsError)===null||r===void 0||r.call(this,{msg:o}),this.unAuthenticatedError(o)}if(uk(e))if(e.refresh_token)try{e=await this._refreshToken(e)}catch(o){var n;if(e.scope!=="anonymous")return(n=this.onCredentialsError)===null||n===void 0||n.call(this,{msg:o.error_description}),Promise.reject(o);e=await this.anonymousLogin(e)}else{if(e.scope!=="anonymous"){var i;const o="no refresh token found in credentials";return(i=this.onCredentialsError)===null||i===void 0||i.call(this,{msg:o}),this.unAuthenticatedError(o)}e=await this.anonymousLogin(e)}return e}}Go.defaultRetry=2,Go.minRetry=0,Go.maxRetry=5,Go.retryInterval=1e3;const IU=(t,e)=>{let r;return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];clearTimeout(r),r=setTimeout(()=>t.apply(null,i),e)}},xU=new yT,NU="resolveCaptchaData",PK="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:999",UK="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:320px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,0.2);z-index:1000",qK="margin-bottom:15px",DK="display:flex;align-items:center;justify-content:space-between;margin-bottom:15px",jK="width:100%;height:auto;border:1px solid #eee",P1="padding:10px 8px;background:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;flex:1;white-space:nowrap;margin-left:10px",LK="width:100%;padding:14px 16px;margin-bottom:15px;box-sizing:border-box;border:2px solid #e8ecf4;border-radius:10px;font-size:15px",U1="width:100%;padding:10px;background:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer",PU="background:#6c757d;cursor:not-allowed",kK=async(t,e)=>{const{captchaData:r,state:n,token:i}=_K(t);return(o=>{let{oauthInstance:u,captchaState:f}=o;const p="captcha-image",l=async()=>{try{const I=await u.createCaptchaData({state:f.state});f=ur(ur({},f),{},{captchaData:I.data,token:I.token}),document.getElementById(p).src=I.data}catch(I){console.error("",I)}},d=(I,P,D)=>{const j=document.createElement(I);return P&&(j.style.cssText=P),D&&(j.textContent=D),j},m=d("div",PK),y=d("div",UK);y.appendChild(d("p",qK,""));const b=d("div",DK),w=d("img",jK);w.id=p,w.src=f.captchaData,b.appendChild(w);const S=d("button",P1,"");S.onclick=IU(async()=>{S.textContent="...",S.disabled=!0,S.style.cssText="".concat(P1,";").concat(PU);try{await l()}finally{S.textContent="",S.disabled=!1,S.style.cssText=P1}},500),b.appendChild(S),y.appendChild(b);const E=d("input",LK);E.type="text",E.placeholder="",E.maxLength=4,y.appendChild(E);const R=d("div","color:#dc3545;font-size:12px;margin-bottom:10px;display:none;padding:8px;background:#f8d7da;border:1px solid #f5c6cb;border-radius:4px");y.appendChild(R);const O=I=>{R.textContent=I,R.style.display="block"},C=d("button",U1,"");C.onclick=IU(async()=>{const I=E.value.trim();if(I){R.style.display="none",C.textContent="...",C.disabled=!0,C.style.cssText="".concat(U1,";").concat(PU);try{const P=await u.verifyCaptchaData({token:f.token,key:I});xU.fire(NU,P),console.log(""),document.body.removeChild(m),document.body.removeChild(y)}catch(P){console.error("",P);const D=P.error_description||"";O(D),E.value="",E.focus(),await l()}finally{C.textContent="",C.disabled=!1,C.style.cssText=U1}}else O("")},500),y.appendChild(C),document.body.appendChild(m),document.body.appendChild(y)})({oauthInstance:e,captchaState:{captchaData:r,state:n,token:i}}),new Promise(o=>{console.log("..."),xU.on(NU,u=>{o(u?.data)})})};class MK{constructor(e){e.openURIWithCallback||(e.openURIWithCallback=this.getDefaultOpenURIWithCallback()),e.storage||(e.storage=gT),this.config=e,this.tokenSectionName="captcha_".concat(e.clientId||e.env)}isMatch(){var e,r;return((e=this.config)===null||e===void 0||(e=e.adapter)===null||e===void 0||(r=e.isMatch)===null||r===void 0?void 0:r.call(e))||mT()}async request(e,r){r||(r={}),r.method||(r.method="GET");const n="".concat(r.method,":").concat(e);let i,o=e;r.withCaptcha&&(o=await this.appendCaptchaTokenToURL(e,n,!1));try{i=await this.config.request(o,r)}catch(u){return u.error===fi.CAPTCHA_REQUIRED||u.error===fi.CAPTCHA_INVALID?(e=await this.appendCaptchaTokenToURL(e,n,u.error===fi.CAPTCHA_INVALID),this.config.request(e,r)):Promise.reject(u)}return i}getDefaultOpenURIWithCallback(){return e=>kK(e,this.config.oauthInstance)}async getCaptchaToken(e,r){if(!e){const u=await this.findCaptchaToken();if(u)return u}const n=await this.config.request(Ke.CAPTCHA_DATA_URL,{method:"POST",body:{state:r,redirect_uri:""},withCredentials:!1}),i="".concat(n.data,"?state=").concat(encodeURIComponent(r),"&token=").concat(encodeURIComponent(n.token)),o=await this.config.openURIWithCallback(i);return this.saveCaptchaToken(o),o.captcha_token}async appendCaptchaTokenToURL(e,r,n){const i=await this.getCaptchaToken(n,r);return e.indexOf("?")>0?e+="&captcha_token=".concat(i):e+="?captcha_token=".concat(i),e}async saveCaptchaToken(e){e.expires_at=new Date(Date.now()+1e3*(e.expires_in-10));const r=JSON.stringify(e);await this.config.storage.setItem(this.tokenSectionName,r)}async findCaptchaToken(){const e=await this.config.storage.getItem(this.tokenSectionName);if(e!=null)try{const r=JSON.parse(e);return r!=null&&r.expires_at&&(r.expires_at=new Date(r.expires_at)),r.expires_at<new Date?null:r.captcha_token}catch{return await this.config.storage.removeItem(this.tokenSectionName),null}return null}}class Wv{constructor(e){if(this.params={},typeof e=="string")this.parse(e);else if(e&&typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.append(r,e[r])}parse(e){e.split("&").forEach(r=>{const[n,i]=r.split("=").map(decodeURIComponent);this.append(n,i)})}append(e,r){this.params[e]?this.params[e]=this.params[e].concat([r]):this.params[e]=[r]}get(e){return this.params[e]?this.params[e][0]:null}getAll(e){return this.params[e]||[]}delete(e){delete this.params[e]}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}set(e,r){this.params[e]=[r]}toString(){const e=[];for(const r in this.params)Object.prototype.hasOwnProperty.call(this.params,r)&&this.params[r].forEach(n=>{e.push("".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(n)))});return e.join("&")}}class nt extends Error{constructor(e){super(e.error_description||e.message),this.__isAuthError=!0,this.name="AuthError",this.status=e.error,this.code=e.error_code}}const BK=["provider_redirect_uri","other_params"];async function q1(t,e){try{return}catch{if(t)return(async()=>{try{return require("../utils/encrypt")}catch{try{return await Promise.resolve().then(function(){return tQ})}catch{return}}})()}}let zK=class Ty{static parseParamsToSearch(e){return Object.keys(e).forEach(r=>{e[r]||delete e[r]}),new Wv(e).toString()}constructor(e){let{request:r}=e,n=e.credentialsClient;if(!n){const i={apiOrigin:e.apiOrigin,apiPath:e.apiPath,clientId:e.clientId,storage:e.storage,env:e.env,baseRequest:e.baseRequest,anonymousSignInFunc:e.anonymousSignInFunc,wxCloud:e.wxCloud,onCredentialsError:e.onCredentialsError,headers:e.headers||{},i18n:e.i18n,debug:e.debug};n=new Go(i)}if(!r){const i=n.request.bind(n),o=new MK(ur({env:e.env,clientId:e.clientId,request:i,storage:e.storage,adapter:e.adapter,oauthInstance:this},e.captchaOptions));r=o.request.bind(o)}this.config={env:e.env,apiOrigin:e.apiOrigin,apiPath:e.apiPath,clientId:e.clientId,request:r,credentialsClient:n,storage:e.storage||gT,adapter:e.adapter}}getParamsByVersion(e,r){var n;const i=bp(e),o=((n={v2:Yf}[i?.version])===null||n===void 0?void 0:n[r])||Ke[r];return i&&delete i.version,{params:i,url:o}}async signIn(e){const r=e.version||"v1",n=this.getParamsByVersion(e,"AUTH_SIGN_IN_URL");n.params.query&&delete n.params.query;const i=await this.getEncryptParams(n.params),o=await this.config.request(n.url,{method:"POST",body:i});return await this.config.credentialsClient.setCredentials(ur(ur({},o),{},{version:r})),Promise.resolve(o)}async signInAnonymously(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=await this.config.request(Ke.AUTH_SIGN_IN_ANONYMOUSLY_URL,{method:"POST",body:e,useWxCloud:r});return await this.config.credentialsClient.setCredentials(n),Promise.resolve(n)}async signUp(e){const r=await this.config.request(Ke.AUTH_SIGN_UP_URL,{method:"POST",body:e});return await this.config.credentialsClient.setCredentials(r),Promise.resolve(r)}async signOut(e){let r={};if(e){try{r=await this.config.request(Ke.AUTH_SIGNOUT_URL,{method:"POST",withCredentials:!0,body:e})}catch(o){o.error!==fi.UNAUTHENTICATED&&console.log("sign_out_error",o)}return await this.config.credentialsClient.setCredentials(),r}const n=await this.config.credentialsClient.getAccessToken(),i=await this.config.request(Ke.AUTH_REVOKE_URL,{method:"POST",body:{token:n}});return await this.config.credentialsClient.setCredentials(),Promise.resolve(i)}async revokeAllDevices(){await this.config.request(Ke.AUTH_REVOKE_ALL_URL,{method:"DELETE",withCredentials:!0})}async revokeDevice(e){await this.config.request(Ke.AUTHORIZED_DEVICES_DELETE_URL+e.device_id,{method:"DELETE",withCredentials:!0})}async getVerification(e,r){let n=!1;(e.target==="CUR_USER"||await this.hasLoginState())&&(n=!0);const i=bp(e);return i.phone_number&&!/^\+\d{1,3}\s+\d+/.test(i.phone_number)&&(i.phone_number="+86 ".concat(i.phone_number)),this.config.request(Ke.VERIFICATION_URL,{method:"POST",body:i,withCaptcha:r?.withCaptcha||!1,withCredentials:n})}async verify(e){const r=this.getParamsByVersion(e,"VERIFY_URL"),n=await this.config.request(r.url,{method:"POST",body:r.params});return e?.version==="v2"&&await this.config.credentialsClient.setCredentials(ur(ur({},n),{},{version:"v2"})),n}async genProviderRedirectUri(e){const{provider_redirect_uri:r,other_params:n={}}=e,i=(function(u,f){if(u==null)return{};var p,l,d=(function(y,b){if(y==null)return{};var w={};for(var S in y)if({}.hasOwnProperty.call(y,S)){if(b.indexOf(S)!==-1)continue;w[S]=y[S]}return w})(u,f);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(u);for(l=0;l<m.length;l++)p=m[l],f.indexOf(p)===-1&&{}.propertyIsEnumerable.call(u,p)&&(d[p]=u[p])}return d})(e,BK);r&&!i.redirect_uri&&(i.redirect_uri=r);let o="".concat(Ke.PROVIDER_URI_URL,"?").concat(Ty.parseParamsToSearch(i));return Object.keys(n).forEach(u=>{const f=n[u];(u!=="sign_out_uri"||f?.length>0)&&(o+="&other_params[".concat(u,"]=").concat(encodeURIComponent(f)))}),this.config.request(o,{method:"GET"})}async grantProviderToken(e){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.config.request(Ke.PROVIDER_TOKEN_URL,{method:"POST",body:e,useWxCloud:r})}async patchProviderToken(e){return this.config.request(Ke.PROVIDER_TOKEN_URL,{method:"PATCH",body:e})}async signInWithProvider(e){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=this.getParamsByVersion(e,"AUTH_SIGN_IN_WITH_PROVIDER_URL"),i=await this.config.request(n.url,{method:"POST",body:n.params,useWxCloud:r});return await this.config.credentialsClient.setCredentials(ur(ur({},i),{},{version:e?.version||"v1"})),Promise.resolve(i)}async toBindIdentity(e){const r=e.credentials||await this.config.credentialsClient.localCredentials.getCredentials();let n;try{await this.bindWithProvider({provider_token:e.provider_token},r),n={data:{type:Kf,provider:e.provider},error:null}}catch(u){n={data:{type:Kf},error:new nt(u)}}var i,o;return e.fireEvent&&((i=this.config.eventBus)===null||i===void 0||(o=i.fire)===null||o===void 0||o.call(i,co,{event:ok,info:n})),n}async getInitialSession(){let e={};try{var r,n,i,o,u;if(typeof window>"u"||typeof document>"u")return{data:null,error:null};const f=new URLSearchParams((r=location)===null||r===void 0?void 0:r.search),p=f.get("code"),l=f.get("state");if(!p||!l)return{data:null,error:null};let d=null;try{d=JSON.parse(sessionStorage.getItem(l)||"null")}catch{}e={type:(n=d)===null||n===void 0?void 0:n.type};const m=f.get("error"),y=f.get("error_description");if(m||y)return{data:e,error:new nt({message:y||m||"Unknown error from OAuth provider"})};const b=((i=d)===null||i===void 0?void 0:i.provider)||f.get("provider");if(!b)return{data:e,error:new nt({message:"Provider is required for OAuth verification"})};const w=location.origin+location.pathname,{provider_token:S}=await this.grantProviderToken({provider_id:b,provider_redirect_uri:w,provider_code:p});let E,R,O=null;if(d.type===Kf)E=await this.config.credentialsClient.localCredentials.getCredentials(),R=await this.toBindIdentity({provider:b,provider_token:S,credentials:E});else if(d.type===pT){R=this.getParamsByVersion({provider:b},"AUTH_SIGN_IN_WITH_PROVIDER_URL"),E=await this.config.request(R.url,{method:"POST",body:{provider_token:S}});try{O=await this.getUserInfo({credentials:E})}catch(C){console.error("get user info error",C)}R={data:ur(ur({},e),{},{session:E,user:O}),error:null}}f.delete("code"),f.delete("state"),f.delete("provider"),this.restoreUrlState(((o=d)===null||o===void 0?void 0:o.search)===void 0?"?".concat(f.toString()):d.search,((u=d)===null||u===void 0?void 0:u.hash)||location.hash);try{sessionStorage.removeItem(l)}catch{}return R}catch(f){return{data:e,error:new nt(f)}}}async signInCustom(e){const r=await this.config.request(Ke.AUTH_SIGN_IN_CUSTOM,{method:"POST",body:e});return await this.config.credentialsClient.setCredentials(r),Promise.resolve(r)}async signInWithWechat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=await this.config.request(Ke.AUTH_SIGN_IN_WITH_WECHAT_URL,{method:"POST",body:e});return await this.config.credentialsClient.setCredentials(r),Promise.resolve(r)}async bindWithProvider(e,r){return this.config.request(Ke.PROVIDER_BIND_URL,{method:"POST",body:e,withCredentials:!0,getCredentials:r?()=>r:void 0})}async getUserProfile(e){return this.getUserInfo(e)}async getUserInfo(){var e;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getParamsByVersion(r,"USER_ME_URL");if((e=n.params)!==null&&e!==void 0&&e.query){const o=new Wv(n.params.query);n.url+="?".concat(o.toString())}const i=await this.config.request(n.url,{method:"GET",withCredentials:!0,getCredentials:r.credentials?()=>r.credentials:void 0});return i.sub&&(i.uid=i.sub),i}async getWedaUserInfo(){return await this.config.request(Ke.WEDA_USER_URL,{method:"GET",withCredentials:!0})}async deleteMe(e){const r=this.getParamsByVersion(e,"USER_ME_URL"),n="".concat(r.url,"?").concat(Ty.parseParamsToSearch(r.params));return this.config.request(n,{method:"DELETE",withCredentials:!0})}async hasLoginState(){try{return await this.config.credentialsClient.getAccessToken(),!0}catch{return!1}}hasLoginStateSync(){return this.config.credentialsClient.getCredentialsSync()}async getLoginState(){return this.config.credentialsClient.getCredentialsAsync()}async transByProvider(e){return this.config.request(Ke.USER_TRANS_BY_PROVIDER_URL,{method:"PATCH",body:e,withCredentials:!0})}async grantToken(e){const r=this.getParamsByVersion(e,"AUTH_TOKEN_URL");return this.config.request(r.url,{method:"POST",body:r.params})}async getProviders(){return this.config.request(Ke.PROVIDER_LIST,{method:"GET",withCredentials:!0})}async unbindProvider(e){return this.config.request("".concat(Ke.PROVIDER_UNBIND_URL,"/").concat(e.provider_id),{method:"DELETE",withCredentials:!0})}async checkPassword(e){return this.config.request("".concat(Ke.CHECK_PWD_URL),{method:"POST",withCredentials:!0,body:e})}async editContact(e){return this.config.request("".concat(Ke.BIND_CONTACT_URL),{method:"PATCH",withCredentials:!0,body:e})}async setPassword(e){return this.config.request("".concat(Ke.AUTH_SET_PASSWORD),{method:"PATCH",withCredentials:!0,body:e})}async updatePasswordByOld(e){const r=await this.sudo({password:e.old_password});return this.setPassword({sudo_token:r.sudo_token,new_password:e.new_password})}async sudo(e){return this.config.request("".concat(Ke.SUDO_URL),{method:"POST",withCredentials:!0,body:e})}async sendVerificationCodeToCurrentUser(e){return e.target="CUR_USER",this.config.request(Ke.VERIFICATION_URL,{method:"POST",body:e,withCredentials:!0,withCaptcha:!0})}async changeBoundProvider(e){return this.config.request("".concat(Ke.PROVIDER_LIST,"/").concat(e.provider_id,"/trans"),{method:"POST",body:{provider_trans_token:e.trans_token},withCredentials:!0})}async setUserProfile(e){return this.config.request(Ke.USER_PRIFILE_URL,{method:"PATCH",body:e,withCredentials:!0})}async updateUserBasicInfo(e){return this.config.request(Ke.USER_BASIC_EDIT_URL,{method:"POST",withCredentials:!0,body:e})}async queryUserProfile(e){const r=new Wv(e);return this.config.request("".concat(Ke.USER_QUERY_URL,"?").concat(r.toString()),{method:"GET",withCredentials:!0})}setCustomSignFunc(e){this.getCustomSignTicketFn=e}async signInWithCustomTicket(){const e=this.getCustomSignTicketFn;if(!e)return Promise.reject({error:"failed_precondition",error_description:"please use setCustomSignFunc to set custom sign function"});const r=await e();return this.signInCustom({provider_id:"custom",ticket:r})}async resetPassword(e){return this.config.request(Ke.AUTH_RESET_PASSWORD,{method:"POST",body:e})}async authorize(e){return this.config.request(Ke.AUTHORIZE_URL,{method:"POST",withCredentials:!0,body:e})}async authorizeDevice(e){return this.config.request(Ke.AUTHORIZE_DEVICE_URL,{method:"POST",withCredentials:!0,body:e})}async deviceAuthorize(e){return this.config.request(Ke.AUTH_GET_DEVICE_CODE,{method:"POST",body:e,withCredentials:!0})}async authorizeInfo(e){const r="".concat(Ke.AUTHORIZE_INFO_URL,"?").concat(Ty.parseParamsToSearch(e));let n=!0,i=!1;return await this.hasLoginState()&&(i=!0,n=!1),this.config.request(r,{method:"GET",withBasicAuth:n,withCredentials:i})}async checkUsername(e){return this.config.request(Ke.CHECK_USERNAME,{method:"GET",body:e,withCredentials:!0})}async checkIfUserExist(e){const r=new Wv(e);return this.config.request("".concat(Ke.CHECK_IF_USER_EXIST,"?").concat(r.toString()),{method:"GET"})}async loginScope(){return this.config.credentialsClient.getScope()}async loginGroups(){return this.config.credentialsClient.getGroups()}async refreshTokenForce(e){const r=await this.config.credentialsClient.getCredentials();return await this.config.credentialsClient.refreshToken(ur(ur({},r),{},{version:e?.version||"v1"}))}async getCredentials(){return this.config.credentialsClient.getCredentials()}async getPublicKey(){return this.config.request(Yf.AUTH_PUBLIC_KEY,{method:"POST",body:{}})}async getEncryptParams(e){const{isEncrypt:r}=e;delete e.isEncrypt;const n=bp(e),i=await q1(r,this.config.adapter);if(!i)return e;let o="",u="";try{const f=await this.getPublicKey();if(o=f.public_key,u=f.public_key_thumbprint,!o||!u)throw f}catch(f){throw f}return{params:i.getEncryptInfo({publicKey:o,payload:n}),public_key_thumbprint:u}}async getProviderSubType(){return this.config.request(Ke.GET_PROVIDER_TYPE,{method:"POST",body:{provider_id:"weda"}})}async verifyCaptchaData(e){let{token:r,key:n}=e;return this.config.request(Ke.VERIFY_CAPTCHA_DATA_URL,{method:"POST",body:{token:r,key:n},withCredentials:!1})}async createCaptchaData(e){let{state:r,redirect_uri:n}=e;return this.config.request(Ke.CAPTCHA_DATA_URL,{method:"POST",body:{state:r,redirect_uri:n},withCredentials:!1})}async getMiniProgramCode(e){return this.config.request(Ke.GET_MINIPROGRAM_QRCODE,{method:"POST",body:e})}async getMiniProgramQrCodeStatus(e){return this.config.request(Ke.GET_MINIPROGRAM_QRCODE_STATUS,{method:"POST",body:e})}async getUserBehaviorLog(e){const r="".concat(Ke.GET_USER_BEHAVIOR_LOG,"?").concat({LOGIN:"query[action]=USER_LOGIN",MODIFY:"ne_query[action]=USER_LOGIN"}[e.type],"&limit=").concat(e.limit).concat(e.page_token?"&page_token=".concat(e.page_token):"");return this.config.request(r,{method:"GET",withCredentials:!0})}async modifyPassword(e){let r="",n="";const i=await q1(!0,this.config.adapter);if(!i)throw new Error("do not support encrypt, a encrypt util required.");try{const f=await this.getPublicKey();if(r=f.public_key,n=f.public_key_thumbprint,!r||!n)throw f}catch(f){throw f}const o=e.password?i.getEncryptInfo({publicKey:r,payload:e.password}):"",u=i.getEncryptInfo({publicKey:r,payload:e.new_password});return this.config.request(Ke.USER_BASIC_EDIT_URL,{method:"POST",withCredentials:!0,body:{user_id:e.user_id,encrypt_password:o,encrypt_new_password:u,public_key_thumbprint:n}})}async modifyPasswordWithoutLogin(e){let r="",n="";const i=await q1(!0,this.config.adapter);if(!i)throw new Error("do not support encrypt, a encrypt util required.");try{const f=await this.getPublicKey();if(r=f.public_key,n=f.public_key_thumbprint,!r||!n)throw f}catch(f){throw f}const o=e.password?i.getEncryptInfo({publicKey:r,payload:e.password}):"",u=i.getEncryptInfo({publicKey:r,payload:e.new_password});return this.config.request(Yf.AUTH_RESET_PASSWORD,{method:"POST",body:{username:e.username,password:o,new_password:u,public_key_thumbprint:n}})}restoreUrlState(e,r){if(e!==void 0)try{const n=new URL(window.location.href);n.search=e,n.hash=r||"",window.history.replaceState(null,"",n.toString())}catch{}}};class $K{constructor(e){const{apiOrigin:r,apiPath:n=Vg,clientId:i,env:o,storage:u,request:f,baseRequest:p,anonymousSignInFunc:l,wxCloud:d,adapter:m,onCredentialsError:y,headers:b,i18n:w,useWxCloud:S,eventBus:E,detectSessionInUrl:R,debug:O}=e;this.detectSessionInUrl=R!=null&&R,this.oauth2client=new Go({apiOrigin:r,apiPath:n,clientId:i,env:o,storage:u,baseRequest:p||f,anonymousSignInFunc:l,wxCloud:d,onCredentialsError:y,headers:b||{},i18n:w,useWxCloud:S,eventBus:E,debug:O}),this.authApi=new zK(ur(ur({credentialsClient:this.oauth2client},e),{},{request:f?this.oauth2client.request.bind(this.oauth2client):void 0,adapter:m})),R&&this.oauth2client.setGetInitialSession(this.authApi.getInitialSession.bind(this.authApi))}initializeSession(e){this.detectSessionInUrl?(this.oauth2client.setOnInitialSessionObtained(e),this.oauth2client.initialize()):this.oauth2client.initialize(Promise.resolve({error:null}))}}var lk={exports:{}};lk.exports=(function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(n,i,o){r.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:o})},r.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,i){if(1&i&&(n=r(n)),8&i||4&i&&typeof n=="object"&&n&&n.__esModule)return n;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&i&&typeof n!="string")for(var u in n)r.d(o,u,(function(f){return n[f]}).bind(null,u));return o},r.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(i,"a",i),i},r.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},r.p="",r(r.s=0)})([function(t,e,r){t.exports=r(1)},function(t,e,r){var n,i=this&&this.__extends||(n=function(S,E){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,O){R.__proto__=O}||function(R,O){for(var C in O)O.hasOwnProperty(C)&&(R[C]=O[C])})(S,E)},function(S,E){function R(){this.constructor=S}n(S,E),S.prototype=E===null?Object.create(E):(R.prototype=E.prototype,new R)}),o=this&&this.__assign||function(){return(o=Object.assign||function(S){for(var E,R=1,O=arguments.length;R<O;R++)for(var C in E=arguments[R])Object.prototype.hasOwnProperty.call(E,C)&&(S[C]=E[C]);return S}).apply(this,arguments)},u=this&&this.__awaiter||function(S,E,R,O){return new(R||(R=Promise))(function(C,I){function P(q){try{j(O.next(q))}catch(U){I(U)}}function D(q){try{j(O.throw(q))}catch(U){I(U)}}function j(q){var U;q.done?C(q.value):(U=q.value,U instanceof R?U:new R(function(Y){Y(U)})).then(P,D)}j((O=O.apply(S,E||[])).next())})},f=this&&this.__generator||function(S,E){var R,O,C,I,P={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]};return I={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function D(j){return function(q){return(function(U){if(R)throw new TypeError("Generator is already executing.");for(;P;)try{if(R=1,O&&(C=2&U[0]?O.return:U[0]?O.throw||((C=O.return)&&C.call(O),0):O.next)&&!(C=C.call(O,U[1])).done)return C;switch(O=0,C&&(U=[2&U[0],C.value]),U[0]){case 0:case 1:C=U;break;case 4:return P.label++,{value:U[1],done:!1};case 5:P.label++,O=U[1],U=[0];continue;case 7:U=P.ops.pop(),P.trys.pop();continue;default:if(!(C=(C=P.trys).length>0&&C[C.length-1])&&(U[0]===6||U[0]===2)){P=0;continue}if(U[0]===3&&(!C||U[1]>C[0]&&U[1]<C[3])){P.label=U[1];break}if(U[0]===6&&P.label<C[1]){P.label=C[1],C=U;break}if(C&&P.label<C[2]){P.label=C[2],P.ops.push(U);break}C[2]&&P.ops.pop(),P.trys.pop();continue}U=E.call(S,P)}catch(Y){U=[6,Y],O=0}finally{R=C=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}})([j,q])}}},p=this&&this.__rest||function(S,E){var R={};for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&E.indexOf(O)<0&&(R[O]=S[O]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function"){var C=0;for(O=Object.getOwnPropertySymbols(S);C<O.length;C++)E.indexOf(O[C])<0&&Object.prototype.propertyIsEnumerable.call(S,O[C])&&(R[O[C]]=S[O[C]])}return R};Object.defineProperty(e,"__esModule",{value:!0});var l=r(3),d=r(2),m=(function(S){function E(R){R===void 0&&(R={});var O=S.call(this)||this,C=R.timeout,I=R.timeoutMsg,P=R.restrictedMethods;return O._timeout=C||0,O._timeoutMsg=I||"",O._restrictedMethods=P||["get","post","upload","download"],O}return i(E,S),E.prototype.post=function(R){var O=this;return new Promise(function(C,I){var P=R.url,D=R.data,j=R.headers,q=wx.request({url:l.formatUrl("https:",P),data:D,timeout:O._timeout,method:"POST",header:j,success:function(U){U.statusCode>=200&&U.statusCode<300?C({statusCode:U.statusCode,status:U.statusCode,data:U.data}):I(U)},fail:function(U){I(U)},complete:function(U){if(U&&U.errMsg&&O._timeout&&O._restrictedMethods.indexOf("post")!==-1&&U.errMsg==="request:fail timeout"){console.warn(O._timeoutMsg);try{q.abort()}catch{}}}})})},E.prototype.get=function(R){var O=this;return new Promise(function(C,I){var P=R.url,D=R.body,j=R.headers,q=l.formatUrl("https:",P),U=wx.request({url:q,data:D,timeout:O._timeout,method:"GET",header:j,success:function(Y){Y.statusCode>=200&&Y.statusCode<300?C({statusCode:Y.statusCode,status:Y.statusCode,data:Y.data}):I(Y)},fail:function(Y){I(Y)},complete:function(Y){if(Y&&Y.errMsg&&O._timeout&&O._restrictedMethods.indexOf("get")!==-1&&Y.errMsg.includes("timeout")){console.warn(O._timeoutMsg);try{U.abort()}catch($){console.warn("Error when aborting requestTask",$)}}}})})},E.prototype.upload=function(R){var O=this,C=this;return new Promise(function(I){return u(O,void 0,void 0,function(){var P,D,j,q,U,Y;return f(this,function($){return P=R.url,D=R.file,j=R.data,q=R.headers,U=R.onUploadProgress,Y=wx.uploadFile({url:P,filePath:D,name:"file",formData:o({},j),header:q,timeout:this._timeout,success:function(L){var H={statusCode:L.statusCode,data:L.data||{}};L.statusCode===200&&j.success_action_status&&(H.statusCode=parseInt(j.success_action_status,10)),I(H)},fail:function(L){I(L)},complete:function(L){if(L&&L.errMsg&&C._timeout&&C._restrictedMethods.indexOf("upload")!==-1&&L.errMsg==="request:fail timeout"){console.warn(C._timeoutMsg);try{Y.abort()}catch{}}}}),U&&Y.onProgressUpdate(function(L){U(L)}),[2]})})})},E.prototype.download=function(R){var O=this,C=this;return new Promise(function(I,P){var D=R.url,j=R.headers,q=wx.downloadFile({url:l.formatUrl("https:",D),header:j,timeout:O._timeout,success:function(U){U.statusCode===200&&U.tempFilePath?I({statusCode:200,tempFilePath:U.tempFilePath}):I(U)},fail:function(U){P(U)},complete:function(U){if(U&&U.errMsg&&C._timeout&&C._restrictedMethods.indexOf("download")!==-1&&U.errMsg==="request:fail timeout"){console.warn(C._timeoutMsg);try{q.abort()}catch{}}}})})},E.prototype.fetch=function(R){var O=R.url,C=R.body,I=R.enableAbort,P=R.headers,D=R.method,j=R.stream,q=j!==void 0&&j,U=R.signal,Y=R.timeout,$=this,L=Y??this._timeout,H=null,Q=new d.ReadableStream({start:function(ce){H=ce},cancel:function(){H=null}});return new Promise(function(ce,M){q&&ce({data:Q});var J=wx.request({url:l.formatUrl("https:",O),data:C,timeout:L,method:D.toUpperCase(),header:P,success:function(Ae){var Re;(Re=H)===null||Re===void 0||Re.close(),!q&&ce(Ae)},fail:function(Ae){var Re;if((Re=H)===null||Re===void 0||Re.close(),M(Ae),q)throw Ae},complete:function(Ae){if(Ae&&Ae.errMsg&&L&&$._restrictedMethods.indexOf("post")!==-1&&I&&Ae.errMsg==="request:fail timeout"){console.warn($._timeoutMsg);try{J.abort()}catch(Re){console.warn("Error when aborting requestTask",Re)}}},enableChunked:q});if(J.onChunkReceived(function(Ae){var Re;(Re=H)===null||Re===void 0||Re.enqueue(new Uint8Array(Ae.data))}),U){var Z=function(){try{J.abort()}catch(Ae){console.warn("Error when aborting requestTask",Ae)}};U.aborted?Z():U.addEventListener("abort",function(){return Z()})}})},E})(l.AbstractSDKRequest);e.WxRequest=m,e.wxMpStorage={setItem:function(S,E){wx.setStorageSync(S,E)},getItem:function(S){return wx.getStorageSync(S)},removeItem:function(S){wx.removeStorageSync(S)},clear:function(){wx.clearStorageSync()}};var y=function(S,E){E===void 0&&(E={});var R=wx.connectSocket(o({url:S},E));return{set onopen(O){R.onOpen(O)},set onmessage(O){R.onMessage(O)},set onclose(O){R.onClose(O)},set onerror(O){R.onError(O)},send:function(O){return R.send({data:O})},close:function(O,C){return R.close({code:O,reason:C})},get readyState(){return R.readyState},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}};function b(S){var E={},R=S.replace(/^[?#]/,"");return R&&R.split("&").forEach(function(O){var C=O.split("="),I=C[0],P=C[1];I=decodeURIComponent(I),P=decodeURIComponent(P),I&&(E[I]?Array.isArray(E[I])?E[I].push(P):E[I]=[E[I],P]:E[I]=P)}),E}e.WxMpWebSocket=y,e.parseQueryString=b;var w={genAdapter:function(S){return{root:{globalThis:{}},reqClass:m,wsClass:y,captchaOptions:{openURIWithCallback:function(E){var R=S.EventBus,O={},C=E;console.log("openURIWithCallback",E);var I=E.match(/^(data:.*?)(\?[^#\s]*)?$/);if(I){C=I[1],console.log("openURIWithCallback url",C);var P=I[2];P&&(O=b(P))}console.log("openURIWithCallback queryObj",O);var D=O.token,j=p(O,["token"]);return/^data:/.test(C)&&!D?Promise.reject({error:"invalid_argument",error_description:"invalie captcha data: "+E}):D?new Promise(function(q){console.log("wait for captcha..."),R.$emit("CAPTCHA_DATA_CHANGE",o(o({},j),{token:D,url:C})),R.$once("RESOLVE_CAPTCHA_DATA",function(U){q(U)})}):Promise.reject({error:"unimplemented",error_description:"need to impl captcha data"})}},localStorage:e.wxMpStorage,primaryStorage:l.StorageType.local,getAppSign:function(){var E=wx.getAccountInfoSync();return typeof App<"u"||typeof getApp<"u"||wx.onAppHide||wx.offAppHide||wx.onAppShow||wx.offAppShow?E&&E.miniProgram?E.miniProgram.appId:"":E&&E.plugin?E.plugin.appId:""}}},isMatch:function(){if(typeof wx>"u"||typeof Page>"u"||!wx.getSystemInfoSync||!wx.getStorageSync||!wx.setStorageSync||!wx.connectSocket||!wx.request)return!1;try{if(!wx.getSystemInfoSync()||wx.getSystemInfoSync().AppPlatform==="qq")return!1}catch{return!1}return!0},runtime:"wx_mp"};e.default=w},function(t,e,r){function n(){}function i(_){return typeof _=="object"&&_!==null||typeof _=="function"}r.r(e),r.d(e,"ByteLengthQueuingStrategy",function(){return Qu}),r.d(e,"CountQueuingStrategy",function(){return xc}),r.d(e,"ReadableByteStreamController",function(){return kt}),r.d(e,"ReadableStream",function(){return Hr}),r.d(e,"ReadableStreamBYOBReader",function(){return ta}),r.d(e,"ReadableStreamBYOBRequest",function(){return Rt}),r.d(e,"ReadableStreamDefaultController",function(){return Oo}),r.d(e,"ReadableStreamDefaultReader",function(){return cr}),r.d(e,"TransformStream",function(){return Zu}),r.d(e,"TransformStreamDefaultController",function(){return Ro}),r.d(e,"WritableStream",function(){return An}),r.d(e,"WritableStreamDefaultController",function(){return cn}),r.d(e,"WritableStreamDefaultWriter",function(){return bi});const o=n;function u(_,T){try{Object.defineProperty(_,"name",{value:T,configurable:!0})}catch{}}const f=Promise,p=Promise.resolve.bind(f),l=Promise.prototype.then,d=Promise.reject.bind(f),m=p;function y(_){return new f(_)}function b(_){return y(T=>T(_))}function w(_){return d(_)}function S(_,T,x){return l.call(_,T,x)}function E(_,T,x){S(S(_,T,x),void 0,o)}function R(_,T){E(_,T)}function O(_,T){E(_,void 0,T)}function C(_,T,x){return S(_,T,x)}function I(_){S(_,void 0,o)}let P=_=>{if(typeof queueMicrotask=="function")P=queueMicrotask;else{const T=b(void 0);P=x=>S(T,x)}return P(_)};function D(_,T,x){if(typeof _!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(_,T,x)}function j(_,T,x){try{return b(D(_,T,x))}catch(k){return w(k)}}class q{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(T){const x=this._back;let k=x;x._elements.length===16383&&(k={_elements:[],_next:void 0}),x._elements.push(T),k!==x&&(this._back=k,x._next=k),++this._size}shift(){const T=this._front;let x=T;const k=this._cursor;let ne=k+1;const K=T._elements,te=K[k];return ne===16384&&(x=T._next,ne=0),--this._size,this._cursor=ne,T!==x&&(this._front=x),K[k]=void 0,te}forEach(T){let x=this._cursor,k=this._front,ne=k._elements;for(;!(x===ne.length&&k._next===void 0||x===ne.length&&(k=k._next,ne=k._elements,x=0,ne.length===0));)T(ne[x]),++x}peek(){const T=this._front,x=this._cursor;return T._elements[x]}}const U=Symbol("[[AbortSteps]]"),Y=Symbol("[[ErrorSteps]]"),$=Symbol("[[CancelSteps]]"),L=Symbol("[[PullSteps]]"),H=Symbol("[[ReleaseSteps]]");function Q(_,T){_._ownerReadableStream=T,T._reader=_,T._state==="readable"?Z(_):T._state==="closed"?(function(x){Z(x),z(x)})(_):Ae(_,T._storedError)}function ce(_,T){return tn(_._ownerReadableStream,T)}function M(_){const T=_._ownerReadableStream;T._state==="readable"?Re(_,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):(function(x){Ae(x,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness"))})(_),T._readableStreamController[H](),T._reader=void 0,_._ownerReadableStream=void 0}function J(_){return new TypeError("Cannot "+_+" a stream using a released reader")}function Z(_){_._closedPromise=y((T,x)=>{_._closedPromise_resolve=T,_._closedPromise_reject=x})}function Ae(_,T){Z(_),Re(_,T)}function Re(_,T){_._closedPromise_reject!==void 0&&(I(_._closedPromise),_._closedPromise_reject(T),_._closedPromise_resolve=void 0,_._closedPromise_reject=void 0)}function z(_){_._closedPromise_resolve!==void 0&&(_._closedPromise_resolve(void 0),_._closedPromise_resolve=void 0,_._closedPromise_reject=void 0)}const se=Number.isFinite||function(_){return typeof _=="number"&&isFinite(_)},ae=Math.trunc||function(_){return _<0?Math.ceil(_):Math.floor(_)};function fe(_,T){if(_!==void 0&&typeof(x=_)!="object"&&typeof x!="function")throw new TypeError("".concat(T," is not an object."));var x}function pe(_,T){if(typeof _!="function")throw new TypeError("".concat(T," is not a function."))}function be(_,T){if(!(function(x){return typeof x=="object"&&x!==null||typeof x=="function"})(_))throw new TypeError("".concat(T," is not an object."))}function Se(_,T,x){if(_===void 0)throw new TypeError("Parameter ".concat(T," is required in '").concat(x,"'."))}function Ie(_,T,x){if(_===void 0)throw new TypeError("".concat(T," is required in '").concat(x,"'."))}function $e(_){return Number(_)}function pt(_){return _===0?0:_}function Ot(_,T){const x=Number.MAX_SAFE_INTEGER;let k=Number(_);if(k=pt(k),!se(k))throw new TypeError("".concat(T," is not a finite number"));if(k=(function(ne){return pt(ae(ne))})(k),k<0||k>x)throw new TypeError("".concat(T," is outside the accepted range of 0 to ").concat(x,", inclusive"));return se(k)&&k!==0?k:0}function Kt(_,T){if(!aa(_))throw new TypeError("".concat(T," is not a ReadableStream."))}function Jr(_){return new cr(_)}function Er(_,T){_._reader._readRequests.push(T)}function st(_,T,x){const k=_._reader._readRequests.shift();x?k._closeSteps():k._chunkSteps(T)}function Pr(_){return _._reader._readRequests.length}function tt(_){const T=_._reader;return T!==void 0&&!!qt(T)}class cr{constructor(T){if(Se(T,1,"ReadableStreamDefaultReader"),Kt(T,"First parameter"),$i(T))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Q(this,T),this._readRequests=new q}get closed(){return qt(this)?this._closedPromise:w(Dt("closed"))}cancel(T){return qt(this)?this._ownerReadableStream===void 0?w(J("cancel")):ce(this,T):w(Dt("cancel"))}read(){if(!qt(this))return w(Dt("read"));if(this._ownerReadableStream===void 0)return w(J("read from"));let T,x;const k=y((ne,K)=>{T=ne,x=K});return mi(this,{_chunkSteps:ne=>T({value:ne,done:!1}),_closeSteps:()=>T({value:void 0,done:!0}),_errorSteps:ne=>x(ne)}),k}releaseLock(){if(!qt(this))throw Dt("releaseLock");this._ownerReadableStream!==void 0&&(function(T){M(T),vi(T,new TypeError("Reader was released"))})(this)}}function qt(_){return!!i(_)&&!!Object.prototype.hasOwnProperty.call(_,"_readRequests")&&_ instanceof cr}function mi(_,T){const x=_._ownerReadableStream;x._disturbed=!0,x._state==="closed"?T._closeSteps():x._state==="errored"?T._errorSteps(x._storedError):x._readableStreamController[L](T)}function vi(_,T){const x=_._readRequests;_._readRequests=new q,x.forEach(k=>{k._errorSteps(T)})}function Dt(_){return new TypeError("ReadableStreamDefaultReader.prototype.".concat(_," can only be used on a ReadableStreamDefaultReader"))}var Ft,Zt,Li;function En(_){return _.slice()}function Qo(_,T,x,k,ne){new Uint8Array(_).set(new Uint8Array(x,k,ne),T)}Object.defineProperties(cr.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),u(cr.prototype.cancel,"cancel"),u(cr.prototype.read,"read"),u(cr.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(cr.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});let ir=_=>(ir=typeof _.transfer=="function"?T=>T.transfer():typeof structuredClone=="function"?T=>structuredClone(T,{transfer:[T]}):T=>T,ir(_)),ln=_=>(ln=typeof _.detached=="boolean"?T=>T.detached:T=>T.byteLength===0,ln(_));function Tn(_,T,x){if(_.slice)return _.slice(T,x);const k=x-T,ne=new ArrayBuffer(k);return Qo(ne,0,_,T,k),ne}function ki(_,T){const x=_[T];if(x!=null){if(typeof x!="function")throw new TypeError("".concat(String(T)," is not a function"));return x}}function zn(_){try{const T=_.done,x=_.value;return S(m(x),k=>({done:T,value:k}))}catch(T){return w(T)}}const or=(Li=(Ft=Symbol.asyncIterator)!==null&&Ft!==void 0?Ft:(Zt=Symbol.for)===null||Zt===void 0?void 0:Zt.call(Symbol,"Symbol.asyncIterator"))!==null&&Li!==void 0?Li:"@@asyncIterator";function Yt(_){const T=D(_.nextMethod,_.iterator,[]);if(!i(T))throw new TypeError("The iterator.next() method must return an object");return T}class $n{constructor(T,x){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=T,this._preventCancel=x}next(){const T=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?C(this._ongoingPromise,T,T):T(),this._ongoingPromise}return(T){const x=()=>this._returnSteps(T);return this._ongoingPromise?C(this._ongoingPromise,x,x):x()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const T=this._reader;let x,k;const ne=y((K,te)=>{x=K,k=te});return mi(T,{_chunkSteps:K=>{this._ongoingPromise=void 0,P(()=>x({value:K,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,M(T),x({value:void 0,done:!0})},_errorSteps:K=>{this._ongoingPromise=void 0,this._isFinished=!0,M(T),k(K)}}),ne}_returnSteps(T){if(this._isFinished)return Promise.resolve({value:T,done:!0});this._isFinished=!0;const x=this._reader;if(!this._preventCancel){const k=ce(x,T);return M(x),C(k,()=>({value:T,done:!0}))}return M(x),b({value:T,done:!0})}}const Ur={next(){return yc(this)?this._asyncIteratorImpl.next():w(Ss("next"))},return(_){return yc(this)?this._asyncIteratorImpl.return(_):w(Ss("return"))},[or](){return this}};function yc(_){if(!i(_)||!Object.prototype.hasOwnProperty.call(_,"_asyncIteratorImpl"))return!1;try{return _._asyncIteratorImpl instanceof $n}catch{return!1}}function Ss(_){return new TypeError("ReadableStreamAsyncIterator.".concat(_," can only be used on a ReadableSteamAsyncIterator"))}Object.defineProperty(Ur,or,{enumerable:!1});const yi=Number.isNaN||function(_){return _!=_};function xa(_){const T=Tn(_.buffer,_.byteOffset,_.byteOffset+_.byteLength);return new Uint8Array(T)}function Jo(_){const T=_._queue.shift();return _._queueTotalSize-=T.size,_._queueTotalSize<0&&(_._queueTotalSize=0),T.value}function So(_,T,x){if(typeof(k=x)!="number"||yi(k)||k<0||x===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var k;_._queue.push({value:T,size:x}),_._queueTotalSize+=x}function qr(_){_._queue=new q,_._queueTotalSize=0}function We(_){return _===DataView}class Rt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Mi(this))throw wc("view");return this._view}respond(T){if(!Mi(this))throw wc("respond");if(Se(T,1,"respond"),T=Ot(T,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(ln(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");ea(this._associatedReadableByteStreamController,T)}respondWithNewView(T){if(!Mi(this))throw wc("respondWithNewView");if(Se(T,1,"respondWithNewView"),!ArrayBuffer.isView(T))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(ln(T.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");Ao(this._associatedReadableByteStreamController,T)}}Object.defineProperties(Rt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),u(Rt.prototype.respond,"respond"),u(Rt.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Rt.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class kt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!er(this))throw Es("byobRequest");return Zo(this)}get desiredSize(){if(!er(this))throw Es("desiredSize");return Ua(this)}close(){if(!er(this))throw Es("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");const T=this._controlledReadableByteStream._state;if(T!=="readable")throw new TypeError("The stream (in ".concat(T," state) is not in the readable state and cannot be closed"));ju(this)}enqueue(T){if(!er(this))throw Es("enqueue");if(Se(T,1,"enqueue"),!ArrayBuffer.isView(T))throw new TypeError("chunk must be an array buffer view");if(T.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(T.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");const x=this._controlledReadableByteStream._state;if(x!=="readable")throw new TypeError("The stream (in ".concat(x," state) is not in the readable state and cannot be enqueued to"));Lu(this,T)}error(T){if(!er(this))throw Es("error");$r(this,T)}[$](T){Xr(this),qr(this);const x=this._cancelAlgorithm(T);return bc(this),x}[L](T){const x=this._controlledReadableByteStream;if(this._queueTotalSize>0)return void _c(this,T);const k=this._autoAllocateChunkSize;if(k!==void 0){let ne;try{ne=new ArrayBuffer(k)}catch(te){return void T._errorSteps(te)}const K={buffer:ne,bufferByteLength:k,byteOffset:0,byteLength:k,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(K)}Er(x,T),Nt(this)}[H](){if(this._pendingPullIntos.length>0){const T=this._pendingPullIntos.peek();T.readerType="none",this._pendingPullIntos=new q,this._pendingPullIntos.push(T)}}}function er(_){return!!i(_)&&!!Object.prototype.hasOwnProperty.call(_,"_controlledReadableByteStream")&&_ instanceof kt}function Mi(_){return!!i(_)&&!!Object.prototype.hasOwnProperty.call(_,"_associatedReadableByteStreamController")&&_ instanceof Rt}function Nt(_){(function(T){const x=T._controlledReadableByteStream;return x._state==="readable"&&!T._closeRequested&&!!T._started&&(!!(tt(x)&&Pr(x)>0)||!!(Sc(x)&&Od(x)>0)||Ua(T)>0)})(_)&&(_._pulling?_._pullAgain=!0:(_._pulling=!0,E(_._pullAlgorithm(),()=>(_._pulling=!1,_._pullAgain&&(_._pullAgain=!1,Nt(_)),null),T=>($r(_,T),null))))}function Xr(_){fr(_),_._pendingPullIntos=new q}function Eo(_,T){let x=!1;_._state==="closed"&&(x=!0);const k=Zr(T);T.readerType==="default"?st(_,k,x):(function(ne,K,te){const ie=ne._reader._readIntoRequests.shift();te?ie._closeSteps(K):ie._chunkSteps(K)})(_,k,x)}function Zr(_){const T=_.bytesFilled,x=_.elementSize;return new _.viewConstructor(_.buffer,_.byteOffset,T/x)}function Dr(_,T,x,k){_._queue.push({buffer:T,byteOffset:x,byteLength:k}),_._queueTotalSize+=k}function Na(_,T,x,k){let ne;try{ne=Tn(T,x,x+k)}catch(K){throw $r(_,K),K}Dr(_,ne,0,k)}function Fn(_,T){T.bytesFilled>0&&Na(_,T.buffer,T.byteOffset,T.bytesFilled),Xo(_)}function gc(_,T){const x=Math.min(_._queueTotalSize,T.byteLength-T.bytesFilled),k=T.bytesFilled+x;let ne=x,K=!1;const te=k-k%T.elementSize;te>=T.minimumFill&&(ne=te-T.bytesFilled,K=!0);const ie=_._queue;for(;ne>0;){const he=ie.peek(),Ce=Math.min(ne,he.byteLength),ke=T.byteOffset+T.bytesFilled;Qo(T.buffer,ke,he.buffer,he.byteOffset,Ce),he.byteLength===Ce?ie.shift():(he.byteOffset+=Ce,he.byteLength-=Ce),_._queueTotalSize-=Ce,Ad(_,Ce,T),ne-=Ce}return K}function Ad(_,T,x){x.bytesFilled+=T}function To(_){_._queueTotalSize===0&&_._closeRequested?(bc(_),Ku(_._controlledReadableByteStream)):Nt(_)}function fr(_){_._byobRequest!==null&&(_._byobRequest._associatedReadableByteStreamController=void 0,_._byobRequest._view=null,_._byobRequest=null)}function zr(_){for(;_._pendingPullIntos.length>0;){if(_._queueTotalSize===0)return;const T=_._pendingPullIntos.peek();gc(_,T)&&(Xo(_),Eo(_._controlledReadableByteStream,T))}}function Pa(_,T){const x=_._pendingPullIntos.peek();fr(_),_._controlledReadableByteStream._state==="closed"?(function(k,ne){ne.readerType==="none"&&Xo(k);const K=k._controlledReadableByteStream;if(Sc(K))for(;Od(K)>0;)Eo(K,Xo(k))})(_,x):(function(k,ne,K){if(Ad(0,ne,K),K.readerType==="none")return Fn(k,K),void zr(k);if(K.bytesFilled<K.minimumFill)return;Xo(k);const te=K.bytesFilled%K.elementSize;if(te>0){const ie=K.byteOffset+K.bytesFilled;Na(k,K.buffer,ie-te,te)}K.bytesFilled-=te,Eo(k._controlledReadableByteStream,K),zr(k)})(_,T,x),Nt(_)}function Xo(_){return _._pendingPullIntos.shift()}function bc(_){_._pullAlgorithm=void 0,_._cancelAlgorithm=void 0}function ju(_){const T=_._controlledReadableByteStream;if(!_._closeRequested&&T._state==="readable")if(_._queueTotalSize>0)_._closeRequested=!0;else{if(_._pendingPullIntos.length>0){const x=_._pendingPullIntos.peek();if(x.bytesFilled%x.elementSize!=0){const k=new TypeError("Insufficient bytes to fill elements in the given buffer");throw $r(_,k),k}}bc(_),Ku(T)}}function Lu(_,T){const x=_._controlledReadableByteStream;if(_._closeRequested||x._state!=="readable")return;const{buffer:k,byteOffset:ne,byteLength:K}=T;if(ln(k))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");const te=ir(k);if(_._pendingPullIntos.length>0){const ie=_._pendingPullIntos.peek();if(ln(ie.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");fr(_),ie.buffer=ir(ie.buffer),ie.readerType==="none"&&Fn(_,ie)}tt(x)?((function(ie){const he=ie._controlledReadableByteStream._reader;for(;he._readRequests.length>0;){if(ie._queueTotalSize===0)return;_c(ie,he._readRequests.shift())}})(_),Pr(x)===0?Dr(_,te,ne,K):(_._pendingPullIntos.length>0&&Xo(_),st(x,new Uint8Array(te,ne,K),!1))):Sc(x)?(Dr(_,te,ne,K),zr(_)):Dr(_,te,ne,K),Nt(_)}function $r(_,T){const x=_._controlledReadableByteStream;x._state==="readable"&&(Xr(_),qr(_),bc(_),$d(x,T))}function _c(_,T){const x=_._queue.shift();_._queueTotalSize-=x.byteLength,To(_);const k=new Uint8Array(x.buffer,x.byteOffset,x.byteLength);T._chunkSteps(k)}function Zo(_){if(_._byobRequest===null&&_._pendingPullIntos.length>0){const T=_._pendingPullIntos.peek(),x=new Uint8Array(T.buffer,T.byteOffset+T.bytesFilled,T.byteLength-T.bytesFilled),k=Object.create(Rt.prototype);(function(ne,K,te){ne._associatedReadableByteStreamController=K,ne._view=te})(k,_,x),_._byobRequest=k}return _._byobRequest}function Ua(_){const T=_._controlledReadableByteStream._state;return T==="errored"?null:T==="closed"?0:_._strategyHWM-_._queueTotalSize}function ea(_,T){const x=_._pendingPullIntos.peek();if(_._controlledReadableByteStream._state==="closed"){if(T!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(T===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(x.bytesFilled+T>x.byteLength)throw new RangeError("bytesWritten out of range")}x.buffer=ir(x.buffer),Pa(_,T)}function Ao(_,T){const x=_._pendingPullIntos.peek();if(_._controlledReadableByteStream._state==="closed"){if(T.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(T.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(x.byteOffset+x.bytesFilled!==T.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(x.bufferByteLength!==T.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(x.bytesFilled+T.byteLength>x.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");const k=T.byteLength;x.buffer=ir(T.buffer),Pa(_,k)}function dr(_,T,x,k,ne,K,te){T._controlledReadableByteStream=_,T._pullAgain=!1,T._pulling=!1,T._byobRequest=null,T._queue=T._queueTotalSize=void 0,qr(T),T._closeRequested=!1,T._started=!1,T._strategyHWM=K,T._pullAlgorithm=k,T._cancelAlgorithm=ne,T._autoAllocateChunkSize=te,T._pendingPullIntos=new q,_._readableStreamController=T,E(b(x()),()=>(T._started=!0,Nt(T),null),ie=>($r(T,ie),null))}function wc(_){return new TypeError("ReadableStreamBYOBRequest.prototype.".concat(_," can only be used on a ReadableStreamBYOBRequest"))}function Es(_){return new TypeError("ReadableByteStreamController.prototype.".concat(_," can only be used on a ReadableByteStreamController"))}function qa(_,T){if((_="".concat(_))!=="byob")throw new TypeError("".concat(T," '").concat(_,"' is not a valid enumeration value for ReadableStreamReaderMode"));return _}function Da(_){return new ta(_)}function em(_,T){_._reader._readIntoRequests.push(T)}function Od(_){return _._reader._readIntoRequests.length}function Sc(_){const T=_._reader;return T!==void 0&&!!Bi(T)}Object.defineProperties(kt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),u(kt.prototype.close,"close"),u(kt.prototype.enqueue,"enqueue"),u(kt.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(kt.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class ta{constructor(T){if(Se(T,1,"ReadableStreamBYOBReader"),Kt(T,"First parameter"),$i(T))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!er(T._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Q(this,T),this._readIntoRequests=new q}get closed(){return Bi(this)?this._closedPromise:w(en("closed"))}cancel(T){return Bi(this)?this._ownerReadableStream===void 0?w(J("cancel")):ce(this,T):w(en("cancel"))}read(T){let x,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Bi(this))return w(en("read"));if(!ArrayBuffer.isView(T))return w(new TypeError("view must be an array buffer view"));if(T.byteLength===0)return w(new TypeError("view must have non-zero byteLength"));if(T.buffer.byteLength===0)return w(new TypeError("view's buffer must have non-zero byteLength"));if(ln(T.buffer))return w(new TypeError("view's buffer has been detached"));try{x=(function(he,Ce){var ke;return fe(he,Ce),{min:Ot((ke=he?.min)!==null&&ke!==void 0?ke:1,"".concat(Ce," has member 'min' that"))}})(k,"options")}catch(he){return w(he)}const ne=x.min;if(ne===0)return w(new TypeError("options.min must be greater than 0"));if((function(he){return We(he.constructor)})(T)){if(ne>T.byteLength)return w(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(ne>T.length)return w(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return w(J("read from"));let K,te;const ie=y((he,Ce)=>{K=he,te=Ce});return ku(this,T,ne,{_chunkSteps:he=>K({value:he,done:!1}),_closeSteps:he=>K({value:he,done:!0}),_errorSteps:he=>te(he)}),ie}releaseLock(){if(!Bi(this))throw en("releaseLock");this._ownerReadableStream!==void 0&&(function(T){M(T),zi(T,new TypeError("Reader was released"))})(this)}}function Bi(_){return!!i(_)&&!!Object.prototype.hasOwnProperty.call(_,"_readIntoRequests")&&_ instanceof ta}function ku(_,T,x,k){const ne=_._ownerReadableStream;ne._disturbed=!0,ne._state==="errored"?k._errorSteps(ne._storedError):(function(K,te,ie,he){const Ce=K._controlledReadableByteStream,ke=te.constructor,Ee=(function(ot){return We(ot)?1:ot.BYTES_PER_ELEMENT})(ke),{byteOffset:Ne,byteLength:Xe}=te,Ct=ie*Ee;let Mt;try{Mt=ir(te.buffer)}catch(ot){return void he._errorSteps(ot)}const mt={buffer:Mt,bufferByteLength:Mt.byteLength,byteOffset:Ne,byteLength:Xe,bytesFilled:0,minimumFill:Ct,elementSize:Ee,viewConstructor:ke,readerType:"byob"};if(K._pendingPullIntos.length>0)return K._pendingPullIntos.push(mt),void em(Ce,he);if(Ce._state!=="closed"){if(K._queueTotalSize>0){if(gc(K,mt)){const ot=Zr(mt);return To(K),void he._chunkSteps(ot)}if(K._closeRequested){const ot=new TypeError("Insufficient bytes to fill elements in the given buffer");return $r(K,ot),void he._errorSteps(ot)}}K._pendingPullIntos.push(mt),em(Ce,he),Nt(K)}else{const ot=new ke(mt.buffer,mt.byteOffset,0);he._closeSteps(ot)}})(ne._readableStreamController,T,x,k)}function zi(_,T){const x=_._readIntoRequests;_._readIntoRequests=new q,x.forEach(k=>{k._errorSteps(T)})}function en(_){return new TypeError("ReadableStreamBYOBReader.prototype.".concat(_," can only be used on a ReadableStreamBYOBReader"))}function Ts(_,T){const{highWaterMark:x}=_;if(x===void 0)return T;if(yi(x)||x<0)throw new RangeError("Invalid highWaterMark");return x}function Ec(_){const{size:T}=_;return T||(()=>1)}function As(_,T){fe(_,T);const x=_?.highWaterMark,k=_?.size;return{highWaterMark:x===void 0?void 0:$e(x),size:k===void 0?void 0:tm(k,"".concat(T," has member 'size' that"))}}function tm(_,T){return pe(_,T),x=>$e(_(x))}function Tc(_,T,x){return pe(_,x),k=>j(_,T,[k])}function o0(_,T,x){return pe(_,x),()=>j(_,T,[])}function Hn(_,T,x){return pe(_,x),k=>D(_,T,[k])}function Rd(_,T,x){return pe(_,x),(k,ne)=>j(_,T,[k,ne])}function Cd(_,T){if(!gi(_))throw new TypeError("".concat(T," is not a WritableStream."))}Object.defineProperties(ta.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),u(ta.prototype.cancel,"cancel"),u(ta.prototype.read,"read"),u(ta.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ta.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});const Id=typeof AbortController=="function";class An{constructor(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};T===void 0?T=null:be(T,"First parameter");const k=As(x,"Second parameter"),ne=(function(te,ie){fe(te,ie);const he=te?.abort,Ce=te?.close,ke=te?.start,Ee=te?.type,Ne=te?.write;return{abort:he===void 0?void 0:Tc(he,te,"".concat(ie," has member 'abort' that")),close:Ce===void 0?void 0:o0(Ce,te,"".concat(ie," has member 'close' that")),start:ke===void 0?void 0:Hn(ke,te,"".concat(ie," has member 'start' that")),write:Ne===void 0?void 0:Rd(Ne,te,"".concat(ie," has member 'write' that")),type:Ee}})(T,"First parameter");if(Nd(this),ne.type!==void 0)throw new RangeError("Invalid type is specified");const K=Ec(k);(function(te,ie,he,Ce){const ke=Object.create(cn.prototype);let Ee,Ne,Xe,Ct;Ee=ie.start!==void 0?()=>ie.start(ke):()=>{},Ne=ie.write!==void 0?Mt=>ie.write(Mt,ke):()=>b(void 0),Xe=ie.close!==void 0?()=>ie.close():()=>b(void 0),Ct=ie.abort!==void 0?Mt=>ie.abort(Mt):()=>b(void 0),Cs(te,ke,Ee,Ne,Xe,Ct,he,Ce)})(this,ne,Ts(k,1),K)}get locked(){if(!gi(this))throw Hu("locked");return Os(this)}abort(T){return gi(this)?Os(this)?w(new TypeError("Cannot abort a stream that already has a writer")):Mu(this,T):w(Hu("abort"))}close(){return gi(this)?Os(this)?w(new TypeError("Cannot close a stream that already has a writer")):On(this)?w(new TypeError("Cannot close an already-closing stream")):Pd(this):w(Hu("close"))}getWriter(){if(!gi(this))throw Hu("getWriter");return xd(this)}}function xd(_){return new bi(_)}function Nd(_){_._state="writable",_._storedError=void 0,_._writer=void 0,_._writableStreamController=void 0,_._writeRequests=new q,_._inFlightWriteRequest=void 0,_._closeRequest=void 0,_._inFlightCloseRequest=void 0,_._pendingAbortRequest=void 0,_._backpressure=!1}function gi(_){return!!i(_)&&!!Object.prototype.hasOwnProperty.call(_,"_writableStreamController")&&_ instanceof An}function Os(_){return _._writer!==void 0}function Mu(_,T){var x;if(_._state==="closed"||_._state==="errored")return b(void 0);_._writableStreamController._abortReason=T,(x=_._writableStreamController._abortController)===null||x===void 0||x.abort(T);const k=_._state;if(k==="closed"||k==="errored")return b(void 0);if(_._pendingAbortRequest!==void 0)return _._pendingAbortRequest._promise;let ne=!1;k==="erroring"&&(ne=!0,T=void 0);const K=y((te,ie)=>{_._pendingAbortRequest={_promise:void 0,_resolve:te,_reject:ie,_reason:T,_wasAlreadyErroring:ne}});return _._pendingAbortRequest._promise=K,ne||Ud(_,T),K}function Pd(_){const T=_._state;if(T==="closed"||T==="errored")return w(new TypeError("The stream (in ".concat(T," state) is not in the writable state and cannot be closed")));const x=y((K,te)=>{const ie={_resolve:K,_reject:te};_._closeRequest=ie}),k=_._writer;var ne;return k!==void 0&&_._backpressure&&T==="writable"&&kd(k),So(ne=_._writableStreamController,Rs,0),La(ne),x}function Bu(_,T){_._state!=="writable"?qd(_):Ud(_,T)}function Ud(_,T){const x=_._writableStreamController;_._state="erroring",_._storedError=T;const k=_._writer;k!==void 0&&Dd(k,T),!(function(ne){return ne._inFlightWriteRequest!==void 0||ne._inFlightCloseRequest!==void 0})(_)&&x._started&&qd(_)}function qd(_){_._state="errored",_._writableStreamController[Y]();const T=_._storedError;if(_._writeRequests.forEach(k=>{k._reject(T)}),_._writeRequests=new q,_._pendingAbortRequest===void 0)return void Gn(_);const x=_._pendingAbortRequest;if(_._pendingAbortRequest=void 0,x._wasAlreadyErroring)return x._reject(T),void Gn(_);E(_._writableStreamController[U](x._reason),()=>(x._resolve(),Gn(_),null),k=>(x._reject(k),Gn(_),null))}function On(_){return _._closeRequest!==void 0||_._inFlightCloseRequest!==void 0}function Gn(_){_._closeRequest!==void 0&&(_._closeRequest._reject(_._storedError),_._closeRequest=void 0);const T=_._writer;T!==void 0&&Gu(T,_._storedError)}function zu(_,T){const x=_._writer;x!==void 0&&T!==_._backpressure&&(T?(function(k){ia(k)})(x):kd(x)),_._backpressure=T}Object.defineProperties(An.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),u(An.prototype.abort,"abort"),u(An.prototype.close,"close"),u(An.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(An.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});class bi{constructor(T){if(Se(T,1,"WritableStreamDefaultWriter"),Cd(T,"First parameter"),Os(T))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=T,T._writer=this;const x=T._state;if(x==="writable")!On(T)&&T._backpressure?ia(this):Ld(this),na(this);else if(x==="erroring")Ns(this,T._storedError),na(this);else if(x==="closed")Ld(this),na(this),Rc(this);else{const k=T._storedError;Ns(this,k),rm(this,k)}}get closed(){return Wn(this)?this._closedPromise:w(Rn("closed"))}get desiredSize(){if(!Wn(this))throw Rn("desiredSize");if(this._ownerWritableStream===void 0)throw ra("desiredSize");return(function(T){const x=T._ownerWritableStream,k=x._state;return k==="errored"||k==="erroring"?null:k==="closed"?0:Oc(x._writableStreamController)})(this)}get ready(){return Wn(this)?this._readyPromise:w(Rn("ready"))}abort(T){return Wn(this)?this._ownerWritableStream===void 0?w(ra("abort")):(function(x,k){return Mu(x._ownerWritableStream,k)})(this,T):w(Rn("abort"))}close(){if(!Wn(this))return w(Rn("close"));const T=this._ownerWritableStream;return T===void 0?w(ra("close")):On(T)?w(new TypeError("Cannot close an already-closing stream")):ja(this)}releaseLock(){if(!Wn(this))throw Rn("releaseLock");this._ownerWritableStream!==void 0&&Ac(this)}write(T){return Wn(this)?this._ownerWritableStream===void 0?w(ra("write to")):jd(this,T):w(Rn("write"))}}function Wn(_){return!!i(_)&&!!Object.prototype.hasOwnProperty.call(_,"_ownerWritableStream")&&_ instanceof bi}function ja(_){return Pd(_._ownerWritableStream)}function Dd(_,T){_._readyPromiseState==="pending"?nm(_,T):(function(x,k){Ns(x,k)})(_,T)}function Ac(_){const T=_._ownerWritableStream,x=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Dd(_,x),(function(k,ne){k._closedPromiseState==="pending"?Gu(k,ne):(function(K,te){rm(K,te)})(k,ne)})(_,x),T._writer=void 0,_._ownerWritableStream=void 0}function jd(_,T){const x=_._ownerWritableStream,k=x._writableStreamController,ne=(function(ie,he){try{return ie._strategySizeAlgorithm(he)}catch(Ce){return Is(ie,Ce),1}})(k,T);if(x!==_._ownerWritableStream)return w(ra("write to"));const K=x._state;if(K==="errored")return w(x._storedError);if(On(x)||K==="closed")return w(new TypeError("The stream is closing or closed and cannot be written to"));if(K==="erroring")return w(x._storedError);const te=(function(ie){return y((he,Ce)=>{const ke={_resolve:he,_reject:Ce};ie._writeRequests.push(ke)})})(x);return(function(ie,he,Ce){try{So(ie,he,Ce)}catch(Ee){return void Is(ie,Ee)}const ke=ie._controlledWritableStream;On(ke)||ke._state!=="writable"||zu(ke,xs(ie)),La(ie)})(k,T,ne),te}Object.defineProperties(bi.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),u(bi.prototype.abort,"abort"),u(bi.prototype.close,"close"),u(bi.prototype.releaseLock,"releaseLock"),u(bi.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(bi.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});const Rs={};class cn{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!$u(this))throw Fr("abortReason");return this._abortReason}get signal(){if(!$u(this))throw Fr("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(T){if(!$u(this))throw Fr("error");this._controlledWritableStream._state==="writable"&&Fu(this,T)}[U](T){const x=this._abortAlgorithm(T);return _i(this),x}[Y](){qr(this)}}function $u(_){return!!i(_)&&!!Object.prototype.hasOwnProperty.call(_,"_controlledWritableStream")&&_ instanceof cn}function Cs(_,T,x,k,ne,K,te,ie){T._controlledWritableStream=_,_._writableStreamController=T,T._queue=void 0,T._queueTotalSize=void 0,qr(T),T._abortReason=void 0,T._abortController=(function(){if(Id)return new AbortController})(),T._started=!1,T._strategySizeAlgorithm=ie,T._strategyHWM=te,T._writeAlgorithm=k,T._closeAlgorithm=ne,T._abortAlgorithm=K;const he=xs(T);zu(_,he),E(b(x()),()=>(T._started=!0,La(T),null),Ce=>(T._started=!0,Bu(_,Ce),null))}function _i(_){_._writeAlgorithm=void 0,_._closeAlgorithm=void 0,_._abortAlgorithm=void 0,_._strategySizeAlgorithm=void 0}function Oc(_){return _._strategyHWM-_._queueTotalSize}function La(_){const T=_._controlledWritableStream;if(!_._started||T._inFlightWriteRequest!==void 0)return;if(T._state==="erroring")return void qd(T);if(_._queue.length===0)return;const x=_._queue.peek().value;x===Rs?(function(k){const ne=k._controlledWritableStream;(function(te){te._inFlightCloseRequest=te._closeRequest,te._closeRequest=void 0})(ne),Jo(k);const K=k._closeAlgorithm();_i(k),E(K,()=>((function(te){te._inFlightCloseRequest._resolve(void 0),te._inFlightCloseRequest=void 0,te._state==="erroring"&&(te._storedError=void 0,te._pendingAbortRequest!==void 0&&(te._pendingAbortRequest._resolve(),te._pendingAbortRequest=void 0)),te._state="closed";const ie=te._writer;ie!==void 0&&Rc(ie)})(ne),null),te=>((function(ie,he){ie._inFlightCloseRequest._reject(he),ie._inFlightCloseRequest=void 0,ie._pendingAbortRequest!==void 0&&(ie._pendingAbortRequest._reject(he),ie._pendingAbortRequest=void 0),Bu(ie,he)})(ne,te),null))})(_):(function(k,ne){const K=k._controlledWritableStream;(function(te){te._inFlightWriteRequest=te._writeRequests.shift()})(K),E(k._writeAlgorithm(ne),()=>{(function(ie){ie._inFlightWriteRequest._resolve(void 0),ie._inFlightWriteRequest=void 0})(K);const te=K._state;if(Jo(k),!On(K)&&te==="writable"){const ie=xs(k);zu(K,ie)}return La(k),null},te=>(K._state==="writable"&&_i(k),(function(ie,he){ie._inFlightWriteRequest._reject(he),ie._inFlightWriteRequest=void 0,Bu(ie,he)})(K,te),null))})(_,x)}function Is(_,T){_._controlledWritableStream._state==="writable"&&Fu(_,T)}function xs(_){return Oc(_)<=0}function Fu(_,T){const x=_._controlledWritableStream;_i(_),Ud(x,T)}function Hu(_){return new TypeError("WritableStream.prototype.".concat(_," can only be used on a WritableStream"))}function Fr(_){return new TypeError("WritableStreamDefaultController.prototype.".concat(_," can only be used on a WritableStreamDefaultController"))}function Rn(_){return new TypeError("WritableStreamDefaultWriter.prototype.".concat(_," can only be used on a WritableStreamDefaultWriter"))}function ra(_){return new TypeError("Cannot "+_+" a stream using a released writer")}function na(_){_._closedPromise=y((T,x)=>{_._closedPromise_resolve=T,_._closedPromise_reject=x,_._closedPromiseState="pending"})}function rm(_,T){na(_),Gu(_,T)}function Gu(_,T){_._closedPromise_reject!==void 0&&(I(_._closedPromise),_._closedPromise_reject(T),_._closedPromise_resolve=void 0,_._closedPromise_reject=void 0,_._closedPromiseState="rejected")}function Rc(_){_._closedPromise_resolve!==void 0&&(_._closedPromise_resolve(void 0),_._closedPromise_resolve=void 0,_._closedPromise_reject=void 0,_._closedPromiseState="resolved")}function ia(_){_._readyPromise=y((T,x)=>{_._readyPromise_resolve=T,_._readyPromise_reject=x}),_._readyPromiseState="pending"}function Ns(_,T){ia(_),nm(_,T)}function Ld(_){ia(_),kd(_)}function nm(_,T){_._readyPromise_reject!==void 0&&(I(_._readyPromise),_._readyPromise_reject(T),_._readyPromise_resolve=void 0,_._readyPromise_reject=void 0,_._readyPromiseState="rejected")}function kd(_){_._readyPromise_resolve!==void 0&&(_._readyPromise_resolve(void 0),_._readyPromise_resolve=void 0,_._readyPromise_reject=void 0,_._readyPromiseState="fulfilled")}Object.defineProperties(cn.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(cn.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});const im=typeof globalThis<"u"?globalThis:typeof self<"u"?self:Pf!==void 0?Pf:void 0,Md=(function(){const _=im?.DOMException;return(function(T){if(typeof T!="function"&&typeof T!="object"||T.name!=="DOMException")return!1;try{return new T,!0}catch{return!1}})(_)?_:void 0})()||(function(){const _=function(T,x){this.message=T||"",this.name=x||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return u(_,"DOMException"),_.prototype=Object.create(Error.prototype),Object.defineProperty(_.prototype,"constructor",{value:_,writable:!0,configurable:!0}),_})();function om(_,T,x,k,ne,K){const te=Jr(_),ie=xd(T);_._disturbed=!0;let he=!1,Ce=b(void 0);return y((ke,Ee)=>{let Ne;if(K!==void 0){if(Ne=()=>{const we=K.reason!==void 0?K.reason:new Md("Aborted","AbortError"),ze=[];k||ze.push(()=>T._state==="writable"?Mu(T,we):b(void 0)),ne||ze.push(()=>_._state==="readable"?tn(_,we):b(void 0)),Ze(()=>Promise.all(ze.map(vt=>vt())),!0,we)},K.aborted)return void Ne();K.addEventListener("abort",Ne)}var Xe,Ct,Mt;if(ot(_,te._closedPromise,we=>(k?lt(!0,we):Ze(()=>Mu(T,we),!0,we),null)),ot(T,ie._closedPromise,we=>(ne?lt(!0,we):Ze(()=>tn(_,we),!0,we),null)),Xe=_,Ct=te._closedPromise,Mt=()=>(x?lt():Ze(()=>(function(we){const ze=we._ownerWritableStream,vt=ze._state;return On(ze)||vt==="closed"?b(void 0):vt==="errored"?w(ze._storedError):ja(we)})(ie)),null),Xe._state==="closed"?Mt():R(Ct,Mt),On(T)||T._state==="closed"){const we=new TypeError("the destination writable stream closed before all data could be piped to it");ne?lt(!0,we):Ze(()=>tn(_,we),!0,we)}function mt(){const we=Ce;return S(Ce,()=>we!==Ce?mt():void 0)}function ot(we,ze,vt){we._state==="errored"?vt(we._storedError):O(ze,vt)}function Ze(we,ze,vt){function ut(){return E(we(),()=>Ht(ze,vt),Tr=>Ht(!0,Tr)),null}he||(he=!0,T._state!=="writable"||On(T)?ut():R(mt(),ut))}function lt(we,ze){he||(he=!0,T._state!=="writable"||On(T)?Ht(we,ze):R(mt(),()=>Ht(we,ze)))}function Ht(we,ze){return Ac(ie),M(te),K!==void 0&&K.removeEventListener("abort",Ne),we?Ee(ze):ke(void 0),null}I(y((we,ze)=>{(function vt(ut){ut?we():S(he?b(!0):S(ie._readyPromise,()=>y((Tr,hr)=>{mi(te,{_chunkSteps:Cn=>{Ce=S(jd(ie,Cn),void 0,n),Tr(!1)},_closeSteps:()=>Tr(!0),_errorSteps:hr})})),vt,ze)})(!1)}))})}class Oo{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Cc(this))throw Ic("desiredSize");return Bd(this)}close(){if(!Cc(this))throw Ic("close");if(!oa(this))throw new TypeError("The stream is not in a state that permits close");ka(this)}enqueue(T){if(!Cc(this))throw Ic("enqueue");if(!oa(this))throw new TypeError("The stream is not in a state that permits enqueue");return Ps(this,T)}error(T){if(!Cc(this))throw Ic("error");wi(this,T)}[$](T){qr(this);const x=this._cancelAlgorithm(T);return Vu(this),x}[L](T){const x=this._controlledReadableStream;if(this._queue.length>0){const k=Jo(this);this._closeRequested&&this._queue.length===0?(Vu(this),Ku(x)):Wu(this),T._chunkSteps(k)}else Er(x,T),Wu(this)}[H](){}}function Cc(_){return!!i(_)&&!!Object.prototype.hasOwnProperty.call(_,"_controlledReadableStream")&&_ instanceof Oo}function Wu(_){am(_)&&(_._pulling?_._pullAgain=!0:(_._pulling=!0,E(_._pullAlgorithm(),()=>(_._pulling=!1,_._pullAgain&&(_._pullAgain=!1,Wu(_)),null),T=>(wi(_,T),null))))}function am(_){const T=_._controlledReadableStream;return!!oa(_)&&!!_._started&&(!!($i(T)&&Pr(T)>0)||Bd(_)>0)}function Vu(_){_._pullAlgorithm=void 0,_._cancelAlgorithm=void 0,_._strategySizeAlgorithm=void 0}function ka(_){if(!oa(_))return;const T=_._controlledReadableStream;_._closeRequested=!0,_._queue.length===0&&(Vu(_),Ku(T))}function Ps(_,T){if(!oa(_))return;const x=_._controlledReadableStream;if($i(x)&&Pr(x)>0)st(x,T,!1);else{let k;try{k=_._strategySizeAlgorithm(T)}catch(ne){throw wi(_,ne),ne}try{So(_,T,k)}catch(ne){throw wi(_,ne),ne}}Wu(_)}function wi(_,T){const x=_._controlledReadableStream;x._state==="readable"&&(qr(_),Vu(_),$d(x,T))}function Bd(_){const T=_._controlledReadableStream._state;return T==="errored"?null:T==="closed"?0:_._strategyHWM-_._queueTotalSize}function oa(_){const T=_._controlledReadableStream._state;return!_._closeRequested&&T==="readable"}function sm(_,T,x,k,ne,K,te){T._controlledReadableStream=_,T._queue=void 0,T._queueTotalSize=void 0,qr(T),T._started=!1,T._closeRequested=!1,T._pullAgain=!1,T._pulling=!1,T._strategySizeAlgorithm=te,T._strategyHWM=K,T._pullAlgorithm=k,T._cancelAlgorithm=ne,_._readableStreamController=T,E(b(x()),()=>(T._started=!0,Wu(T),null),ie=>(wi(T,ie),null))}function Ic(_){return new TypeError("ReadableStreamDefaultController.prototype.".concat(_," can only be used on a ReadableStreamDefaultController"))}function a0(_){return i(T=_)&&T.getReader!==void 0?(function(x){let k;return k=Yu(n,function(){let ne;try{ne=x.read()}catch(K){return w(K)}return C(ne,K=>{if(!i(K))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(K.done)ka(k._readableStreamController);else{const te=K.value;Ps(k._readableStreamController,te)}})},function(ne){try{return b(x.cancel(ne))}catch(K){return w(K)}},0),k})(_.getReader()):(function(x){let k;const ne=(function K(te){let ie=arguments.length>2?arguments[2]:void 0;if(ie===void 0)if((arguments.length>1&&arguments[1]!==void 0?arguments[1]:"sync")==="async"){if((ie=ki(te,or))===void 0)return(function(Ce){const ke={next(){let Ee;try{Ee=Yt(Ce)}catch(Ne){return w(Ne)}return zn(Ee)},return(Ee){let Ne;try{const Xe=ki(Ce.iterator,"return");if(Xe===void 0)return b({done:!0,value:Ee});Ne=D(Xe,Ce.iterator,[Ee])}catch(Xe){return w(Xe)}return i(Ne)?zn(Ne):w(new TypeError("The iterator.return() method must return an object"))}};return{iterator:ke,nextMethod:ke.next,done:!1}})(K(te,"sync",ki(te,Symbol.iterator)))}else ie=ki(te,Symbol.iterator);if(ie===void 0)throw new TypeError("The object is not iterable");const he=D(ie,te,[]);if(!i(he))throw new TypeError("The iterator method must return an object");return{iterator:he,nextMethod:he.next,done:!1}})(x,"async");return k=Yu(n,function(){let K;try{K=Yt(ne)}catch(te){return w(te)}return C(b(K),te=>{if(!i(te))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(te.done)ka(k._readableStreamController);else{const ie=te.value;Ps(k._readableStreamController,ie)}})},function(K){const te=ne.iterator;let ie;try{ie=ki(te,"return")}catch(he){return w(he)}return ie===void 0?b(void 0):C(j(ie,te,[K]),he=>{if(!i(he))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})},0),k})(_);var T}function um(_,T,x){return pe(_,x),k=>j(_,T,[k])}function s0(_,T,x){return pe(_,x),k=>j(_,T,[k])}function u0(_,T,x){return pe(_,x),k=>D(_,T,[k])}function l0(_,T){if((_="".concat(_))!=="bytes")throw new TypeError("".concat(T," '").concat(_,"' is not a valid enumeration value for ReadableStreamType"));return _}function lm(_,T){fe(_,T);const x=_?.preventAbort,k=_?.preventCancel,ne=_?.preventClose,K=_?.signal;return K!==void 0&&(function(te,ie){if(!(function(he){if(typeof he!="object"||he===null)return!1;try{return typeof he.aborted=="boolean"}catch{return!1}})(te))throw new TypeError("".concat(ie," is not an AbortSignal."))})(K,"".concat(T," has member 'signal' that")),{preventAbort:!!x,preventCancel:!!k,preventClose:!!ne,signal:K}}Object.defineProperties(Oo.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),u(Oo.prototype.close,"close"),u(Oo.prototype.enqueue,"enqueue"),u(Oo.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Oo.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class Hr{constructor(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};T===void 0?T=null:be(T,"First parameter");const k=As(x,"Second parameter"),ne=(function(K,te){fe(K,te);const ie=K,he=ie?.autoAllocateChunkSize,Ce=ie?.cancel,ke=ie?.pull,Ee=ie?.start,Ne=ie?.type;return{autoAllocateChunkSize:he===void 0?void 0:Ot(he,"".concat(te," has member 'autoAllocateChunkSize' that")),cancel:Ce===void 0?void 0:um(Ce,ie,"".concat(te," has member 'cancel' that")),pull:ke===void 0?void 0:s0(ke,ie,"".concat(te," has member 'pull' that")),start:Ee===void 0?void 0:u0(Ee,ie,"".concat(te," has member 'start' that")),type:Ne===void 0?void 0:l0(Ne,"".concat(te," has member 'type' that"))}})(T,"First parameter");if(zd(this),ne.type==="bytes"){if(k.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");(function(K,te,ie){const he=Object.create(kt.prototype);let Ce,ke,Ee;Ce=te.start!==void 0?()=>te.start(he):()=>{},ke=te.pull!==void 0?()=>te.pull(he):()=>b(void 0),Ee=te.cancel!==void 0?Xe=>te.cancel(Xe):()=>b(void 0);const Ne=te.autoAllocateChunkSize;if(Ne===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");dr(K,he,Ce,ke,Ee,ie,Ne)})(this,ne,Ts(k,0))}else{const K=Ec(k);(function(te,ie,he,Ce){const ke=Object.create(Oo.prototype);let Ee,Ne,Xe;Ee=ie.start!==void 0?()=>ie.start(ke):()=>{},Ne=ie.pull!==void 0?()=>ie.pull(ke):()=>b(void 0),Xe=ie.cancel!==void 0?Ct=>ie.cancel(Ct):()=>b(void 0),sm(te,ke,Ee,Ne,Xe,he,Ce)})(this,ne,Ts(k,1),K)}}get locked(){if(!aa(this))throw sa("locked");return $i(this)}cancel(T){return aa(this)?$i(this)?w(new TypeError("Cannot cancel a stream that already has a reader")):tn(this,T):w(sa("cancel"))}getReader(T){if(!aa(this))throw sa("getReader");return(function(x,k){fe(x,k);const ne=x?.mode;return{mode:ne===void 0?void 0:qa(ne,"".concat(k," has member 'mode' that"))}})(T,"First parameter").mode===void 0?Jr(this):Da(this)}pipeThrough(T){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!aa(this))throw sa("pipeThrough");Se(T,1,"pipeThrough");const k=(function(K,te){fe(K,te);const ie=K?.readable;Ie(ie,"readable","ReadableWritablePair"),Kt(ie,"".concat(te," has member 'readable' that"));const he=K?.writable;return Ie(he,"writable","ReadableWritablePair"),Cd(he,"".concat(te," has member 'writable' that")),{readable:ie,writable:he}})(T,"First parameter"),ne=lm(x,"Second parameter");if($i(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Os(k.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return I(om(this,k.writable,ne.preventClose,ne.preventAbort,ne.preventCancel,ne.signal)),k.readable}pipeTo(T){let x,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!aa(this))return w(sa("pipeTo"));if(T===void 0)return w("Parameter 1 is required in 'pipeTo'.");if(!gi(T))return w(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));try{x=lm(k,"Second parameter")}catch(ne){return w(ne)}return $i(this)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Os(T)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):om(this,T,x.preventClose,x.preventAbort,x.preventCancel,x.signal)}tee(){if(!aa(this))throw sa("tee");return En((function(T){return er(T._readableStreamController)?(function(x){let k,ne,K,te,ie,he=Jr(x),Ce=!1,ke=!1,Ee=!1,Ne=!1,Xe=!1;const Ct=y(we=>{ie=we});function Mt(we){O(we._closedPromise,ze=>(we!==he||($r(K._readableStreamController,ze),$r(te._readableStreamController,ze),Ne&&Xe||ie(void 0)),null))}function mt(){Bi(he)&&(M(he),he=Jr(x),Mt(he)),mi(he,{_chunkSteps:we=>{P(()=>{ke=!1,Ee=!1;const ze=we;let vt=we;if(!Ne&&!Xe)try{vt=xa(we)}catch(ut){return $r(K._readableStreamController,ut),$r(te._readableStreamController,ut),void ie(tn(x,ut))}Ne||Lu(K._readableStreamController,ze),Xe||Lu(te._readableStreamController,vt),Ce=!1,ke?Ze():Ee&&lt()})},_closeSteps:()=>{Ce=!1,Ne||ju(K._readableStreamController),Xe||ju(te._readableStreamController),K._readableStreamController._pendingPullIntos.length>0&&ea(K._readableStreamController,0),te._readableStreamController._pendingPullIntos.length>0&&ea(te._readableStreamController,0),Ne&&Xe||ie(void 0)},_errorSteps:()=>{Ce=!1}})}function ot(we,ze){qt(he)&&(M(he),he=Da(x),Mt(he));const vt=ze?te:K,ut=ze?K:te;ku(he,we,1,{_chunkSteps:Tr=>{P(()=>{ke=!1,Ee=!1;const hr=ze?Xe:Ne;if(ze?Ne:Xe)hr||Ao(vt._readableStreamController,Tr);else{let Cn;try{Cn=xa(Tr)}catch(rl){return $r(vt._readableStreamController,rl),$r(ut._readableStreamController,rl),void ie(tn(x,rl))}hr||Ao(vt._readableStreamController,Tr),Lu(ut._readableStreamController,Cn)}Ce=!1,ke?Ze():Ee&&lt()})},_closeSteps:Tr=>{Ce=!1;const hr=ze?Xe:Ne,Cn=ze?Ne:Xe;hr||ju(vt._readableStreamController),Cn||ju(ut._readableStreamController),Tr!==void 0&&(hr||Ao(vt._readableStreamController,Tr),!Cn&&ut._readableStreamController._pendingPullIntos.length>0&&ea(ut._readableStreamController,0)),hr&&Cn||ie(void 0)},_errorSteps:()=>{Ce=!1}})}function Ze(){if(Ce)return ke=!0,b(void 0);Ce=!0;const we=Zo(K._readableStreamController);return we===null?mt():ot(we._view,!1),b(void 0)}function lt(){if(Ce)return Ee=!0,b(void 0);Ce=!0;const we=Zo(te._readableStreamController);return we===null?mt():ot(we._view,!0),b(void 0)}function Ht(){}return K=cm(Ht,Ze,function(we){if(Ne=!0,k=we,Xe){const ze=En([k,ne]),vt=tn(x,ze);ie(vt)}return Ct}),te=cm(Ht,lt,function(we){if(Xe=!0,ne=we,Ne){const ze=En([k,ne]),vt=tn(x,ze);ie(vt)}return Ct}),Mt(he),[K,te]})(T):(function(x){const k=Jr(x);let ne,K,te,ie,he,Ce=!1,ke=!1,Ee=!1,Ne=!1;const Xe=y(mt=>{he=mt});function Ct(){return Ce?(ke=!0,b(void 0)):(Ce=!0,mi(k,{_chunkSteps:mt=>{P(()=>{ke=!1;const ot=mt,Ze=mt;Ee||Ps(te._readableStreamController,ot),Ne||Ps(ie._readableStreamController,Ze),Ce=!1,ke&&Ct()})},_closeSteps:()=>{Ce=!1,Ee||ka(te._readableStreamController),Ne||ka(ie._readableStreamController),Ee&&Ne||he(void 0)},_errorSteps:()=>{Ce=!1}}),b(void 0))}function Mt(){}return te=Yu(Mt,Ct,function(mt){if(Ee=!0,ne=mt,Ne){const ot=En([ne,K]),Ze=tn(x,ot);he(Ze)}return Xe}),ie=Yu(Mt,Ct,function(mt){if(Ne=!0,K=mt,Ee){const ot=En([ne,K]),Ze=tn(x,ot);he(Ze)}return Xe}),O(k._closedPromise,mt=>(wi(te._readableStreamController,mt),wi(ie._readableStreamController,mt),Ee&&Ne||he(void 0),null)),[te,ie]})(T)})(this))}values(T){if(!aa(this))throw sa("values");return(function(x,k){const ne=Jr(x),K=new $n(ne,k),te=Object.create(Ur);return te._asyncIteratorImpl=K,te})(this,(function(x){return fe(x,"First parameter"),{preventCancel:!!x?.preventCancel}})(T).preventCancel)}[or](T){return this.values(T)}static from(T){return a0(T)}}function Yu(_,T,x){let k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,ne=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>1;const K=Object.create(Hr.prototype);return zd(K),sm(K,Object.create(Oo.prototype),_,T,x,k,ne),K}function cm(_,T,x){const k=Object.create(Hr.prototype);return zd(k),dr(k,Object.create(kt.prototype),_,T,x,0,void 0),k}function zd(_){_._state="readable",_._reader=void 0,_._storedError=void 0,_._disturbed=!1}function aa(_){return!!i(_)&&!!Object.prototype.hasOwnProperty.call(_,"_readableStreamController")&&_ instanceof Hr}function $i(_){return _._reader!==void 0}function tn(_,T){if(_._disturbed=!0,_._state==="closed")return b(void 0);if(_._state==="errored")return w(_._storedError);Ku(_);const x=_._reader;if(x!==void 0&&Bi(x)){const k=x._readIntoRequests;x._readIntoRequests=new q,k.forEach(ne=>{ne._closeSteps(void 0)})}return C(_._readableStreamController[$](T),n)}function Ku(_){_._state="closed";const T=_._reader;if(T!==void 0&&(z(T),qt(T))){const x=T._readRequests;T._readRequests=new q,x.forEach(k=>{k._closeSteps()})}}function $d(_,T){_._state="errored",_._storedError=T;const x=_._reader;x!==void 0&&(Re(x,T),qt(x)?vi(x,T):zi(x,T))}function sa(_){return new TypeError("ReadableStream.prototype.".concat(_," can only be used on a ReadableStream"))}function Fd(_,T){fe(_,T);const x=_?.highWaterMark;return Ie(x,"highWaterMark","QueuingStrategyInit"),{highWaterMark:$e(x)}}Object.defineProperties(Hr,{from:{enumerable:!0}}),Object.defineProperties(Hr.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),u(Hr.from,"from"),u(Hr.prototype.cancel,"cancel"),u(Hr.prototype.getReader,"getReader"),u(Hr.prototype.pipeThrough,"pipeThrough"),u(Hr.prototype.pipeTo,"pipeTo"),u(Hr.prototype.tee,"tee"),u(Hr.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Hr.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(Hr.prototype,or,{value:Hr.prototype.values,writable:!0,configurable:!0});const Hd=_=>_.byteLength;u(Hd,"size");class Qu{constructor(T){Se(T,1,"ByteLengthQueuingStrategy"),T=Fd(T,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=T.highWaterMark}get highWaterMark(){if(!fm(this))throw Ma("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!fm(this))throw Ma("size");return Hd}}function Ma(_){return new TypeError("ByteLengthQueuingStrategy.prototype.".concat(_," can only be used on a ByteLengthQueuingStrategy"))}function fm(_){return!!i(_)&&!!Object.prototype.hasOwnProperty.call(_,"_byteLengthQueuingStrategyHighWaterMark")&&_ instanceof Qu}Object.defineProperties(Qu.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Qu.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});const dm=()=>1;u(dm,"size");class xc{constructor(T){Se(T,1,"CountQueuingStrategy"),T=Fd(T,"First parameter"),this._countQueuingStrategyHighWaterMark=T.highWaterMark}get highWaterMark(){if(!Wd(this))throw Gd("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Wd(this))throw Gd("size");return dm}}function Gd(_){return new TypeError("CountQueuingStrategy.prototype.".concat(_," can only be used on a CountQueuingStrategy"))}function Wd(_){return!!i(_)&&!!Object.prototype.hasOwnProperty.call(_,"_countQueuingStrategyHighWaterMark")&&_ instanceof xc}function Ju(_,T,x){return pe(_,x),k=>j(_,T,[k])}function Xu(_,T,x){return pe(_,x),k=>D(_,T,[k])}function c0(_,T,x){return pe(_,x),(k,ne)=>j(_,T,[k,ne])}function Nc(_,T,x){return pe(_,x),k=>j(_,T,[k])}Object.defineProperties(xc.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(xc.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class Zu{constructor(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};T===void 0&&(T=null);const k=As(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"Second parameter"),ne=As(x,"Third parameter"),K=(function(Ee,Ne){fe(Ee,Ne);const Xe=Ee?.cancel,Ct=Ee?.flush,Mt=Ee?.readableType,mt=Ee?.start,ot=Ee?.transform,Ze=Ee?.writableType;return{cancel:Xe===void 0?void 0:Nc(Xe,Ee,"".concat(Ne," has member 'cancel' that")),flush:Ct===void 0?void 0:Ju(Ct,Ee,"".concat(Ne," has member 'flush' that")),readableType:Mt,start:mt===void 0?void 0:Xu(mt,Ee,"".concat(Ne," has member 'start' that")),transform:ot===void 0?void 0:c0(ot,Ee,"".concat(Ne," has member 'transform' that")),writableType:Ze}})(T,"First parameter");if(K.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(K.writableType!==void 0)throw new RangeError("Invalid writableType specified");const te=Ts(ne,0),ie=Ec(ne),he=Ts(k,1),Ce=Ec(k);let ke;(function(Ee,Ne,Xe,Ct,Mt,mt){function ot(){return Ne}Ee._writable=(function(Ze,lt,Ht,we){let ze=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,vt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:()=>1;const ut=Object.create(An.prototype);return Nd(ut),Cs(ut,Object.create(cn.prototype),Ze,lt,Ht,we,ze,vt),ut})(ot,function(Ze){return(function(lt,Ht){const we=lt._transformStreamController;return lt._backpressure?C(lt._backpressureChangePromise,()=>{const ze=lt._writable;if(ze._state==="erroring")throw ze._storedError;return pm(we,Ht)}):pm(we,Ht)})(Ee,Ze)},function(){return(function(Ze){const lt=Ze._transformStreamController;if(lt._finishPromise!==void 0)return lt._finishPromise;const Ht=Ze._readable;lt._finishPromise=y((ze,vt)=>{lt._finishPromise_resolve=ze,lt._finishPromise_reject=vt});const we=lt._flushAlgorithm();return Dc(lt),E(we,()=>(Ht._state==="errored"?Fi(lt,Ht._storedError):(ka(Ht._readableStreamController),rn(lt)),null),ze=>(wi(Ht._readableStreamController,ze),Fi(lt,ze),null)),lt._finishPromise})(Ee)},function(Ze){return(function(lt,Ht){const we=lt._transformStreamController;if(we._finishPromise!==void 0)return we._finishPromise;const ze=lt._readable;we._finishPromise=y((ut,Tr)=>{we._finishPromise_resolve=ut,we._finishPromise_reject=Tr});const vt=we._cancelAlgorithm(Ht);return Dc(we),E(vt,()=>(ze._state==="errored"?Fi(we,ze._storedError):(wi(ze._readableStreamController,Ht),rn(we)),null),ut=>(wi(ze._readableStreamController,ut),Fi(we,ut),null)),we._finishPromise})(Ee,Ze)},Xe,Ct),Ee._readable=Yu(ot,function(){return(function(Ze){return tl(Ze,!1),Ze._backpressureChangePromise})(Ee)},function(Ze){return(function(lt,Ht){const we=lt._transformStreamController;if(we._finishPromise!==void 0)return we._finishPromise;const ze=lt._writable;we._finishPromise=y((ut,Tr)=>{we._finishPromise_resolve=ut,we._finishPromise_reject=Tr});const vt=we._cancelAlgorithm(Ht);return Dc(we),E(vt,()=>(ze._state==="errored"?Fi(we,ze._storedError):(Is(ze._writableStreamController,Ht),Uc(lt),rn(we)),null),ut=>(Is(ze._writableStreamController,ut),Uc(lt),Fi(we,ut),null)),we._finishPromise})(Ee,Ze)},Mt,mt),Ee._backpressure=void 0,Ee._backpressureChangePromise=void 0,Ee._backpressureChangePromise_resolve=void 0,tl(Ee,!0),Ee._transformStreamController=void 0})(this,y(Ee=>{ke=Ee}),he,Ce,te,ie),(function(Ee,Ne){const Xe=Object.create(Ro.prototype);let Ct,Mt,mt;Ct=Ne.transform!==void 0?ot=>Ne.transform(ot,Xe):ot=>{try{return hm(Xe,ot),b(void 0)}catch(Ze){return w(Ze)}},Mt=Ne.flush!==void 0?()=>Ne.flush(Xe):()=>b(void 0),mt=Ne.cancel!==void 0?ot=>Ne.cancel(ot):()=>b(void 0),(function(ot,Ze,lt,Ht,we){Ze._controlledTransformStream=ot,ot._transformStreamController=Ze,Ze._transformAlgorithm=lt,Ze._flushAlgorithm=Ht,Ze._cancelAlgorithm=we,Ze._finishPromise=void 0,Ze._finishPromise_resolve=void 0,Ze._finishPromise_reject=void 0})(Ee,Xe,Ct,Mt,mt)})(this,K),K.start!==void 0?ke(K.start(this._transformStreamController)):ke(void 0)}get readable(){if(!Vd(this))throw Yd("readable");return this._readable}get writable(){if(!Vd(this))throw Yd("writable");return this._writable}}function Vd(_){return!!i(_)&&!!Object.prototype.hasOwnProperty.call(_,"_transformStreamController")&&_ instanceof Zu}function Pc(_,T){wi(_._readable._readableStreamController,T),el(_,T)}function el(_,T){Dc(_._transformStreamController),Is(_._writable._writableStreamController,T),Uc(_)}function Uc(_){_._backpressure&&tl(_,!1)}function tl(_,T){_._backpressureChangePromise!==void 0&&_._backpressureChangePromise_resolve(),_._backpressureChangePromise=y(x=>{_._backpressureChangePromise_resolve=x}),_._backpressure=T}Object.defineProperties(Zu.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Zu.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});class Ro{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!qc(this))throw jc("desiredSize");return Bd(this._controlledTransformStream._readable._readableStreamController)}enqueue(T){if(!qc(this))throw jc("enqueue");hm(this,T)}error(T){if(!qc(this))throw jc("error");var x;x=T,Pc(this._controlledTransformStream,x)}terminate(){if(!qc(this))throw jc("terminate");(function(T){const x=T._controlledTransformStream;ka(x._readable._readableStreamController),el(x,new TypeError("TransformStream terminated"))})(this)}}function qc(_){return!!i(_)&&!!Object.prototype.hasOwnProperty.call(_,"_controlledTransformStream")&&_ instanceof Ro}function Dc(_){_._transformAlgorithm=void 0,_._flushAlgorithm=void 0,_._cancelAlgorithm=void 0}function hm(_,T){const x=_._controlledTransformStream,k=x._readable._readableStreamController;if(!oa(k))throw new TypeError("Readable side is not in a state that permits enqueue");try{Ps(k,T)}catch(ne){throw el(x,ne),x._readable._storedError}(function(ne){return!am(ne)})(k)!==x._backpressure&&tl(x,!0)}function pm(_,T){return C(_._transformAlgorithm(T),void 0,x=>{throw Pc(_._controlledTransformStream,x),x})}function jc(_){return new TypeError("TransformStreamDefaultController.prototype.".concat(_," can only be used on a TransformStreamDefaultController"))}function rn(_){_._finishPromise_resolve!==void 0&&(_._finishPromise_resolve(),_._finishPromise_resolve=void 0,_._finishPromise_reject=void 0)}function Fi(_,T){_._finishPromise_reject!==void 0&&(I(_._finishPromise),_._finishPromise_reject(T),_._finishPromise_resolve=void 0,_._finishPromise_reject=void 0)}function Yd(_){return new TypeError("TransformStream.prototype.".concat(_," can only be used on a TransformStream"))}Object.defineProperties(Ro.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),u(Ro.prototype.enqueue,"enqueue"),u(Ro.prototype.error,"error"),u(Ro.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ro.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0})},function(t,e,r){var n;r.r(e),(function(f){f.local="local",f.none="none",f.session="session"})(n||(n={}));var i=function(){},o=function(){};function u(f,p,l){l===void 0&&(l={});var d=/\?/.test(p),m="";for(var y in l)m===""?!d&&(p+="?"):m+="&",m+=y+"="+encodeURIComponent(l[y]);return/^http(s)?\:\/\//.test(p+=m)?p:""+f+p}r.d(e,"StorageType",function(){return n}),r.d(e,"AbstractSDKRequest",function(){return i}),r.d(e,"AbstractStorage",function(){return o}),r.d(e,"formatUrl",function(){return u})}]);var cu=Gj(lk.exports),Ni=function(){return Ni=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ni.apply(this,arguments)},wp=function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function u(l){try{p(n.next(l))}catch(d){o(d)}}function f(l){try{p(n.throw(l))}catch(d){o(d)}}function p(l){var d;l.done?i(l.value):(d=l.value,d instanceof r?d:new r(function(m){m(d)})).then(u,f)}p((n=n.apply(t,[])).next())})},Sp=function(t,e){var r,n,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function f(p){return function(l){return(function(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(u=0)),u;)try{if(r=1,n&&(i=2&d[0]?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return u.label++,{value:d[1],done:!1};case 5:u.label++,n=d[1],d=[0];continue;case 7:d=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!((i=i.length>0&&i[i.length-1])||d[0]!==6&&d[0]!==2)){u=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){u.label=d[1];break}if(d[0]===6&&u.label<i[1]){u.label=i[1],i=d;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(d);break}i[2]&&u.ops.pop(),u.trys.pop();continue}d=e.call(t,u)}catch(m){d=[6,m],n=0}finally{r=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}})([p,l])}}},ck=(function(){function t(e){var r,n;try{this.localStorage=e?.localStorage||(((n=(r=e?.adapter)===null||r===void 0?void 0:r.root)===null||n===void 0?void 0:n.globalThis)||globalThis).localStorage}catch{this.localStorage=e?.localStorage||{}}}return t.prototype.getItem=function(e){return wp(this,void 0,void 0,function(){return Sp(this,function(r){return[2,this.localStorage.getItem(e)]})})},t.prototype.removeItem=function(e){return wp(this,void 0,void 0,function(){return Sp(this,function(r){return this.localStorage.removeItem(e),[2]})})},t.prototype.setItem=function(e,r){return wp(this,void 0,void 0,function(){return Sp(this,function(n){return this.localStorage.setItem(e,r),[2]})})},t.prototype.getItemSync=function(e){return this.localStorage.getItem(e)},t.prototype.setItemSync=function(e,r){this.localStorage.setItem(e,r)},t.prototype.removeItemSync=function(e){this.localStorage.removeItem(e)},t})(),FK=/^[^:]+:\/\/[^/]+(\/[^?#]+)/,fk=function(t,e){var r,n,i,o=(r=e?.headers)===null||r===void 0?void 0:r["x-request-id"];return t||(t={}),(t?.code||!((n=t?.data)===null||n===void 0)&&n.error_code)&&(t={error:t.code||t.data.error,error_description:t.data.error_description||t.message||t.code||t.data.error_code,request_id:t.requestId,error_code:(i=t.data)===null||i===void 0?void 0:i.error_code}),t?.request_id||(t.request_id=t.request_id||o),t?.error?(t.error_uri=(function(u){return FK.test(u)?RegExp.$1:u})(e?.url),t):t?.data||{}},HK=function(t,e){var r=Ni({},t),n={};if(e?.captchaOptions&&(r.captchaOptions=e.captchaOptions),!cu.isMatch()||t.storage&&t.baseRequest)return r;try{var i=cu.genAdapter({}),o=i.localStorage,u=i.reqClass;if(o&&(n.storage=new ck({localStorage:o,adapter:e})),u){var f=new u({timeout:1e4,restrictedMethods:["get","post","upload","download","request"]});n.request=(function(p){return function(l,d){return wp(this,void 0,void 0,function(){return Sp(this,function(m){return[2,new Promise(function(y,b){var w=Object.assign({},d);w.body&&typeof w.body!="string"&&(w.body=JSON.stringify(w.body));var S=wx.request({url:l,data:w.body,timeout:p._timeout,method:w.method||"GET",header:w.headers,success:function(E){(E=fk(E,Ni(Ni({},d),{url:l}))).error&&b(E),y(E)},fail:function(E){b({error:"unreachable",error_description:E.message})},complete:function(E){if(E&&E.errMsg&&p._timeout&&p._restrictedMethods.indexOf("request")!==-1&&E.errMsg==="request:fail timeout"){console.warn(p._timeoutMsg);try{S.abort()}catch{}}}})})]})})}})(f)}return r.captchaOptions&&(n.baseRequest=n.request,n.request=void 0),Ni(Ni({},r),n)}catch(p){console.error("adapter generate fail:",p)}return r},GK=function(t){return t.adapter&&t.adapter.type!=="default"?(function(e,r){var n=Ni({},e);try{if(!e?.storage&&r?.localStorage&&(n.storage=new ck({localStorage:r.localStorage,adapter:r})),!e.captchaOptions&&r?.captchaOptions&&(n.captchaOptions=r.captchaOptions),!e.baseRequest&&!e.request&&r?.reqClass){var i=new r.reqClass({timeout:1e4,restrictedMethods:["get","post","upload","download","request"]});n.baseRequest=function(o,u){var f,p,l,d,m;return wp(this,void 0,void 0,function(){var y,b,w,S;return Sp(this,function(E){switch(E.label){case 0:if(y={},b=((f=u.method)===null||f===void 0?void 0:f.toLocaleLowerCase())||"post",typeof(w=(l=(p=i?.[b])===null||p===void 0?void 0:p.bind)===null||l===void 0?void 0:l.call(p,i))!="function")throw new Error("invalid ".concat(b," request method"));E.label=1;case 1:return E.trys.push([1,3,,4]),!((d=u.headers)===null||d===void 0)&&d["content-type"]&&!(!((m=u.headers)===null||m===void 0)&&m["content-type"].includes("application/json"))||["string","undefined"].includes(typeof u.body)||(u.data=u.data||u.body,u.body=JSON.stringify(u.body)),[4,w(Ni({url:o},u))];case 2:return y=E.sent(),y=fk(y,Ni(Ni({},u),{url:o})),[3,4];case 3:throw S=E.sent(),y=Ni(Ni({},S?.data),S);case 4:if(y?.error)throw y;return[2,y]}})})}}}catch(o){console.error("user adapter generate fail:",o)}return n})(t,t.adapter):HK(t,t.adapter)},Je=function(){return Je=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Je.apply(this,arguments)},wr=function(t,e,r,n){var i,o=arguments.length,u=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(t,e,r,n);else for(var f=t.length-1;f>=0;f--)(i=t[f])&&(u=(o<3?i(u):o>3?i(e,r,u):i(e,r))||u);return o>3&&u&&Object.defineProperty(e,r,u),u},je=function(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)},ye=function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function u(l){try{p(n.next(l))}catch(d){o(d)}}function f(l){try{p(n.throw(l))}catch(d){o(d)}}function p(l){var d;l.done?i(l.value):(d=l.value,d instanceof r?d:new r(function(m){m(d)})).then(u,f)}p((n=n.apply(t,[])).next())})},ge=function(t,e){var r,n,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function f(p){return function(l){return(function(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(u=0)),u;)try{if(r=1,n&&(i=2&d[0]?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return u.label++,{value:d[1],done:!1};case 5:u.label++,n=d[1],d=[0];continue;case 7:d=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!((i=i.length>0&&i[i.length-1])||d[0]!==6&&d[0]!==2)){u=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){u.label=d[1];break}if(d[0]===6&&u.label<i[1]){u.label=i[1],i=d;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(d);break}i[2]&&u.ops.pop(),u.trys.pop();continue}d=e.call(t,u)}catch(m){d=[6,m],n=0}finally{r=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}})([p,l])}}},WK=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},UU=function(){return typeof window<"u"&&typeof document<"u"},VK=function(t){return function(e){t.fire(Ey,Je(Je({},e),{eventType:ik}))}},YK=(function(){function t(e){var r=e.cache,n=e.oauthInstance;this.cache=r,this.oauthInstance=n,this.setUserInfo()}return t.prototype.checkLocalInfo=function(){return ye(this,void 0,void 0,function(){return ge(this,function(e){return this.uid=this.getLocalUserInfo("uid"),this.gender=this.getLocalUserInfo("gender"),this.picture=this.getLocalUserInfo("picture"),this.email=this.getLocalUserInfo("email"),this.emailVerified=this.getLocalUserInfo("email_verified"),this.phoneNumber=this.getLocalUserInfo("phone_number"),this.username=this.getLocalUserInfo("username"),this.name=this.getLocalUserInfo("name"),this.birthdate=this.getLocalUserInfo("birthdate"),this.zoneinfo=this.getLocalUserInfo("zoneinfo"),this.locale=this.getLocalUserInfo("locale"),this.sub=this.getLocalUserInfo("sub"),this.createdFrom=this.getLocalUserInfo("created_from"),this.providers=this.getLocalUserInfo("providers"),[2]})})},t.prototype.checkLocalInfoAsync=function(){return ye(this,void 0,void 0,function(){var e,r,n,i;return ge(this,function(o){switch(o.label){case 0:return e=this,[4,this.getLocalUserInfoAsync("uid")];case 1:return e.uid=o.sent(),r=this,[4,this.getLocalUserInfoAsync("gender")];case 2:return r.gender=o.sent(),this.picture=this.getLocalUserInfo("picture"),n=this,[4,this.getLocalUserInfoAsync("email")];case 3:return n.email=o.sent(),this.emailVerified=this.getLocalUserInfo("email_verified"),this.phoneNumber=this.getLocalUserInfo("phone_number"),i=this,[4,this.getLocalUserInfoAsync("username")];case 4:return i.username=o.sent(),this.name=this.getLocalUserInfo("name"),this.birthdate=this.getLocalUserInfo("birthdate"),this.zoneinfo=this.getLocalUserInfo("zoneinfo"),this.locale=this.getLocalUserInfo("locale"),this.sub=this.getLocalUserInfo("sub"),this.createdFrom=this.getLocalUserInfo("created_from"),this.providers=this.getLocalUserInfo("providers"),[2]}})})},t.prototype.update=function(e){return ye(this,void 0,void 0,function(){var r;return ge(this,function(n){switch(n.label){case 0:return[4,this.oauthInstance.authApi.setUserProfile(Je({},e))];case 1:return r=n.sent(),this.setLocalUserInfo(r),[2]}})})},t.prototype.updateUserBasicInfo=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.updateUserBasicInfo(Je({},e))];case 1:return r.sent(),[4,this.refresh()];case 2:return r.sent(),[2]}})})},t.prototype.updatePassword=function(e,r){return this.oauthInstance.authApi.updatePasswordByOld({old_password:r,new_password:e})},t.prototype.updateUsername=function(e){return typeof e!="string"&&vT(Yg,"username must be a string"),this.update({username:e})},t.prototype.refresh=function(e){return ye(this,void 0,void 0,function(){var r;return ge(this,function(n){switch(n.label){case 0:return[4,this.oauthInstance.authApi.getUserInfo(e)];case 1:if((r=n.sent()).code==="INVALID_ACCESS_TOKEN")throw this.setLocalUserInfo({}),r;return this.setLocalUserInfo(r),[2,r]}})})},t.prototype.getLocalUserInfo=function(e){var r=this.cache.keys.userInfoKey,n=this.cache.getStore(r);return e?n[e]:n||{}},t.prototype.setLocalUserInfo=function(e){var r=this.cache.keys.userInfoKey;this.cache.setStore(r,e),this.setUserInfo()},t.prototype.getLocalUserInfoAsync=function(e){return ye(this,void 0,void 0,function(){var r;return ge(this,function(n){switch(n.label){case 0:return r=this.cache.keys.userInfoKey,[4,this.cache.getStoreAsync(r)];case 1:return[2,n.sent()[e]]}})})},t.prototype.setUserInfo=function(){var e=this,r=this.cache.keys.userInfoKey,n=this.cache.getStore(r);["uid","email","name","gender","picture","email_verified","phone_number","birthdate","zoneinfo","locale","sub","created_from","providers","username","created_at"].forEach(function(i){e[i]=n[i]})},wr([_r({title:"",messages:["","  1 -  User.update() ","  2 - ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[Object]),je("design:returntype",Promise)],t.prototype,"update",null),wr([_r({title:"",messages:["","  1 -  User.updatePassword() ","  3 - ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[String,String]),je("design:returntype",void 0)],t.prototype,"updatePassword",null),wr([_r({title:"",messages:["","  1 -  User.updateUsername() ","  2 - ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[String]),je("design:returntype",void 0)],t.prototype,"updateUsername",null),wr([_r({title:"",messages:["","  1 -  User.refresh() ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[Object]),je("design:returntype",Promise)],t.prototype,"refresh",null),t})(),D1=(function(){function t(e){var r=e.envId,n=e.cache,i=e.oauthInstance;r||vT(Yg,"envId is not defined"),this.cache=n,this.oauthInstance=i,this.user=new YK({cache:this.cache,oauthInstance:i})}return t.prototype.checkLocalState=function(){var e;this.oauthLoginState=(e=this.oauthInstance)===null||e===void 0?void 0:e.authApi.hasLoginStateSync(),this.user.checkLocalInfo()},t.prototype.checkLocalStateAsync=function(){var e;return ye(this,void 0,void 0,function(){return ge(this,function(r){switch(r.label){case 0:return[4,(e=this.oauthInstance)===null||e===void 0?void 0:e.authApi.getLoginState()];case 1:return r.sent(),[4,this.user.checkLocalInfoAsync()];case 2:return r.sent(),[2]}})})},t})(),KK=(function(){function t(e){this.listeners=new Map,this.hasListenerSetUp=!1,this.config=e,this.oauthInstance=e.oauthInstance,this.cache=e.cache,this.init(),this.setAccessKey()}return t.prototype.bindPhoneNumber=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.editContact(e)]})})},t.prototype.unbindProvider=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.unbindProvider(e)]})})},t.prototype.bindEmail=function(e){return this.oauthInstance.authApi.editContact(e)},t.prototype.verify=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.verify(e)]})})},t.prototype.getVerification=function(e,r){return ye(this,void 0,void 0,function(){return ge(this,function(n){return[2,this.oauthInstance.authApi.getVerification(e,r)]})})},Object.defineProperty(t.prototype,"currentUser",{get:function(){if(this.cache.mode!=="async"){var e=this.hasLoginState();return e&&e.user||null}Df(_p,"current platform's storage is asynchronous, please use getCurrentUser instead")},enumerable:!1,configurable:!0}),t.prototype.getCurrentUser=function(){return ye(this,void 0,void 0,function(){var e,r;return ge(this,function(n){switch(n.label){case 0:return[4,this.getLoginState()];case 1:return(e=n.sent())?(r=e.user.getLocalUserInfo(),[4,e.user.checkLocalInfoAsync()]):[3,3];case 2:return n.sent(),[2,Je(Je({},e.user),r)];case 3:return[2,null]}})})},t.prototype.signInAnonymouslyInWx=function(e){var r=(e===void 0?{}:e).useWxCloud;return ye(this,void 0,void 0,function(){var n,i,o=this;return ge(this,function(u){switch(u.label){case 0:if(!cu.isMatch())throw Error("wx api undefined");return n=wx.getAccountInfoSync().miniProgram,i=function(f){return ye(o,void 0,void 0,function(){var p,l;return ge(this,function(d){switch(d.label){case 0:p=void 0,l=void 0,d.label=1;case 1:return d.trys.push([1,4,,5]),[4,this.oauthInstance.authApi.grantProviderToken({provider_id:n?.appId,provider_code:f,provider_params:{provider_code_type:"open_id",appid:n?.appId}},r)];case 2:if((p=d.sent())!=null&&p.error_code||!p.provider_token)throw p;return[4,this.oauthInstance.authApi.signInAnonymously({provider_token:p.provider_token},r)];case 3:if((l=d.sent())!=null&&l.error_code)throw l;return[3,5];case 4:throw d.sent();case 5:return[2]}})})},[4,new Promise(function(f,p){wx.login({success:function(l){return ye(o,void 0,void 0,function(){var d;return ge(this,function(m){switch(m.label){case 0:return m.trys.push([0,2,,3]),[4,i(l.code)];case 1:return m.sent(),f(!0),[3,3];case 2:return d=m.sent(),p(d),[3,3];case 3:return[2]}})})},fail:function(l){var d=new Error(l?.errMsg);d.code=l?.errno,p(d)}})})];case 1:return u.sent(),[2,this.createLoginState(void 0,{asyncRefreshUser:!0})]}})})},t.prototype.bindOpenId=function(){return ye(this,void 0,void 0,function(){var e,r,n=this;return ge(this,function(i){switch(i.label){case 0:if(!cu.isMatch())throw Error("wx api undefined");return e=wx.getAccountInfoSync().miniProgram,r=function(o){return ye(n,void 0,void 0,function(){var u;return ge(this,function(f){switch(f.label){case 0:u=void 0,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,this.oauthInstance.authApi.grantProviderToken({provider_id:e?.appId,provider_code:o,provider_params:{provider_code_type:"open_id",appid:e?.appId}})];case 2:if((u=f.sent())!=null&&u.error_code||!u.provider_token)throw u;return[4,this.oauthInstance.authApi.bindWithProvider({provider_token:u.provider_token})];case 3:return f.sent(),[3,5];case 4:throw f.sent();case 5:return[2]}})})},[4,new Promise(function(o,u){wx.login({success:function(f){return ye(n,void 0,void 0,function(){var p;return ge(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,r(f.code)];case 1:return l.sent(),o(!0),[3,3];case 2:return p=l.sent(),u(p),[3,3];case 3:return[2]}})})},fail:function(f){var p=new Error(f?.errMsg);p.code=f?.errno,u(p)}})})];case 1:return i.sent(),[2]}})})},t.prototype.signInWithUnionId=function(){return ye(this,void 0,void 0,function(){var e=this;return ge(this,function(r){switch(r.label){case 0:if(!cu.isMatch())throw Error("wx api undefined");r.label=1;case 1:return r.trys.push([1,3,,4]),[4,new Promise(function(n,i){var o=wx.getAccountInfoSync().miniProgram;wx.login({success:function(u){return ye(e,void 0,void 0,function(){var f,p,l,d,m;return ge(this,function(y){switch(y.label){case 0:f=o?.appId,y.label=1;case 1:return y.trys.push([1,4,,5]),[4,this.oauthInstance.authApi.grantProviderToken({provider_code:u.code,provider_id:f,provider_params:{provider_code_type:"union_id",appid:o?.appId}})];case 2:return p=y.sent(),(l=p.provider_token)?[4,this.oauthInstance.authApi.signInWithProvider({provider_id:f,provider_token:l})]:(i(p),[2]);case 3:return(d=y.sent())!=null&&d.error_code?(i(d),[2]):(n(!0),[3,5]);case 4:return m=y.sent(),i(m),[3,5];case 5:return[2]}})})},fail:function(u){var f=new Error(u?.errMsg);f.code=u?.errno,i(f)}})})];case 2:return r.sent(),[3,4];case 3:throw r.sent();case 4:return[2,this.createLoginState()]}})})},t.prototype.signInWithSms=function(e){var r=e.verificationInfo,n=r===void 0?{verification_id:"",is_user:!1}:r,i=e.verificationCode,o=i===void 0?"":i,u=e.phoneNum,f=u===void 0?"":u,p=e.bindInfo,l=p===void 0?void 0:p;return ye(this,void 0,void 0,function(){return ge(this,function(d){try{return[2,this.signInWithUsername({verificationInfo:n,verificationCode:o,bindInfo:l,username:f,loginType:"sms"})]}catch(m){throw m}return[2]})})},t.prototype.signInWithEmail=function(e){var r=e.verificationInfo,n=r===void 0?{verification_id:"",is_user:!1}:r,i=e.verificationCode,o=i===void 0?"":i,u=e.bindInfo,f=u===void 0?void 0:u,p=e.email,l=p===void 0?"":p;return ye(this,void 0,void 0,function(){return ge(this,function(d){try{return[2,this.signInWithUsername({verificationInfo:n,verificationCode:o,bindInfo:f,username:l,loginType:"email"})]}catch(m){throw m}return[2]})})},t.prototype.setCustomSignFunc=function(e){this.oauthInstance.authApi.setCustomSignFunc(e)},t.prototype.signIn=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.signIn(e)];case 1:return r.sent(),[2,this.createLoginState(e)]}})})},t.prototype.setPassword=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.setPassword(e)]})})},t.prototype.isUsernameRegistered=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){switch(r.label){case 0:return typeof e!="string"&&vT(Yg,"username must be a string"),[4,this.oauthInstance.authApi.checkIfUserExist({username:e})];case 1:return[2,r.sent().exist]}})})},t.prototype.hasLoginState=function(){var e;if(this.cache.mode!=="async")return!((e=this.oauthInstance)===null||e===void 0)&&e.authApi.hasLoginStateSync()?new D1({envId:this.config.env,cache:this.cache,oauthInstance:this.oauthInstance}):null;Df(_p,"current platform's storage is asynchronous, please use getLoginState instead")},t.prototype.getLoginState=function(){return ye(this,void 0,void 0,function(){var e;return ge(this,function(r){switch(r.label){case 0:e=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.oauthInstance.authApi.getLoginState()];case 2:return e=r.sent(),[3,4];case 3:return r.sent(),[2,null];case 4:return e?[2,new D1({envId:this.config.env,cache:this.cache,oauthInstance:this.oauthInstance})]:[2,null]}})})},t.prototype.getUserInfo=function(){return ye(this,void 0,void 0,function(){return ge(this,function(e){return[2,this.getCurrentUser()]})})},t.prototype.getWedaUserInfo=function(){return ye(this,void 0,void 0,function(){return ge(this,function(e){return[2,this.oauthInstance.authApi.getWedaUserInfo()]})})},t.prototype.updateUserBasicInfo=function(e){return ye(this,void 0,void 0,function(){var r;return ge(this,function(n){switch(n.label){case 0:return[4,this.getLoginState()];case 1:return(r=n.sent())?[4,r.user.updateUserBasicInfo(e)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.getAuthHeader=function(){return console.error("Auth.getAuthHeader API "),{}},t.prototype.bindWithProvider=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.bindWithProvider(e)]})})},t.prototype.queryUser=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.queryUserProfile(e)]})})},t.prototype.getAccessToken=function(){return ye(this,void 0,void 0,function(){return ge(this,function(e){switch(e.label){case 0:return[4,this.oauthInstance.oauth2client.getAccessToken()];case 1:return[2,{accessToken:e.sent(),env:this.config.env}]}})})},t.prototype.grantProviderToken=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.grantProviderToken(e)]})})},t.prototype.patchProviderToken=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.patchProviderToken(e)]})})},t.prototype.signInWithProvider=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.signInWithProvider(e)];case 1:return r.sent(),[2,this.createLoginState(e)]}})})},t.prototype.signInWithWechat=function(e){return e===void 0&&(e={}),ye(this,void 0,void 0,function(){return ge(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.signInWithWechat(e)];case 1:return r.sent(),[2,this.createLoginState(e)]}})})},t.prototype.grantToken=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.grantToken(e)];case 1:return r.sent(),[2,this.createLoginState()]}})})},t.prototype.genProviderRedirectUri=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.genProviderRedirectUri(e)]})})},t.prototype.resetPassword=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.resetPassword(e)]})})},t.prototype.deviceAuthorize=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.deviceAuthorize(e)]})})},t.prototype.sudo=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.sudo(e)]})})},t.prototype.deleteMe=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.deleteMe(e)]})})},t.prototype.getProviders=function(){return ye(this,void 0,void 0,function(){return ge(this,function(e){return[2,this.oauthInstance.authApi.getProviders()]})})},t.prototype.loginScope=function(){return ye(this,void 0,void 0,function(){return ge(this,function(e){return[2,this.oauthInstance.authApi.loginScope()]})})},t.prototype.loginGroups=function(){return ye(this,void 0,void 0,function(){return ge(this,function(e){return[2,this.oauthInstance.authApi.loginGroups()]})})},t.prototype.onLoginStateChanged=function(e){var r;return ye(this,void 0,void 0,function(){var n,i=this;return ge(this,function(o){switch(o.label){case 0:return(r=this.config.eventBus)===null||r===void 0||r.on(Ey,function(u){return ye(i,void 0,void 0,function(){var f,p,l;return ge(this,function(d){switch(d.label){case 0:return((l=u?.data)===null||l===void 0?void 0:l.eventType)===ik?[3,2]:[4,this.getLoginState()];case 1:return p=d.sent(),[3,3];case 2:p={},d.label=3;case 3:return f=p,e.call(this,Je(Je({},u),f)),[2]}})})}),[4,this.getLoginState()];case 1:return n=o.sent(),e.call(this,n),[2]}})})},t.prototype.refreshTokenForce=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.refreshTokenForce(e)]})})},t.prototype.getCredentials=function(){return ye(this,void 0,void 0,function(){return ge(this,function(e){return[2,this.oauthInstance.authApi.getCredentials()]})})},t.prototype.setCredentials=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.oauth2client.setCredentials(e)];case 1:return r.sent(),[2]}})})},t.prototype.getProviderSubType=function(){return ye(this,void 0,void 0,function(){return ge(this,function(e){return[2,this.oauthInstance.authApi.getProviderSubType()]})})},t.prototype.createCaptchaData=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.createCaptchaData(e)]})})},t.prototype.verifyCaptchaData=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.verifyCaptchaData(e)]})})},t.prototype.getMiniProgramQrCode=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.getMiniProgramCode(e)]})})},t.prototype.getMiniProgramQrCodeStatus=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.getMiniProgramQrCodeStatus(e)]})})},t.prototype.modifyPassword=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.modifyPassword(e)]})})},t.prototype.modifyPasswordWithoutLogin=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.modifyPasswordWithoutLogin(e)]})})},t.prototype.getUserBehaviorLog=function(e){return ye(this,void 0,void 0,function(){return ge(this,function(r){return[2,this.oauthInstance.authApi.getUserBehaviorLog(e)]})})},t.prototype.signInWithUsername=function(e){var r=e.verificationInfo,n=r===void 0?{verification_id:"",is_user:!1}:r,i=e.verificationCode,o=i===void 0?"":i,u=e.username,f=u===void 0?"":u,p=e.bindInfo,l=p===void 0?void 0:p,d=e.loginType,m=d===void 0?"":d;return ye(this,void 0,void 0,function(){var y,b,w,S,E,R,O;return ge(this,function(C){switch(C.label){case 0:return C.trys.push([0,8,,9]),[4,this.oauthInstance.authApi.verify({verification_id:n.verification_id,verification_code:o})];case 1:if((y=C.sent())!=null&&y.error_code)throw y;return b=y.verification_token,w=/^\+\d{1,3}\s+/.test(f)?f:"+86 ".concat(f),S={phone_number:w},m==="email"&&(S={email:w=f}),n.is_user?[4,this.oauthInstance.authApi.signIn({username:w,verification_token:b})]:[3,5];case 2:if((E=C.sent())!=null&&E.error_code)throw E;return l?[4,this.oauthInstance.authApi.bindWithProvider({provider_token:l?.providerToken})]:[3,4];case 3:if((R=C.sent())!=null&&R.error_code)throw R;C.label=4;case 4:return[3,7];case 5:return[4,this.oauthInstance.authApi.signUp(Je(Je({},S),{verification_token:b,provider_token:l?.providerId}))];case 6:if((O=C.sent())!=null&&O.error_code)throw O;C.label=7;case 7:return[2,this.createLoginState()];case 8:throw C.sent();case 9:return[2]}})})},t.prototype.createLoginState=function(e,r){var n,i;return ye(this,void 0,void 0,function(){var o;return ge(this,function(u){switch(u.label){case 0:return[4,(o=new D1({envId:this.config.env,cache:this.cache,oauthInstance:this.oauthInstance})).checkLocalStateAsync()];case 1:return u.sent(),r?.userInfo?(o.user.setLocalUserInfo(r.userInfo),[3,5]):[3,2];case 2:return r?.asyncRefreshUser?(o.user.refresh(e),[3,5]):[3,3];case 3:return[4,o.user.refresh(e)];case 4:u.sent(),u.label=5;case 5:return(n=this.config.eventBus)===null||n===void 0||n.fire(Ey,{eventType:cK}),(i=this.config.eventBus)===null||i===void 0||i.fire(co,{event:ME}),[2,o]}})})},t.prototype.setAccessKey=function(){return ye(this,void 0,void 0,function(){return ge(this,function(e){if(this.config.accessKey)try{this.oauthInstance.oauth2client.setAccessKeyCredentials({access_token:this.config.accessKey,token_type:"Bearer",scope:"accessKey",expires_at:new Date(+new Date+ +new Date),expires_in:+new Date+ +new Date})}catch(r){console.warn("accessKey error: ",r)}return[2]})})},t.prototype.signInAnonymously=function(e){return ye(this,void 0,void 0,function(){var r,n,i,o;return ge(this,function(u){switch(u.label){case 0:return u.trys.push([0,4,,5]),[4,this.oauthInstance.authApi.signInAnonymously(e)];case 1:return u.sent(),[4,this.createLoginState()];case 2:return r=u.sent(),[4,this.getSession()];case 3:return n=u.sent().data,i=(n===void 0?{}:n).session,[2,Je(Je({},r),{data:{user:i.user,session:i},error:null})];case 4:return o=u.sent(),[2,{data:{},error:new nt(o)}];case 5:return[2]}})})},t.prototype.signUp=function(e){return ye(this,void 0,void 0,function(){var r,n,i=this;return ge(this,function(o){switch(o.label){case 0:return e.phone_number||e.verification_code||e.verification_token||e.provider_token?[4,this.oauthInstance.authApi.signUp(e)]:[3,2];case 1:return o.sent(),[2,this.createLoginState()];case 2:return o.trys.push([2,4,,5]),this.validateAtLeastOne(e,[["email"],["phone"]],"You must provide either an email or phone number"),[4,this.getVerification(e.email?{email:e.email}:{phone_number:this.formatPhone(e.phone)})];case 3:return r=o.sent(),[2,{data:{verifyOtp:function(u){var f=u.token,p=u.messageId,l=p===void 0?r.verification_id:p;return ye(i,void 0,void 0,function(){var d,m,y,b,w;return ge(this,function(S){switch(S.label){case 0:return S.trys.push([0,8,,9]),[4,this.verify({verification_id:l||r.verification_id,verification_code:f})];case 1:return d=S.sent(),r.is_user?[4,this.signIn({username:e.email||this.formatPhone(e.phone),verification_token:d.verification_token})]:[3,3];case 2:return S.sent(),[3,6];case 3:return delete(m=JSON.parse(JSON.stringify(e))).email,delete m.phone,[4,this.oauthInstance.authApi.signUp(Je(Je(Je({},m),e.email?{email:e.email}:{phone_number:this.formatPhone(e.phone)}),{verification_token:d.verification_token,verification_code:f}))];case 4:return S.sent(),[4,this.createLoginState()];case 5:S.sent(),S.label=6;case 6:return[4,this.getSession()];case 7:return y=S.sent().data,[2,{data:{user:(b=(y===void 0?{}:y).session).user,session:b},error:null}];case 8:return w=S.sent(),[2,{data:{},error:new nt(w)}];case 9:return[2]}})})}},error:null}];case 4:return n=o.sent(),[2,{data:{},error:new nt(n)}];case 5:return[2]}})})},t.prototype.signOut=function(e){var r,n;return ye(this,void 0,void 0,function(){var i,o,u;return ge(this,function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),i=this.cache.keys.userInfoKey,[4,this.oauthInstance.authApi.signOut(e)];case 1:return o=f.sent(),[4,this.cache.removeStoreAsync(i)];case 2:return f.sent(),this.setAccessKey(),(r=this.config.eventBus)===null||r===void 0||r.fire(Ey,{eventType:lK}),(n=this.config.eventBus)===null||n===void 0||n.fire(co,{event:fK}),[2,Je(Je({},o),{data:{},error:null})];case 3:return u=f.sent(),[2,{data:{},error:new nt(u)}];case 4:return[2]}})})},t.prototype.onAuthStateChange=function(e){var r=this;this.hasListenerSetUp||(this.setupListeners(),this.hasListenerSetUp=!0);var n=Math.random().toString(36);return this.listeners.has(n)||this.listeners.set(n,new Set),this.listeners.get(n).add(e),{data:{subscription:{id:n,callback:e,unsubscribe:function(){var i=r.listeners.get(n);i&&(i.delete(e),i.size===0&&r.listeners.delete(n))}}}}},t.prototype.signInWithPassword=function(e){return ye(this,void 0,void 0,function(){var r,n,i;return ge(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),this.validateAtLeastOne(e,[["username"],["email"],["phone"]],"You must provide either username, email, or phone"),this.validateParams(e,{password:{required:!0,message:"Password is required"}}),[4,this.signIn(Je({username:e.username||e.email||this.formatPhone(e.phone),password:e.password},e.is_encrypt?{isEncrypt:!0,version:"v2"}:{}))];case 1:return o.sent(),[4,this.getSession()];case 2:return r=o.sent().data,[2,{data:{user:(n=(r===void 0?{}:r).session).user,session:n},error:null}];case 3:return i=o.sent(),[2,{data:{},error:new nt(i)}];case 4:return[2]}})})},t.prototype.signInWithIdToken=function(e){return ye(this,void 0,void 0,function(){var r,n,i;return ge(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),this.validateParams(e,{token:{required:!0,message:"Token is required"}}),[4,this.signInWithProvider({provider_token:e.token})];case 1:return o.sent(),[4,this.getSession()];case 2:return r=o.sent().data,[2,{data:{user:(n=(r===void 0?{}:r).session).user,session:n},error:null}];case 3:return i=o.sent(),[2,{data:{},error:new nt(i)}];case 4:return[2]}})})},t.prototype.signInWithOtp=function(e){return ye(this,void 0,void 0,function(){var r,n,i=this;return ge(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.validateAtLeastOne(e,[["email"],["phone"]],"You must provide either an email or phone number"),[4,this.getVerification(e.email?{email:e.email}:{phone_number:this.formatPhone(e.phone)})];case 1:return r=o.sent(),[2,{data:{user:null,session:null,verifyOtp:function(u){var f=u.token,p=u.messageId,l=p===void 0?r.verification_id:p;return ye(i,void 0,void 0,function(){return ge(this,function(d){return[2,this.verifyOtp({email:e.email,phone:e.phone,token:f,messageId:l})]})})}},error:null}];case 2:return n=o.sent(),[2,{data:{},error:new nt(n)}];case 3:return[2]}})})},t.prototype.verifyOAuth=function(e){return ye(this,void 0,void 0,function(){var r,n,i,o,u,f,p,l,d;return ge(this,function(m){switch(m.label){case 0:r={},m.label=1;case 1:return m.trys.push([1,7,,8]),n=e?.code||R1("code"),i=e?.state||R1("state"),n?i?(o=(function(y){try{return JSON.parse(sessionStorage.getItem(y))}catch(b){return console.error("Failed to get browser session:",b),null}})(i),r.type=o?.type,(u=e?.provider||o?.provider||R1("provider"))?[4,this.grantProviderToken({provider_id:u,provider_redirect_uri:location.origin+location.pathname,provider_code:n})]:[2,{data:r,error:new nt({message:"Provider is required"})}]):[2,{data:{},error:new nt({message:"State is required"})}]:[2,{data:{},error:new nt({message:"Code is required"})}];case 2:return f=m.sent().provider_token,p=void 0,o.type!==Kf?[3,4]:[4,this.oauthInstance.authApi.toBindIdentity({provider_token:f,provider:u,fireEvent:!0})];case 3:return p=m.sent(),[3,6];case 4:return[4,this.signInWithIdToken({token:f})];case 5:(p=m.sent()).data=Je(Je({},r),p.data),m.label=6;case 6:return(l=new URLSearchParams(location?.search)).delete("code"),l.delete("state"),(function(y,b){if(y!==void 0){var w=new URL(window.location.href);w.search=y,w.hash=b||w.hash,window.history.replaceState({},"",w.href)}})(o?.search===void 0?"?".concat(l.toString()):o?.search,o?.hash||location.hash),(function(y){try{return sessionStorage.removeItem(y),!0}catch(b){return console.error("Failed to remove browser session:",b),null}})(i),[2,p];case 7:return d=m.sent(),[2,{data:r,error:new nt(d)}];case 8:return[2]}})})},t.prototype.signInWithOAuth=function(e){var r,n,i,o,u;return ye(this,void 0,void 0,function(){var f,p,l,d,m,y,b,w,S;return ge(this,function(E){switch(E.label){case 0:return E.trys.push([0,2,,3]),this.validateParams(e,{provider:{required:!0,message:"Provider is required"}}),f=((r=e.options)===null||r===void 0?void 0:r.redirectTo)||location.href,p=new URL(f),l=p.origin+p.pathname,d=((n=e.options)===null||n===void 0?void 0:n.state)||"prd-".concat(e.provider,"-").concat(Math.random().toString(36).slice(2)),[4,this.genProviderRedirectUri({provider_id:e.provider,provider_redirect_uri:l,state:d})];case 1:return m=E.sent().uri,y=decodeURIComponent(m),b=y,!((i=e.options)===null||i===void 0)&&i.queryParams&&(w=new URL(y),Object.entries(e.options.queryParams).forEach(function(R){var O=R[0],C=R[1];w.searchParams.set(O,C)}),b=w.toString()),(function(R,O){try{sessionStorage.setItem(R,JSON.stringify(O))}catch(C){console.error("Failed to save to browser session:",C)}})(d,{provider:e.provider,search:p.search,hash:p.hash,type:((o=e.options)===null||o===void 0?void 0:o.type)||pT}),UU()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(b),[2,{data:{url:b,provider:e.provider},error:null}];case 2:return S=E.sent(),[2,{data:{},error:new nt(S)}];case 3:return[2]}})})},t.prototype.getClaims=function(){return ye(this,void 0,void 0,function(){var e,r,n;return ge(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getAccessToken()];case 1:return e=i.sent().accessToken,r=(function(o){if(typeof o!="string")throw new Error("Invalid token specified");try{const u=o.split(".").map((f,p)=>p===2?f:JSON.parse(vK(f)));return{claims:u[1],header:u[0],signature:u[2]}}catch(u){throw new Error("Invalid token specified: ".concat(u)?u.message:"")}})(e),[2,{data:r,error:null}];case 2:return n=i.sent(),[2,{data:{},error:new nt(n)}];case 3:return[2]}})})},t.prototype.resetPasswordForEmail=function(e,r){return ye(this,void 0,void 0,function(){var n,i,o,u,f,p,l=this;return ge(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),this.validateParams({emailOrPhone:e},{emailOrPhone:{required:!0,message:"Email or phone is required"}}),n=(r||{}).redirectTo,i=e.includes("@"),o=void 0,i?o={email:e}:(u=this.formatPhone(e),o={phone_number:u}),[4,this.getVerification(o)];case 1:return f=d.sent(),[2,{data:{updateUser:function(m){return ye(l,void 0,void 0,function(){var y,b,w,S;return ge(this,function(E){switch(E.label){case 0:this.validateParams(m,{nonce:{required:!0,message:"Nonce is required"},password:{required:!0,message:"Password is required"}}),E.label=1;case 1:return E.trys.push([1,5,,6]),[4,this.verify({verification_id:f.verification_id,verification_code:m.nonce})];case 2:return y=E.sent(),[4,this.oauthInstance.authApi.resetPassword({email:i?e:void 0,phone_number:i?void 0:e,new_password:m.password,verification_token:y.verification_token})];case 3:return E.sent(),(S=this.config.eventBus)===null||S===void 0||S.fire(co,{event:hK}),[4,this.signInWithPassword({email:i?e:void 0,phone:i?void 0:e,password:m.password})];case 4:return b=E.sent(),n&&UU()&&window.location.assign(n),[2,b];case 5:return w=E.sent(),[2,{data:{},error:new nt(w)}];case 6:return[2]}})})}},error:null}];case 2:return p=d.sent(),[2,{data:{},error:new nt(p)}];case 3:return[2]}})})},t.prototype.resetPasswordForOld=function(e){return ye(this,void 0,void 0,function(){var r,n,i;return ge(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.oauthInstance.authApi.updatePasswordByOld({old_password:e.old_password,new_password:e.new_password})];case 1:return o.sent(),[4,this.getSession()];case 2:return r=o.sent().data,[2,{data:{user:(n=(r===void 0?{}:r).session).user,session:n},error:null}];case 3:return i=o.sent(),[2,{data:{},error:new nt(i)}];case 4:return[2]}})})},t.prototype.verifyOtp=function(e){return ye(this,void 0,void 0,function(){var r,n,i,o;return ge(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),r=e.type,this.validateParams(e,{token:{required:!0,message:"Token is required"},messageId:{required:!0,message:"messageId is required"}}),["phone_change","email_change"].includes(r)?[4,this.verify({verification_id:e.messageId,verification_code:e.token})]:[3,2];case 1:return u.sent(),[3,4];case 2:return[4,this.signInWithUsername({verificationInfo:{verification_id:e.messageId,is_user:!0},verificationCode:e.token,username:e.email||this.formatPhone(e.phone)||"",loginType:e.email?"email":"phone"})];case 3:u.sent(),u.label=4;case 4:return[4,this.getSession()];case 5:return n=u.sent().data,[2,{data:{user:(i=(n===void 0?{}:n).session).user,session:i},error:null}];case 6:return o=u.sent(),[2,{data:{},error:new nt(o)}];case 7:return[2]}})})},t.prototype.getSession=function(){return ye(this,void 0,void 0,function(){var e,r,n,i;return ge(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.oauthInstance.oauth2client.getCredentials()];case 1:return(e=o.sent())&&e.scope!=="accessKey"?[4,this.getUser()]:[2,{data:{session:null},error:null}];case 2:return r=o.sent().data,n=(r===void 0?{}:r).user,[2,{data:{session:Je(Je({},e),{user:n}),user:n},error:null}];case 3:return i=o.sent(),[2,{data:{},error:new nt(i)}];case 4:return[2]}})})},t.prototype.refreshSession=function(e){return ye(this,void 0,void 0,function(){var r,n,i,o,u;return ge(this,function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),[4,this.oauthInstance.oauth2client.localCredentials.getCredentials()];case 1:return(r=f.sent()).refresh_token=e||r.refresh_token,[4,this.oauthInstance.oauth2client.refreshToken(r)];case 2:return n=f.sent(),[4,this.getUser()];case 3:return i=f.sent().data,[2,{data:{user:o=(i===void 0?{}:i).user,session:Je(Je({},n),{user:o})},error:null}];case 4:return u=f.sent(),[2,{data:{},error:new nt(u)}];case 5:return[2]}})})},t.prototype.getUser=function(){return ye(this,void 0,void 0,function(){var e,r;return ge(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this.convertToUser,[4,this.getUserInfo()];case 1:return[2,{data:{user:e.apply(this,[n.sent()])},error:null}];case 2:return r=n.sent(),[2,{data:{},error:new nt(r)}];case 3:return[2]}})})},t.prototype.refreshUser=function(){return ye(this,void 0,void 0,function(){var e,r,n;return ge(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,this.currentUser.refresh()];case 1:return i.sent(),[4,this.getSession()];case 2:return e=i.sent().data,[2,{data:{user:(r=(e===void 0?{}:e).session).user,session:r},error:null}];case 3:return n=i.sent(),[2,{data:{},error:new nt(n)}];case 4:return[2]}})})},t.prototype.updateUser=function(e){var r;return ye(this,void 0,void 0,function(){var n,i,o,u,f,p,l,d,m,y,b,w,S=this;return ge(this,function(E){switch(E.label){case 0:if(E.trys.push([0,8,,9]),!Object.keys(e).some(function(R){return e[R]!==void 0&&e[R]!==null&&e[R]!==""}))throw new nt({message:"At least one field must be provided for update"});return n=e.email,i=e.phone,o=WK(e,["email","phone"]),f=i!==void 0,p={},(u=n!==void 0)||f?(l=void 0,u?(l={email:e.email},d="email_change"):(m=this.formatPhone(e.phone),l={phone_number:m},d="phone_change"),[4,this.getVerification(l)]):[3,4];case 1:return y=E.sent(),Object.keys(o).length>0?[4,this.updateUserBasicInfo(o)]:[3,3];case 2:E.sent(),E.label=3;case 3:return p={messageId:y.verification_id,verifyOtp:function(R){return ye(S,void 0,void 0,function(){var O,C,I;return ge(this,function(P){switch(P.label){case 0:return P.trys.push([0,11,,12]),R.email&&e.email===R.email?[4,this.verifyOtp({type:"email_change",email:e.email,token:R.token,messageId:y.verification_id})]:[3,3];case 1:return P.sent(),[4,this.updateUserBasicInfo({email:e.email})];case 2:return P.sent(),[3,9];case 3:return R.phone&&e.phone===R.phone?[4,this.verifyOtp({type:"phone_change",phone:e.phone,token:R.token,messageId:y.verification_id})]:[3,6];case 4:return P.sent(),[4,this.updateUserBasicInfo({phone:this.formatPhone(e.phone)})];case 5:return P.sent(),[3,9];case 6:return[4,this.verifyOtp({type:d,email:u?e.email:void 0,phone:u?void 0:e.phone,token:R.token,messageId:y.verification_id})];case 7:return P.sent(),[4,this.updateUserBasicInfo(e)];case 8:P.sent(),P.label=9;case 9:return[4,this.getUser()];case 10:return O=P.sent().data.user,(I=this.config.eventBus)===null||I===void 0||I.fire(co,{event:mU}),[2,{data:{user:O},error:null}];case 11:return C=P.sent(),[2,{data:{},error:new nt(C)}];case 12:return[2]}})})}},[3,6];case 4:return[4,this.updateUserBasicInfo(e)];case 5:E.sent(),E.label=6;case 6:return[4,this.getUser()];case 7:return b=E.sent().data.user,(r=this.config.eventBus)===null||r===void 0||r.fire(co,{event:mU}),[2,{data:Je({user:b},p),error:null}];case 8:return w=E.sent(),[2,{data:{},error:new nt(w)}];case 9:return[2]}})})},t.prototype.getUserIdentities=function(){var e;return ye(this,void 0,void 0,function(){var r,n;return ge(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.oauthInstance.authApi.getProviders()];case 1:return r=i.sent(),[2,{data:{identities:(e=r?.data)===null||e===void 0?void 0:e.filter(function(o){return!!o.bind})},error:null}];case 2:return n=i.sent(),[2,{data:{},error:new nt(n)}];case 3:return[2]}})})},t.prototype.linkIdentity=function(e){return ye(this,void 0,void 0,function(){var r;return ge(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.validateParams(e,{provider:{required:!0,message:"Provider is required"}}),[4,this.signInWithOAuth({provider:e.provider,options:{type:Kf}})];case 1:return n.sent(),[2,{data:{provider:e.provider},error:null}];case 2:return r=n.sent(),[2,{data:{},error:new nt(r)}];case 3:return[2]}})})},t.prototype.unlinkIdentity=function(e){return ye(this,void 0,void 0,function(){var r;return ge(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.validateParams(e,{provider:{required:!0,message:"Provider is required"}}),[4,this.oauthInstance.authApi.unbindProvider({provider_id:e.provider})];case 1:return n.sent(),[2,{data:{},error:null}];case 2:return r=n.sent(),[2,{data:{},error:new nt(r)}];case 3:return[2]}})})},t.prototype.reauthenticate=function(){return ye(this,void 0,void 0,function(){var e,r,n,i,o=this;return ge(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),[4,this.getUser()];case 1:return e=u.sent().data.user,this.validateAtLeastOne(e,[["email","phone"]],"You must provide either an email or phone number"),r=e.email?{email:e.email}:{phone_number:this.formatPhone(e.phone)},[4,this.getVerification(r)];case 2:return n=u.sent(),[2,{data:{updateUser:function(f){return ye(o,void 0,void 0,function(){var p,l,d,m,y;return ge(this,function(b){switch(b.label){case 0:this.validateParams(f,{nonce:{required:!0,message:"Nonce is required"}}),b.label=1;case 1:return b.trys.push([1,9,,10]),f.password?[4,this.verify({verification_id:n.verification_id,verification_code:f.nonce})]:[3,5];case 2:return p=b.sent(),[4,this.oauthInstance.authApi.sudo({verification_token:p.verification_token})];case 3:return l=b.sent(),[4,this.oauthInstance.authApi.setPassword({new_password:f.password,sudo_token:l.sudo_token})];case 4:return b.sent(),[3,7];case 5:return[4,this.signInWithUsername(Je(Je({verificationInfo:n,verificationCode:f.nonce},r),{loginType:r.email?"email":"phone"}))];case 6:b.sent(),b.label=7;case 7:return[4,this.getSession()];case 8:return d=b.sent().data,[2,{data:{user:(m=(d===void 0?{}:d).session).user,session:m},error:null}];case 9:return y=b.sent(),[2,{data:{},error:new nt(y)}];case 10:return[2]}})})}},error:null}];case 3:return i=u.sent(),[2,{data:{},error:new nt(i)}];case 4:return[2]}})})},t.prototype.resend=function(e){return ye(this,void 0,void 0,function(){var r,n,i;return ge(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.validateAtLeastOne(e,[["email"],["phone"]],"You must provide either an email or phone number"),r=e.type==="signup"?"ANY":"USER",n={target:r},"email"in e&&(n.email=e.email),"phone"in e&&(n.phone_number=this.formatPhone(e.phone)),[4,this.oauthInstance.authApi.getVerification(n)];case 1:return[2,{data:{messageId:o.sent().verification_id},error:null}];case 2:return i=o.sent(),[2,{data:{},error:new nt(i)}];case 3:return[2]}})})},t.prototype.setSession=function(e){var r;return ye(this,void 0,void 0,function(){var n,i,o;return ge(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),this.validateParams(e,{access_token:{required:!0,message:"Access token is required"},refresh_token:{required:!0,message:"Refresh token is required"}}),[4,this.oauthInstance.oauth2client.refreshToken(e,{throwError:!0})];case 1:return u.sent(),[4,this.getSession()];case 2:return n=u.sent().data,i=(n===void 0?{}:n).session,(r=this.config.eventBus)===null||r===void 0||r.fire(co,{event:ME}),[2,{data:{user:i.user,session:i},error:null}];case 3:return o=u.sent(),[2,{data:{},error:new nt(o)}];case 4:return[2]}})})},t.prototype.exchangeCodeForSession=function(){return ye(this,void 0,void 0,function(){return ge(this,function(e){return[2]})})},t.prototype.deleteUser=function(e){return ye(this,void 0,void 0,function(){var r,n;return ge(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),this.validateParams(e,{password:{required:!0,message:"Password is required"}}),[4,this.oauthInstance.authApi.sudo(e)];case 1:return r=i.sent().sudo_token,[4,this.oauthInstance.authApi.deleteMe({sudo_token:r})];case 2:return i.sent(),[2,{data:{},error:null}];case 3:return n=i.sent(),[2,{data:{},error:new nt(n)}];case 4:return[2]}})})},t.prototype.toDefaultLoginPage=function(e){return e===void 0&&(e={}),ye(this,void 0,void 0,function(){var r,n,i,o,u;return ge(this,function(f){try{return r=e.config_version||"env",n=Object.keys(e.query||{}).map(function(p){return"".concat(p,"=").concat(e.query[p])}).join("&"),cu.isMatch()?wx.navigateTo({url:"/packages/$wd_system/pages/login/index".concat(n?"?".concat(n):"")}):(i=e.redirect_uri||window.location.href,o=new URL(i),u="".concat(o.origin,"/__auth/?app_id=").concat(e.app_id||"","&env_id=").concat(this.config.env,"&client_id=").concat(this.config.clientId||this.config.env,"&config_version=").concat(r,"&redirect_uri=").concat(encodeURIComponent(i)).concat(n?"&".concat(n):""),window.location.href=u),[2,{data:{},error:null}]}catch(p){return[2,{data:{},error:new nt(p)}]}return[2]})})},t.prototype.signInWithCustomTicket=function(e){return ye(this,void 0,void 0,function(){var r,n,i,o;return ge(this,function(u){switch(u.label){case 0:e&&this.setCustomSignFunc(e),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,this.oauthInstance.authApi.signInWithCustomTicket()];case 2:return u.sent(),[4,this.createLoginState()];case 3:return r=u.sent(),[4,this.getSession()];case 4:return n=u.sent().data,i=(n===void 0?{}:n).session,[2,Je(Je({},r),{data:{user:i.user,session:i},error:null})];case 5:return o=u.sent(),[2,{data:{},error:new nt(o)}];case 6:return[2]}})})},t.prototype.signInWithOpenId=function(e){var r=(e===void 0?{}:e).useWxCloud,n=r===void 0||r;return ye(this,void 0,void 0,function(){var i,o,u,f,p,l,d=this;return ge(this,function(m){switch(m.label){case 0:if(!cu.isMatch())throw Error("wx api undefined");i=wx.getAccountInfoSync().miniProgram,o=function(y){return ye(d,void 0,void 0,function(){var b,w;return ge(this,function(S){switch(S.label){case 0:b=void 0,w=void 0,S.label=1;case 1:return S.trys.push([1,4,,5]),[4,this.oauthInstance.authApi.grantProviderToken({provider_id:i?.appId,provider_code:y,provider_params:{provider_code_type:"open_id",appid:i?.appId}},n)];case 2:if((b=S.sent())!=null&&b.error_code||!b.provider_token)throw b;return[4,this.oauthInstance.authApi.signInWithProvider({provider_token:b.provider_token},n)];case 3:if((w=S.sent())!=null&&w.error_code)throw w;return[3,5];case 4:throw S.sent();case 5:return[4,this.oauthInstance.oauth2client.setCredentials(w)];case 6:return S.sent(),[2]}})})},m.label=1;case 1:return m.trys.push([1,5,,6]),[4,new Promise(function(y,b){wx.login({success:function(w){return ye(d,void 0,void 0,function(){var S;return ge(this,function(E){switch(E.label){case 0:return E.trys.push([0,2,,3]),[4,o(w.code)];case 1:return E.sent(),y(!0),[3,3];case 2:return S=E.sent(),b(S),[3,3];case 3:return[2]}})})},fail:function(w){var S=new Error(w?.errMsg);S.code=w?.errno,b(S)}})})];case 2:return m.sent(),[4,this.createLoginState()];case 3:return u=m.sent(),[4,this.getSession()];case 4:return f=m.sent().data,p=(f===void 0?{}:f).session,[2,Je(Je({},u),{data:{user:p.user,session:p},error:null})];case 5:return l=m.sent(),[2,{data:{},error:new nt(l)}];case 6:return[2]}})})},t.prototype.signInWithPhoneAuth=function(e){var r=e.phoneCode,n=r===void 0?"":r;return ye(this,void 0,void 0,function(){var i,o,u,f,p,l,d,m,y;return ge(this,function(b){switch(b.label){case 0:return cu.isMatch()?(i=wx.getAccountInfoSync().miniProgram,o={provider_params:{provider_code_type:"phone"},provider_id:i.appId},[4,wx.login()]):[2,{data:{},error:new nt({message:"wx api undefined"})}];case 1:u=b.sent().code,o.provider_code=u,b.label=2;case 2:return b.trys.push([2,6,,7]),[4,this.oauthInstance.authApi.grantProviderToken(o)];case 3:if((f=b.sent()).error_code)throw f;return[4,this.oauthInstance.authApi.patchProviderToken({provider_token:f.provider_token,provider_id:i.appId,provider_params:{code:n,provider_code_type:"phone"}})];case 4:if((f=b.sent()).error_code)throw f;return[4,this.oauthInstance.authApi.signInWithProvider({provider_token:f.provider_token})];case 5:if((p=b.sent())!=null&&p.error_code)throw p;return[3,7];case 6:return l=b.sent(),[2,{data:{},error:new nt(l)}];case 7:return[4,this.createLoginState()];case 8:return d=b.sent(),[4,this.getSession()];case 9:return m=b.sent().data,y=(m===void 0?{}:m).session,[2,Je(Je({},d),{data:{user:y.user,session:y},error:null})]}})})},t.prototype.formatPhone=function(e){return!/\s+/.test(e)&&/^\+\d{1,3}\d+/.test(e)?e.replace(/^(\+\d{1,2})(\d+)$/,"$1 $2"):/^\+\d{1,3}\s+/.test(e)?e:"+86 ".concat(e)},t.prototype.notifyListeners=function(e,r,n){this.listeners.forEach(function(i){i.forEach(function(o){try{o(e,r,n)}catch(u){console.error("Error in auth state change callback:",u)}})})},t.prototype.setupListeners=function(){var e,r=this;(e=this.config.eventBus)===null||e===void 0||e.on(co,function(n){return ye(r,void 0,void 0,function(){var i,o,u,f,p;return ge(this,function(l){switch(l.label){case 0:return i=(f=n?.data)===null||f===void 0?void 0:f.event,o=(p=n?.data)===null||p===void 0?void 0:p.info,[4,this.getSession()];case 1:return u=l.sent().data.session,this.notifyListeners(i,u,o),[2]}})})})},t.prototype.convertToUser=function(e){var r,n,i,o,u;if(!e)return null;var f=e?.email||"",p=e?.phone_number||"",l=e?.sub||e?.uid||"";return{id:l,aud:"authenticated",role:(n=(r=e.groups)===null||r===void 0?void 0:r.map)===null||n===void 0?void 0:n.call(r,function(d){return typeof d=="string"?d:d.id}),email:f||"",email_confirmed_at:(e?.email_verified,e.created_at),phone:p,phone_confirmed_at:p?e.created_at:void 0,confirmed_at:e.created_at,last_sign_in_at:e.last_sign_in_at,app_metadata:{provider:((i=e.loginType)===null||i===void 0?void 0:i.toLowerCase())||"cloudbase",providers:[((o=e.loginType)===null||o===void 0?void 0:o.toLowerCase())||"cloudbase"]},user_metadata:{name:e?.name,picture:e?.picture,username:e?.username,gender:e?.gender,locale:e?.locale,uid:e.uid,nickName:e.nickName||e?.name,avatarUrl:e.avatarUrl||e.picture,location:e.location,hasPassword:e.hasPassword},identities:((u=e?.providers)===null||u===void 0?void 0:u.map(function(d){return{id:d.id||"",identity_id:d.id||"",user_id:l,identity_data:{provider_id:d.id,provider_user_id:d.provider_user_id,name:d.name},provider:d.id||"cloudbase",created_at:e.created_at,updated_at:e.updated_at,last_sign_in_at:e.last_sign_in_at}}))||[],created_at:e.created_at,updated_at:e.updated_at,is_anonymous:e.name==="anonymous"}},t.prototype.validateParams=function(e,r){for(var n=0,i=Object.entries(r);n<i.length;n++){var o=i[n],u=o[0],f=o[1];if(f.required&&(e?.[u]===void 0||e?.[u]===null||e?.[u]===""))throw new nt({message:f.message})}},t.prototype.validateAtLeastOne=function(e,r,n){if(!r.some(function(i){return i.some(function(o){return e?.[o]!==void 0&&e?.[o]!==null&&e?.[o]!==""})}))throw new nt({message:n})},t.prototype.init=function(){var e;return ye(this,void 0,void 0,function(){return ge(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.oauthInstance.oauth2client.localCredentials.getCredentials()];case 1:return r.sent()&&((e=this.config.eventBus)===null||e===void 0||e.fire(co,{event:dK})),[3,3];case 2:return r.sent(),[3,3];case 3:return[2,{error:null}]}})})},wr([_r({title:"",messages:["","  1 -  auth().bindPhoneNumber() ","  2 - ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[Object]),je("design:returntype",Promise)],t.prototype,"bindPhoneNumber",null),wr([_r({title:"",messages:["","  1 -  auth().unbindProvider() ","  2 - ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[Object]),je("design:returntype",Promise)],t.prototype,"unbindProvider",null),wr([_r({title:"",messages:["","  1 -  auth().bindEmail() ","  2 - ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[Object]),je("design:returntype",void 0)],t.prototype,"bindEmail",null),wr([_r({title:"",messages:["","  1 -  auth().verify() ","  2 - /","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[Object]),je("design:returntype",Promise)],t.prototype,"verify",null),wr([_r({title:"",messages:["","  1 -  auth().getVerification() ","  2 - /","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[Object,Object]),je("design:returntype",Promise)],t.prototype,"getVerification",null),wr([_r({title:"",messages:["","  1 -  auth().getCurrentUser() ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[]),je("design:returntype",Promise)],t.prototype,"getCurrentUser",null),wr([_r({title:"",messages:["","  1 - ","  2 -  auth().signInAnonymouslyInWx() ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[Object]),je("design:returntype",Promise)],t.prototype,"signInAnonymouslyInWx",null),wr([_r({title:"OpenID",messages:["","  1 - openId","  2 -  auth().bindOpenId() ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[]),je("design:returntype",Promise)],t.prototype,"bindOpenId",null),wr([_r({title:"unionId",messages:["","  1 - unionId","  2 -  auth().signInWithUnionId() ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[]),je("design:returntype",Promise)],t.prototype,"signInWithUnionId",null),wr([_r({title:"",messages:["","  1 - ","  2 -  auth().signInWithSms() ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[Object]),je("design:returntype",Promise)],t.prototype,"signInWithSms",null),wr([_r({title:"",messages:["","  1 - ","  2 -  auth().signInWithEmail() ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[Object]),je("design:returntype",Promise)],t.prototype,"signInWithEmail",null),wr([_r({title:"",messages:["","  1 -  auth().isUsernameRegistered() ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[String]),je("design:returntype",Promise)],t.prototype,"isUsernameRegistered",null),wr([_r({title:"",messages:["","  1 -  auth().getLoginState() ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[]),je("design:returntype",Promise)],t.prototype,"getLoginState",null),wr([_r({title:"",messages:["","  1 - ","  2 -  auth().getUserInfo() ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[]),je("design:returntype",Promise)],t.prototype,"getUserInfo",null),wr([_r({title:"",messages:["","  1 - ","  2 -  auth().getWedaUserInfo() ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[]),je("design:returntype",Promise)],t.prototype,"getWedaUserInfo",null),wr([_r({title:"",messages:["","  1 -  auth().bindWithProvider() ","  2 - ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[Object]),je("design:returntype",Promise)],t.prototype,"bindWithProvider",null),wr([_r({title:"",messages:["","  1 -  auth().getProviderSubType() ","".concat(br)]}),je("design:type",Function),je("design:paramtypes",[]),je("design:returntype",Promise)],t.prototype,"getProviderSubType",null),t})();function QK(t,e){var r=this,n=t.region,i=n===void 0?"ap-shanghai":n,o=t.i18n,u=t.accessKey,f=t.useWxCloud,p=e?.platform||EK.bind(e)(),l=p.runtime,d=p.adapter,m=e||{},y=m.env,b=m.clientId,w=m.debug,S=m.cache,E=m.app,R=(e||{}).apiOrigin;R||(R="https://".concat(y,".").concat(i,".tcb-api.tencentcloudapi.com"));var O={env:y,clientId:b,i18n:o,accessKey:u,useWxCloud:f,eventBus:new yT},C=new $K(GK(Je(Je({},O),{apiOrigin:R,apiPath:t?.apiPath||Vg,storage:t?.storage,baseRequest:t?.baseRequest,request:t?.request,anonymousSignInFunc:t?.anonymousSignInFunc,captchaOptions:t?.captchaOptions,wxCloud:t?.wxCloud,adapter:d,onCredentialsError:VK(O.eventBus),headers:Je({"X-SDK-Version":"@cloudbase/js-sdk/".concat(t.sdkVersion)},t.headers||{}),detectSessionInUrl:t.detectSessionInUrl,debug:w}))),I=new KK(Je(Je({},O),{region:i,persistence:t.persistence,debug:w,cache:S||new AK({persistence:t.persistence,keys:{userInfoKey:"user_info_".concat(y)},platformInfo:p}),runtime:l||"web",_fromApp:E,oauthInstance:C}));return C.initializeSession(function(P,D){return ye(r,void 0,void 0,function(){return ge(this,function(j){return P?(P.type===pT?D?O.eventBus.fire(co,{event:ME,info:Je(Je({},P),{error:D})}):P.user&&I.createLoginState({},{userInfo:P.user}):P.type===Kf&&O.eventBus.fire(co,{event:ok,info:Je(Je({},P),{error:D})}),[2]):[2]})})}),{authInstance:I,oauthInstance:C}}var qU="auth",JK={name:"auth",namespace:qU,entity:function(t){var e=function(n){var i;if(this.authInstance&&!n)return this.authInstance;n=n||{region:"",persistence:"local",apiPath:Vg};var o=this.platform.adapter,u=n.persistence||o.primaryStorage;u&&u!==this.config.persistence&&this.updateConfig({persistence:u});var f=QK(Je(Je({wxCloud:this.config.wxCloud,storage:this.config.storage},n),{persistence:this.config.persistence,i18n:this.config.i18n,accessKey:this.config.accessKey,useWxCloud:this.config.useWxCloud,sdkVersion:this.version,detectSessionInUrl:(i=this.config.auth)===null||i===void 0?void 0:i.detectSessionInUrl}),{env:this.config.env,clientId:this.config.clientId,apiOrigin:this.request.getBaseEndPoint(this.config.endPointMode||"CLOUD_API"),platform:this.platform,cache:this.cache,app:this,debug:this.config.debug}),p=f.authInstance,l=f.oauthInstance;return this.oauthInstance=l,this.authInstance=p,this.authInstance},r=e.call(this,t);return Object.assign(e,r),Object.setPrototypeOf(e,Object.getPrototypeOf(r)),this[qU]=e,e}};try{cloudbase.registerComponent(JK)}catch{}function XK(t,e){var r=e?.envId,n=e?.mysqlBaseUrl||eQ(t,e?.envId).mysql,i=e?.fetch;return function(o){var u=this;return new sK(n,{fetch:i||function(f,p){return gs(u,0,void 0,function(){var l,d,m,y;return bs(this,function(b){switch(b.label){case 0:return l=o?.instance||"default",d=o?.database||r,m={},p?.headers instanceof Headers?p.headers.forEach(function(w,S){m[S]=w}):m=p?.headers||{},[4,Hj(t)];case 1:return y=b.sent(),[2,t.callFunction({name:"httpOverCallFunction",data:{url:f.toString(),method:p?.method||"GET",headers:lr(lr(lr({},y?{Authorization:"Bearer ".concat(y)}:{}),m||{}),{"Content-Type":"application/json","X-Db-Instance":l,"Accept-Profile":d,"Content-Profile":d}),body:p?.body}}).then(function(w){var S=w?.result;return{ok:S?.statusCode>=200&&S?.statusCode<300,status:S?.statusCode||200,statusText:S?.statusMessage||"OK",json:function(){return Promise.resolve(S?.body||{})},text:function(){return Promise.resolve(typeof S?.body=="string"?S.body:JSON.stringify(S?.body||{}))},headers:new Headers(S?.headers||{})}})]}})})}})}}function ZK(t,e){var r,n,i,o,u=e||((n=(r=t?.extend)===null||r===void 0?void 0:r.AI)===null||n===void 0?void 0:n.env);return typeof u=="string"&&u.trim()||(u=(i=t?.config)===null||i===void 0?void 0:i.env),typeof u=="string"&&u.trim()||(u=(o=t?.config)===null||o===void 0?void 0:o.envName),typeof u=="string"&&u.trim()?u.trim():""}function eQ(t,e){var r=ZK(t,e);if(!r)throw new Error("Generating default gateway base url failed: env not found");return{model:"https://".concat(r,".api.tcloudbasegateway.com/v1/model"),sql:"https://".concat(r,".api.tcloudbasegateway.com/v1/sql"),mysql:"https://".concat(r,".api.tcloudbasegateway.com/v1/rdb/rest")}}var tQ=Object.freeze({__proto__:null,getEncryptInfo:function(){let{publicKey:t="",payload:e={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!t)return"";try{const r=bp(e),n=new(void 0);return n.setPublicKey(t),n.encryptLong(typeof r=="object"?JSON.stringify(r):r)}catch(r){console.error("encrypt error:",r)}return""}}),Jl=function(){return Jl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Jl.apply(this,arguments)},rQ=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},nQ=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},iQ=zD,DU="models";function oQ(t){var e=this,r=t.callFunction.bind(t),n=t.request.fetch.bind(t.request),i=function(m){return rQ(e,void 0,void 0,function(){var y;return nQ(this,function(b){switch(b.label){case 0:return[4,n(Jl(Jl({},m),{headers:Jl({"Content-Type":"application/json"},m.headers)}))];case 1:return y=b.sent(),[4,y.data];case 2:return[2,b.sent()]}})})},o=t.getEndPointWithKey("GATEWAY"),u=o.BASE_URL,f=o.PROTOCOL,p="".concat(f).concat(u,"/model"),l="".concat(f).concat(u,"/sql"),d=W7(r,i,p,{sqlBaseUrl:l});return d}var jU=new WeakMap;function aQ(t){return new Proxy({},{get:function(e,r){var n=t.getEndPointWithKey("GATEWAY"),i=n.BASE_URL,o=n.PROTOCOL,u=Jl(Jl({},t),{BASE_URL:i,PROTOCOL:o}),f=jU.get(u);return f||(f=oQ(t),jU.set(u,f)),f[r]}})}var dk="cloudbase_init",hk=new iQ;hk.on(dk,function(t){var e=t.data;Object.assign(e,{models:aQ(e)})});var pk={name:DU,namespace:DU,entity:new Proxy({},{get:function(t,e){console.warn("deprecatedAccessing Cloudbase.prototype.models.".concat(e,"."))}}),injectEvents:{bus:hk,events:[dk]}};try{cloudbase.registerComponent(pk)}catch{}function mk(t){try{t.registerComponent(pk)}catch(e){console.warn(e)}}try{window.registerModel=mk}catch{}function xp(){}function Br(t){return typeof t=="object"&&t!==null||typeof t=="function"}const vk=xp;function Et(t,e){try{Object.defineProperty(t,"name",{value:e,configurable:!0})}catch{}}const bT=Promise,sQ=Promise.resolve.bind(bT),uQ=Promise.prototype.then,lQ=Promise.reject.bind(bT),cQ=sQ;function xr(t){return new bT(t)}function Tt(t){return xr(e=>e(t))}function Me(t){return lQ(t)}function Ea(t,e,r){return uQ.call(t,e,r)}function di(t,e,r){Ea(Ea(t,e,r),void 0,vk)}function j1(t,e){di(t,e)}function $E(t,e){di(t,void 0,e)}function ys(t,e,r){return Ea(t,e,r)}function Td(t){Ea(t,void 0,vk)}let Xl=t=>{if(typeof queueMicrotask=="function")Xl=queueMicrotask;else{const e=Tt(void 0);Xl=r=>Ea(e,r)}return Xl(t)};function ic(t,e,r){if(typeof t!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,e,r)}function ws(t,e,r){try{return Tt(ic(t,e,r))}catch(n){return Me(n)}}class go{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){const r=this._back;let n=r;r._elements.length===16383&&(n={_elements:[],_next:void 0}),r._elements.push(e),n!==r&&(this._back=n,r._next=n),++this._size}shift(){const e=this._front;let r=e;const n=this._cursor;let i=n+1;const o=e._elements,u=o[n];return i===16384&&(r=e._next,i=0),--this._size,this._cursor=i,e!==r&&(this._front=r),o[n]=void 0,u}forEach(e){let r=this._cursor,n=this._front,i=n._elements;for(;!(r===i.length&&n._next===void 0||r===i.length&&(n=n._next,i=n._elements,r=0,i.length===0));)e(i[r]),++r}peek(){const e=this._front,r=this._cursor;return e._elements[r]}}const yk=Symbol("[[AbortSteps]]"),gk=Symbol("[[ErrorSteps]]"),_T=Symbol("[[CancelSteps]]"),wT=Symbol("[[PullSteps]]"),ST=Symbol("[[ReleaseSteps]]");function bk(t,e){t._ownerReadableStream=e,e._reader=t,e._state==="readable"?FE(t):e._state==="closed"?(function(r){FE(r),wk(r)})(t):_k(t,e._storedError)}function ET(t,e){return Fo(t._ownerReadableStream,e)}function ps(t){const e=t._ownerReadableStream;e._state==="readable"?TT(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):(function(r,n){_k(r,n)})(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._readableStreamController[ST](),e._reader=void 0,t._ownerReadableStream=void 0}function rg(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function FE(t){t._closedPromise=xr((e,r)=>{t._closedPromise_resolve=e,t._closedPromise_reject=r})}function _k(t,e){FE(t),TT(t,e)}function TT(t,e){t._closedPromise_reject!==void 0&&(Td(t._closedPromise),t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}function wk(t){t._closedPromise_resolve!==void 0&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}const LU=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},fQ=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};function ms(t,e){if(t!==void 0&&typeof(r=t)!="object"&&typeof r!="function")throw new TypeError(`${e} is not an object.`);var r}function bo(t,e){if(typeof t!="function")throw new TypeError(`${e} is not a function.`)}function Sk(t,e){if(!(function(r){return typeof r=="object"&&r!==null||typeof r=="function"})(t))throw new TypeError(`${e} is not an object.`)}function oc(t,e,r){if(t===void 0)throw new TypeError(`Parameter ${e} is required in '${r}'.`)}function kU(t,e,r){if(t===void 0)throw new TypeError(`${e} is required in '${r}'.`)}function Ek(t){return Number(t)}function MU(t){return t===0?0:t}function AT(t,e){const r=Number.MAX_SAFE_INTEGER;let n=Number(t);if(n=MU(n),!LU(n))throw new TypeError(`${e} is not a finite number`);if(n=(function(i){return MU(fQ(i))})(n),n<0||n>r)throw new TypeError(`${e} is outside the accepted range of 0 to ${r}, inclusive`);return LU(n)&&n!==0?n:0}function OT(t,e){if(!uu(t))throw new TypeError(`${e} is not a ReadableStream.`)}function Qf(t){return new Dl(t)}function Tk(t,e){t._reader._readRequests.push(e)}function RT(t,e,r){const n=t._reader._readRequests.shift();r?n._closeSteps():n._chunkSteps(e)}function Kg(t){return t._reader._readRequests.length}function Ak(t){const e=t._reader;return e!==void 0&&!!Au(e)}class Dl{constructor(e){if(oc(e,1,"ReadableStreamDefaultReader"),OT(e,"First parameter"),Ou(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");bk(this,e),this._readRequests=new go}get closed(){return Au(this)?this._closedPromise:Me(Vv("closed"))}cancel(e=void 0){return Au(this)?this._ownerReadableStream===void 0?Me(rg("cancel")):ET(this,e):Me(Vv("cancel"))}read(){if(!Au(this))return Me(Vv("read"));if(this._ownerReadableStream===void 0)return Me(rg("read from"));let e,r;const n=xr((i,o)=>{e=i,r=o});return Np(this,{_chunkSteps:i=>e({value:i,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:i=>r(i)}),n}releaseLock(){if(!Au(this))throw Vv("releaseLock");this._ownerReadableStream!==void 0&&(function(e){ps(e);const r=new TypeError("Reader was released");Ok(e,r)})(this)}}function Au(t){return!!Br(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readRequests")&&t instanceof Dl}function Np(t,e){const r=t._ownerReadableStream;r._disturbed=!0,r._state==="closed"?e._closeSteps():r._state==="errored"?e._errorSteps(r._storedError):r._readableStreamController[wT](e)}function Ok(t,e){const r=t._readRequests;t._readRequests=new go,r.forEach(n=>{n._errorSteps(e)})}function Vv(t){return new TypeError(`ReadableStreamDefaultReader.prototype.${t} can only be used on a ReadableStreamDefaultReader`)}var L1,k1,M1;function sp(t){return t.slice()}function Rk(t,e,r,n,i){new Uint8Array(t).set(new Uint8Array(r,n,i),e)}Object.defineProperties(Dl.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),Et(Dl.prototype.cancel,"cancel"),Et(Dl.prototype.read,"read"),Et(Dl.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Dl.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});let ac=t=>(ac=typeof t.transfer=="function"?e=>e.transfer():typeof structuredClone=="function"?e=>structuredClone(e,{transfer:[e]}):e=>e,ac(t)),sc=t=>(sc=typeof t.detached=="boolean"?e=>e.detached:e=>e.byteLength===0,sc(t));function Ck(t,e,r){if(t.slice)return t.slice(e,r);const n=r-e,i=new ArrayBuffer(n);return Rk(i,0,t,e,n),i}function up(t,e){const r=t[e];if(r!=null){if(typeof r!="function")throw new TypeError(`${String(e)} is not a function`);return r}}function BU(t){try{const e=t.done,r=t.value;return Ea(cQ(r),n=>({done:e,value:n}))}catch(e){return Me(e)}}const Jp=(M1=(L1=Symbol.asyncIterator)!==null&&L1!==void 0?L1:(k1=Symbol.for)===null||k1===void 0?void 0:k1.call(Symbol,"Symbol.asyncIterator"))!==null&&M1!==void 0?M1:"@@asyncIterator";function Ik(t,e="sync",r){if(r===void 0)if(e==="async"){if((r=up(t,Jp))===void 0)return(function(i){const o={next(){let u;try{u=xk(i)}catch(f){return Me(f)}return BU(u)},return(u){let f;try{const p=up(i.iterator,"return");if(p===void 0)return Tt({done:!0,value:u});f=ic(p,i.iterator,[u])}catch(p){return Me(p)}return Br(f)?BU(f):Me(new TypeError("The iterator.return() method must return an object"))}};return{iterator:o,nextMethod:o.next,done:!1}})(Ik(t,"sync",up(t,Symbol.iterator)))}else r=up(t,Symbol.iterator);if(r===void 0)throw new TypeError("The object is not iterable");const n=ic(r,t,[]);if(!Br(n))throw new TypeError("The iterator method must return an object");return{iterator:n,nextMethod:n.next,done:!1}}function xk(t){const e=ic(t.nextMethod,t.iterator,[]);if(!Br(e))throw new TypeError("The iterator.next() method must return an object");return e}class Nk{constructor(e,r){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=r}next(){const e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?ys(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){const r=()=>this._returnSteps(e);return this._ongoingPromise=this._ongoingPromise?ys(this._ongoingPromise,r,r):r(),this._ongoingPromise}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const e=this._reader;let r,n;const i=xr((o,u)=>{r=o,n=u});return Np(e,{_chunkSteps:o=>{this._ongoingPromise=void 0,Xl(()=>r({value:o,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ps(e),r({value:void 0,done:!0})},_errorSteps:o=>{this._ongoingPromise=void 0,this._isFinished=!0,ps(e),n(o)}}),i}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;const r=this._reader;if(!this._preventCancel){const n=ET(r,e);return ps(r),ys(n,()=>({value:e,done:!0}))}return ps(r),Tt({value:e,done:!0})}}const Pk={next(){return zU(this)?this._asyncIteratorImpl.next():Me($U("next"))},return(t){return zU(this)?this._asyncIteratorImpl.return(t):Me($U("return"))},[Jp](){return this}};function zU(t){if(!Br(t)||!Object.prototype.hasOwnProperty.call(t,"_asyncIteratorImpl"))return!1;try{return t._asyncIteratorImpl instanceof Nk}catch{return!1}}function $U(t){return new TypeError(`ReadableStreamAsyncIterator.${t} can only be used on a ReadableSteamAsyncIterator`)}Object.defineProperty(Pk,Jp,{enumerable:!1});const Uk=Number.isNaN||function(t){return t!=t};function FU(t){const e=Ck(t.buffer,t.byteOffset,t.byteOffset+t.byteLength);return new Uint8Array(e)}function HE(t){const e=t._queue.shift();return t._queueTotalSize-=e.size,t._queueTotalSize<0&&(t._queueTotalSize=0),e.value}function CT(t,e,r){if(typeof(n=r)!="number"||Uk(n)||n<0||r===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var n;t._queue.push({value:e,size:r}),t._queueTotalSize+=r}function qu(t){t._queue=new go,t._queueTotalSize=0}function qk(t){return t===DataView}class jf{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!B1(this))throw z1("view");return this._view}respond(e){if(!B1(this))throw z1("respond");if(oc(e,1,"respond"),e=AT(e,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(sc(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");Cy(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!B1(this))throw z1("respondWithNewView");if(oc(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(sc(e.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");Iy(this._associatedReadableByteStreamController,e)}}Object.defineProperties(jf.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),Et(jf.prototype.respond,"respond"),Et(jf.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(jf.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class vu{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!jl(this))throw Fh("byobRequest");return WE(this)}get desiredSize(){if(!jl(this))throw Fh("desiredSize");return Gk(this)}close(){if(!jl(this))throw Fh("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");const e=this._controlledReadableByteStream._state;if(e!=="readable")throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);lp(this)}enqueue(e){if(!jl(this))throw Fh("enqueue");if(oc(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(e.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(e.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");const r=this._controlledReadableByteStream._state;if(r!=="readable")throw new TypeError(`The stream (in ${r} state) is not in the readable state and cannot be enqueued to`);Ry(this,e)}error(e=void 0){if(!jl(this))throw Fh("error");ho(this,e)}[_T](e){Dk(this),qu(this);const r=this._cancelAlgorithm(e);return Qg(this),r}[wT](e){const r=this._controlledReadableByteStream;if(this._queueTotalSize>0)return void Hk(this,e);const n=this._autoAllocateChunkSize;if(n!==void 0){let i;try{i=new ArrayBuffer(n)}catch(u){return void e._errorSteps(u)}const o={buffer:i,bufferByteLength:n,byteOffset:0,byteLength:n,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(o)}Tk(r,e),vc(this)}[ST](){if(this._pendingPullIntos.length>0){const e=this._pendingPullIntos.peek();e.readerType="none",this._pendingPullIntos=new go,this._pendingPullIntos.push(e)}}}function jl(t){return!!Br(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledReadableByteStream")&&t instanceof vu}function B1(t){return!!Br(t)&&!!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")&&t instanceof jf}function vc(t){if((function(r){const n=r._controlledReadableByteStream;return n._state!=="readable"||r._closeRequested||!r._started?!1:!!(Ak(n)&&Kg(n)>0||xT(n)&&Yk(n)>0||Gk(r)>0)})(t)){if(t._pulling)return void(t._pullAgain=!0);t._pulling=!0,di(t._pullAlgorithm(),()=>(t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,vc(t)),null),r=>(ho(t,r),null))}}function Dk(t){IT(t),t._pendingPullIntos=new go}function jk(t,e){let r=!1;t._state==="closed"&&(r=!0);const n=Lk(e);e.readerType==="default"?RT(t,n,r):(function(i,o,u){const f=i._reader,p=f._readIntoRequests.shift();u?p._closeSteps(o):p._chunkSteps(o)})(t,n,r)}function Ay(t,e){for(let r=0;r<e.length;++r)jk(t,e[r])}function Lk(t){const e=t.bytesFilled,r=t.elementSize;return new t.viewConstructor(t.buffer,t.byteOffset,e/r)}function Oy(t,e,r,n){t._queue.push({buffer:e,byteOffset:r,byteLength:n}),t._queueTotalSize+=n}function kk(t,e,r,n){let i;try{i=Ck(e,r,r+n)}catch(o){throw ho(t,o),o}Oy(t,i,0,n)}function Mk(t,e){e.bytesFilled>0&&kk(t,e.buffer,e.byteOffset,e.bytesFilled),Jf(t)}function Bk(t,e){const r=Math.min(t._queueTotalSize,e.byteLength-e.bytesFilled),n=e.bytesFilled+r;let i=r,o=!1;const u=n-n%e.elementSize;u>=e.minimumFill&&(i=u-e.bytesFilled,o=!0);const f=t._queue;for(;i>0;){const p=f.peek(),l=Math.min(i,p.byteLength),d=e.byteOffset+e.bytesFilled;Rk(e.buffer,d,p.buffer,p.byteOffset,l),p.byteLength===l?f.shift():(p.byteOffset+=l,p.byteLength-=l),t._queueTotalSize-=l,zk(t,l,e),i-=l}return o}function zk(t,e,r){r.bytesFilled+=e}function $k(t){t._queueTotalSize===0&&t._closeRequested?(Qg(t),Xp(t._controlledReadableByteStream)):vc(t)}function IT(t){t._byobRequest!==null&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=null,t._byobRequest=null)}function GE(t){const e=[];for(;t._pendingPullIntos.length>0&&t._queueTotalSize!==0;){const r=t._pendingPullIntos.peek();Bk(t,r)&&(Jf(t),e.push(r))}return e}function dQ(t,e,r,n){const i=t._controlledReadableByteStream,o=e.constructor,u=(function(y){return qk(y)?1:y.BYTES_PER_ELEMENT})(o),{byteOffset:f,byteLength:p}=e,l=r*u;let d;try{d=ac(e.buffer)}catch(y){return void n._errorSteps(y)}const m={buffer:d,bufferByteLength:d.byteLength,byteOffset:f,byteLength:p,bytesFilled:0,minimumFill:l,elementSize:u,viewConstructor:o,readerType:"byob"};if(t._pendingPullIntos.length>0)return t._pendingPullIntos.push(m),void HU(i,n);if(i._state==="closed"){const y=new o(m.buffer,m.byteOffset,0);return void n._closeSteps(y)}if(t._queueTotalSize>0){if(Bk(t,m)){const y=Lk(m);return $k(t),void n._chunkSteps(y)}if(t._closeRequested){const y=new TypeError("Insufficient bytes to fill elements in the given buffer");return ho(t,y),void n._errorSteps(y)}}t._pendingPullIntos.push(m),HU(i,n),vc(t)}function Fk(t,e){const r=t._pendingPullIntos.peek();IT(t),t._controlledReadableByteStream._state==="closed"?(function(n,i){i.readerType==="none"&&Jf(n);const o=n._controlledReadableByteStream;if(xT(o)){const u=[];for(;u.length<Yk(o);)u.push(Jf(n));Ay(o,u)}})(t,r):(function(n,i,o){if(zk(0,i,o),o.readerType==="none"){Mk(n,o);const p=GE(n);return void Ay(n._controlledReadableByteStream,p)}if(o.bytesFilled<o.minimumFill)return;Jf(n);const u=o.bytesFilled%o.elementSize;if(u>0){const p=o.byteOffset+o.bytesFilled;kk(n,o.buffer,p-u,u)}o.bytesFilled-=u;const f=GE(n);jk(n._controlledReadableByteStream,o),Ay(n._controlledReadableByteStream,f)})(t,e,r),vc(t)}function Jf(t){return t._pendingPullIntos.shift()}function Qg(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0}function lp(t){const e=t._controlledReadableByteStream;if(!t._closeRequested&&e._state==="readable")if(t._queueTotalSize>0)t._closeRequested=!0;else{if(t._pendingPullIntos.length>0){const r=t._pendingPullIntos.peek();if(r.bytesFilled%r.elementSize!==0){const n=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ho(t,n),n}}Qg(t),Xp(e)}}function Ry(t,e){const r=t._controlledReadableByteStream;if(t._closeRequested||r._state!=="readable")return;const{buffer:n,byteOffset:i,byteLength:o}=e;if(sc(n))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");const u=ac(n);if(t._pendingPullIntos.length>0){const f=t._pendingPullIntos.peek();if(sc(f.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");IT(t),f.buffer=ac(f.buffer),f.readerType==="none"&&Mk(t,f)}Ak(r)?((function(f){const p=f._controlledReadableByteStream._reader;for(;p._readRequests.length>0;){if(f._queueTotalSize===0)return;Hk(f,p._readRequests.shift())}})(t),Kg(r)===0?Oy(t,u,i,o):(t._pendingPullIntos.length>0&&Jf(t),RT(r,new Uint8Array(u,i,o),!1))):xT(r)?(Oy(t,u,i,o),Ay(r,GE(t))):Oy(t,u,i,o),vc(t)}function ho(t,e){const r=t._controlledReadableByteStream;r._state==="readable"&&(Dk(t),qu(t),Qg(t),p3(r,e))}function Hk(t,e){const r=t._queue.shift();t._queueTotalSize-=r.byteLength,$k(t);const n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);e._chunkSteps(n)}function WE(t){if(t._byobRequest===null&&t._pendingPullIntos.length>0){const e=t._pendingPullIntos.peek(),r=new Uint8Array(e.buffer,e.byteOffset+e.bytesFilled,e.byteLength-e.bytesFilled),n=Object.create(jf.prototype);(function(i,o,u){i._associatedReadableByteStreamController=o,i._view=u})(n,t,r),t._byobRequest=n}return t._byobRequest}function Gk(t){const e=t._controlledReadableByteStream._state;return e==="errored"?null:e==="closed"?0:t._strategyHWM-t._queueTotalSize}function Cy(t,e){const r=t._pendingPullIntos.peek();if(t._controlledReadableByteStream._state==="closed"){if(e!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(e===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(r.bytesFilled+e>r.byteLength)throw new RangeError("bytesWritten out of range")}r.buffer=ac(r.buffer),Fk(t,e)}function Iy(t,e){const r=t._pendingPullIntos.peek();if(t._controlledReadableByteStream._state==="closed"){if(e.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(e.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(r.byteOffset+r.bytesFilled!==e.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(r.bufferByteLength!==e.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(r.bytesFilled+e.byteLength>r.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");const n=e.byteLength;r.buffer=ac(e.buffer),Fk(t,n)}function Wk(t,e,r,n,i,o,u){e._controlledReadableByteStream=t,e._pullAgain=!1,e._pulling=!1,e._byobRequest=null,e._queue=e._queueTotalSize=void 0,qu(e),e._closeRequested=!1,e._started=!1,e._strategyHWM=o,e._pullAlgorithm=n,e._cancelAlgorithm=i,e._autoAllocateChunkSize=u,e._pendingPullIntos=new go,t._readableStreamController=e,di(Tt(r()),()=>(e._started=!0,vc(e),null),f=>(ho(e,f),null))}function z1(t){return new TypeError(`ReadableStreamBYOBRequest.prototype.${t} can only be used on a ReadableStreamBYOBRequest`)}function Fh(t){return new TypeError(`ReadableByteStreamController.prototype.${t} can only be used on a ReadableByteStreamController`)}function hQ(t,e){if((t=`${t}`)!="byob")throw new TypeError(`${e} '${t}' is not a valid enumeration value for ReadableStreamReaderMode`);return t}function Vk(t){return new Ll(t)}function HU(t,e){t._reader._readIntoRequests.push(e)}function Yk(t){return t._reader._readIntoRequests.length}function xT(t){const e=t._reader;return e!==void 0&&!!Hl(e)}Object.defineProperties(vu.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),Et(vu.prototype.close,"close"),Et(vu.prototype.enqueue,"enqueue"),Et(vu.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(vu.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class Ll{constructor(e){if(oc(e,1,"ReadableStreamBYOBReader"),OT(e,"First parameter"),Ou(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!jl(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");bk(this,e),this._readIntoRequests=new go}get closed(){return Hl(this)?this._closedPromise:Me(Yv("closed"))}cancel(e=void 0){return Hl(this)?this._ownerReadableStream===void 0?Me(rg("cancel")):ET(this,e):Me(Yv("cancel"))}read(e,r={}){if(!Hl(this))return Me(Yv("read"));if(!ArrayBuffer.isView(e))return Me(new TypeError("view must be an array buffer view"));if(e.byteLength===0)return Me(new TypeError("view must have non-zero byteLength"));if(e.buffer.byteLength===0)return Me(new TypeError("view's buffer must have non-zero byteLength"));if(sc(e.buffer))return Me(new TypeError("view's buffer has been detached"));let n;try{n=(function(p,l){var d;return ms(p,l),{min:AT((d=p?.min)!==null&&d!==void 0?d:1,`${l} has member 'min' that`)}})(r,"options")}catch(p){return Me(p)}const i=n.min;if(i===0)return Me(new TypeError("options.min must be greater than 0"));if((function(p){return qk(p.constructor)})(e)){if(i>e.byteLength)return Me(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(i>e.length)return Me(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return Me(rg("read from"));let o,u;const f=xr((p,l)=>{o=p,u=l});return Kk(this,e,i,{_chunkSteps:p=>o({value:p,done:!1}),_closeSteps:p=>o({value:p,done:!0}),_errorSteps:p=>u(p)}),f}releaseLock(){if(!Hl(this))throw Yv("releaseLock");this._ownerReadableStream!==void 0&&(function(e){ps(e);const r=new TypeError("Reader was released");Qk(e,r)})(this)}}function Hl(t){return!!Br(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")&&t instanceof Ll}function Kk(t,e,r,n){const i=t._ownerReadableStream;i._disturbed=!0,i._state==="errored"?n._errorSteps(i._storedError):dQ(i._readableStreamController,e,r,n)}function Qk(t,e){const r=t._readIntoRequests;t._readIntoRequests=new go,r.forEach(n=>{n._errorSteps(e)})}function Yv(t){return new TypeError(`ReadableStreamBYOBReader.prototype.${t} can only be used on a ReadableStreamBYOBReader`)}function Pp(t,e){const{highWaterMark:r}=t;if(r===void 0)return e;if(Uk(r)||r<0)throw new RangeError("Invalid highWaterMark");return r}function ng(t){const{size:e}=t;return e||(()=>1)}function ig(t,e){ms(t,e);const r=t?.highWaterMark,n=t?.size;return{highWaterMark:r===void 0?void 0:Ek(r),size:n===void 0?void 0:pQ(n,`${e} has member 'size' that`)}}function pQ(t,e){return bo(t,e),r=>Ek(t(r))}function mQ(t,e,r){return bo(t,r),n=>ws(t,e,[n])}function vQ(t,e,r){return bo(t,r),()=>ws(t,e,[])}function yQ(t,e,r){return bo(t,r),n=>ic(t,e,[n])}function gQ(t,e,r){return bo(t,r),(n,i)=>ws(t,e,[n,i])}function Jk(t,e){if(!Lf(t))throw new TypeError(`${e} is not a WritableStream.`)}Object.defineProperties(Ll.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),Et(Ll.prototype.cancel,"cancel"),Et(Ll.prototype.read,"read"),Et(Ll.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ll.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});class kl{constructor(e={},r={}){e===void 0?e=null:Sk(e,"First parameter");const n=ig(r,"Second parameter"),i=(function(u,f){ms(u,f);const p=u?.abort,l=u?.close,d=u?.start,m=u?.type,y=u?.write;return{abort:p===void 0?void 0:mQ(p,u,`${f} has member 'abort' that`),close:l===void 0?void 0:vQ(l,u,`${f} has member 'close' that`),start:d===void 0?void 0:yQ(d,u,`${f} has member 'start' that`),write:y===void 0?void 0:gQ(y,u,`${f} has member 'write' that`),type:m}})(e,"First parameter");if(Zk(this),i.type!==void 0)throw new RangeError("Invalid type is specified");const o=ng(n);(function(u,f,p,l){const d=Object.create(Up.prototype);let m,y,b,w;m=f.start!==void 0?()=>f.start(d):()=>{},y=f.write!==void 0?S=>f.write(S,d):()=>Tt(void 0),b=f.close!==void 0?()=>f.close():()=>Tt(void 0),w=f.abort!==void 0?S=>f.abort(S):()=>Tt(void 0),a3(u,d,m,y,b,w,p,l)})(this,i,Pp(n,1),o)}get locked(){if(!Lf(this))throw Qv("locked");return Xf(this)}abort(e=void 0){return Lf(this)?Xf(this)?Me(new TypeError("Cannot abort a stream that already has a writer")):og(this,e):Me(Qv("abort"))}close(){return Lf(this)?Xf(this)?Me(new TypeError("Cannot close a stream that already has a writer")):Ta(this)?Me(new TypeError("Cannot close an already-closing stream")):e3(this):Me(Qv("close"))}getWriter(){if(!Lf(this))throw Qv("getWriter");return Xk(this)}}function Xk(t){return new fu(t)}function Zk(t){t._state="writable",t._storedError=void 0,t._writer=void 0,t._writableStreamController=void 0,t._writeRequests=new go,t._inFlightWriteRequest=void 0,t._closeRequest=void 0,t._inFlightCloseRequest=void 0,t._pendingAbortRequest=void 0,t._backpressure=!1}function Lf(t){return!!Br(t)&&!!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")&&t instanceof kl}function Xf(t){return t._writer!==void 0}function og(t,e){var r;if(t._state==="closed"||t._state==="errored")return Tt(void 0);t._writableStreamController._abortReason=e,(r=t._writableStreamController._abortController)===null||r===void 0||r.abort(e);const n=t._state;if(n==="closed"||n==="errored")return Tt(void 0);if(t._pendingAbortRequest!==void 0)return t._pendingAbortRequest._promise;let i=!1;n==="erroring"&&(i=!0,e=void 0);const o=xr((u,f)=>{t._pendingAbortRequest={_promise:void 0,_resolve:u,_reject:f,_reason:e,_wasAlreadyErroring:i}});return t._pendingAbortRequest._promise=o,i||NT(t,e),o}function e3(t){const e=t._state;if(e==="closed"||e==="errored")return Me(new TypeError(`The stream (in ${e} state) is not in the writable state and cannot be closed`));const r=xr((o,u)=>{const f={_resolve:o,_reject:u};t._closeRequest=f}),n=t._writer;var i;return n!==void 0&&t._backpressure&&e==="writable"&&jT(n),CT(i=t._writableStreamController,o3,0),Jg(i),r}function VE(t,e){t._state!=="writable"?PT(t):NT(t,e)}function NT(t,e){const r=t._writableStreamController;t._state="erroring",t._storedError=e;const n=t._writer;n!==void 0&&r3(n,e),!(function(i){return!(i._inFlightWriteRequest===void 0&&i._inFlightCloseRequest===void 0)})(t)&&r._started&&PT(t)}function PT(t){t._state="errored",t._writableStreamController[gk]();const e=t._storedError;if(t._writeRequests.forEach(n=>{n._reject(e)}),t._writeRequests=new go,t._pendingAbortRequest===void 0)return void Kv(t);const r=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(e),void Kv(t);di(t._writableStreamController[yk](r._reason),()=>(r._resolve(),Kv(t),null),n=>(r._reject(n),Kv(t),null))}function Ta(t){return t._closeRequest!==void 0||t._inFlightCloseRequest!==void 0}function Kv(t){t._closeRequest!==void 0&&(t._closeRequest._reject(t._storedError),t._closeRequest=void 0);const e=t._writer;e!==void 0&&DT(e,t._storedError)}function UT(t,e){const r=t._writer;r!==void 0&&e!==t._backpressure&&(e?(function(n){Xg(n)})(r):jT(r)),t._backpressure=e}Object.defineProperties(kl.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),Et(kl.prototype.abort,"abort"),Et(kl.prototype.close,"close"),Et(kl.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(kl.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});class fu{constructor(e){if(oc(e,1,"WritableStreamDefaultWriter"),Jk(e,"First parameter"),Xf(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;const r=e._state;if(r==="writable")!Ta(e)&&e._backpressure?Xg(this):GU(this),xy(this);else if(r==="erroring")YE(this,e._storedError),xy(this);else if(r==="closed")GU(this),xy(n=this),c3(n);else{const i=e._storedError;YE(this,i),l3(this,i)}var n}get closed(){return Al(this)?this._closedPromise:Me(Ol("closed"))}get desiredSize(){if(!Al(this))throw Ol("desiredSize");if(this._ownerWritableStream===void 0)throw cp("desiredSize");return(function(e){const r=e._ownerWritableStream,n=r._state;return n==="errored"||n==="erroring"?null:n==="closed"?0:s3(r._writableStreamController)})(this)}get ready(){return Al(this)?this._readyPromise:Me(Ol("ready"))}abort(e=void 0){return Al(this)?this._ownerWritableStream===void 0?Me(cp("abort")):(function(r,n){return og(r._ownerWritableStream,n)})(this,e):Me(Ol("abort"))}close(){if(!Al(this))return Me(Ol("close"));const e=this._ownerWritableStream;return e===void 0?Me(cp("close")):Ta(e)?Me(new TypeError("Cannot close an already-closing stream")):t3(this)}releaseLock(){if(!Al(this))throw Ol("releaseLock");this._ownerWritableStream!==void 0&&n3(this)}write(e=void 0){return Al(this)?this._ownerWritableStream===void 0?Me(cp("write to")):i3(this,e):Me(Ol("write"))}}function Al(t){return!!Br(t)&&!!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")&&t instanceof fu}function t3(t){return e3(t._ownerWritableStream)}function bQ(t,e){t._closedPromiseState==="pending"?DT(t,e):(function(r,n){l3(r,n)})(t,e)}function r3(t,e){t._readyPromiseState==="pending"?f3(t,e):(function(r,n){YE(r,n)})(t,e)}function n3(t){const e=t._ownerWritableStream,r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");r3(t,r),bQ(t,r),e._writer=void 0,t._ownerWritableStream=void 0}function i3(t,e){const r=t._ownerWritableStream,n=r._writableStreamController,i=(function(f,p){if(f._strategySizeAlgorithm===void 0)return 1;try{return f._strategySizeAlgorithm(p)}catch(l){return qp(f,l),1}})(n,e);if(r!==t._ownerWritableStream)return Me(cp("write to"));const o=r._state;if(o==="errored")return Me(r._storedError);if(Ta(r)||o==="closed")return Me(new TypeError("The stream is closing or closed and cannot be written to"));if(o==="erroring")return Me(r._storedError);const u=(function(f){return xr((p,l)=>{const d={_resolve:p,_reject:l};f._writeRequests.push(d)})})(r);return(function(f,p,l){try{CT(f,p,l)}catch(m){return void qp(f,m)}const d=f._controlledWritableStream;!Ta(d)&&d._state==="writable"&&UT(d,qT(f)),Jg(f)})(n,e,i),u}Object.defineProperties(fu.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),Et(fu.prototype.abort,"abort"),Et(fu.prototype.close,"close"),Et(fu.prototype.releaseLock,"releaseLock"),Et(fu.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(fu.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});const o3={};class Up{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!$1(this))throw F1("abortReason");return this._abortReason}get signal(){if(!$1(this))throw F1("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e=void 0){if(!$1(this))throw F1("error");this._controlledWritableStream._state==="writable"&&u3(this,e)}[yk](e){const r=this._abortAlgorithm(e);return ag(this),r}[gk](){qu(this)}}function $1(t){return!!Br(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledWritableStream")&&t instanceof Up}function a3(t,e,r,n,i,o,u,f){e._controlledWritableStream=t,t._writableStreamController=e,e._queue=void 0,e._queueTotalSize=void 0,qu(e),e._abortReason=void 0,e._abortController=(function(){if(typeof AbortController=="function")return new AbortController})(),e._started=!1,e._strategySizeAlgorithm=f,e._strategyHWM=u,e._writeAlgorithm=n,e._closeAlgorithm=i,e._abortAlgorithm=o;const p=qT(e);UT(t,p),di(Tt(r()),()=>(e._started=!0,Jg(e),null),l=>(e._started=!0,VE(t,l),null))}function ag(t){t._writeAlgorithm=void 0,t._closeAlgorithm=void 0,t._abortAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function s3(t){return t._strategyHWM-t._queueTotalSize}function Jg(t){const e=t._controlledWritableStream;if(!t._started||e._inFlightWriteRequest!==void 0)return;if(e._state==="erroring")return void PT(e);if(t._queue.length===0)return;const r=t._queue.peek().value;r===o3?(function(n){const i=n._controlledWritableStream;(function(u){u._inFlightCloseRequest=u._closeRequest,u._closeRequest=void 0})(i),HE(n);const o=n._closeAlgorithm();ag(n),di(o,()=>((function(u){u._inFlightCloseRequest._resolve(void 0),u._inFlightCloseRequest=void 0,u._state==="erroring"&&(u._storedError=void 0,u._pendingAbortRequest!==void 0&&(u._pendingAbortRequest._resolve(),u._pendingAbortRequest=void 0)),u._state="closed";const f=u._writer;f!==void 0&&c3(f)})(i),null),u=>((function(f,p){f._inFlightCloseRequest._reject(p),f._inFlightCloseRequest=void 0,f._pendingAbortRequest!==void 0&&(f._pendingAbortRequest._reject(p),f._pendingAbortRequest=void 0),VE(f,p)})(i,u),null))})(t):(function(n,i){const o=n._controlledWritableStream;(function(f){f._inFlightWriteRequest=f._writeRequests.shift()})(o);const u=n._writeAlgorithm(i);di(u,()=>{(function(p){p._inFlightWriteRequest._resolve(void 0),p._inFlightWriteRequest=void 0})(o);const f=o._state;if(HE(n),!Ta(o)&&f==="writable"){const p=qT(n);UT(o,p)}return Jg(n),null},f=>(o._state==="writable"&&ag(n),(function(p,l){p._inFlightWriteRequest._reject(l),p._inFlightWriteRequest=void 0,VE(p,l)})(o,f),null))})(t,r)}function qp(t,e){t._controlledWritableStream._state==="writable"&&u3(t,e)}function qT(t){return s3(t)<=0}function u3(t,e){const r=t._controlledWritableStream;ag(t),NT(r,e)}function Qv(t){return new TypeError(`WritableStream.prototype.${t} can only be used on a WritableStream`)}function F1(t){return new TypeError(`WritableStreamDefaultController.prototype.${t} can only be used on a WritableStreamDefaultController`)}function Ol(t){return new TypeError(`WritableStreamDefaultWriter.prototype.${t} can only be used on a WritableStreamDefaultWriter`)}function cp(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function xy(t){t._closedPromise=xr((e,r)=>{t._closedPromise_resolve=e,t._closedPromise_reject=r,t._closedPromiseState="pending"})}function l3(t,e){xy(t),DT(t,e)}function DT(t,e){t._closedPromise_reject!==void 0&&(Td(t._closedPromise),t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected")}function c3(t){t._closedPromise_resolve!==void 0&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved")}function Xg(t){t._readyPromise=xr((e,r)=>{t._readyPromise_resolve=e,t._readyPromise_reject=r}),t._readyPromiseState="pending"}function YE(t,e){Xg(t),f3(t,e)}function GU(t){Xg(t),jT(t)}function f3(t,e){t._readyPromise_reject!==void 0&&(Td(t._readyPromise),t._readyPromise_reject(e),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected")}function jT(t){t._readyPromise_resolve!==void 0&&(t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled")}Object.defineProperties(Up.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Up.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});const WU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:void 0,_Q=(function(){const t=WU?.DOMException;return(function(e){if(typeof e!="function"&&typeof e!="object"||e.name!=="DOMException")return!1;try{return new e,!0}catch{return!1}})(t)?t:void 0})()||(function(){const t=function(e,r){this.message=e||"",this.name=r||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return Et(t,"DOMException"),t.prototype=Object.create(Error.prototype),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t})();function VU(t,e,r,n,i,o){const u=Qf(t),f=Xk(e);t._disturbed=!0;let p=!1,l=Tt(void 0);return xr((d,m)=>{let y;if(o!==void 0){if(y=()=>{const P=o.reason!==void 0?o.reason:new _Q("Aborted","AbortError"),D=[];n||D.push(()=>e._state==="writable"?og(e,P):Tt(void 0)),i||D.push(()=>t._state==="readable"?Fo(t,P):Tt(void 0)),O(()=>Promise.all(D.map(j=>j())),!0,P)},o.aborted)return void y();o.addEventListener("abort",y)}var b,w,S;if(R(t,u._closedPromise,P=>(n?C(!0,P):O(()=>og(e,P),!0,P),null)),R(e,f._closedPromise,P=>(i?C(!0,P):O(()=>Fo(t,P),!0,P),null)),b=t,w=u._closedPromise,S=()=>(r?C():O(()=>(function(P){const D=P._ownerWritableStream,j=D._state;return Ta(D)||j==="closed"?Tt(void 0):j==="errored"?Me(D._storedError):t3(P)})(f)),null),b._state==="closed"?S():j1(w,S),Ta(e)||e._state==="closed"){const P=new TypeError("the destination writable stream closed before all data could be piped to it");i?C(!0,P):O(()=>Fo(t,P),!0,P)}function E(){const P=l;return Ea(l,()=>P!==l?E():void 0)}function R(P,D,j){P._state==="errored"?j(P._storedError):$E(D,j)}function O(P,D,j){function q(){return di(P(),()=>I(D,j),U=>I(!0,U)),null}p||(p=!0,e._state!=="writable"||Ta(e)?q():j1(E(),q))}function C(P,D){p||(p=!0,e._state!=="writable"||Ta(e)?I(P,D):j1(E(),()=>I(P,D)))}function I(P,D){return n3(f),ps(u),o!==void 0&&o.removeEventListener("abort",y),P?m(D):d(void 0),null}Td(xr((P,D)=>{(function j(q){q?P():Ea(p?Tt(!0):Ea(f._readyPromise,()=>xr((U,Y)=>{Np(u,{_chunkSteps:$=>{l=Ea(i3(f,$),void 0,xp),U(!1)},_closeSteps:()=>U(!0),_errorSteps:Y})})),j,D)})(!1)}))})}class yu{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Jv(this))throw Xv("desiredSize");return LT(this)}close(){if(!Jv(this))throw Xv("close");if(!cd(this))throw new TypeError("The stream is not in a state that permits close");uc(this)}enqueue(e=void 0){if(!Jv(this))throw Xv("enqueue");if(!cd(this))throw new TypeError("The stream is not in a state that permits enqueue");return ld(this,e)}error(e=void 0){if(!Jv(this))throw Xv("error");Wo(this,e)}[_T](e){qu(this);const r=this._cancelAlgorithm(e);return sg(this),r}[wT](e){const r=this._controlledReadableStream;if(this._queue.length>0){const n=HE(this);this._closeRequested&&this._queue.length===0?(sg(this),Xp(r)):Dp(this),e._chunkSteps(n)}else Tk(r,e),Dp(this)}[ST](){}}function Jv(t){return!!Br(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledReadableStream")&&t instanceof yu}function Dp(t){if(d3(t)){if(t._pulling)return void(t._pullAgain=!0);t._pulling=!0,di(t._pullAlgorithm(),()=>(t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,Dp(t)),null),e=>(Wo(t,e),null))}}function d3(t){const e=t._controlledReadableStream;return!cd(t)||!t._started?!1:Ou(e)&&Kg(e)>0?!0:LT(t)>0}function sg(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function uc(t){if(!cd(t))return;const e=t._controlledReadableStream;t._closeRequested=!0,t._queue.length===0&&(sg(t),Xp(e))}function ld(t,e){if(!cd(t))return;const r=t._controlledReadableStream;if(Ou(r)&&Kg(r)>0)RT(r,e,!1);else{let n;try{n=t._strategySizeAlgorithm(e)}catch(i){throw Wo(t,i),i}try{CT(t,e,n)}catch(i){throw Wo(t,i),i}}Dp(t)}function Wo(t,e){const r=t._controlledReadableStream;r._state==="readable"&&(qu(t),sg(t),p3(r,e))}function LT(t){const e=t._controlledReadableStream._state;return e==="errored"?null:e==="closed"?0:t._strategyHWM-t._queueTotalSize}function cd(t){const e=t._controlledReadableStream._state;return!t._closeRequested&&e==="readable"}function h3(t,e,r,n,i,o,u){e._controlledReadableStream=t,e._queue=void 0,e._queueTotalSize=void 0,qu(e),e._started=!1,e._closeRequested=!1,e._pullAgain=!1,e._pulling=!1,e._strategySizeAlgorithm=u,e._strategyHWM=o,e._pullAlgorithm=n,e._cancelAlgorithm=i,t._readableStreamController=e,di(Tt(r()),()=>(e._started=!0,Dp(e),null),f=>(Wo(e,f),null))}function Xv(t){return new TypeError(`ReadableStreamDefaultController.prototype.${t} can only be used on a ReadableStreamDefaultController`)}function wQ(t,e){return jl(t._readableStreamController)?(function(r){let n,i,o,u,f,p=Qf(r),l=!1,d=!1,m=!1,y=!1,b=!1;const w=xr(j=>{f=j});function S(j){$E(j._closedPromise,q=>(j!==p||(ho(o._readableStreamController,q),ho(u._readableStreamController,q),y&&b||f(void 0)),null))}function E(){Hl(p)&&(ps(p),p=Qf(r),S(p)),Np(p,{_chunkSteps:j=>{Xl(()=>{d=!1,m=!1;const q=j;let U=j;if(!y&&!b)try{U=FU(j)}catch(Y){return ho(o._readableStreamController,Y),ho(u._readableStreamController,Y),void f(Fo(r,Y))}y||Ry(o._readableStreamController,q),b||Ry(u._readableStreamController,U),l=!1,d?O():m&&C()})},_closeSteps:()=>{l=!1,y||lp(o._readableStreamController),b||lp(u._readableStreamController),o._readableStreamController._pendingPullIntos.length>0&&Cy(o._readableStreamController,0),u._readableStreamController._pendingPullIntos.length>0&&Cy(u._readableStreamController,0),y&&b||f(void 0)},_errorSteps:()=>{l=!1}})}function R(j,q){Au(p)&&(ps(p),p=Vk(r),S(p));const U=q?u:o,Y=q?o:u;Kk(p,j,1,{_chunkSteps:$=>{Xl(()=>{d=!1,m=!1;const L=q?b:y;if(q?y:b)L||Iy(U._readableStreamController,$);else{let H;try{H=FU($)}catch(Q){return ho(U._readableStreamController,Q),ho(Y._readableStreamController,Q),void f(Fo(r,Q))}L||Iy(U._readableStreamController,$),Ry(Y._readableStreamController,H)}l=!1,d?O():m&&C()})},_closeSteps:$=>{l=!1;const L=q?b:y,H=q?y:b;L||lp(U._readableStreamController),H||lp(Y._readableStreamController),$!==void 0&&(L||Iy(U._readableStreamController,$),!H&&Y._readableStreamController._pendingPullIntos.length>0&&Cy(Y._readableStreamController,0)),L&&H||f(void 0)},_errorSteps:()=>{l=!1}})}function O(){if(l)return d=!0,Tt(void 0);l=!0;const j=WE(o._readableStreamController);return j===null?E():R(j._view,!1),Tt(void 0)}function C(){if(l)return m=!0,Tt(void 0);l=!0;const j=WE(u._readableStreamController);return j===null?E():R(j._view,!0),Tt(void 0)}function I(j){if(y=!0,n=j,b){const q=sp([n,i]),U=Fo(r,q);f(U)}return w}function P(j){if(b=!0,i=j,y){const q=sp([n,i]),U=Fo(r,q);f(U)}return w}function D(){}return o=KU(D,O,I),u=KU(D,C,P),S(p),[o,u]})(t):(function(r){const n=Qf(r);let i,o,u,f,p,l=!1,d=!1,m=!1,y=!1;const b=xr(O=>{p=O});function w(){return l?(d=!0,Tt(void 0)):(l=!0,Np(n,{_chunkSteps:O=>{Xl(()=>{d=!1;const C=O,I=O;m||ld(u._readableStreamController,C),y||ld(f._readableStreamController,I),l=!1,d&&w()})},_closeSteps:()=>{l=!1,m||uc(u._readableStreamController),y||uc(f._readableStreamController),m&&y||p(void 0)},_errorSteps:()=>{l=!1}}),Tt(void 0))}function S(O){if(m=!0,i=O,y){const C=sp([i,o]),I=Fo(r,C);p(I)}return b}function E(O){if(y=!0,o=O,m){const C=sp([i,o]),I=Fo(r,C);p(I)}return b}function R(){}return u=jp(R,w,S),f=jp(R,w,E),$E(n._closedPromise,O=>(Wo(u._readableStreamController,O),Wo(f._readableStreamController,O),m&&y||p(void 0),null)),[u,f]})(t)}function SQ(t){return Br(e=t)&&e.getReader!==void 0?(function(r){let n;function i(){let u;try{u=r.read()}catch(f){return Me(f)}return ys(u,f=>{if(!Br(f))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(f.done)uc(n._readableStreamController);else{const p=f.value;ld(n._readableStreamController,p)}})}function o(u){try{return Tt(r.cancel(u))}catch(f){return Me(f)}}return n=jp(xp,i,o,0),n})(t.getReader()):(function(r){let n;const i=Ik(r,"async");function o(){let f;try{f=xk(i)}catch(p){return Me(p)}return ys(Tt(f),p=>{if(!Br(p))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(p.done)uc(n._readableStreamController);else{const l=p.value;ld(n._readableStreamController,l)}})}function u(f){const p=i.iterator;let l;try{l=up(p,"return")}catch(d){return Me(d)}return l===void 0?Tt(void 0):ys(ws(l,p,[f]),d=>{if(!Br(d))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return n=jp(xp,o,u,0),n})(t);var e}function EQ(t,e,r){return bo(t,r),n=>ws(t,e,[n])}function TQ(t,e,r){return bo(t,r),n=>ws(t,e,[n])}function AQ(t,e,r){return bo(t,r),n=>ic(t,e,[n])}function OQ(t,e){if((t=`${t}`)!="bytes")throw new TypeError(`${e} '${t}' is not a valid enumeration value for ReadableStreamType`);return t}function YU(t,e){ms(t,e);const r=t?.preventAbort,n=t?.preventCancel,i=t?.preventClose,o=t?.signal;return o!==void 0&&(function(u,f){if(!(function(p){if(typeof p!="object"||p===null)return!1;try{return typeof p.aborted=="boolean"}catch{return!1}})(u))throw new TypeError(`${f} is not an AbortSignal.`)})(o,`${e} has member 'signal' that`),{preventAbort:!!r,preventCancel:!!n,preventClose:!!i,signal:o}}Object.defineProperties(yu.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),Et(yu.prototype.close,"close"),Et(yu.prototype.enqueue,"enqueue"),Et(yu.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(yu.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});let mn=class{constructor(e={},r={}){e===void 0?e=null:Sk(e,"First parameter");const n=ig(r,"Second parameter"),i=(function(o,u){ms(o,u);const f=o,p=f?.autoAllocateChunkSize,l=f?.cancel,d=f?.pull,m=f?.start,y=f?.type;return{autoAllocateChunkSize:p===void 0?void 0:AT(p,`${u} has member 'autoAllocateChunkSize' that`),cancel:l===void 0?void 0:EQ(l,f,`${u} has member 'cancel' that`),pull:d===void 0?void 0:TQ(d,f,`${u} has member 'pull' that`),start:m===void 0?void 0:AQ(m,f,`${u} has member 'start' that`),type:y===void 0?void 0:OQ(y,`${u} has member 'type' that`)}})(e,"First parameter");if(kT(this),i.type==="bytes"){if(n.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");(function(o,u,f){const p=Object.create(vu.prototype);let l,d,m;l=u.start!==void 0?()=>u.start(p):()=>{},d=u.pull!==void 0?()=>u.pull(p):()=>Tt(void 0),m=u.cancel!==void 0?b=>u.cancel(b):()=>Tt(void 0);const y=u.autoAllocateChunkSize;if(y===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Wk(o,p,l,d,m,f,y)})(this,i,Pp(n,0))}else{const o=ng(n);(function(u,f,p,l){const d=Object.create(yu.prototype);let m,y,b;m=f.start!==void 0?()=>f.start(d):()=>{},y=f.pull!==void 0?()=>f.pull(d):()=>Tt(void 0),b=f.cancel!==void 0?w=>f.cancel(w):()=>Tt(void 0),h3(u,d,m,y,b,p,l)})(this,i,Pp(n,1),o)}}get locked(){if(!uu(this))throw Rl("locked");return Ou(this)}cancel(e=void 0){return uu(this)?Ou(this)?Me(new TypeError("Cannot cancel a stream that already has a reader")):Fo(this,e):Me(Rl("cancel"))}getReader(e=void 0){if(!uu(this))throw Rl("getReader");return(function(r,n){ms(r,n);const i=r?.mode;return{mode:i===void 0?void 0:hQ(i,`${n} has member 'mode' that`)}})(e,"First parameter").mode===void 0?Qf(this):Vk(this)}pipeThrough(e,r={}){if(!uu(this))throw Rl("pipeThrough");oc(e,1,"pipeThrough");const n=(function(o,u){ms(o,u);const f=o?.readable;kU(f,"readable","ReadableWritablePair"),OT(f,`${u} has member 'readable' that`);const p=o?.writable;return kU(p,"writable","ReadableWritablePair"),Jk(p,`${u} has member 'writable' that`),{readable:f,writable:p}})(e,"First parameter"),i=YU(r,"Second parameter");if(Ou(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Xf(n.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return Td(VU(this,n.writable,i.preventClose,i.preventAbort,i.preventCancel,i.signal)),n.readable}pipeTo(e,r={}){if(!uu(this))return Me(Rl("pipeTo"));if(e===void 0)return Me("Parameter 1 is required in 'pipeTo'.");if(!Lf(e))return Me(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let n;try{n=YU(r,"Second parameter")}catch(i){return Me(i)}return Ou(this)?Me(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Xf(e)?Me(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):VU(this,e,n.preventClose,n.preventAbort,n.preventCancel,n.signal)}tee(){if(!uu(this))throw Rl("tee");return sp(wQ(this))}values(e=void 0){if(!uu(this))throw Rl("values");return(function(r,n){const i=Qf(r),o=new Nk(i,n),u=Object.create(Pk);return u._asyncIteratorImpl=o,u})(this,(function(r,n){return ms(r,n),{preventCancel:!!r?.preventCancel}})(e,"First parameter").preventCancel)}[Jp](e){return this.values(e)}static from(e){return SQ(e)}};function jp(t,e,r,n=1,i=()=>1){const o=Object.create(mn.prototype);return kT(o),h3(o,Object.create(yu.prototype),t,e,r,n,i),o}function KU(t,e,r){const n=Object.create(mn.prototype);return kT(n),Wk(n,Object.create(vu.prototype),t,e,r,0,void 0),n}function kT(t){t._state="readable",t._reader=void 0,t._storedError=void 0,t._disturbed=!1}function uu(t){return!!Br(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")&&t instanceof mn}function Ou(t){return t._reader!==void 0}function Fo(t,e){if(t._disturbed=!0,t._state==="closed")return Tt(void 0);if(t._state==="errored")return Me(t._storedError);Xp(t);const r=t._reader;if(r!==void 0&&Hl(r)){const n=r._readIntoRequests;r._readIntoRequests=new go,n.forEach(i=>{i._closeSteps(void 0)})}return ys(t._readableStreamController[_T](e),xp)}function Xp(t){t._state="closed";const e=t._reader;if(e!==void 0&&(wk(e),Au(e))){const r=e._readRequests;e._readRequests=new go,r.forEach(n=>{n._closeSteps()})}}function p3(t,e){t._state="errored",t._storedError=e;const r=t._reader;r!==void 0&&(TT(r,e),Au(r)?Ok(r,e):Qk(r,e))}function Rl(t){return new TypeError(`ReadableStream.prototype.${t} can only be used on a ReadableStream`)}Object.defineProperties(mn,{from:{enumerable:!0}}),Object.defineProperties(mn.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),Et(mn.from,"from"),Et(mn.prototype.cancel,"cancel"),Et(mn.prototype.getReader,"getReader"),Et(mn.prototype.pipeThrough,"pipeThrough"),Et(mn.prototype.pipeTo,"pipeTo"),Et(mn.prototype.tee,"tee"),Et(mn.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(mn.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(mn.prototype,Jp,{value:mn.prototype.values,writable:!0,configurable:!0});const RQ=t=>t.byteLength;Et(RQ,"size");const CQ=()=>1;Et(CQ,"size");function IQ(t,e,r){return bo(t,r),n=>ws(t,e,[n])}function xQ(t,e,r){return bo(t,r),n=>ic(t,e,[n])}function NQ(t,e,r){return bo(t,r),(n,i)=>ws(t,e,[n,i])}function PQ(t,e,r){return bo(t,r),n=>ws(t,e,[n])}let ug=class{constructor(e={},r={},n={}){e===void 0&&(e=null);const i=ig(r,"Second parameter"),o=ig(n,"Third parameter"),u=(function(y,b){ms(y,b);const w=y?.cancel,S=y?.flush,E=y?.readableType,R=y?.start,O=y?.transform,C=y?.writableType;return{cancel:w===void 0?void 0:PQ(w,y,`${b} has member 'cancel' that`),flush:S===void 0?void 0:IQ(S,y,`${b} has member 'flush' that`),readableType:E,start:R===void 0?void 0:xQ(R,y,`${b} has member 'start' that`),transform:O===void 0?void 0:NQ(O,y,`${b} has member 'transform' that`),writableType:C}})(e,"First parameter");if(u.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(u.writableType!==void 0)throw new RangeError("Invalid writableType specified");const f=Pp(o,0),p=ng(o),l=Pp(i,1),d=ng(i);let m;(function(y,b,w,S,E,R){function O(){return b}function C(q){return(function(U,Y){const $=U._transformStreamController;return U._backpressure?ys(U._backpressureChangePromise,()=>{const L=U._writable;if(L._state==="erroring")throw L._storedError;return JU($,Y)}):JU($,Y)})(y,q)}function I(q){return(function(U,Y){const $=U._transformStreamController;if($._finishPromise!==void 0)return $._finishPromise;const L=U._readable;$._finishPromise=xr((Q,ce)=>{$._finishPromise_resolve=Q,$._finishPromise_reject=ce});const H=$._cancelAlgorithm(Y);return Ny($),di(H,()=>(L._state==="errored"?Sf($,L._storedError):(Wo(L._readableStreamController,Y),H1($)),null),Q=>(Wo(L._readableStreamController,Q),Sf($,Q),null)),$._finishPromise})(y,q)}function P(){return(function(q){const U=q._transformStreamController;if(U._finishPromise!==void 0)return U._finishPromise;const Y=q._readable;U._finishPromise=xr((L,H)=>{U._finishPromise_resolve=L,U._finishPromise_reject=H});const $=U._flushAlgorithm();return Ny(U),di($,()=>(Y._state==="errored"?Sf(U,Y._storedError):(uc(Y._readableStreamController),H1(U)),null),L=>(Wo(Y._readableStreamController,L),Sf(U,L),null)),U._finishPromise})(y)}function D(){return(function(q){return lg(q,!1),q._backpressureChangePromise})(y)}function j(q){return(function(U,Y){const $=U._transformStreamController;if($._finishPromise!==void 0)return $._finishPromise;const L=U._writable;$._finishPromise=xr((Q,ce)=>{$._finishPromise_resolve=Q,$._finishPromise_reject=ce});const H=$._cancelAlgorithm(Y);return Ny($),di(H,()=>(L._state==="errored"?Sf($,L._storedError):(qp(L._writableStreamController,Y),KE(U),H1($)),null),Q=>(qp(L._writableStreamController,Q),KE(U),Sf($,Q),null)),$._finishPromise})(y,q)}y._writable=(function(q,U,Y,$,L=1,H=()=>1){const Q=Object.create(kl.prototype);return Zk(Q),a3(Q,Object.create(Up.prototype),q,U,Y,$,L,H),Q})(O,C,P,I,w,S),y._readable=jp(O,D,j,E,R),y._backpressure=void 0,y._backpressureChangePromise=void 0,y._backpressureChangePromise_resolve=void 0,lg(y,!0),y._transformStreamController=void 0})(this,xr(y=>{m=y}),l,d,f,p),(function(y,b){const w=Object.create(Ml.prototype);let S,E,R;S=b.transform!==void 0?O=>b.transform(O,w):O=>{try{return v3(w,O),Tt(void 0)}catch(C){return Me(C)}},E=b.flush!==void 0?()=>b.flush(w):()=>Tt(void 0),R=b.cancel!==void 0?O=>b.cancel(O):()=>Tt(void 0),(function(O,C,I,P,D){C._controlledTransformStream=O,O._transformStreamController=C,C._transformAlgorithm=I,C._flushAlgorithm=P,C._cancelAlgorithm=D,C._finishPromise=void 0,C._finishPromise_resolve=void 0,C._finishPromise_reject=void 0})(y,w,S,E,R)})(this,u),u.start!==void 0?m(u.start(this._transformStreamController)):m(void 0)}get readable(){if(!QU(this))throw XU("readable");return this._readable}get writable(){if(!QU(this))throw XU("writable");return this._writable}};function QU(t){return!!Br(t)&&!!Object.prototype.hasOwnProperty.call(t,"_transformStreamController")&&t instanceof ug}function m3(t,e){Wo(t._readable._readableStreamController,e),MT(t,e)}function MT(t,e){Ny(t._transformStreamController),qp(t._writable._writableStreamController,e),KE(t)}function KE(t){t._backpressure&&lg(t,!1)}function lg(t,e){t._backpressureChangePromise!==void 0&&t._backpressureChangePromise_resolve(),t._backpressureChangePromise=xr(r=>{t._backpressureChangePromise_resolve=r}),t._backpressure=e}Object.defineProperties(ug.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ug.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});class Ml{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Zv(this))throw ey("desiredSize");return LT(this._controlledTransformStream._readable._readableStreamController)}enqueue(e=void 0){if(!Zv(this))throw ey("enqueue");v3(this,e)}error(e=void 0){if(!Zv(this))throw ey("error");var r;r=e,m3(this._controlledTransformStream,r)}terminate(){if(!Zv(this))throw ey("terminate");(function(e){const r=e._controlledTransformStream;uc(r._readable._readableStreamController);const n=new TypeError("TransformStream terminated");MT(r,n)})(this)}}function Zv(t){return!!Br(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")&&t instanceof Ml}function Ny(t){t._transformAlgorithm=void 0,t._flushAlgorithm=void 0,t._cancelAlgorithm=void 0}function v3(t,e){const r=t._controlledTransformStream,n=r._readable._readableStreamController;if(!cd(n))throw new TypeError("Readable side is not in a state that permits enqueue");try{ld(n,e)}catch(o){throw MT(r,o),r._readable._storedError}(function(o){return!d3(o)})(n)!==r._backpressure&&lg(r,!0)}function JU(t,e){return ys(t._transformAlgorithm(e),void 0,r=>{throw m3(t._controlledTransformStream,r),r})}function ey(t){return new TypeError(`TransformStreamDefaultController.prototype.${t} can only be used on a TransformStreamDefaultController`)}function H1(t){t._finishPromise_resolve!==void 0&&(t._finishPromise_resolve(),t._finishPromise_resolve=void 0,t._finishPromise_reject=void 0)}function Sf(t,e){t._finishPromise_reject!==void 0&&(Td(t._finishPromise),t._finishPromise_reject(e),t._finishPromise_resolve=void 0,t._finishPromise_reject=void 0)}function XU(t){return new TypeError(`TransformStream.prototype.${t} can only be used on a TransformStream`)}Object.defineProperties(Ml.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),Et(Ml.prototype.enqueue,"enqueue"),Et(Ml.prototype.error,"error"),Et(Ml.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ml.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});var QE=function(t,e){return QE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},QE(t,e)};function y3(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");QE(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function fd(t){if(!t)throw new TypeError("Assertion failed")}function UQ(){}function qQ(t){return typeof t=="object"&&t!==null||typeof t=="function"}function DQ(t){if(typeof t!="function")return!1;var e=!1;try{new t({start:function(){e=!0}})}catch{}return e}function g3(t){return!(!qQ(t)||typeof t.getReader!="function")}function jQ(t){return!(!DQ(t)||!g3(new t))}function b3(t){try{var e=t.getReader({mode:"byob"});return e.releaseLock(),!0}catch{return!1}}function LQ(t){try{return new t({type:"bytes"}),!0}catch{return!1}}function kQ(t){fd(jQ(t));var e=LQ(t);return function(r,n){var i=n===void 0?{}:n,o=i.type;if(o=_3(o),o==="bytes"&&!e&&(o=void 0),r.constructor===t&&(o!=="bytes"||b3(r)))return r;if(o==="bytes"){var u=ZU(r,{type:o});return new t(u)}else{var u=ZU(r);return new t(u)}}}function ZU(t,e){var r=e===void 0?{}:e,n=r.type;fd(g3(t)),fd(t.locked===!1),n=_3(n);var i;return n==="bytes"?i=new zQ(t):i=new MQ(t),i}function _3(t){var e=String(t);if(e==="bytes")return e;if(t===void 0)return t;throw new RangeError("Invalid type is specified")}var w3=(function(){function t(e){this._underlyingReader=void 0,this._readerMode=void 0,this._readableStreamController=void 0,this._pendingRead=void 0,this._underlyingStream=e,this._attachDefaultReader()}return t.prototype.start=function(e){this._readableStreamController=e},t.prototype.cancel=function(e){return fd(this._underlyingReader!==void 0),this._underlyingReader.cancel(e)},t.prototype._attachDefaultReader=function(){if(this._readerMode!=="default"){this._detachReader();var e=this._underlyingStream.getReader();this._readerMode="default",this._attachReader(e)}},t.prototype._attachReader=function(e){var r=this;fd(this._underlyingReader===void 0),this._underlyingReader=e;var n=this._underlyingReader.closed;n&&n.then(function(){return r._finishPendingRead()}).then(function(){e===r._underlyingReader&&r._readableStreamController.close()},function(i){e===r._underlyingReader&&r._readableStreamController.error(i)}).catch(UQ)},t.prototype._detachReader=function(){this._underlyingReader!==void 0&&(this._underlyingReader.releaseLock(),this._underlyingReader=void 0,this._readerMode=void 0)},t.prototype._pullWithDefaultReader=function(){var e=this;this._attachDefaultReader();var r=this._underlyingReader.read().then(function(n){var i=e._readableStreamController;n.done?e._tryClose():i.enqueue(n.value)});return this._setPendingRead(r),r},t.prototype._tryClose=function(){try{this._readableStreamController.close()}catch{}},t.prototype._setPendingRead=function(e){var r=this,n,i=function(){r._pendingRead===n&&(r._pendingRead=void 0)};this._pendingRead=n=e.then(i,i)},t.prototype._finishPendingRead=function(){var e=this;if(this._pendingRead){var r=function(){return e._finishPendingRead()};return this._pendingRead.then(r,r)}},t})(),MQ=(function(t){y3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.pull=function(){return this._pullWithDefaultReader()},e})(w3);function eq(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}function BQ(t,e){var r=eq(t),n=eq(e);n.set(r,0)}var zQ=(function(t){y3(e,t);function e(r){var n=this,i=b3(r);return n=t.call(this,r)||this,n._supportsByob=i,n}return Object.defineProperty(e.prototype,"type",{get:function(){return"bytes"},enumerable:!1,configurable:!0}),e.prototype._attachByobReader=function(){if(this._readerMode!=="byob"){fd(this._supportsByob),this._detachReader();var r=this._underlyingStream.getReader({mode:"byob"});this._readerMode="byob",this._attachReader(r)}},e.prototype.pull=function(){if(this._supportsByob){var r=this._readableStreamController.byobRequest;if(r)return this._pullWithByobRequest(r)}return this._pullWithDefaultReader()},e.prototype._pullWithByobRequest=function(r){var n=this;this._attachByobReader();var i=new Uint8Array(r.view.byteLength),o=this._underlyingReader.read(i).then(function(u){n._readableStreamController,u.done?(n._tryClose(),r.respond(0)):(BQ(u.value,r.view),r.respond(u.value.byteLength))});return this._setPendingRead(o),o},e})(w3);function $Q(t){var e,r,n,i,o,u,f;return p(),{feed:l,reset:p};function p(){e=!0,r="",n=0,i=-1,o=void 0,u=void 0,f=""}function l(m){r=r?r+m:m,e&&FQ(r)&&(r=r.slice(S3.length)),e=!1;for(var y=r.length,b=0,w=!1;b<y;){w&&(r[b]===`
`&&(b+=1),w=!1);for(var S=-1,E=i,R=void 0,O=n;S<0&&O<y;O++)R=r[O],R===":"&&E<0?E=O-b:R==="\r"?(w=!0,S=O-b):R===`
`&&(S=O-b);if(S<0){n=y-b,i=E;break}else n=0,i=-1;d(r,b,E,S),b+=S+1}b===y?r="":b>0&&(r=r.slice(b))}function d(m,y,b,w){if(w===0){f.length>0&&(t({type:"event",id:o,event:u||void 0,data:f.slice(0,-1)}),f="",o=void 0),u=void 0;return}var S=b<0,E=m.slice(y,y+(S?w:b)),R=0;S?R=w:m[y+b+1]===" "?R=b+2:R=b+1;var O=y+R,C=w-R,I=m.slice(O,O+C).toString();if(E==="data")f+=I?"".concat(I,`
`):`
`;else if(E==="event")u=I;else if(E==="id"&&!I.includes("\0"))o=I;else if(E==="retry"){var P=parseInt(I,10);Number.isNaN(P)||t({type:"reconnect-interval",value:P})}}}var S3=[239,187,191];function FQ(t){return S3.every(function(e,r){return t.charCodeAt(r)===e})}var Py={exports:{}},HQ=Py.exports,tq;function GQ(){return tq||(tq=1,(function(t,e){(function(r,n){t.exports=n()})(HQ,function(){var r=typeof Rf<"u"?Rf:self;if(typeof r.TextEncoder<"u"&&typeof r.TextDecoder<"u")return{TextEncoder:r.TextEncoder,TextDecoder:r.TextDecoder};var n=["utf8","utf-8","unicode-1-1-utf-8"],i=function(u){if(n.indexOf(u)<0&&typeof u<"u"&&u!==null)throw new RangeError("Invalid encoding type. Only utf-8 is supported");this.encoding="utf-8",this.encode=function(f){if(typeof f!="string")throw new TypeError("passed argument must be of type string");var p=unescape(encodeURIComponent(f)),l=new Uint8Array(p.length);return p.split("").forEach(function(d,m){l[m]=d.charCodeAt(0)}),l}},o=function(u,f){if(n.indexOf(u)<0&&typeof u<"u"&&u!==null)throw new RangeError("Invalid encoding type. Only utf-8 is supported");if(this.encoding="utf-8",this.ignoreBOM=!1,this.fatal=typeof f<"u"&&"fatal"in f?f.fatal:!1,typeof this.fatal!="boolean")throw new TypeError("fatal flag must be boolean");this.decode=function(p,l){if(typeof p>"u")return"";var d=typeof l<"u"&&"stream"in l?l.stream:!1;if(typeof d!="boolean")throw new TypeError("stream option must be boolean");if(ArrayBuffer.isView(p)){var m=new Uint8Array(p.buffer,p.byteOffset,p.byteLength),y=new Array(m.length);return m.forEach(function(b,w){y[w]=String.fromCharCode(b)}),decodeURIComponent(escape(y.join("")))}else throw new TypeError("passed argument must be an array buffer view")}};return{TextEncoder:i,TextDecoder:o}})})(Py)),Py.exports}var WQ=GQ(),E3=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},T3=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},VQ=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(u){return new Promise(function(f,p){u=t[o](u),i(f,p,u.done,u.value)})}}function i(o,u,f,p){Promise.resolve(p).then(function(l){o({value:l,done:f})},u)}},YQ=mn,Nr=ug,A3=function(){var t;return new Nr({start:function(e){t=$Q(function(r){r.type==="event"&&e.enqueue(r)})},transform:function(e){t.feed(e)}})},Di=kQ(YQ),BT=(function(){function t(e,r){e===void 0&&(e="utf-8"),r===void 0&&(r={});var n=this;this.transform=new Nr({transform:function(i,o){var u=n.handle.decode(new Uint8Array(i),{stream:!0});u&&o.enqueue(u)},flush:function(i){var o=n.handle.decode();o&&i.enqueue(o),i.terminate()}}),this.handle=new WQ.TextDecoder(e,r)}return Object.defineProperty(t.prototype,"encoding",{get:function(){return this.handle.encoding},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fatal",{get:function(){return this.handle.fatal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ignoreBOM",{get:function(){return this.handle.ignoreBOM},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readable",{get:function(){return this.transform.readable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"writable",{get:function(){return this.transform.writable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return"TextDecoderStream"},enumerable:!1,configurable:!0}),t})();function rr(t){var e=t;return e[Symbol.asyncIterator]=function(){var r=t.getReader();return{next:function(){return E3(this,void 0,void 0,function(){var n,i,o;return T3(this,function(u){switch(u.label){case 0:return[4,r.read()];case 1:return n=u.sent(),i=n.done,o=n.value,[2,i?{done:!0,value:void 0}:{done:!1,value:o}]}})})}}},e}function Ko(t){return rr(t.pipeThrough(new BT).pipeThrough(A3()).pipeThrough(new Nr({transform:function(e,r){try{var n=JSON.parse(e.data);r.enqueue(n)}catch(i){e.data!=="[DONE]"?console.warn("Error when transforming event source data to json",i,e):r.terminate()}}})))}function KQ(t){return rr(Di(t).pipeThrough(new BT))}function QQ(t){var e,r,n,i;return E3(this,void 0,void 0,function(){var o,u,f,p,l,d,m;return T3(this,function(y){switch(y.label){case 0:o=KQ(t),u="",y.label=1;case 1:y.trys.push([1,6,7,12]),f=!0,p=VQ(o),y.label=2;case 2:return[4,p.next()];case 3:if(l=y.sent(),e=l.done,!!e)return[3,5];i=l.value,f=!1;try{d=i,u+=d}finally{f=!0}y.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return m=y.sent(),r={error:m},[3,12];case 7:return y.trys.push([7,,10,11]),!f&&!e&&(n=p.return)?[4,n.call(p)]:[3,9];case 8:y.sent(),y.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:return[2,JSON.parse(u)]}})})}function rq(){var t,e,r=new Promise(function(n,i){t=n,e=i});return{promise:r,res:t,rej:e}}function _o(t){var e;return t.role==="assistant"&&"tool_calls"in t&&((e=t.tool_calls)===null||e===void 0?void 0:e[0])!=null}function JQ(t){return{type:"function",function:{description:t.description,name:t.name,parameters:t.parameters}}}var du=function(){return du=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},du.apply(this,arguments)},Do=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},jo=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},ty=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},XQ=(function(){function t(e,r){this.baseUrl=r;var n=arguments[2];typeof n=="string"?this.req=function(i){var o=i.headers,u=o===void 0?{}:o,f=ty(i,["headers"]);return e(du(du({},f),{headers:du(du({},u),{Authorization:"Bearer ".concat(n)})}))}:this.req=e}return t.prototype.list=function(e,r){return this.req({method:"get",url:this.join("bots"),data:e,timeout:r?.timeout})},t.prototype.create=function(e,r){var n=e.botInfo;return this.req({method:"post",url:this.join("bots"),data:n,timeout:r?.timeout})},t.prototype.get=function(e,r){var n=e.botId;return this.req({method:"get",url:this.join("bots/".concat(n)),timeout:r?.timeout})},t.prototype.update=function(e,r){var n=e.botId,i=e.botInfo;return this.req({method:"PATCH",url:this.join("bots/".concat(n)),data:i,timeout:r?.timeout})},t.prototype.delete=function(e,r){var n=e.botId;return this.req({method:"delete",url:this.join("bots/".concat(n)),timeout:r?.timeout})},t.prototype.getChatRecords=function(e,r){return this.req({method:"get",url:this.join("bots/".concat(e.botId,"/records")),data:e,timeout:r?.timeout})},t.prototype.sendFeedback=function(e,r){var n=e.userFeedback;return this.req({method:"post",url:this.join("bots/".concat(n.botId,"/feedback")),data:n,timeout:r?.timeout})},t.prototype.getFeedback=function(e,r){return this.req({method:"get",url:this.join("bots/".concat(e.botId,"/feedback")),data:e,timeout:r?.timeout})},t.prototype.uploadFiles=function(e,r){return Do(this,void 0,void 0,function(){return jo(this,function(n){return[2,this.req({method:"post",url:this.join("bots/".concat(e.botId,"/files")),data:e,timeout:r?.timeout})]})})},t.prototype.createConversation=function(e,r){var n=e.botId,i=ty(e,["botId"]);return Do(this,void 0,void 0,function(){return jo(this,function(o){return[2,this.req({method:"post",url:this.join("bots/".concat(n,"/conversation")),data:i,timeout:r?.timeout})]})})},t.prototype.getConversation=function(e,r){var n=e.pageSize,i=n===void 0?10:n,o=e.pageNumber,u=o===void 0?1:o,f=e.botId,p=ty(e,["pageSize","pageNumber","botId"]);return Do(this,void 0,void 0,function(){var l,d;return jo(this,function(m){if(u<1)throw new Error("pageNumber must be greater than 0");return l=i*(u-1),d=i,[2,this.req({method:"get",url:this.join("bots/".concat(f,"/conversation")),data:du(du({},p),{offset:l,limit:d}),timeout:r?.timeout})]})})},t.prototype.deleteConversation=function(e,r){var n=e.botId,i=e.conversationId,o=ty(e,["botId","conversationId"]);return Do(this,void 0,void 0,function(){return jo(this,function(u){return[2,this.req({method:"delete",url:this.join("bots/".concat(n,"/conversation/").concat(i)),data:o,timeout:r?.timeout})]})})},t.prototype.speechToText=function(e,r){return Do(this,void 0,void 0,function(){return jo(this,function(n){return[2,this.req({method:"post",url:this.join("bots/".concat(e.botId,"/speech-to-text")),data:e,timeout:r?.timeout})]})})},t.prototype.textToSpeech=function(e,r){return Do(this,void 0,void 0,function(){return jo(this,function(n){return[2,this.req({method:"post",url:this.join("bots/".concat(e.botId,"/text-to-speech")),data:e,timeout:r?.timeout})]})})},t.prototype.getTextToSpeechResult=function(e,r){return Do(this,void 0,void 0,function(){return jo(this,function(n){return[2,this.req({method:"get",url:this.join("bots/".concat(e.botId,"/text-to-speech")),data:e,timeout:r?.timeout})]})})},t.prototype.getRecommendQuestions=function(e,r){return Do(this,void 0,void 0,function(){var n;return jo(this,function(i){switch(i.label){case 0:return[4,this.req({method:"post",url:this.join("bots/".concat(e.botId,"/recommend-questions")),data:e,stream:!0,timeout:r?.timeout})];case 1:return n=i.sent(),[2,new ry(n)]}})})},t.prototype.generateBot=function(e,r){return Do(this,void 0,void 0,function(){var n;return jo(this,function(i){switch(i.label){case 0:return[4,this.req({method:"post",url:this.join("generate-bot"),data:e,stream:!0,timeout:r?.timeout})];case 1:return n=i.sent(),[2,new ry(n)]}})})},t.prototype.getPreview=function(e,r){return Do(this,void 0,void 0,function(){var n;return jo(this,function(i){switch(i.label){case 0:return[4,this.req({method:"post",url:this.join("preview"),data:e,stream:!0,timeout:r?.timeout})];case 1:return n=i.sent(),[2,new ry(n)]}})})},t.prototype.generateImage=function(e,r){return this.req({method:"post",url:this.join("generate-image"),data:e,timeout:r?.timeout})},t.prototype.sendMessage=function(e,r){return Do(this,void 0,void 0,function(){var n;return jo(this,function(i){switch(i.label){case 0:return[4,this.req({method:"post",url:this.join("bots/".concat(e.botId,"/send-message")),data:e,stream:!0,timeout:r?.timeout})];case 1:return n=i.sent(),[2,new ry(n)]}})})},t.prototype.join=function(e){return"".concat(this.baseUrl,"/").concat(e)},t})(),ry=(function(){function t(e){var r=Di(e);this._eventSourceStream=r.pipeThrough(new BT).pipeThrough(A3())}return Object.defineProperty(t.prototype,"teeedStream",{get:function(){var e=this._eventSourceStream.tee(),r=e[0],n=e[1];return this._eventSourceStream=n,r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"eventSourceStream",{get:function(){return rr(this.teeedStream)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataStream",{get:function(){return rr(this.eventSourceStream.pipeThrough(new Nr({transform:function(e,r){try{var n=JSON.parse(e.data);r.enqueue(n)}catch(i){e.data!=="[DONE]"?console.warn("Error when transforming event source data to json",i,e):r.terminate()}}})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textStream",{get:function(){return rr(this.dataStream.pipeThrough(new Nr({transform:function(e,r){var n;r.enqueue((n=e?.content)!==null&&n!==void 0?n:"")}})))},enumerable:!1,configurable:!0}),t})(),vn=function(){return vn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},vn.apply(this,arguments)},nq=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},iq=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function oq(t){var e=t.messages,r=t.model,n=t.temperature,i=t.tool_choice,o=t.tools,u=t.top_p,f=function(){return i&&i!=="auto"&&console.warn("`tool_choice` is not 'auto'"),i};return vn(vn({},t),{messages:e,model:r,temperature:n,tool_choice:f(),tools:o,top_p:u})}var O3=(function(){function t(e,r,n){this.req=e,this.baseUrl=r,this.subUrl="zhipu/api/paas/v4/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(t.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),t.prototype.doGenerate=function(e,r){return nq(this,void 0,void 0,function(){var n,i;return iq(this,function(o){switch(o.label){case 0:return n=oq(e),[4,this.req({url:this.url,data:vn(vn({},n),{stream:!1}),stream:!1,timeout:r?.timeout})];case 1:return i=o.sent(),[2,vn(vn({},i),{rawResponse:i})]}})})},t.prototype.doStream=function(e,r){return nq(this,void 0,void 0,function(){var n,i,o,u,f,p;return iq(this,function(l){switch(l.label){case 0:return n=oq(e),i=null,[4,this.req({url:this.url,data:vn(vn({},n),{stream:!0}),stream:!0,timeout:r?.timeout})];case 1:return o=l.sent(),u=Di(o),f=Ko(u),p=f.pipeThrough(new Nr({transform:function(d,m){var y=d.choices.map(function(w){var S=w.delta;return i==null&&(i=_o(S)),i?vn(vn({},w),{finish_reason:"tool_calls",delta:S}):w}),b=vn(vn({},d),{choices:y});m.enqueue(vn(vn({},b),{rawResponse:d}))}})),[2,rr(p)]}})})},t})(),cg=function(){return cg=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},cg.apply(this,arguments)};function lc(t){var e=t.messages,r=t.model,n=t.temperature,i=t.tool_choice,o=t.tools,u=t.top_p,f=function(){if(o)return o.forEach(function(l){l.type!=="function"&&console.warn("`type` in tool is not 'function'",l)}),o},p=function(){return e.forEach(function(l){"tool_calls"in l&&l.tool_calls.filter(function(d){return d.type!=="function"}).forEach(function(d){return console.warn("`type` in tool_call is not 'function'",d,l)})}),e};return cg(cg({},t),{messages:p(),model:r,tools:f(),top_p:u,tool_choice:i,temperature:n})}function fg(t){if(typeof t!="object"||t==null)return t;if(Array.isArray(t))return t.map(function(r){return fg(r)});return Object.entries(t).reduce(function(r,n){var i=n[0],o=n[1],u=e(i);return r[u]=typeof o=="object"?fg(o):o,r},{});function e(r){var n=r.replace(/[A-Z]/g,function(i){return"_".concat(i.toLowerCase())});return n.charAt(0)==="_"?n.slice(1):n}}var ei=function(){return ei=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ei.apply(this,arguments)},aq=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},sq=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},R3=(function(){function t(e,r,n){this.req=e,this.baseUrl=r,this.subUrl="hunyuan-beta/openapi/v1/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(t.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),t.prototype.doGenerate=function(e,r){return aq(this,void 0,void 0,function(){var n;return sq(this,function(i){switch(i.label){case 0:return[4,this.req({url:this.url,data:ei(ei({},lc(e)),{stream:!1}),stream:!1,timeout:r?.timeout})];case 1:return n=i.sent(),[2,ei(ei({},n),{rawResponse:n})]}})})},t.prototype.doStream=function(e,r){return aq(this,void 0,void 0,function(){var n,i,o,u,f;return sq(this,function(p){switch(p.label){case 0:return n=null,[4,this.req({url:this.url,data:ei(ei({},lc(e)),{stream:!0}),stream:!0,timeout:r?.timeout})];case 1:return i=p.sent(),o=Di(i),u=Ko(o),f=u.pipeThrough(new Nr({transform:function(l,d){var m=l.choices.map(function(b){var w=b.delta;return n==null&&(n=_o(w)),n?ei(ei({},b),{finish_reason:"tool_calls",delta:w}):b}),y=ei(ei({},l),{choices:m});d.enqueue(ei(ei({},y),{rawResponse:l}))}})),[2,rr(f)]}})})},t})(),ti=function(){return ti=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ti.apply(this,arguments)},uq=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},lq=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},C3=(function(){function t(e,r,n){this.req=e,this.baseUrl=r,this.subUrl="hunyuan",n!=null&&(this.subUrl=n)}return Object.defineProperty(t.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),t.prototype.doGenerate=function(e,r){return uq(this,void 0,void 0,function(){var n,i;return lq(this,function(o){switch(o.label){case 0:return[4,this.req({url:this.url,headers:{"X-Tc-Action":"ChatCompletions"},data:ti(ti({},lc(e)),{stream:!1}),stream:!1,timeout:r?.timeout})];case 1:return n=o.sent(),i=fg(n.Response),[2,ti(ti({},i),{rawResponse:n})]}})})},t.prototype.doStream=function(e,r){return uq(this,void 0,void 0,function(){var n,i,o,u,f;return lq(this,function(p){switch(p.label){case 0:return n=null,[4,this.req({url:this.url,headers:{"X-Tc-Action":"ChatCompletions"},data:ti(ti({},e),{stream:!0}),stream:!0,timeout:r?.timeout})];case 1:return i=p.sent(),o=Di(i),u=Ko(o),f=u.pipeThrough(new Nr({transform:function(l,d){var m=fg(l),y=m.choices.map(function(w){var S=w.delta;return n==null&&(n=_o(S)),n?ti(ti({},w),{finish_reason:"tool_calls",delta:S}):w}),b=ti(ti({},m),{choices:y});d.enqueue(ti(ti({},b),{rawResponse:l}))}})),[2,rr(f)]}})})},t})(),yn=function(){return yn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},yn.apply(this,arguments)},cq=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},fq=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function dq(t){var e=t.messages,r=t.model,n=t.temperature,i=t.tools,o=t.top_p;return yn(yn({},t),{messages:e,model:r,tools:i,top_p:o,temperature:n})}var I3=(function(){function t(e,r,n){this.req=e,this.baseUrl=r,this.subUrl="ark/api/v3/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(t.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),t.prototype.doGenerate=function(e,r){return cq(this,void 0,void 0,function(){var n;return fq(this,function(i){switch(i.label){case 0:return[4,this.req({url:this.url,data:yn(yn({},dq(e)),{stream:!1}),stream:!1,timeout:r?.timeout})];case 1:return n=i.sent(),[2,yn(yn({},n),{rawResponse:n})]}})})},t.prototype.doStream=function(e,r){return cq(this,void 0,void 0,function(){var n,i,o,u,f;return fq(this,function(p){switch(p.label){case 0:return n=null,[4,this.req({url:this.url,data:yn(yn({},dq(e)),{stream:!0}),stream:!0,timeout:r?.timeout})];case 1:return i=p.sent(),o=Di(i),u=Ko(o),f=u.pipeThrough(new Nr({transform:function(l,d){var m=l.choices.map(function(b){var w=b.delta;return n==null&&(n=_o(w)),n?yn(yn({},b),{finish_reason:"tool_calls",delta:w}):b}),y=yn(yn({},l),{choices:m});d.enqueue(yn(yn({},y),{rawResponse:l}))}})),[2,rr(f)]}})})},t})(),Yr=function(){return Yr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Yr.apply(this,arguments)},hq=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},pq=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function mq(t){var e=t.messages,r=t.model,n=t.temperature,i=t.tools,o=t.top_p;return Yr(Yr({},t),{messages:e,model:r,tools:i,top_p:o,temperature:n})}var x3=(function(){function t(e,r,n){this.req=e,this.baseUrl=r,this.subUrl="dashscope/compatible-mode/v1/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(t.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),t.prototype.doGenerate=function(e,r){return hq(this,void 0,void 0,function(){var n;return pq(this,function(i){switch(i.label){case 0:return[4,this.req({url:this.url,data:Yr(Yr({},mq(e)),{stream:!1}),stream:!1,timeout:r?.timeout})];case 1:return n=i.sent(),[2,Yr(Yr({},n),{rawResponse:n})]}})})},t.prototype.doStream=function(e,r){return hq(this,void 0,void 0,function(){var n,i,o,u,f;return pq(this,function(p){switch(p.label){case 0:return n=null,[4,this.req({url:this.url,data:Yr(Yr({},mq(e)),{stream:!0}),stream:!0,timeout:r?.timeout})];case 1:return i=p.sent(),o=Di(i),u=Ko(o),f=u.pipeThrough(new Nr({transform:function(l,d){var m=l.choices.map(function(b){var w=Object.assign(b.delta,{role:"assistant"});return n==null&&(n=_o(w)),n?Yr(Yr({},b),{finish_reason:"tool_calls",delta:w}):Yr(Yr({},b),{delta:w})}),y=Yr(Yr({},l),{choices:m});d.enqueue(Yr(Yr({},y),{rawResponse:l}))}})),[2,rr(f)]}})})},t})(),Kr=function(){return Kr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Kr.apply(this,arguments)},vq=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},yq=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function gq(t){var e=t.messages,r=t.model,n=t.temperature,i=t.tools,o=t.top_p;return Kr(Kr({},t),{messages:e,model:r,tools:i,top_p:o,temperature:n})}var N3=(function(){function t(e,r,n){this.req=e,this.baseUrl=r,this.subUrl="01-ai/v1/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(t.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),t.prototype.doGenerate=function(e,r){return vq(this,void 0,void 0,function(){var n;return yq(this,function(i){switch(i.label){case 0:return[4,this.req({url:this.url,data:Kr(Kr({},gq(e)),{stream:!1}),stream:!1,timeout:r?.timeout})];case 1:return n=i.sent(),[2,Kr(Kr({},n),{rawResponse:n})]}})})},t.prototype.doStream=function(e,r){return vq(this,void 0,void 0,function(){var n,i,o,u,f;return yq(this,function(p){switch(p.label){case 0:return n=null,[4,this.req({url:this.url,data:Kr(Kr({},gq(e)),{stream:!0}),stream:!0,timeout:r?.timeout})];case 1:return i=p.sent(),o=Di(i),u=Ko(o),f=u.pipeThrough(new Nr({transform:function(l,d){var m,y,b,w,S,E;if(!((b=(y=(m=l?.choices)===null||m===void 0?void 0:m[0])===null||y===void 0?void 0:y.delta)===null||b===void 0)&&b.content||!((E=(S=(w=l?.choices)===null||w===void 0?void 0:w[0])===null||S===void 0?void 0:S.delta)===null||E===void 0)&&E.tool_calls){var R=l.choices.map(function(C){var I=Object.assign(C.delta,{role:"assistant"});return n==null&&(n=_o(I)),n?Kr(Kr({},C),{finish_reason:"tool_calls",delta:I}):Kr(Kr({},C),{delta:I})}),O=Kr(Kr({},l),{choices:R});d.enqueue(Kr(Kr({},O),{rawResponse:l}))}}})),[2,rr(f)]}})})},t})(),gn=function(){return gn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},gn.apply(this,arguments)},bq=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},_q=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function wq(t){var e=t.messages,r=t.model,n=t.temperature,i=t.tools,o=t.top_p;return gn(gn({},t),{messages:e,model:r,tools:i,top_p:o,temperature:n})}var P3=(function(){function t(e,r,n){this.req=e,this.baseUrl=r,this.subUrl="moonshot/v1/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(t.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),t.prototype.doGenerate=function(e,r){return bq(this,void 0,void 0,function(){var n;return _q(this,function(i){switch(i.label){case 0:return[4,this.req({url:this.url,data:gn(gn({},wq(e)),{stream:!1}),stream:!1,timeout:r?.timeout})];case 1:return n=i.sent(),[2,gn(gn({},n),{rawResponse:n})]}})})},t.prototype.doStream=function(e,r){return bq(this,void 0,void 0,function(){var n,i,o,u,f;return _q(this,function(p){switch(p.label){case 0:return n=null,[4,this.req({url:this.url,data:gn(gn({},wq(e)),{stream:!0}),stream:!0,timeout:r?.timeout})];case 1:return i=p.sent(),o=Di(i),u=Ko(o),f=u.pipeThrough(new Nr({transform:function(l,d){var m=l.choices.map(function(b){var w=b.delta;return n==null&&(n=_o(w)),n?gn(gn({},b),{finish_reason:"tool_calls",delta:w}):b}),y=gn(gn({},l),{choices:m});d.enqueue(gn(gn({},y),{rawResponse:l}))}})),[2,rr(f)]}})})},t})(),ri=function(){return ri=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ri.apply(this,arguments)},Sq=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},Eq=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},U3=(function(){function t(e,r,n){this.req=e,this.baseUrl=r,this.subUrl="hunyuan-exp/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(t.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),t.prototype.doGenerate=function(e){return Sq(this,void 0,void 0,function(){var r;return Eq(this,function(n){switch(n.label){case 0:return[4,this.req({url:this.url,data:ri(ri({},lc(e)),{stream:!1}),stream:!1})];case 1:return r=n.sent(),[2,ri(ri({},r),{rawResponse:r})]}})})},t.prototype.doStream=function(e){return Sq(this,void 0,void 0,function(){var r,n,i,o,u;return Eq(this,function(f){switch(f.label){case 0:return r=null,[4,this.req({url:this.url,data:ri(ri({},lc(e)),{stream:!0}),stream:!0})];case 1:return n=f.sent(),i=Di(n),o=Ko(i),u=o.pipeThrough(new Nr({transform:function(p,l){var d=p.choices.map(function(y){var b=y.delta;return r==null&&(r=_o(b)),r?ri(ri({},y),{finish_reason:"tool_calls",delta:b}):y}),m=ri(ri({},p),{choices:d});l.enqueue(ri(ri({},m),{rawResponse:p}))}})),[2,rr(u)]}})})},t})(),ni=function(){return ni=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ni.apply(this,arguments)},Tq=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},Aq=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},q3=(function(){function t(e,r,n){this.req=e,this.baseUrl=r,this.subUrl="hunyuan-open/v1/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(t.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),t.prototype.doGenerate=function(e,r){return Tq(this,void 0,void 0,function(){var n;return Aq(this,function(i){switch(i.label){case 0:return[4,this.req({url:this.url,data:ni(ni({},lc(e)),{stream:!1}),stream:!1,timeout:r?.timeout})];case 1:return n=i.sent(),[2,ni(ni({},n),{rawResponse:n})]}})})},t.prototype.doStream=function(e,r){return Tq(this,void 0,void 0,function(){var n,i,o,u,f;return Aq(this,function(p){switch(p.label){case 0:return n=null,[4,this.req({url:this.url,data:ni(ni({},lc(e)),{stream:!0}),stream:!0,timeout:r?.timeout})];case 1:return i=p.sent(),o=Di(i),u=Ko(o),f=u.pipeThrough(new Nr({transform:function(l,d){var m=l.choices.map(function(b){var w=b.delta;return n==null&&(n=_o(w)),n?ni(ni({},b),{finish_reason:"tool_calls",delta:w}):b}),y=ni(ni({},l),{choices:m});d.enqueue(ni(ni({},y),{rawResponse:l}))}})),[2,rr(f)]}})})},t})(),ii=function(){return ii=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ii.apply(this,arguments)},Oq=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},Rq=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},ZQ=(function(){function t(e,r,n){this.req=e,this.baseUrl=r,this.subUrl="deepseek/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(t.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),t.prototype.doGenerate=function(e,r){return Oq(this,void 0,void 0,function(){var n;return Rq(this,function(i){switch(i.label){case 0:return[4,this.req({url:this.url,data:ii(ii({},e),{stream:!1}),stream:!1,timeout:r?.timeout})];case 1:return n=i.sent(),[2,ii(ii({},n),{rawResponse:n})]}})})},t.prototype.doStream=function(e,r){return Oq(this,void 0,void 0,function(){var n,i,o,u,f;return Rq(this,function(p){switch(p.label){case 0:return n=null,[4,this.req({url:this.url,data:ii(ii({},e),{stream:!0}),stream:!0,timeout:r?.timeout})];case 1:return i=p.sent(),o=Di(i),u=Ko(o),f=u.pipeThrough(new Nr({transform:function(l,d){var m=l.choices.map(function(b){var w=b.delta;return n==null&&(n=_o(w)),n?ii(ii({},b),{finish_reason:"tool_calls",delta:w}):b}),y=ii(ii({},l),{choices:m});d.enqueue(ii(ii({},y),{rawResponse:l}))}})),[2,rr(f)]}})})},t})(),oi=function(){return oi=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},oi.apply(this,arguments)},Cq=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},Iq=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},D3=(function(){function t(e,r,n){n===void 0&&(n=""),this.req=e,this.baseUrl=r,this.subUrl=n}return Object.defineProperty(t.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),t.prototype.doGenerate=function(e){return Cq(this,void 0,void 0,function(){var r;return Iq(this,function(n){switch(n.label){case 0:return[4,this.req({url:this.url,data:oi(oi({},e),{stream:!1}),stream:!1})];case 1:return r=n.sent(),[2,oi(oi({},r),{rawResponse:r})]}})})},t.prototype.doStream=function(e){return Cq(this,void 0,void 0,function(){var r,n,i,o,u;return Iq(this,function(f){switch(f.label){case 0:return r=null,[4,this.req({url:this.url,data:oi(oi({},e),{stream:!0}),stream:!0})];case 1:return n=f.sent(),i=Di(n),o=Ko(i),u=o.pipeThrough(new Nr({transform:function(p,l){var d=p.choices.map(function(y){var b=y.delta;return r==null&&(r=_o(b)),r?oi(oi({},y),{finish_reason:"tool_calls",delta:b}):y}),m=oi(oi({},p),{choices:d});l.enqueue(oi(oi({},m),{rawResponse:p}))}})),[2,rr(u)]}})})},t})(),eJ=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},tJ=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},j3=(function(){function t(e,r,n){this.req=e,this.baseUrl=r,this.provider=n,this.defaultGenerateImageSubUrl="images/generations",this.generateImageSubUrlConfig={"hunyuan-image":{"hunyuan-image-v3.0-v1.0.4":"images/ar/generations","hunyuan-image-v3.0-v1.0.1":"images/ar/generations"}},this.generateImage=this.generateImageImpl.bind(this)}return t.prototype.generateImageImpl=function(e){var r;return eJ(this,void 0,void 0,function(){var n,i,o;return tJ(this,function(u){switch(u.label){case 0:return n=this.defaultGenerateImageSubUrl,typeof e=="object"&&e&&"model"in e&&typeof e.model=="string"&&(i=(r=this.generateImageSubUrlConfig[this.provider])===null||r===void 0?void 0:r[e.model],i&&(n=i)),[4,this.req({url:this.getGenerateUrl(n),data:e,stream:!1})];case 1:return o=u.sent(),[2,o]}})})},t.prototype.getGenerateUrl=function(e){return"".concat(this.baseUrl,"/").concat(this.provider,"/").concat(e)},t})(),dg=function(){return dg=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},dg.apply(this,arguments)},JE=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},XE=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},rJ=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},nJ=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(u){return new Promise(function(f,p){u=t[o](u),i(f,p,u.done,u.value)})}}function i(o,u,f,p){Promise.resolve(p).then(function(l){o({value:l,done:f})},u)}},va=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};function xq(t){var e,r=t.onStepFinish,n=t.abortSignal,i=t.maxSteps,o=t.topP,u=t.toolChoice,f=rJ(t,["onStepFinish","abortSignal","maxSteps","topP","toolChoice"]);if(i!=null&&i<1)throw new Error("`maxSteps` muse be greater than 0.");return[{onStepFinish:r,abortSignal:n,maxSteps:i},dg(dg({},f),{tools:(e=f.tools)===null||e===void 0?void 0:e.map(function(p){return"fn"in p?JQ(p):p}),top_p:o??f.top_p,tool_choice:u??f.tool_choice})]}var L3=(function(){function t(e){this.model=e}return t.prototype.generateText=function(e,r){var n,i;return JE(this,void 0,void 0,function(){var o,u,f,p,l,d,m,y,b,w,S,E,R,O,C,I,P,D,j,q,U,Y=this;return XE(this,function($){switch($.label){case 0:return o=[],u={completion_tokens:0,prompt_tokens:0,total_tokens:0},f=xq(e),p=f[0],l=p.onStepFinish,d=p.maxSteps,m=d===void 0?10:d,y=f[1],b=function(){return Y.model.doGenerate(y,r)},[4,b()];case 1:w=$.sent(),S=1,w.rawResponse&&o.push(w.rawResponse),E=null,$.label=2;case 2:if(!(S<m&&(E=Nq(w))!=null))return[3,9];R=qq(w.usage),Hh(u,R),$.label=3;case 3:return $.trys.push([3,7,,8]),[4,Uq(E)];case 4:return O=$.sent(),C=w.choices[0],[4,l?.({finishReason:C.finish_reason,messages:y.messages.slice(),text:C.message.content,toolCall:E,toolResult:O,stepUsage:R,totalUsage:Object.assign({},u)})];case 5:return $.sent(),Pq(y.messages,C.message,O),[4,b()];case 6:return w=$.sent(),w.rawResponse&&o.push(w.rawResponse),S+=1,[3,8];case 7:return I=$.sent(),[2,{text:"",messages:y.messages,usage:u,error:I,rawResponses:o}];case 8:return[3,2];case 9:return P=(n=w?.choices)===null||n===void 0?void 0:n[0],D=P?.message,j=(i=D?.content)!==null&&i!==void 0?i:"",q=D?va(va([],y.messages,!0),[D],!1):y.messages,U=qq(w.usage),Hh(u,U),[4,l?.({finishReason:P.finish_reason,messages:q.slice(),text:j,toolCall:Nq(w),toolResult:null,stepUsage:U,totalUsage:Object.assign({},u)})];case 10:return $.sent(),[2,{text:j,messages:q,usage:u,rawResponses:o}]}})})},t.prototype.streamText=function(e,r){var n;return JE(this,void 0,void 0,function(){var i,o,u,f,p,l,d,m,y,b,w,S,E,R,O,C,I,P,D,j,q,U,Y,$,L,H,Q,ce,M,J,Z,Ae,Re,z,se,ae,fe=this;return XE(this,function(pe){switch(pe.label){case 0:return i={completion_tokens:0,prompt_tokens:0,total_tokens:0},o=xq(e),u=o[0],f=u.onStepFinish,p=u.maxSteps,l=p===void 0?10:p,d=o[1],m=function(){return fe.model.doStream(d,r)},[4,m()];case 1:y=pe.sent(),b=1,w=null,S=function(){var be=y.tee(),Se=be[0],Ie=be[1];return y=rr(Se),iJ(Ie)},pe.label=2;case 2:return E=b<l,E?[4,S()]:[3,4];case 3:E=(w=pe.sent())!=null,pe.label=4;case 4:if(!E)return[3,11];R=w.message,O=w.usage,Hh(i,O),C=(n=R.tool_calls)===null||n===void 0?void 0:n[0],pe.label=5;case 5:return pe.trys.push([5,9,,10]),[4,Uq(C)];case 6:return I=pe.sent(),[4,f?.({finishReason:"tool_calls",messages:d.messages.slice(),text:R.content,toolCall:C,toolResult:I,stepUsage:O,totalUsage:Object.assign({},i)})];case 7:return pe.sent(),Pq(d.messages,R,I),[4,m()];case 8:return y=pe.sent(),[3,10];case 9:return P=pe.sent(),D=y.tee(),j=D[0],q=D[1],[2,{messages:Promise.resolve(d.messages),dataStream:rr(j),textStream:rr(q.pipeThrough(new Nr({transform:function(be,Se){var Ie,$e,pt,Ot=(pt=($e=(Ie=be?.choices)===null||Ie===void 0?void 0:Ie[0])===null||$e===void 0?void 0:$e.delta)===null||pt===void 0?void 0:pt.content;typeof Ot=="string"&&Se.enqueue(Ot)}}))),usage:Promise.resolve(i),error:P}];case 10:return[3,2];case 11:return[4,S()];case 12:return w=pe.sent(),w?(U=w.message,Y=w.usage,Hh(i,Y),$=va(va([],d.messages,!0),[U],!1),f({messages:$.slice(),finishReason:"tool_call",stepUsage:Y,text:U.content,toolCall:U.tool_calls[0],totalUsage:Object.assign({},i)}),L=y.tee(),H=L[0],Q=L[1],[2,{messages:Promise.resolve(va(va([],d.messages,!0),[U],!1)),dataStream:rr(H),textStream:rr(Q.pipeThrough(new Nr({transform:function(be,Se){var Ie,$e,pt,Ot=(pt=($e=(Ie=be?.choices)===null||Ie===void 0?void 0:Ie[0])===null||$e===void 0?void 0:$e.delta)===null||pt===void 0?void 0:pt.content;typeof Ot=="string"&&Se.enqueue(Ot)}}))),usage:Promise.resolve(i)}]):(ce=rq(),M=rq(),J={role:"assistant",content:""},Z="",Ae={completion_tokens:0,prompt_tokens:0,total_tokens:0},Re=y.pipeThrough(new Nr({transform:function(be,Se){var Ie,$e,pt,Ot,Kt,Jr,Er,st,Pr=(pt=($e=(Ie=be?.choices)===null||Ie===void 0?void 0:Ie[0])===null||$e===void 0?void 0:$e.delta)===null||pt===void 0?void 0:pt.content;typeof Pr=="string"&&(J.content+=Pr);var tt=(Kt=(Ot=be?.choices)===null||Ot===void 0?void 0:Ot[0])===null||Kt===void 0?void 0:Kt.finish_reason;tt&&(Z=tt),!((Jr=be?.usage)===null||Jr===void 0)&&Jr.completion_tokens&&(Ae.completion_tokens=be.usage.completion_tokens),!((Er=be?.usage)===null||Er===void 0)&&Er.prompt_tokens&&(Ae.prompt_tokens=be.usage.prompt_tokens),!((st=be?.usage)===null||st===void 0)&&st.total_tokens&&(Ae.total_tokens=be.usage.total_tokens),Se.enqueue(be)},flush:function(){ce.res(va(va([],d.messages,!0),[J],!1)),Hh(i,Ae),M.res(Object.assign({},i)),f?.({messages:va(va([],d.messages,!0),[J],!1),finishReason:Z,text:J.content,stepUsage:Ae,totalUsage:Object.assign({},i)})}})),z=Re.tee(),se=z[0],ae=z[1],[2,{messages:ce.promise,dataStream:rr(se),textStream:rr(ae.pipeThrough(new Nr({transform:function(be,Se){var Ie,$e,pt,Ot=(pt=($e=(Ie=be?.choices)===null||Ie===void 0?void 0:Ie[0])===null||$e===void 0?void 0:$e.delta)===null||pt===void 0?void 0:pt.content;typeof Ot=="string"&&Se.enqueue(Ot)}}))),usage:M.promise}])}})})},t})();function Nq(t){var e,r=(e=t?.choices)===null||e===void 0?void 0:e[0];if(!r)return null;var n=r.finish_reason,i=r.message;return n!=="tool_calls"||!i||!_o(i)?null:i.tool_calls[0]}function Pq(t,e,r){t.push(e,{role:"tool",tool_call_id:e.tool_calls[0].id,content:JSON.stringify(r)})}function iJ(t){var e,r,n,i,o,u,f,p,l,d;return JE(this,void 0,void 0,function(){var m,y,b,w,S,E,R,O,C,I,P,D,j;return XE(this,function(q){switch(q.label){case 0:m={completion_tokens:0,prompt_tokens:0,total_tokens:0},y=rr(t),b={id:"",function:{name:"",arguments:""},type:""},w={role:"assistant",content:"",tool_calls:[b]},q.label=1;case 1:q.trys.push([1,6,7,12]),S=!0,E=nJ(y),q.label=2;case 2:return[4,E.next()];case 3:if(R=q.sent(),e=R.done,!!e)return[3,5];i=R.value,S=!1;try{if(O=i,C=O?.choices[0],!C)return[2,null];if(I=C.finish_reason,P=C.delta,I!=="tool_calls")return[2,null];if(!P)return[3,4];if(P.content&&(w.content+=P.content),!("tool_calls"in P))return[3,4];D=(o=P?.tool_calls)===null||o===void 0?void 0:o[0],D?.id&&(b.id=D.id),D?.type&&(b.type=D.type),!((u=D?.function)===null||u===void 0)&&u.name&&(b.function.name=D.function.name),!((f=D?.function)===null||f===void 0)&&f.arguments&&(b.function.arguments+=D.function.arguments),!((p=O?.usage)===null||p===void 0)&&p.completion_tokens&&(m.completion_tokens=O.usage.completion_tokens),!((l=O?.usage)===null||l===void 0)&&l.prompt_tokens&&(m.prompt_tokens=O.usage.prompt_tokens),!((d=O?.usage)===null||d===void 0)&&d.total_tokens&&(m.total_tokens=O.usage.total_tokens)}finally{S=!0}q.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return j=q.sent(),r={error:j},[3,12];case 7:return q.trys.push([7,,10,11]),!S&&!e&&(n=E.return)?[4,n.call(E)]:[3,9];case 8:q.sent(),q.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:return[2,{message:w,usage:m}]}})})}var hg=new Map;function Uq(t){return hg.get(t.function.name)(JSON.parse(t.function.arguments))}function qq(t){var e,r,n;return{completion_tokens:(e=t?.completion_tokens)!==null&&e!==void 0?e:0,prompt_tokens:(r=t?.prompt_tokens)!==null&&r!==void 0?r:0,total_tokens:(n=t?.total_tokens)!==null&&n!==void 0?n:0}}function Hh(t,e){t.completion_tokens+=e.completion_tokens,t.prompt_tokens+=e.prompt_tokens,t.total_tokens+=e.total_tokens}var k3={hunyuan:C3,"hunyuan-beta":R3,ark:I3,dashscope:x3,"01-ai":N3,moonshot:P3,zhipu:O3,"hunyuan-exp":U3,"hunyuan-open":q3,deepseek:ZQ};const oJ=Object.freeze(Object.defineProperty({__proto__:null,ArkSimpleModel:I3,DSSimpleModel:x3,DefaultImageModel:j3,DefaultSimpleModel:D3,HunYuanBetaSimpleModel:R3,HunYuanExpSimpleModel:U3,HunYuanOpenSimpleModel:q3,HunYuanSimpleModel:C3,MODELS:k3,MoonshotSimpleModel:P3,ReactModel:L3,YiSimpleModel:N3,ZhiPuSimpleModel:O3,toolMap:hg},Symbol.toStringTag,{value:"Module"}));var kf=function(){return kf=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},kf.apply(this,arguments)},G1=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},W1=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},V1=k3,aJ=(function(){function t(e,r,n){var i=this;this.req=e,this.baseUrl=r,this.modelRequest=function(o){var u=o.url,f=o.data,p=o.headers,l=o.stream,d=o.timeout;return G1(i,void 0,void 0,function(){var m,y,b,w,S,E,R;return W1(this,function(O){switch(O.label){case 0:return m={"Content-Type":"application/json"},l&&Object.assign(m,{Accept:"text/event-stream"}),[4,this.req.fetch({method:"post",headers:kf(kf((S={},S[(E=this.i18n)===null||E===void 0?void 0:E.LANG_HEADER_KEY]=(R=this.i18n)===null||R===void 0?void 0:R.lang,S),m),p),body:JSON.stringify(f),url:u,stream:l,timeout:d})];case 1:return y=O.sent(),b=y.data,w=y.header,[2,this.handleResponseData(b,w)]}})})},this.botRequest=function(o){var u=o.method,f=o.url,p=o.data,l=p===void 0?{}:p,d=o.headers,m=o.stream,y=o.timeout;return G1(i,void 0,void 0,function(){function b(D){return Object.entries(D).map(function(j){var q=j[0],U=j[1];return"".concat(q,"=").concat(U)}).join("&")}var w,S,E,R,O,C,I,P;return W1(this,function(D){switch(D.label){case 0:return u!=="get"?[3,2]:(w=this.handleResponseData,[4,this.req.fetch({url:"".concat(f,"?").concat(b(l)),method:u,headers:d,stream:m,timeout:y})]);case 1:return[2,w.apply(this,[D.sent().data])];case 2:return S={"Content-Type":"application/json"},m&&Object.assign(S,{Accept:"text/event-stream"}),[4,this.req.fetch({url:f,body:JSON.stringify(l),headers:kf(kf((C={},C[(I=this.i18n)===null||I===void 0?void 0:I.LANG_HEADER_KEY]=(P=this.i18n)===null||P===void 0?void 0:P.lang,C),S),d),stream:m,method:u,timeout:y})];case 3:return E=D.sent(),R=E.data,O=E.header,[2,this.handleResponseData(R,O)]}})})},this.aiBaseUrl="".concat(r,"/ai"),this.aiBotBaseUrl="".concat(r,"/aibot"),this.bot=new XQ(this.botRequest,this.aiBotBaseUrl),this.i18n=n,Eg.on(Tg,function(o){var u;i.i18n=((u=o.data)===null||u===void 0?void 0:u.i18n)||i.i18n})}return t.prototype.handleResponseData=function(e,r){var n,i;return G1(this,void 0,void 0,function(){var o,u,u;return W1(this,function(f){switch(f.label){case 0:return o="".concat(this.i18n.t(" AI+ "),"https://tcb.cloud.tencent.com/dev#/ai"),typeof e=="object"&&e&&"then"in e?[4,e]:[3,2];case 1:if(u=f.sent(),typeof u=="object"&&u&&"code"in u&&u.code!=="NORMAL")throw new Error("".concat(this.i18n.t("AI+ "),"").concat(u.code,"").concat(this.i18n.t(""),"").concat(u.message,`
`).concat(o,`
`).concat(JSON.stringify(u,null,2)));return[2,e];case 2:return!((i=(n=r?.get)===null||n===void 0?void 0:n.call(r,"content-type"))===null||i===void 0)&&i.includes("application/json")?[4,QQ(e)]:[3,4];case 3:if(u=f.sent(),typeof u=="object"&&u&&"code"in u&&u.code!=="NORMAL")throw new Error("".concat(this.i18n.t("AI+ "),"").concat(u.code,"").concat(this.i18n.t(""),"").concat(u.message,`
`).concat(o,`
`).concat(JSON.stringify(u,null,2)));f.label=4;case 4:return[2,e]}})})},t.prototype.createModel=function(e,r){var n,i=V1[e];if(i)n=new i(this.modelRequest,this.aiBaseUrl);else{var o=typeof r?.defaultModelSubUrl=="string"?r.defaultModelSubUrl:"/chat/completions";n=new D3(this.modelRequest,this.aiBaseUrl,"".concat(e).concat(o))}var u=new L3(n);return u},t.prototype.registerModel=function(e,r){if(V1[e]!=null){console.warn("AI model ".concat(e," already exists!"));return}V1[e]=r},t.prototype.createImageModel=function(e){return new j3(this.modelRequest,this.aiBaseUrl,e)},t.prototype.registerFunctionTool=function(e){hg.has(e.name)&&console.warn("AI function tool ".concat(e.name," already exists and will be overwritten!")),hg.set(e.name,e.fn)},t})(),pg=function(){return pg=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},pg.apply(this,arguments)},sJ=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},uJ=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},M3=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},lJ="ai";M3(oJ,["MODELS"]);var cJ=function(t){var e=t.getAccessToken,r=t.req,n=function(i){return sJ(void 0,void 0,void 0,function(){var o,u,f,p,l;return uJ(this,function(d){switch(d.label){case 0:if(typeof r.fetch!="function")throw new Error("req.fetch is not a function");return o=i.token,u=i.headers,f=u===void 0?{}:u,p=M3(i,["token","headers"]),o==null?[3,1]:(l=o,[3,3]);case 1:return[4,e()];case 2:l=d.sent().accessToken,d.label=3;case 3:return[2,r.fetch(pg({headers:pg({Authorization:"Bearer ".concat(l)},f)},p))]}})})};return{download:r.download,post:r.post,upload:r.upload,fetch:n}};function fJ(t){var e=t.env,r=t.baseUrl,n=t.req,i=t.getAccessToken,o=t.handleReqInstance,u=t.i18n,f=function(){if(r!=null)return r;if(e==null)throw new Error("`env` is required when `baseUrl` is not provided!");return"https://".concat(e,".api.tcloudbasegateway.com/v1")},p=function(){if(o==null){if(i==null)throw new Error("`getAccessToken` is required when `handleReqInstance` is not provided!");return cJ({req:n,getAccessToken:i})}return o({req:n})};return new aJ(p(),f(),u)}function dJ(t){var e=this,r,n=this.request;if(n.fetch==null)throw new Error("cloudbase.request.fetch() unimplemented!");var i=function(){var u=e.getEndPointWithKey("GATEWAY"),f=u.BASE_URL,p=u.PROTOCOL;return"".concat(p).concat(f)},o=(r=t?.baseUrl)!==null&&r!==void 0?r:i();return fJ({req:n,baseUrl:o,handleReqInstance:function(u){var f=u.req;return f},i18n:this.config.i18n})}var hJ={name:lJ,entity:{ai:dJ}};function B3(t){try{t.registerComponent(hJ)}catch(e){console.warn(e)}}try{window.registerAi=B3}catch{}var Ep=function(){return Ep=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ep.apply(this,arguments)},pJ=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},mJ=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function z3(t,e){var r=this,n=t.request.fetch.bind(t.request),i=e||{},o=i.instance,u=o===void 0?"default":o,f=i.database,p=f===void 0?t.config.env:f,l=function(S,E){return pJ(r,void 0,void 0,function(){var R,O,C,I,P;return mJ(this,function(D){switch(D.label){case 0:return R={},E.headers instanceof Headers?E.headers.forEach(function(j,q){R[q]=j}):R=E.headers||{},[4,n(Ep(Ep({url:S.toString()},E),{headers:Ep({"Content-Type":"application/json","X-Db-Instance":u,"Accept-Profile":p,"Content-Profile":p},R),shouldThrowOnError:!1}))];case 1:O=D.sent(),C={},D.label=2;case 2:return D.trys.push([2,4,,5]),[4,O.data];case 3:return C=D.sent(),[3,5];case 4:if(I=D.sent(),!I.message.includes("Unexpected end of JSON input"))throw I;return[3,5];case 5:return P={ok:O?.statusCode>=200&&O?.statusCode<300,status:O?.statusCode||200,statusText:O?.statusMessage||"OK",json:function(){return Promise.resolve(C||{})},text:function(){return Promise.resolve(typeof C=="string"?C:JSON.stringify(C||{}))},headers:O?.header},[2,P]}})})},d=t.getEndPointWithKey("GATEWAY"),m=d.BASE_URL,y=d.PROTOCOL,b="".concat(y).concat(m,"/rdb/rest"),w=XK(t,{mysqlBaseUrl:b,fetch:l});return w}var $3={name:"mysql",entity:{mysql:function(t){return z3(this,t)(t)}}},F3={name:"rdb",entity:{rdb:function(t){return z3(this,t)(t)}}};try{cloudbase.registerComponent($3),cloudbase.registerComponent(F3)}catch{}function H3(t){try{t.registerComponent($3),t.registerComponent(F3)}catch(e){console.warn(e)}}try{window.registerMySQL=H3}catch{}var Gl=function(){return Gl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Gl.apply(this,arguments)},G3=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},W3=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function vJ(t,e){var r,n,i,o;return G3(this,void 0,void 0,function(){var u,f,p,l,d,m,y,b,w,S,E,R,O,C,I,P,D,j,q,U,Y,$,L,H;return W3(this,function(Q){switch(Q.label){case 0:if(u=t||{},f=u.name,p=u.body,l=u.path,d=l===void 0?"":l,m=u.method,y=m===void 0?"POST":m,b=u.headers,w=b===void 0?{}:b,S=(t||{}).token,!f)throw new Error(JSON.stringify({code:Vt.ERRORS.INVALID_PARAMS,msg:"[apis] invalid api name"}));return E="",R=this,O=R.gatewayOrigin,C=R.getAccessToken,I=R.env,O?E="".concat(O,"/v1"):this.getEndPointWithKey?(P=this.getEndPointWithKey("GATEWAY"),D=P.BASE_URL,j=P.PROTOCOL,E="".concat(j).concat(D)):E="https://".concat(I,".api.tcloudbasegateway.com/v1"),q="".concat(E,"/apis/").concat(f),U=d.startsWith("/")?d:"/".concat(d),C?[4,C()]:[3,2];case 1:Y=Q.sent().accessToken,w.Authorization="Bearer ".concat(Y),Q.label=2;case 2:if($=["GET","HEAD"].includes((r=y?.toUpperCase)===null||r===void 0?void 0:r.call(y)),$)try{L={};try{L=JSON.parse(p)}catch{L=p||{}}U="".concat(U).concat(U.includes("?")?"&":"?").concat(Object.keys(L).map(function(ce){return"".concat(ce,"=").concat(L[ce])}).join("&"))}catch{}return[4,this.request.fetch(Gl(Gl(Gl({url:"".concat(q).concat(U),method:y||"POST",headers:Gl({"Content-Type":"application/json; charset=utf-8"},w)},$?{}:{body:p}),{token:((n=S?.trim)===null||n===void 0?void 0:n.call(S))||((o=(i=w.Authorization)===null||i===void 0?void 0:i.replace)===null||o===void 0?void 0:o.call(i,/^Bearer /,""))||null}),e))];case 3:return H=Q.sent(),[4,H.data];case 4:return[2,Q.sent()]}})})}var yJ=["GET","POST","PUT","DELETE","HEAD","OPTIONS","PATCH","REQUEST"];function gJ(t){var e=this;return new Proxy({},{get:function(r,n){if(typeof n!="string")throw new Error("[apis] method must be string");var i=n.toLocaleUpperCase();if(!yJ.includes(i))throw new Error("[apis] invalid method: ".concat(n));return function(o,u){return G3(e,void 0,void 0,function(){return W3(this,function(f){switch(f.label){case 0:return[4,vJ.call(this,Gl({name:t,method:(i==="REQUEST"?o.method:i)||"POST"},o),u)];case 1:return[2,f.sent()]}})})}}})}function bJ(t){var e=this;return Object.keys(t||{}).forEach(function(r){t[r]!==void 0&&(e[r]=t[r])}),new Proxy({},{get:function(r,n){if(typeof n=="string")return gJ.call(e,n)}})}var Dq="apis",V3={name:Dq,IIFE:!0,entity:function(){Object.defineProperty(this.prototype,Dq,{get:function(){return bJ.call(this)},configurable:!0,enumerable:!0})}};function Y3(t){try{t.registerComponent(V3)}catch(e){console.warn(e)}}try{cloudbase.registerComponent(V3)}catch{}try{window.registerApis=Y3}catch{}var Cl,ls;(function(t){t.DocIDError="ID",t.CollNameError="",t.OpStrError="",t.DirectionError="",t.IntergerError="must be integer",t.QueryParamTypeError="",t.QueryParamValueError="undefined"})(ls||(ls={}));var Xt={Number:"Number",Object:"Object",Array:"Array",GeoPoint:"GeoPoint",GeoLineString:"GeoLineString",GeoPolygon:"GeoPolygon",GeoMultiPoint:"GeoMultiPoint",GeoMultiLineString:"GeoMultiLineString",GeoMultiPolygon:"GeoMultiPolygon",Timestamp:"Date",ServerDate:"ServerDate",BsonDate:"BsonDate"},_J=["desc","asc"],wJ=["<","<=","==",">=",">"],Bl;(function(t){t.lt="<",t.gt=">",t.lte="<=",t.gte=">=",t.eq="=="})(Bl||(Bl={}));Cl={},Cl[Bl.eq]="$eq",Cl[Bl.lt]="$lt",Cl[Bl.lte]="$lte",Cl[Bl.gt]="$gt",Cl[Bl.gte]="$gte";var Aa;(function(t){t.WHERE="WHERE",t.DOC="DOC"})(Aa||(Aa={}));var SJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ny=[],jq={},EJ=(function(){function t(e){Object.defineProperties(this,{target:{enumerable:!1,writable:!1,configurable:!1,value:e}})}return t})(),ji=(function(t){SJ(e,t);function e(r,n){if(n!==jq)throw new TypeError("InternalSymbol cannot be constructed with new operator");return t.call(this,r)||this}return e.for=function(r){for(var n=0,i=ny.length;n<i;n++)if(ny[n].target===r)return ny[n].instance;var o=new e(r,jq);return ny.push({target:r,instance:o}),o},e})(EJ),Lp=ji.for("UNSET_FIELD_NAME"),K3=ji.for("UPDATE_COMMAND"),Q3=ji.for("QUERY_COMMAND"),J3=ji.for("LOGIC_COMMAND"),X3=ji.for("GEO_POINT"),TJ=ji.for("SYMBOL_GEO_LINE_STRING"),AJ=ji.for("SYMBOL_GEO_POLYGON"),OJ=ji.for("SYMBOL_GEO_MULTI_POINT"),RJ=ji.for("SYMBOL_GEO_MULTI_LINE_STRING"),CJ=ji.for("SYMBOL_GEO_MULTI_POLYGON"),Z3=ji.for("SERVER_DATE"),eM=ji.for("REGEXP"),tM=(function(){function t(e){var r=e===void 0?{}:e,n=r.offset,i=n===void 0?0:n;this.offset=i}return Object.defineProperty(t.prototype,"_internalType",{get:function(){return Z3},enumerable:!1,configurable:!0}),t.prototype.parse=function(){return{$date:{offset:this.offset}}},t})();function IJ(t){return new tM(t)}var Y1=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],u;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(f){u={error:f}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return o},Zg=(function(){function t(){}return t.formatResDocumentData=function(e){return e.map(function(r){return t.formatField(r)})},t.formatField=function(e){var r=Object.keys(e),n={};return Array.isArray(e)&&(n=[]),r.forEach(function(i){var o=e[i],u=t.whichType(o),f;switch(u){case Xt.GeoPoint:f=new li(o.coordinates[0],o.coordinates[1]);break;case Xt.GeoLineString:f=new _a(o.coordinates.map(function(p){return new li(p[0],p[1])}));break;case Xt.GeoPolygon:f=new Zl(o.coordinates.map(function(p){return new _a(p.map(function(l){var d=Y1(l,2),m=d[0],y=d[1];return new li(m,y)}))}));break;case Xt.GeoMultiPoint:f=new mg(o.coordinates.map(function(p){return new li(p[0],p[1])}));break;case Xt.GeoMultiLineString:f=new vg(o.coordinates.map(function(p){return new _a(p.map(function(l){var d=Y1(l,2),m=d[0],y=d[1];return new li(m,y)}))}));break;case Xt.GeoMultiPolygon:f=new kp(o.coordinates.map(function(p){return new Zl(p.map(function(l){return new _a(l.map(function(d){var m=Y1(d,2),y=m[0],b=m[1];return new li(y,b)}))}))}));break;case Xt.Timestamp:f=new Date(o.$timestamp*1e3);break;case Xt.Object:case Xt.Array:f=t.formatField(o);break;case Xt.ServerDate:f=new Date(o.$date);break;default:f=o}Array.isArray(n)?n.push(f):n[i]=f}),n},t.whichType=function(e){var r=Object.prototype.toString.call(e).slice(8,-1);if(r===Xt.Timestamp)return Xt.BsonDate;if(r===Xt.Object){if(e instanceof li)return Xt.GeoPoint;if(e instanceof Date)return Xt.Timestamp;if(e instanceof tM)return Xt.ServerDate;e.$timestamp?r=Xt.Timestamp:e.$date?r=Xt.ServerDate:li.validate(e)?r=Xt.GeoPoint:_a.validate(e)?r=Xt.GeoLineString:Zl.validate(e)?r=Xt.GeoPolygon:mg.validate(e)?r=Xt.GeoMultiPoint:vg.validate(e)?r=Xt.GeoMultiLineString:kp.validate(e)&&(r=Xt.GeoMultiPolygon)}return r},t.generateDocId=function(){for(var e="ABCDEFabcdef0123456789",r="",n=0;n<24;n++)r+=e.charAt(Math.floor(Math.random()*e.length));return r},t})(),Ru=(function(){function t(){}return t.isGeopoint=function(e,r){if(Zg.whichType(r)!==Xt.Number)throw new Error("Geo Point must be number type");var n=Math.abs(r);if(e==="latitude"&&n>90)throw new Error("latitude should be a number ranges from -90 to 90");if(e==="longitude"&&n>180)throw new Error("longitude should be a number ranges from -180 to 180");return!0},t.isInteger=function(e,r){if(!Number.isInteger(r))throw new Error(e+ls.IntergerError);return!0},t.isFieldOrder=function(e){if(_J.indexOf(e)===-1)throw new Error(ls.DirectionError);return!0},t.isFieldPath=function(e){if(!/^[a-zA-Z0-9-_\.]/.test(e))throw new Error;return!0},t.isOperator=function(e){if(wJ.indexOf(e)===-1)throw new Error(ls.OpStrError);return!0},t.isCollName=function(e){if(!/^[a-zA-Z0-9]([a-zA-Z0-9-_]){1,32}$/.test(e))throw new Error(ls.CollNameError);return!0},t.isDocID=function(e){if(!/^([a-fA-F0-9]){24}$/.test(e))throw new Error(ls.DocIDError);return!0},t})(),Oa=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},Iu=function(t){return Oa(t)==="object"},xJ=function(t){return Oa(t)==="string"},po=function(t){return Oa(t)==="number"},Sr=function(t){return Array.isArray(t)},rM=function(t){return Oa(t)==="date"},zT=function(t){return Oa(t)==="regexp"},nM=function(t){return t&&t._internalType instanceof ji},li=(function(){function t(e,r){Ru.isGeopoint("longitude",e),Ru.isGeopoint("latitude",r),this.longitude=e,this.latitude=r}return t.prototype.parse=function(e){var r;return r={},r[e]={type:"Point",coordinates:[this.longitude,this.latitude]},r},t.prototype.toJSON=function(){return{type:"Point",coordinates:[this.longitude,this.latitude]}},t.prototype.toReadableString=function(){return"[".concat(this.longitude,",").concat(this.latitude,"]")},t.validate=function(e){return e.type==="Point"&&Sr(e.coordinates)&&Ru.isGeopoint("longitude",e.coordinates[0])&&Ru.isGeopoint("latitude",e.coordinates[1])},Object.defineProperty(t.prototype,"_internalType",{get:function(){return X3},enumerable:!1,configurable:!0}),t})(),NJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_a=(function(){function t(e){if(!Sr(e))throw new TypeError('"points" must be of type Point[]. Received type '.concat(typeof e));if(e.length<2)throw new Error('"points" must contain 2 points at least');e.forEach(function(r){if(!(r instanceof li))throw new TypeError('"points" must be of type Point[]. Received type '.concat(typeof r,"[]"))}),this.points=e}return t.prototype.parse=function(e){var r;return r={},r[e]={type:"LineString",coordinates:this.points.map(function(n){return n.toJSON().coordinates})},r},t.prototype.toJSON=function(){return{type:"LineString",coordinates:this.points.map(function(e){return e.toJSON().coordinates})}},t.validate=function(e){var r,n;if(e.type!=="LineString"||!Sr(e.coordinates))return!1;try{for(var i=NJ(e.coordinates),o=i.next();!o.done;o=i.next()){var u=o.value;if(!po(u[0])||!po(u[1]))return!1}}catch(f){r={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!0},t.isClosed=function(e){var r=e.points[0],n=e.points[e.points.length-1];if(r.latitude===n.latitude&&r.longitude===n.longitude)return!0},Object.defineProperty(t.prototype,"_internalType",{get:function(){return TJ},enumerable:!1,configurable:!0}),t})(),Lq=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zl=(function(){function t(e){if(!Sr(e))throw new TypeError('"lines" must be of type LineString[]. Received type '.concat(typeof e));if(e.length===0)throw new Error("Polygon must contain 1 linestring at least");e.forEach(function(r){if(!(r instanceof _a))throw new TypeError('"lines" must be of type LineString[]. Received type '.concat(typeof r,"[]"));if(!_a.isClosed(r))throw new Error("LineString ".concat(r.points.map(function(n){return n.toReadableString()})," is not a closed cycle"))}),this.lines=e}return t.prototype.parse=function(e){var r;return r={},r[e]={type:"Polygon",coordinates:this.lines.map(function(n){return n.points.map(function(i){return[i.longitude,i.latitude]})})},r},t.prototype.toJSON=function(){return{type:"Polygon",coordinates:this.lines.map(function(e){return e.points.map(function(r){return[r.longitude,r.latitude]})})}},t.validate=function(e){var r,n,i,o;if(e.type!=="Polygon"||!Sr(e.coordinates))return!1;try{for(var u=Lq(e.coordinates),f=u.next();!f.done;f=u.next()){var p=f.value;if(!this.isCloseLineString(p))return!1;try{for(var l=(i=void 0,Lq(p)),d=l.next();!d.done;d=l.next()){var m=d.value;if(!po(m[0])||!po(m[1]))return!1}}catch(y){i={error:y}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}}catch(y){r={error:y}}finally{try{f&&!f.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return!0},t.isCloseLineString=function(e){var r=e[0],n=e[e.length-1];return!(r[0]!==n[0]||r[1]!==n[1])},Object.defineProperty(t.prototype,"_internalType",{get:function(){return CJ},enumerable:!1,configurable:!0}),t})(),PJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mg=(function(){function t(e){if(!Sr(e))throw new TypeError('"points" must be of type Point[]. Received type '.concat(typeof e));if(e.length===0)throw new Error('"points" must contain 1 point at least');e.forEach(function(r){if(!(r instanceof li))throw new TypeError('"points" must be of type Point[]. Received type '.concat(typeof r,"[]"))}),this.points=e}return t.prototype.parse=function(e){var r;return r={},r[e]={type:"MultiPoint",coordinates:this.points.map(function(n){return n.toJSON().coordinates})},r},t.prototype.toJSON=function(){return{type:"MultiPoint",coordinates:this.points.map(function(e){return e.toJSON().coordinates})}},t.validate=function(e){var r,n;if(e.type!=="MultiPoint"||!Sr(e.coordinates))return!1;try{for(var i=PJ(e.coordinates),o=i.next();!o.done;o=i.next()){var u=o.value;if(!po(u[0])||!po(u[1]))return!1}}catch(f){r={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!0},Object.defineProperty(t.prototype,"_internalType",{get:function(){return OJ},enumerable:!1,configurable:!0}),t})(),kq=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vg=(function(){function t(e){if(!Sr(e))throw new TypeError('"lines" must be of type LineString[]. Received type '.concat(typeof e));if(e.length===0)throw new Error("Polygon must contain 1 linestring at least");e.forEach(function(r){if(!(r instanceof _a))throw new TypeError('"lines" must be of type LineString[]. Received type '.concat(typeof r,"[]"))}),this.lines=e}return t.prototype.parse=function(e){var r;return r={},r[e]={type:"MultiLineString",coordinates:this.lines.map(function(n){return n.points.map(function(i){return[i.longitude,i.latitude]})})},r},t.prototype.toJSON=function(){return{type:"MultiLineString",coordinates:this.lines.map(function(e){return e.points.map(function(r){return[r.longitude,r.latitude]})})}},t.validate=function(e){var r,n,i,o;if(e.type!=="MultiLineString"||!Sr(e.coordinates))return!1;try{for(var u=kq(e.coordinates),f=u.next();!f.done;f=u.next()){var p=f.value;try{for(var l=(i=void 0,kq(p)),d=l.next();!d.done;d=l.next()){var m=d.value;if(!po(m[0])||!po(m[1]))return!1}}catch(y){i={error:y}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}}catch(y){r={error:y}}finally{try{f&&!f.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return!0},Object.defineProperty(t.prototype,"_internalType",{get:function(){return RJ},enumerable:!1,configurable:!0}),t})(),iy=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kp=(function(){function t(e){var r,n;if(!Sr(e))throw new TypeError('"polygons" must be of type Polygon[]. Received type '.concat(typeof e));if(e.length===0)throw new Error("MultiPolygon must contain 1 polygon at least");try{for(var i=iy(e),o=i.next();!o.done;o=i.next()){var u=o.value;if(!(u instanceof Zl))throw new TypeError('"polygon" must be of type Polygon[]. Received type '.concat(typeof u,"[]"))}}catch(f){r={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}this.polygons=e}return t.prototype.parse=function(e){var r;return r={},r[e]={type:"MultiPolygon",coordinates:this.polygons.map(function(n){return n.lines.map(function(i){return i.points.map(function(o){return[o.longitude,o.latitude]})})})},r},t.prototype.toJSON=function(){return{type:"MultiPolygon",coordinates:this.polygons.map(function(e){return e.lines.map(function(r){return r.points.map(function(n){return[n.longitude,n.latitude]})})})}},t.validate=function(e){var r,n,i,o,u,f;if(e.type!=="MultiPolygon"||!Sr(e.coordinates))return!1;try{for(var p=iy(e.coordinates),l=p.next();!l.done;l=p.next()){var d=l.value;try{for(var m=(i=void 0,iy(d)),y=m.next();!y.done;y=m.next()){var b=y.value;try{for(var w=(u=void 0,iy(b)),S=w.next();!S.done;S=w.next()){var E=S.value;if(!po(E[0])||!po(E[1]))return!1}}catch(R){u={error:R}}finally{try{S&&!S.done&&(f=w.return)&&f.call(w)}finally{if(u)throw u.error}}}}catch(R){i={error:R}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}}}catch(R){r={error:R}}finally{try{l&&!l.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}return!0},Object.defineProperty(t.prototype,"_internalType",{get:function(){return AJ},enumerable:!1,configurable:!0}),t})();const UJ=Object.freeze(Object.defineProperty({__proto__:null,LineString:_a,MultiLineString:vg,MultiPoint:mg,MultiPolygon:kp,Point:li,Polygon:Zl},Symbol.toStringTag,{value:"Module"}));var cs=function(){var t=function(){};if(!Promise){t.promise={};var e=function(){throw new Error('Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.')};return Object.defineProperty(t.promise,"then",{get:e}),Object.defineProperty(t.promise,"catch",{get:e}),t}var r=new Promise(function(n,i){t=function(o,u){return o?i(o):n(u)}});return t.promise=r,t},wt;(function(t){t.SET="set",t.REMOVE="remove",t.INC="inc",t.MUL="mul",t.PUSH="push",t.PULL="pull",t.PULL_ALL="pullAll",t.POP="pop",t.SHIFT="shift",t.UNSHIFT="unshift",t.ADD_TO_SET="addToSet",t.BIT="bit",t.RENAME="rename",t.MAX="max",t.MIN="min"})(wt||(wt={}));var Mr=(function(){function t(e,r,n){this._internalType=K3,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=r,this.fieldName=n||Lp}return t.prototype._setFieldName=function(e){var r=new t(this.operator,this.operands,e);return r},t})();function Mq(t){return t&&t instanceof Mr&&t._internalType===K3}var Pi;(function(t){t.AND="and",t.OR="or",t.NOT="not",t.NOR="nor"})(Pi||(Pi={}));var Wl=(function(){function t(e,r,n){if(this._internalType=J3,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=r,this.fieldName=n||Lp,this.fieldName!==Lp)if(Array.isArray(r)){r=r.slice(),this.operands=r;for(var i=0,o=r.length;i<o;i++){var u=r[i];(yg(u)||gg(u))&&(r[i]=u._setFieldName(this.fieldName))}}else{var u=r;(yg(u)||gg(u))&&(r=u._setFieldName(this.fieldName))}}return t.prototype._setFieldName=function(e){var r=this.operands.map(function(i){return i instanceof t?i._setFieldName(e):i}),n=new t(this.operator,r,e);return n},t.prototype.and=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.from(arguments);return e.unshift(this),new t(Pi.AND,e,this.fieldName)},t.prototype.or=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.from(arguments);return e.unshift(this),new t(Pi.OR,e,this.fieldName)},t})();function yg(t){return t&&t instanceof Wl&&t._internalType===J3}var qJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ve;(function(t){t.EQ="eq",t.NEQ="neq",t.GT="gt",t.GTE="gte",t.LT="lt",t.LTE="lte",t.IN="in",t.NIN="nin",t.ALL="all",t.ELEM_MATCH="elemMatch",t.EXISTS="exists",t.SIZE="size",t.MOD="mod",t.GEO_NEAR="geoNear",t.GEO_WITHIN="geoWithin",t.GEO_INTERSECTS="geoIntersects"})(Ve||(Ve={}));var Vr=(function(t){qJ(e,t);function e(r,n,i){var o=t.call(this,r,n,i)||this;return o.operator=r,o._internalType=Q3,o}return e.prototype.toJSON=function(){var r,n;switch(this.operator){case Ve.IN:case Ve.NIN:return r={},r["$"+this.operator]=this.operands,r;default:return n={},n["$"+this.operator]=this.operands[0],n}},e.prototype._setFieldName=function(r){var n=new e(this.operator,this.operands,r);return n},e.prototype.eq=function(r){var n=new e(Ve.EQ,[r],this.fieldName);return this.and(n)},e.prototype.neq=function(r){var n=new e(Ve.NEQ,[r],this.fieldName);return this.and(n)},e.prototype.gt=function(r){var n=new e(Ve.GT,[r],this.fieldName);return this.and(n)},e.prototype.gte=function(r){var n=new e(Ve.GTE,[r],this.fieldName);return this.and(n)},e.prototype.lt=function(r){var n=new e(Ve.LT,[r],this.fieldName);return this.and(n)},e.prototype.lte=function(r){var n=new e(Ve.LTE,[r],this.fieldName);return this.and(n)},e.prototype.in=function(r){var n=new e(Ve.IN,r,this.fieldName);return this.and(n)},e.prototype.nin=function(r){var n=new e(Ve.NIN,r,this.fieldName);return this.and(n)},e.prototype.geoNear=function(r){if(!(r.geometry instanceof li))throw new TypeError('"geometry" must be of type Point. Received type '.concat(typeof r.geometry));if(r.maxDistance!==void 0&&!po(r.maxDistance))throw new TypeError('"maxDistance" must be of type Number. Received type '.concat(typeof r.maxDistance));if(r.minDistance!==void 0&&!po(r.minDistance))throw new TypeError('"minDistance" must be of type Number. Received type '.concat(typeof r.minDistance));var n=new e(Ve.GEO_NEAR,[r],this.fieldName);return this.and(n)},e.prototype.geoWithin=function(r){if(!(r.geometry instanceof kp)&&!(r.geometry instanceof Zl))throw new TypeError('"geometry" must be of type Polygon or MultiPolygon. Received type '.concat(typeof r.geometry));var n=new e(Ve.GEO_WITHIN,[r],this.fieldName);return this.and(n)},e.prototype.geoIntersects=function(r){if(!(r.geometry instanceof li)&&!(r.geometry instanceof _a)&&!(r.geometry instanceof Zl)&&!(r.geometry instanceof mg)&&!(r.geometry instanceof vg)&&!(r.geometry instanceof kp))throw new TypeError('"geometry" must be of type Point, LineString, Polygon, MultiPoint, MultiLineString or MultiPolygon. Received type '.concat(typeof r.geometry));var n=new e(Ve.GEO_INTERSECTS,[r],this.fieldName);return this.and(n)},e})(Wl);function gg(t){return t&&t instanceof Vr&&t._internalType===Q3}function Bq(t){return gg(t)}var Du={};for(var Nu in Ve)Du[Nu]="$"+Nu;for(var Nu in Pi)Du[Nu]="$"+Nu;for(var Nu in wt)Du[Nu]="$"+Nu;Du[Ve.NEQ]="$ne";Du[wt.REMOVE]="$unset";Du[wt.SHIFT]="$pop";Du[wt.UNSHIFT]="$push";function Mf(t){return Du[t]||"$"+t}var ZE=function(){return ZE=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ZE.apply(this,arguments)},zq=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],u;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(f){u={error:f}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return o},oy=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};function Mp(t){return e2(t,[t])}function e2(t,e){if(nM(t))switch(t._internalType){case X3:return t.toJSON();case Z3:return t.parse();case eM:return t.parse();default:return t.toJSON?t.toJSON():t}else{if(rM(t))return{$date:+t};if(zT(t))return{$regex:t.source,$options:t.flags};if(Sr(t))return t.map(function(i){if(e.indexOf(i)>-1)throw new Error("Cannot convert circular structure to JSON");return e2(i,oy(oy([],zq(e),!1),[i],!1))});if(Iu(t)){var r=ZE({},t);for(var n in r){if(e.indexOf(r[n])>-1)throw new Error("Cannot convert circular structure to JSON");r[n]=e2(r[n],oy(oy([],zq(e),!1),[r[n]],!1))}return r}else return t}}var t2=function(){return t2=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},t2.apply(this,arguments)},$q=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],u;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(f){u={error:f}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return o},ay=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};function iM(t,e,r,n){var i=t2({},t);for(var o in t)if(!/^\$/.test(o)){var u=t[o];if(u&&Iu(u)&&!e(u)){if(n.indexOf(u)>-1)throw new Error("Cannot convert circular structure to JSON");var f=ay(ay([],$q(r),!1),[o],!1),p=ay(ay([],$q(n),!1),[u],!1),l=iM(u,e,f,p);i[o]=l;var d=!1;for(var m in l)/^\$/.test(m)?d=!0:(i["".concat(o,".").concat(m)]=l[m],delete i[o][m]);d||delete i[o]}}return i}function oM(t){return iM(t,r2,[],[t])}function Fq(t,e,r){e[r]||delete t[r];for(var n in e)t[n]?Sr(t[n])?t[n].push(e[n]):Iu(t[n])?Iu(e[n])?Object.assign(t[n],e[n]):(console.warn("unmergable condition, query is object but condition is ".concat(Oa(e),", can only overwrite"),e,r),t[n]=e[n]):(console.warn("to-merge query is of type ".concat(Oa(t),", can only overwrite"),t,e,r),t[n]=e[n]):t[n]=e[n]}function r2(t){return nM(t)||rM(t)||zT(t)}function Cu(t){return Mp(t)}var $T=(function(){function t(){}return t.encode=function(e){var r=new t;return r.encodeUpdate(e)},t.prototype.encodeUpdate=function(e){return Mq(e)?this.encodeUpdateCommand(e):Oa(e)==="object"?this.encodeUpdateObject(e):e},t.prototype.encodeUpdateCommand=function(e){if(e.fieldName===Lp)throw new Error("Cannot encode a comparison command with unset field name");switch(e.operator){case wt.PUSH:case wt.PULL:case wt.PULL_ALL:case wt.POP:case wt.SHIFT:case wt.UNSHIFT:case wt.ADD_TO_SET:return this.encodeArrayUpdateCommand(e);default:return this.encodeFieldUpdateCommand(e)}},t.prototype.encodeFieldUpdateCommand=function(e){var r,n,i,o,u=Mf(e.operator);return e.operator===wt.REMOVE?(r={},r[u]=(n={},n[e.fieldName]="",n),r):(i={},i[u]=(o={},o[e.fieldName]=e.operands[0],o),i)},t.prototype.encodeArrayUpdateCommand=function(e){var r,n,i,o,u,f,p,l,d,m,y=Mf(e.operator);switch(e.operator){case wt.PUSH:{var b=void 0;return Sr(e.operands)?b={$each:e.operands.map(Cu)}:b=e.operands,r={},r[y]=(n={},n[e.fieldName]=b,n),r}case wt.UNSHIFT:{var b={$each:e.operands.map(Cu),$position:0};return i={},i[y]=(o={},o[e.fieldName]=b,o),i}case wt.POP:return u={},u[y]=(f={},f[e.fieldName]=1,f),u;case wt.SHIFT:return p={},p[y]=(l={},l[e.fieldName]=-1,l),p;default:return d={},d[y]=(m={},m[e.fieldName]=Cu(e.operands),m),d}},t.prototype.encodeUpdateObject=function(e){var r=oM(e);for(var n in r)if(!/^\$/.test(n)){var i=r[n];if(Mq(i)){r[n]=i._setFieldName(n);var o=this.encodeUpdateCommand(r[n]);Fq(r,o,n)}else{r[n]=i=Cu(i);var u=new Mr(wt.SET,[i],n),o=this.encodeUpdateCommand(u);Fq(r,o,n)}}return r},t})(),K1={};function aM(t){if(!Mn.wsClientClass)throw new Error("to use realtime you must import realtime module first");var e=t.config.env;return K1[e]||(K1[e]=new Mn.wsClientClass({context:{appConfig:{docSizeLimit:1e3,realtimePingInterval:1e4,realtimePongWaitTimeout:5e3,request:Mn.createRequest(t.config)}}})),K1[e]}var bg=function(){return bg=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},bg.apply(this,arguments)},Hq=(function(){function t(e,r,n,i){i===void 0&&(i={});var o=this;this.watch=function(u){var f=aM(o._db);return f.watch(bg(bg({},u),{envId:o._db.config.env,collectionName:o._coll,query:JSON.stringify({_id:o.id})}))},this._db=e,this._coll=r,this.id=n,this.request=Mn.createRequest(this._db.config),this.projection=i}return t.prototype.create=function(e,r){r=r||cs();var n={collectionName:this._coll,data:Mp(e)};return this.id&&(n._id=this.id),this.request.send("database.addDocument",n).then(function(i){i.code?r(0,i):r(0,{id:i.data._id,requestId:i.requestId})}).catch(function(i){r(i)}),r.promise},t.prototype.set=function(e,r){if(r=r||cs(),!this.id)return Promise.resolve({code:"INVALID_PARAM",message:"docId"});if(!e||typeof e!="object")return Promise.resolve({code:"INVALID_PARAM",message:""});if(e.hasOwnProperty("_id"))return Promise.resolve({code:"INVALID_PARAM",message:"_id"});var n=!1,i=function(f){if(typeof f=="object")for(var p in f)f[p]instanceof Mr?n=!0:typeof f[p]=="object"&&i(f[p])};if(i(e),n)return Promise.resolve({code:"DATABASE_REQUEST_FAILED",message:"update operator complicit"});var o=!1,u={collectionName:this._coll,queryType:Aa.DOC,data:Mp(e),multi:!1,merge:o,upsert:!0};return this.id&&(u.query={_id:this.id}),this.request.send("database.updateDocument",u).then(function(f){f.code?r(0,f):r(0,{updated:f.data.updated,upsertedId:f.data.upserted_id,requestId:f.requestId})}).catch(function(f){r(f)}),r.promise},t.prototype.update=function(e,r){if(r=r||cs(),!e||typeof e!="object")return Promise.resolve({code:"INVALID_PARAM",message:""});if(e.hasOwnProperty("_id"))return Promise.resolve({code:"INVALID_PARAM",message:"_id"});var n={_id:this.id},i=!0,o={collectionName:this._coll,data:$T.encode(e),query:n,queryType:Aa.DOC,multi:!1,merge:i,upsert:!1};return this.request.send("database.updateDocument",o).then(function(u){u.code?r(0,u):r(0,{updated:u.data.updated,upsertedId:u.data.upserted_id,requestId:u.requestId})}).catch(function(u){r(u)}),r.promise},t.prototype.remove=function(e){e=e||cs();var r={_id:this.id},n={collectionName:this._coll,query:r,queryType:Aa.DOC,multi:!1};return this.request.send("database.deleteDocument",n).then(function(i){i.code?e(0,i):e(0,{deleted:i.data.deleted,requestId:i.requestId})}).catch(function(i){e(i)}),e.promise},t.prototype.get=function(e){e=e||cs();var r={_id:this.id},n={collectionName:this._coll,query:r,queryType:Aa.DOC,multi:!1,projection:this.projection};return this.request.send("database.queryDocument",n).then(function(i){if(i.code)e(0,i);else{var o=Zg.formatResDocumentData(i.data.list);e(0,{data:o,requestId:i.requestId})}}).catch(function(i){e(i)}),e.promise},t.prototype.field=function(e){for(var r in e)e[r]?e[r]=1:e[r]=0;return new t(this._db,this._coll,this.id,e)},t})(),_g=(function(){function t(){}return t.encode=function(e){var r=new DJ;return r.encodeQuery(e)},t})(),DJ=(function(){function t(){}return t.prototype.encodeQuery=function(e,r){var n;return r2(e)?yg(e)?this.encodeLogicCommand(e):gg(e)?this.encodeQueryCommand(e):(n={},n[r]=this.encodeQueryObject(e),n):Iu(e)?this.encodeQueryObject(e):e},t.prototype.encodeRegExp=function(e){return{$regex:e.source,$options:e.flags}},t.prototype.encodeLogicCommand=function(e){var r,n,i,o,u,f,p,l=this;switch(e.operator){case Pi.NOR:case Pi.AND:case Pi.OR:{var d=Mf(e.operator),m=e.operands.map(function(w){return l.encodeQuery(w,e.fieldName)});return r={},r[d]=m,r}case Pi.NOT:{var d=Mf(e.operator),y=e.operands[0];if(zT(y))return n={},n[e.fieldName]=(i={},i[d]=this.encodeRegExp(y),i),n;var m=this.encodeQuery(y)[e.fieldName];return o={},o[e.fieldName]=(u={},u[d]=m,u),o}default:{var d=Mf(e.operator);if(e.operands.length===1){var b=this.encodeQuery(e.operands[0]);return f={},f[d]=b,f}else{var m=e.operands.map(this.encodeQuery.bind(this));return p={},p[d]=m,p}}}},t.prototype.encodeQueryCommand=function(e){return Bq(e)?this.encodeComparisonCommand(e):this.encodeComparisonCommand(e)},t.prototype.encodeComparisonCommand=function(e){var r,n,i,o,u,f,p,l,d;if(e.fieldName===Lp)throw new Error("Cannot encode a comparison command with unset field name");var m=Mf(e.operator);switch(e.operator){case Ve.EQ:case Ve.NEQ:case Ve.LT:case Ve.LTE:case Ve.GT:case Ve.GTE:case Ve.ELEM_MATCH:case Ve.EXISTS:case Ve.SIZE:case Ve.MOD:return r={},r[e.fieldName]=(n={},n[m]=Cu(e.operands[0]),n),r;case Ve.IN:case Ve.NIN:case Ve.ALL:return i={},i[e.fieldName]=(o={},o[m]=Cu(e.operands),o),i;case Ve.GEO_NEAR:{var y=e.operands[0];return u={},u[e.fieldName]={$nearSphere:{$geometry:y.geometry.toJSON(),$maxDistance:y.maxDistance,$minDistance:y.minDistance}},u}case Ve.GEO_WITHIN:{var y=e.operands[0];return f={},f[e.fieldName]={$geoWithin:{$geometry:y.geometry.toJSON()}},f}case Ve.GEO_INTERSECTS:{var y=e.operands[0];return p={},p[e.fieldName]={$geoIntersects:{$geometry:y.geometry.toJSON()}},p}default:return l={},l[e.fieldName]=(d={},d[m]=Cu(e.operands[0]),d),l}},t.prototype.encodeQueryObject=function(e){var r=oM(e);for(var n in r){var i=r[n];if(yg(i)){r[n]=i._setFieldName(n);var o=this.encodeLogicCommand(r[n]);this.mergeConditionAfterEncode(r,o,n)}else if(Bq(i)){r[n]=i._setFieldName(n);var o=this.encodeComparisonCommand(r[n]);this.mergeConditionAfterEncode(r,o,n)}else r2(i)&&(r[n]=Cu(i))}return r},t.prototype.mergeConditionAfterEncode=function(e,r,n){r[n]||delete e[n];for(var i in r)e[i]?Sr(e[i])?e[i]=e[i].concat(r[i]):Iu(e[i])?Iu(r[i])?Object.assign(e,r):(console.warn("unmergable condition, query is object but condition is ".concat(Oa(r),", can only overwrite"),r,n),e[i]=r[i]):(console.warn("to-merge query is of type ".concat(Oa(e),", can only overwrite"),e,r,n),e[i]=r[i]):e[i]=r[i]},t})(),zl=function(){return zl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},zl.apply(this,arguments)},jJ=(function(){function t(e,r,n,i,o){var u=this;this.watch=function(f){var p=aM(u._db);return p.watch(zl(zl({},f),{envId:u._db.config.env,collectionName:u._coll,query:JSON.stringify(u._fieldFilters||{}),limit:u._queryOptions.limit,orderBy:u._fieldOrders?u._fieldOrders.reduce(function(l,d){return l[d.field]=d.direction,l},{}):void 0}))},this._db=e,this._coll=r,this._fieldFilters=n,this._fieldOrders=i||[],this._queryOptions=o||{},this._request=Mn.createRequest(this._db.config)}return t.prototype.get=function(e){e=e||cs();var r=[];this._fieldOrders&&this._fieldOrders.forEach(function(i){r.push(i)});var n={collectionName:this._coll,queryType:Aa.WHERE};return this._fieldFilters&&(n.query=this._fieldFilters),r.length>0&&(n.order=r),this._queryOptions.offset&&(n.offset=this._queryOptions.offset),this._queryOptions.limit?n.limit=this._queryOptions.limit<1e3?this._queryOptions.limit:1e3:n.limit=100,this._queryOptions.projection&&(n.projection=this._queryOptions.projection),this._request.send("database.queryDocument",n).then(function(i){if(i.code)e(0,i);else{var o=Zg.formatResDocumentData(i.data.list),u={data:o,requestId:i.requestId};i.total!==void 0&&(u.total=i.total),i.limit!==void 0&&(u.limit=i.limit),i.offset!==void 0&&(u.offset=i.offset),e(0,u)}}).catch(function(i){e(i)}),e.promise},t.prototype.count=function(e){e=e||cs();var r={collectionName:this._coll,queryType:Aa.WHERE};return this._fieldFilters&&(r.query=this._fieldFilters),this._request.send("database.countDocument",r).then(function(n){n.code?e(0,n):e(0,{requestId:n.requestId,total:n.data.total})}).catch(function(n){e(n)}),e.promise},t.prototype.where=function(e){if(Object.prototype.toString.call(e).slice(8,-1)!=="Object")throw Error(ls.QueryParamTypeError);var r=Object.keys(e),n=r.some(function(i){return e[i]!==void 0});if(r.length&&!n)throw Error(ls.QueryParamValueError);return new t(this._db,this._coll,_g.encode(e),this._fieldOrders,this._queryOptions)},t.prototype.orderBy=function(e,r){Ru.isFieldPath(e),Ru.isFieldOrder(r);var n={field:e,direction:r},i=this._fieldOrders.concat(n);return new t(this._db,this._coll,this._fieldFilters,i,this._queryOptions)},t.prototype.limit=function(e){Ru.isInteger("limit",e);var r=zl({},this._queryOptions);return r.limit=e,new t(this._db,this._coll,this._fieldFilters,this._fieldOrders,r)},t.prototype.skip=function(e){Ru.isInteger("offset",e);var r=zl({},this._queryOptions);return r.offset=e,new t(this._db,this._coll,this._fieldFilters,this._fieldOrders,r)},t.prototype.update=function(e,r){if(r=r||cs(),!e||typeof e!="object")return Promise.resolve({code:"INVALID_PARAM",message:""});if(e.hasOwnProperty("_id"))return Promise.resolve({code:"INVALID_PARAM",message:"_id"});var n={collectionName:this._coll,query:this._fieldFilters,queryType:Aa.WHERE,multi:!0,merge:!0,upsert:!1,data:$T.encode(e)};return this._request.send("database.updateDocument",n).then(function(i){i.code?r(0,i):r(0,{requestId:i.requestId,updated:i.data.updated,upsertId:i.data.upsert_id})}).catch(function(i){r(i)}),r.promise},t.prototype.field=function(e){for(var r in e)e[r]?typeof e[r]!="object"&&(e[r]=1):e[r]=0;var n=zl({},this._queryOptions);return n.projection=e,new t(this._db,this._coll,this._fieldFilters,this._fieldOrders,n)},t.prototype.remove=function(e){e=e||cs(),Object.keys(this._queryOptions).length>0&&console.warn("`offset`, `limit` and `projection` are not supported in remove() operation"),this._fieldOrders.length>0&&console.warn("`orderBy` is not supported in remove() operation");var r={collectionName:this._coll,query:_g.encode(this._fieldFilters),queryType:Aa.WHERE,multi:!0};return this._request.send("database.deleteDocument",r).then(function(n){n.code?e(0,n):e(0,{requestId:n.requestId,deleted:n.data.deleted})}).catch(function(n){e(n)}),e.promise},t})();const LJ=(()=>{const t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return e=>t.call(e)})();function e0(t){return LJ(t)==="Uint8Array"}function kJ(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&(t[Symbol.toStringTag]==="ArrayBuffer"||t[Symbol.toStringTag]==="SharedArrayBuffer")}function MJ(t){return t instanceof RegExp||Object.prototype.toString.call(t)==="[object RegExp]"}function sM(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Map"}function BJ(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Ui(t,e){return JSON.stringify(t,(r,n)=>typeof n=="bigint"?{$numberLong:`${n}`}:sM(n)?Object.fromEntries(n):n)}function zJ(t){if(t!=null&&typeof t=="object"&&"stylize"in t&&typeof t.stylize=="function")return t.stylize}const FT=7,uM=Symbol.for("@@mdb.bson.version"),HT=2147483647,GT=-2147483648,lM=Math.pow(2,63)-1,cM=-Math.pow(2,63),$J=Math.pow(2,53),FJ=-Math.pow(2,53),fM=4;class Oe extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(e,r){super(e,r)}static isBSONError(e){return e!=null&&typeof e=="object"&&"bsonError"in e&&e.bsonError===!0&&"name"in e&&"message"in e&&"stack"in e}}class HJ extends Oe{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${FT}.x.x`)}}class Gq extends Oe{get name(){return"BSONRuntimeError"}constructor(e){super(e)}}class hu extends Oe{get name(){return"BSONOffsetError"}offset;constructor(e,r,n){super(`${e}. offset: ${r}`,n),this.offset=r}}let Wq,Vq;function dM(t,e,r,n){if(n){Wq??=new TextDecoder("utf8",{fatal:!0});try{return Wq.decode(t.subarray(e,r))}catch(i){throw new Oe("Invalid UTF-8 string in BSON document",{cause:i})}}return Vq??=new TextDecoder("utf8",{fatal:!1}),Vq.decode(t.subarray(e,r))}function hM(t,e,r){if(t.length===0)return"";const n=r-e;if(n===0)return"";if(n>20)return null;if(n===1&&t[e]<128)return String.fromCharCode(t[e]);if(n===2&&t[e]<128&&t[e+1]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1]);if(n===3&&t[e]<128&&t[e+1]<128&&t[e+2]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1])+String.fromCharCode(t[e+2]);const i=[];for(let o=e;o<r;o++){const u=t[o];if(u>127)return null;i.push(u)}return String.fromCharCode(...i)}function GJ(t,e,r){if(e.length===0)return 0;if(e.length>25||t.length-r<e.length)return null;for(let n=0,i=r;n<e.length;n++,i++){const o=e.charCodeAt(n);if(o>127)return null;t[i]=o}return e.length}function WJ(t){return so.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}function VJ(t){return crypto.getRandomValues(so.allocate(t))}const YJ=(()=>{const{crypto:t}=globalThis;return t!=null&&typeof t.getRandomValues=="function"?VJ:WJ})(),so={isUint8Array:e0,toLocalBufferType(t){if(Buffer.isBuffer(t))return t;if(ArrayBuffer.isView(t))return Buffer.from(t.buffer,t.byteOffset,t.byteLength);const e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return Buffer.from(t);throw new Oe("Cannot create Buffer from the passed potentialBuffer.")},allocate(t){return Buffer.alloc(t)},allocateUnsafe(t){return Buffer.allocUnsafe(t)},compare(t,e){return so.toLocalBufferType(t).compare(e)},concat(t){return Buffer.concat(t)},copy(t,e,r,n,i){return so.toLocalBufferType(t).copy(e,r??0,n??0,i??t.length)},equals(t,e){return so.toLocalBufferType(t).equals(e)},fromNumberArray(t){return Buffer.from(t)},fromBase64(t){return Buffer.from(t,"base64")},fromUTF8(t){return Buffer.from(t,"utf8")},toBase64(t){return so.toLocalBufferType(t).toString("base64")},fromISO88591(t){return Buffer.from(t,"binary")},toISO88591(t){return so.toLocalBufferType(t).toString("binary")},fromHex(t){return Buffer.from(t,"hex")},toHex(t){return so.toLocalBufferType(t).toString("hex")},toUTF8(t,e,r,n){const i=r-e<=20?hM(t,e,r):null;if(i!=null)return i;const o=so.toLocalBufferType(t).toString("utf8",e,r);if(n){for(let u=0;u<o.length;u++)if(o.charCodeAt(u)===65533){dM(t,e,r,!0);break}}return o},utf8ByteLength(t){return Buffer.byteLength(t,"utf8")},encodeUTF8Into(t,e,r){const n=GJ(t,e,r);return n??so.toLocalBufferType(t).write(e,r,void 0,"utf8")},randomBytes:YJ,swap32(t){return so.toLocalBufferType(t).swap32()}};function KJ(){const{navigator:t}=globalThis;return typeof t=="object"&&t.product==="ReactNative"}function QJ(t){if(t<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${t}`);return Vl.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}const JJ=(()=>{const{crypto:t}=globalThis;if(t!=null&&typeof t.getRandomValues=="function")return e=>t.getRandomValues(Vl.allocate(e));if(KJ()){const{console:e}=globalThis;e?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return QJ})(),Yq=/(\d|[a-f])/i,Vl={isUint8Array:e0,toLocalBufferType(t){const e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="Uint8Array")return t;if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return new Uint8Array(t);throw new Oe("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(t){if(typeof t!="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(t)}`);return new Uint8Array(t)},allocateUnsafe(t){return Vl.allocate(t)},compare(t,e){if(t===e)return 0;const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return t.length<e.length?-1:t.length>e.length?1:0},concat(t){if(t.length===0)return Vl.allocate(0);let e=0;for(const i of t)e+=i.length;const r=Vl.allocate(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r},copy(t,e,r,n,i){if(i!==void 0&&i<0)throw new RangeError(`The value of "sourceEnd" is out of range. It must be >= 0. Received ${i}`);if(i=i??t.length,n!==void 0&&(n<0||n>i))throw new RangeError(`The value of "sourceStart" is out of range. It must be >= 0 and <= ${i}. Received ${n}`);if(n=n??0,r!==void 0&&r<0)throw new RangeError(`The value of "targetStart" is out of range. It must be >= 0. Received ${r}`);r=r??0;const o=t.subarray(n,i),u=Math.min(o.length,e.length-r);return u<=0?0:(e.set(o.subarray(0,u),r),u)},equals(t,e){if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},fromNumberArray(t){return Uint8Array.from(t)},fromBase64(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))},fromUTF8(t){return new TextEncoder().encode(t)},toBase64(t){return btoa(Vl.toISO88591(t))},fromISO88591(t){return Uint8Array.from(t,e=>e.charCodeAt(0)&255)},toISO88591(t){return Array.from(Uint16Array.from(t),e=>String.fromCharCode(e)).join("")},fromHex(t){const e=t.length%2===0?t:t.slice(0,t.length-1),r=[];for(let n=0;n<e.length;n+=2){const i=e[n],o=e[n+1];if(!Yq.test(i)||!Yq.test(o))break;const u=Number.parseInt(`${i}${o}`,16);r.push(u)}return Uint8Array.from(r)},toHex(t){return Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")},toUTF8(t,e,r,n){const i=r-e<=20?hM(t,e,r):null;return i??dM(t,e,r,n)},utf8ByteLength(t){return new TextEncoder().encode(t).byteLength},encodeUTF8Into(t,e,r){const n=new TextEncoder().encode(e);return t.set(n,r),n.byteLength},randomBytes:JJ,swap32(t){if(t.length%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t.length;e+=4){const r=t[e],n=t[e+1],i=t[e+2],o=t[e+3];t[e]=o,t[e+1]=i,t[e+2]=n,t[e+3]=r}return t}},XJ=typeof Buffer=="function"&&Buffer.prototype?._isBuffer!==!0,He=XJ?so:Vl,pM=Symbol.for("@@mdb.bson.type");class wo{get[pM](){return this._bsontype}get[uM](){return FT}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return this.inspect(e,r,n)}}const Bf=new Float64Array(1),At=new Uint8Array(Bf.buffer,0,8);Bf[0]=-1;const Q1=At[7]===0,ec={isBigEndian:Q1,getNonnegativeInt32LE(t,e){if(t[e+3]>127)throw new RangeError(`Size cannot be negative at offset: ${e}`);return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getInt32LE(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getUint32LE(t,e){return t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216},getUint32BE(t,e){return t[e+3]+t[e+2]*256+t[e+1]*65536+t[e]*16777216},getBigInt64LE(t,e){const r=BigInt(t[e+4]+t[e+5]*256+t[e+6]*65536+(t[e+7]<<24)),n=BigInt(t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216);return(r<<32n)+n},getFloat64LE:Q1?(t,e)=>(At[7]=t[e],At[6]=t[e+1],At[5]=t[e+2],At[4]=t[e+3],At[3]=t[e+4],At[2]=t[e+5],At[1]=t[e+6],At[0]=t[e+7],Bf[0]):(t,e)=>(At[0]=t[e],At[1]=t[e+1],At[2]=t[e+2],At[3]=t[e+3],At[4]=t[e+4],At[5]=t[e+5],At[6]=t[e+6],At[7]=t[e+7],Bf[0]),setInt32BE(t,e,r){return t[e+3]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e]=r,4},setInt32LE(t,e,r){return t[e]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+3]=r,4},setBigInt64LE(t,e,r){const n=0xffffffffn;let i=Number(r&n);t[e]=i,i>>=8,t[e+1]=i,i>>=8,t[e+2]=i,i>>=8,t[e+3]=i;let o=Number(r>>32n&n);return t[e+4]=o,o>>=8,t[e+5]=o,o>>=8,t[e+6]=o,o>>=8,t[e+7]=o,8},setFloat64LE:Q1?(t,e,r)=>(Bf[0]=r,t[e]=At[7],t[e+1]=At[6],t[e+2]=At[5],t[e+3]=At[4],t[e+4]=At[3],t[e+5]=At[2],t[e+6]=At[1],t[e+7]=At[0],8):(t,e,r)=>(Bf[0]=r,t[e]=At[0],t[e+1]=At[1],t[e+2]=At[2],t[e+3]=At[3],t[e+4]=At[4],t[e+5]=At[5],t[e+6]=At[6],t[e+7]=At[7],8)};class _t extends wo{get _bsontype(){return"Binary"}static BSON_BINARY_SUBTYPE_DEFAULT=0;static BUFFER_SIZE=256;static SUBTYPE_DEFAULT=0;static SUBTYPE_FUNCTION=1;static SUBTYPE_BYTE_ARRAY=2;static SUBTYPE_UUID_OLD=3;static SUBTYPE_UUID=4;static SUBTYPE_MD5=5;static SUBTYPE_ENCRYPTED=6;static SUBTYPE_COLUMN=7;static SUBTYPE_SENSITIVE=8;static SUBTYPE_VECTOR=9;static SUBTYPE_USER_DEFINED=128;static VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});buffer;sub_type;position;constructor(e,r){if(super(),e!=null&&typeof e=="string"&&!ArrayBuffer.isView(e)&&!kJ(e)&&!Array.isArray(e))throw new Oe("Binary can only be constructed from Uint8Array or number[]");this.sub_type=r??_t.BSON_BINARY_SUBTYPE_DEFAULT,e==null?(this.buffer=He.allocate(_t.BUFFER_SIZE),this.position=0):(this.buffer=Array.isArray(e)?He.fromNumberArray(e):He.toLocalBufferType(e),this.position=this.buffer.byteLength)}put(e){if(typeof e=="string"&&e.length!==1)throw new Oe("only accepts single character String");if(typeof e!="number"&&e.length!==1)throw new Oe("only accepts single character Uint8Array or Array");let r;if(typeof e=="string"?r=e.charCodeAt(0):typeof e=="number"?r=e:r=e[0],r<0||r>255)throw new Oe("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=r;else{const n=He.allocate(_t.BUFFER_SIZE+this.buffer.length);n.set(this.buffer,0),this.buffer=n,this.buffer[this.position++]=r}}write(e,r){if(r=typeof r=="number"?r:this.position,this.buffer.byteLength<r+e.length){const n=He.allocate(this.buffer.byteLength+e.length);n.set(this.buffer,0),this.buffer=n}if(ArrayBuffer.isView(e))this.buffer.set(He.toLocalBufferType(e),r),this.position=r+e.byteLength>this.position?r+e.length:this.position;else if(typeof e=="string")throw new Oe("input cannot be string")}read(e,r){r=r&&r>0?r:this.position;const n=e+r;return this.buffer.subarray(e,n>this.position?this.position:n)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return He.toBase64(this.buffer.subarray(0,this.position))}toString(e){return e==="hex"?He.toHex(this.buffer.subarray(0,this.position)):e==="base64"?He.toBase64(this.buffer.subarray(0,this.position)):e==="utf8"||e==="utf-8"?He.toUTF8(this.buffer,0,this.position,!1):He.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(e){e=e||{},this.sub_type===_t.SUBTYPE_VECTOR&&ou(this);const r=He.toBase64(this.buffer),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}}toUUID(){if(this.sub_type===_t.SUBTYPE_UUID)return new si(this.buffer.subarray(0,this.position));throw new Oe(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${_t.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(e,r){return new _t(He.fromHex(e),r)}static createFromBase64(e,r){return new _t(He.fromBase64(e),r)}static fromExtendedJSON(e,r){r=r||{};let n,i;if("$binary"in e?r.legacy&&typeof e.$binary=="string"&&"$type"in e?(i=e.$type?parseInt(e.$type,16):0,n=He.fromBase64(e.$binary)):typeof e.$binary!="string"&&(i=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=He.fromBase64(e.$binary.base64)):"$uuid"in e&&(i=4,n=si.bytesFromString(e.$uuid)),!n)throw new Oe(`Unexpected Binary Extended JSON format ${JSON.stringify(e)}`);return i===fM?new si(n):new _t(n,i)}inspect(e,r,n){n??=Ui;const i=He.toBase64(this.buffer.subarray(0,this.position)),o=n(i,r),u=n(this.sub_type,r);return`Binary.createFromBase64(${o}, ${u})`}toInt8Array(){if(this.sub_type!==_t.SUBTYPE_VECTOR)throw new Oe("Binary sub_type is not Vector");if(this.buffer[0]!==_t.VECTOR_TYPE.Int8)throw new Oe("Binary datatype field is not Int8");return ou(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==_t.SUBTYPE_VECTOR)throw new Oe("Binary sub_type is not Vector");if(this.buffer[0]!==_t.VECTOR_TYPE.Float32)throw new Oe("Binary datatype field is not Float32");ou(this);const e=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));return ec.isBigEndian&&He.swap32(e),new Float32Array(e.buffer)}toPackedBits(){if(this.sub_type!==_t.SUBTYPE_VECTOR)throw new Oe("Binary sub_type is not Vector");if(this.buffer[0]!==_t.VECTOR_TYPE.PackedBit)throw new Oe("Binary datatype field is not packed bit");return ou(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==_t.SUBTYPE_VECTOR)throw new Oe("Binary sub_type is not Vector");if(this.buffer[0]!==_t.VECTOR_TYPE.PackedBit)throw new Oe("Binary datatype field is not packed bit");ou(this);const r=(this.length()-2)*8-this.buffer[1],n=new Int8Array(r);for(let i=0;i<n.length;i++){const o=i/8|0,u=this.buffer[o+2],f=7-i%8,p=u>>f&1;n[i]=p}return n}static fromInt8Array(e){const r=He.allocate(e.byteLength+2);r[0]=_t.VECTOR_TYPE.Int8,r[1]=0;const n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.set(n,2);const i=new this(r,this.SUBTYPE_VECTOR);return ou(i),i}static fromFloat32Array(e){const r=He.allocate(e.byteLength+2);r[0]=_t.VECTOR_TYPE.Float32,r[1]=0;const n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.set(n,2),ec.isBigEndian&&He.swap32(new Uint8Array(r.buffer,2));const i=new this(r,this.SUBTYPE_VECTOR);return ou(i),i}static fromPackedBits(e,r=0){const n=He.allocate(e.byteLength+2);n[0]=_t.VECTOR_TYPE.PackedBit,n[1]=r,n.set(e,2);const i=new this(n,this.SUBTYPE_VECTOR);return ou(i),i}static fromBits(e){const r=e.length+7>>>3,n=new Uint8Array(r+2);n[0]=_t.VECTOR_TYPE.PackedBit;const i=e.length%8;n[1]=i===0?0:8-i;for(let o=0;o<e.length;o++){const u=o>>>3,f=e[o];if(f!==0&&f!==1)throw new Oe(`Invalid bit value at ${o}: must be 0 or 1, found ${e[o]}`);if(f===0)continue;const p=7-o%8;n[u+2]|=f<<p}return new this(n,_t.SUBTYPE_VECTOR)}}function ou(t){if(t.sub_type!==_t.SUBTYPE_VECTOR)return;const e=t.position,r=t.buffer[0],n=t.buffer[1];if((r===_t.VECTOR_TYPE.Float32||r===_t.VECTOR_TYPE.Int8)&&n!==0)throw new Oe("Invalid Vector: padding must be zero for int8 and float32 vectors");if(r===_t.VECTOR_TYPE.Float32&&e!==0&&e-2!==0&&(e-2)%4!==0)throw new Oe("Invalid Vector: Float32 vector must contain a multiple of 4 bytes");if(r===_t.VECTOR_TYPE.PackedBit&&n!==0&&e===2)throw new Oe("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(r===_t.VECTOR_TYPE.PackedBit&&n>7)throw new Oe(`Invalid Vector: padding must be a value between 0 and 7. found: ${n}`)}const J1=16,ZJ=/^[0-9A-F]{32}$/i,eX=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class si extends _t{constructor(e){let r;if(e==null)r=si.generate();else if(e instanceof si)r=He.toLocalBufferType(new Uint8Array(e.buffer));else if(ArrayBuffer.isView(e)&&e.byteLength===J1)r=He.toLocalBufferType(e);else if(typeof e=="string")r=si.bytesFromString(e);else throw new Oe("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(r,fM)}get id(){return this.buffer}set id(e){this.buffer=e}toHexString(e=!0){return e?[He.toHex(this.buffer.subarray(0,4)),He.toHex(this.buffer.subarray(4,6)),He.toHex(this.buffer.subarray(6,8)),He.toHex(this.buffer.subarray(8,10)),He.toHex(this.buffer.subarray(10,16))].join("-"):He.toHex(this.buffer)}toString(e){return e==="hex"?He.toHex(this.id):e==="base64"?He.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(e){if(!e)return!1;if(e instanceof si)return He.equals(e.id,this.id);try{return He.equals(new si(e).id,this.id)}catch{return!1}}toBinary(){return new _t(this.id,_t.SUBTYPE_UUID)}static generate(){const e=He.randomBytes(J1);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e}static isValid(e){return e?typeof e=="string"?si.isValidUUIDString(e):e0(e)?e.byteLength===J1:e._bsontype==="Binary"&&e.sub_type===this.SUBTYPE_UUID&&e.buffer.byteLength===16:!1}static createFromHexString(e){const r=si.bytesFromString(e);return new si(r)}static createFromBase64(e){return new si(He.fromBase64(e))}static bytesFromString(e){if(!si.isValidUUIDString(e))throw new Oe("UUID string representation must be 32 hex digits or canonical hyphenated representation");return He.fromHex(e.replace(/-/g,""))}static isValidUUIDString(e){return ZJ.test(e)||eX.test(e)}inspect(e,r,n){return n??=Ui,`new UUID(${n(this.toHexString(),r)})`}}class Zp extends wo{get _bsontype(){return"Code"}code;scope;constructor(e,r){super(),this.code=e.toString(),this.scope=r??null}toJSON(){return this.scope!=null?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(e){return new Zp(e.$code,e.$scope)}inspect(e,r,n){n??=Ui;let i=n(this.code,r);const o=i.includes(`
`);this.scope!=null&&(i+=`,${o?`
`:" "}${n(this.scope,r)}`);const u=o&&this.scope===null;return`new Code(${o?`
`:""}${i}${u?`
`:""})`}}function tX(t){return t!=null&&typeof t=="object"&&"$id"in t&&t.$id!=null&&"$ref"in t&&typeof t.$ref=="string"&&(!("$db"in t)||"$db"in t&&typeof t.$db=="string")}class dd extends wo{get _bsontype(){return"DBRef"}collection;oid;db;fields;constructor(e,r,n,i){super();const o=e.split(".");o.length===2&&(n=o.shift(),e=o.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=i||{}}get namespace(){return this.collection}set namespace(e){this.collection=e}toJSON(){const e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(e.$db=this.db),e}toExtendedJSON(e){e=e||{};let r={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r}static fromExtendedJSON(e){const r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new dd(e.$ref,e.$id,e.$db,r)}inspect(e,r,n){n??=Ui;const i=[n(this.namespace,r),n(this.oid,r),...this.db?[n(this.db,r)]:[],...Object.keys(this.fields).length>0?[n(this.fields,r)]:[]];return i[1]=n===Ui?`new ObjectId(${i[1]})`:i[1],`new DBRef(${i.join(", ")})`}}function mM(t){if(t==="")return t;let e=0;const r=t[e]==="-",n=t[e]==="+";(n||r)&&(e+=1);let i=!1;for(;e<t.length&&t[e]==="0";++e)i=!0;return i?`${r?"-":""}${t.length===e?"0":t.slice(e)}`:n?t.slice(1):t}function rX(t,e){e=e??10;const r="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,e);return new RegExp(`[^-+${r}]`,"i").test(t)?!1:t}let ro;try{ro=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}const Kq=65536,nX=1<<24,zf=Kq*Kq,vM=zf*zf,Qq=vM/2,Jq={},Xq={},iX=20,oX=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class V extends wo{get _bsontype(){return"Long"}get __isLong__(){return!0}high;low;unsigned;constructor(e=0,r,n){super();const i=typeof r=="boolean"?r:!!n,o=typeof r=="number"?r:0,u=typeof e=="string"?V.fromString(e,i):typeof e=="bigint"?V.fromBigInt(e,i):{low:e|0,high:o|0,unsigned:i};this.low=u.low,this.high=u.high,this.unsigned=u.unsigned}static TWO_PWR_24=V.fromInt(nX);static MAX_UNSIGNED_VALUE=V.fromBits(-1,-1,!0);static ZERO=V.fromInt(0);static UZERO=V.fromInt(0,!0);static ONE=V.fromInt(1);static UONE=V.fromInt(1,!0);static NEG_ONE=V.fromInt(-1);static MAX_VALUE=V.fromBits(-1,2147483647,!1);static MIN_VALUE=V.fromBits(0,-2147483648,!1);static fromBits(e,r,n){return new V(e,r,n)}static fromInt(e,r){let n,i,o;return r?(e>>>=0,(o=0<=e&&e<256)&&(i=Xq[e],i)?i:(n=V.fromBits(e,(e|0)<0?-1:0,!0),o&&(Xq[e]=n),n)):(e|=0,(o=-128<=e&&e<128)&&(i=Jq[e],i)?i:(n=V.fromBits(e,e<0?-1:0,!1),o&&(Jq[e]=n),n))}static fromNumber(e,r){if(isNaN(e))return r?V.UZERO:V.ZERO;if(r){if(e<0)return V.UZERO;if(e>=vM)return V.MAX_UNSIGNED_VALUE}else{if(e<=-Qq)return V.MIN_VALUE;if(e+1>=Qq)return V.MAX_VALUE}return e<0?V.fromNumber(-e,r).neg():V.fromBits(e%zf|0,e/zf|0,r)}static fromBigInt(e,r){const n=0xffffffffn,i=32n;return new V(Number(e&n),Number(e>>i&n),r)}static _fromString(e,r,n){if(e.length===0)throw new Oe("empty string");if(n<2||36<n)throw new Oe("radix");let i;if((i=e.indexOf("-"))>0)throw new Oe("interior hyphen");if(i===0)return V._fromString(e.substring(1),r,n).neg();const o=V.fromNumber(Math.pow(n,8));let u=V.ZERO;for(let f=0;f<e.length;f+=8){const p=Math.min(8,e.length-f),l=parseInt(e.substring(f,f+p),n);if(p<8){const d=V.fromNumber(Math.pow(n,p));u=u.mul(d).add(V.fromNumber(l))}else u=u.mul(o),u=u.add(V.fromNumber(l))}return u.unsigned=r,u}static fromStringStrict(e,r,n){let i=!1;if(typeof r=="number"?(n=r,r=!1):i=!!r,n??=10,e.trim()!==e)throw new Oe(`Input: '${e}' contains leading and/or trailing whitespace`);if(!rX(e,n))throw new Oe(`Input: '${e}' contains invalid characters for radix: ${n}`);const o=mM(e),u=V._fromString(o,i,n);if(u.toString(n).toLowerCase()!==o.toLowerCase())throw new Oe(`Input: ${e} is not representable as ${u.unsigned?"an unsigned":"a signed"} 64-bit Long ${n!=null?`with radix: ${n}`:""}`);return u}static fromString(e,r,n){let i=!1;return typeof r=="number"?(n=r,r=!1):i=!!r,n??=10,e==="NaN"&&n<24||(e==="Infinity"||e==="+Infinity"||e==="-Infinity")&&n<35?V.ZERO:V._fromString(e,i,n)}static fromBytes(e,r,n){return n?V.fromBytesLE(e,r):V.fromBytesBE(e,r)}static fromBytesLE(e,r){return new V(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)}static fromBytesBE(e,r){return new V(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)}static isLong(e){return e!=null&&typeof e=="object"&&"__isLong__"in e&&e.__isLong__===!0}static fromValue(e,r){return typeof e=="number"?V.fromNumber(e,r):typeof e=="string"?V.fromString(e,r):V.fromBits(e.low,e.high,typeof r=="boolean"?r:e.unsigned)}add(e){V.isLong(e)||(e=V.fromValue(e));const r=this.high>>>16,n=this.high&65535,i=this.low>>>16,o=this.low&65535,u=e.high>>>16,f=e.high&65535,p=e.low>>>16,l=e.low&65535;let d=0,m=0,y=0,b=0;return b+=o+l,y+=b>>>16,b&=65535,y+=i+p,m+=y>>>16,y&=65535,m+=n+f,d+=m>>>16,m&=65535,d+=r+u,d&=65535,V.fromBits(y<<16|b,d<<16|m,this.unsigned)}and(e){return V.isLong(e)||(e=V.fromValue(e)),V.fromBits(this.low&e.low,this.high&e.high,this.unsigned)}compare(e){if(V.isLong(e)||(e=V.fromValue(e)),this.eq(e))return 0;const r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1}comp(e){return this.compare(e)}divide(e){if(V.isLong(e)||(e=V.fromValue(e)),e.isZero())throw new Oe("division by zero");if(ro){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;const o=(this.unsigned?ro.div_u:ro.div_s)(this.low,this.high,e.low,e.high);return V.fromBits(o,ro.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?V.UZERO:V.ZERO;let r,n,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return V.UZERO;if(e.gt(this.shru(1)))return V.UONE;i=V.UZERO}else{if(this.eq(V.MIN_VALUE))return e.eq(V.ONE)||e.eq(V.NEG_ONE)?V.MIN_VALUE:e.eq(V.MIN_VALUE)?V.ONE:(r=this.shr(1).div(e).shl(1),r.eq(V.ZERO)?e.isNegative()?V.ONE:V.NEG_ONE:(n=this.sub(e.mul(r)),i=r.add(n.div(e)),i));if(e.eq(V.MIN_VALUE))return this.unsigned?V.UZERO:V.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=V.ZERO}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));const o=Math.ceil(Math.log(r)/Math.LN2),u=o<=48?1:Math.pow(2,o-48);let f=V.fromNumber(r),p=f.mul(e);for(;p.isNegative()||p.gt(n);)r-=u,f=V.fromNumber(r,this.unsigned),p=f.mul(e);f.isZero()&&(f=V.ONE),i=i.add(f),n=n.sub(p)}return i}div(e){return this.divide(e)}equals(e){return V.isLong(e)||(e=V.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}eq(e){return this.equals(e)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(V.MIN_VALUE)?64:this.neg().getNumBitsAbs();const e=this.high!==0?this.high:this.low;let r;for(r=31;r>0&&(e&1<<r)===0;r--);return this.high!==0?r+33:r+1}greaterThan(e){return this.comp(e)>0}gt(e){return this.greaterThan(e)}greaterThanOrEqual(e){return this.comp(e)>=0}gte(e){return this.greaterThanOrEqual(e)}ge(e){return this.greaterThanOrEqual(e)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(e){return this.comp(e)<0}lt(e){return this.lessThan(e)}lessThanOrEqual(e){return this.comp(e)<=0}lte(e){return this.lessThanOrEqual(e)}modulo(e){if(V.isLong(e)||(e=V.fromValue(e)),ro){const r=(this.unsigned?ro.rem_u:ro.rem_s)(this.low,this.high,e.low,e.high);return V.fromBits(r,ro.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))}mod(e){return this.modulo(e)}rem(e){return this.modulo(e)}multiply(e){if(this.isZero())return V.ZERO;if(V.isLong(e)||(e=V.fromValue(e)),ro){const w=ro.mul(this.low,this.high,e.low,e.high);return V.fromBits(w,ro.get_high(),this.unsigned)}if(e.isZero())return V.ZERO;if(this.eq(V.MIN_VALUE))return e.isOdd()?V.MIN_VALUE:V.ZERO;if(e.eq(V.MIN_VALUE))return this.isOdd()?V.MIN_VALUE:V.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(V.TWO_PWR_24)&&e.lt(V.TWO_PWR_24))return V.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);const r=this.high>>>16,n=this.high&65535,i=this.low>>>16,o=this.low&65535,u=e.high>>>16,f=e.high&65535,p=e.low>>>16,l=e.low&65535;let d=0,m=0,y=0,b=0;return b+=o*l,y+=b>>>16,b&=65535,y+=i*l,m+=y>>>16,y&=65535,y+=o*p,m+=y>>>16,y&=65535,m+=n*l,d+=m>>>16,m&=65535,m+=i*p,d+=m>>>16,m&=65535,m+=o*f,d+=m>>>16,m&=65535,d+=r*l+n*p+i*f+o*u,d&=65535,V.fromBits(y<<16|b,d<<16|m,this.unsigned)}mul(e){return this.multiply(e)}negate(){return!this.unsigned&&this.eq(V.MIN_VALUE)?V.MIN_VALUE:this.not().add(V.ONE)}neg(){return this.negate()}not(){return V.fromBits(~this.low,~this.high,this.unsigned)}notEquals(e){return!this.equals(e)}neq(e){return this.notEquals(e)}ne(e){return this.notEquals(e)}or(e){return V.isLong(e)||(e=V.fromValue(e)),V.fromBits(this.low|e.low,this.high|e.high,this.unsigned)}shiftLeft(e){return V.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?V.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):V.fromBits(0,this.low<<e-32,this.unsigned)}shl(e){return this.shiftLeft(e)}shiftRight(e){return V.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?V.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):V.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)}shr(e){return this.shiftRight(e)}shiftRightUnsigned(e){if(V.isLong(e)&&(e=e.toInt()),e&=63,e===0)return this;{const r=this.high;if(e<32){const n=this.low;return V.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?V.fromBits(r,0,this.unsigned):V.fromBits(r>>>e-32,0,this.unsigned)}}shr_u(e){return this.shiftRightUnsigned(e)}shru(e){return this.shiftRightUnsigned(e)}subtract(e){return V.isLong(e)||(e=V.fromValue(e)),this.add(e.neg())}sub(e){return this.subtract(e)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*zf+(this.low>>>0):this.high*zf+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(e){return e?this.toBytesLE():this.toBytesBE()}toBytesLE(){const e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}toBytesBE(){const e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]}toSigned(){return this.unsigned?V.fromBits(this.low,this.high,!1):this}toString(e){if(e=e||10,e<2||36<e)throw new Oe("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(V.MIN_VALUE)){const o=V.fromNumber(e),u=this.div(o),f=u.mul(o).sub(this);return u.toString(e)+f.toInt().toString(e)}else return"-"+this.neg().toString(e);const r=V.fromNumber(Math.pow(e,6),this.unsigned);let n=this,i="";for(;;){const o=n.div(r);let f=(n.sub(o.mul(r)).toInt()>>>0).toString(e);if(n=o,n.isZero())return f+i;for(;f.length<6;)f="0"+f;i=""+f+i}}toUnsigned(){return this.unsigned?this:V.fromBits(this.low,this.high,!0)}xor(e){return V.isLong(e)||(e=V.fromValue(e)),V.fromBits(this.low^e.low,this.high^e.high,this.unsigned)}eqz(){return this.isZero()}le(e){return this.lessThanOrEqual(e)}toExtendedJSON(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(e,r){const{useBigInt64:n=!1,relaxed:i=!0}={...r};if(e.$numberLong.length>iX)throw new Oe("$numberLong string is too long");if(!oX.test(e.$numberLong))throw new Oe(`$numberLong string "${e.$numberLong}" is in an invalid format`);if(n){const u=BigInt(e.$numberLong);return BigInt.asIntN(64,u)}const o=V.fromString(e.$numberLong);return i?o.toNumber():o}inspect(e,r,n){n??=Ui;const i=n(this.toString(),r),o=this.unsigned?`, ${n(this.unsigned,r)}`:"";return`new Long(${i}${o})`}}const aX=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,sX=/^(\+|-)?(Infinity|inf)$/i,uX=/^(\+|-)?NaN$/i,Ef=6111,Gh=-6176,Zq=6176,eD=34,X1=He.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),tD=He.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),rD=He.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),lX=/^([-+])?(\d+)?$/,cX=31,nD=16383,fX=30,dX=31;function iD(t){return!isNaN(parseInt(t,10))}function hX(t){const e=V.fromNumber(1e9);let r=V.fromNumber(0);if(!t.parts[0]&&!t.parts[1]&&!t.parts[2]&&!t.parts[3])return{quotient:t,rem:r};for(let n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new V(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function pX(t,e){if(!t&&!e)return{high:V.fromNumber(0),low:V.fromNumber(0)};const r=t.shiftRightUnsigned(32),n=new V(t.getLowBits(),0),i=e.shiftRightUnsigned(32),o=new V(e.getLowBits(),0);let u=r.multiply(i),f=r.multiply(o);const p=n.multiply(i);let l=n.multiply(o);return u=u.add(f.shiftRightUnsigned(32)),f=new V(f.getLowBits(),0).add(p).add(l.shiftRightUnsigned(32)),u=u.add(f.shiftRightUnsigned(32)),l=f.shiftLeft(32).add(new V(l.getLowBits(),0)),{high:u,low:l}}function mX(t,e){const r=t.high>>>0,n=e.high>>>0;if(r<n)return!0;if(r===n){const i=t.low>>>0,o=e.low>>>0;if(i<o)return!0}return!1}function Lo(t,e){throw new Oe(`"${t}" is not a valid Decimal128 string - ${e}`)}class Ii extends wo{get _bsontype(){return"Decimal128"}bytes;constructor(e){if(super(),typeof e=="string")this.bytes=Ii.fromString(e).bytes;else if(e instanceof Uint8Array||e0(e)){if(e.byteLength!==16)throw new Oe("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}else throw new Oe("Decimal128 must take a Buffer or string")}static fromString(e){return Ii._fromString(e,{allowRounding:!1})}static fromStringWithRounding(e){return Ii._fromString(e,{allowRounding:!0})}static _fromString(e,r){let n=!1,i=!1,o=!1,u=!1,f=0,p=0,l=0,d=0,m=0;const y=[0];let b=0,w=0,S=0,E=0,R=new V(0,0),O=new V(0,0),C=0,I=0;if(e.length>=7e3)throw new Oe(""+e+" not a valid Decimal128 string");const P=e.match(aX),D=e.match(sX),j=e.match(uX);if(!P&&!D&&!j||e.length===0)throw new Oe(""+e+" not a valid Decimal128 string");if(P){const $=P[2],L=P[4],H=P[5],Q=P[6];L&&Q===void 0&&Lo(e,"missing exponent power"),L&&$===void 0&&Lo(e,"missing exponent base"),L===void 0&&(H||Q)&&Lo(e,"missing e before exponent")}if((e[I]==="+"||e[I]==="-")&&(i=!0,n=e[I++]==="-"),!iD(e[I])&&e[I]!=="."){if(e[I]==="i"||e[I]==="I")return new Ii(n?tD:rD);if(e[I]==="N")return new Ii(X1)}for(;iD(e[I])||e[I]===".";){if(e[I]==="."){o&&Lo(e,"contains multiple periods"),o=!0,I=I+1;continue}b<eD&&(e[I]!=="0"||u)&&(u||(m=p),u=!0,y[w++]=parseInt(e[I],10),b=b+1),u&&(l=l+1),o&&(d=d+1),p=p+1,I=I+1}if(o&&!p)throw new Oe(""+e+" not a valid Decimal128 string");if(e[I]==="e"||e[I]==="E"){const $=e.substr(++I).match(lX);if(!$||!$[2])return new Ii(X1);E=parseInt($[0],10),I=I+$[0].length}if(e[I])return new Ii(X1);if(!b)y[0]=0,l=1,b=1,f=0;else if(S=b-1,f=l,f!==1)for(;e[m+f-1+Number(i)+Number(o)]==="0";)f=f-1;for(E<=d&&d>E+16384?E=Gh:E=E-d;E>Ef;){if(S=S+1,S>=eD){if(f===0){E=Ef;break}Lo(e,"overflow")}E=E-1}if(r.allowRounding){for(;E<Gh||b<l;){if(S===0&&f<b){E=Gh,f=0;break}if(b<l?l=l-1:S=S-1,E<Ef)E=E+1;else{if(y.join("").match(/^0+$/)){E=Ef;break}Lo(e,"overflow")}}if(S+1<f){let $=p;o&&(m=m+1,$=$+1),i&&(m=m+1,$=$+1);const L=parseInt(e[m+S+1],10);let H=0;if(L>=5&&(H=1,L===5)){H=y[S]%2===1?1:0;for(let Q=m+S+2;Q<$;Q++)if(parseInt(e[Q],10)){H=1;break}}if(H){let Q=S;for(;Q>=0&&++y[Q]>9;Q--)if(y[Q]=0,Q===0)if(E<Ef)E=E+1,y[Q]=1;else return new Ii(n?tD:rD)}}}else{for(;E<Gh||b<l;){if(S===0){if(f===0){E=Gh;break}Lo(e,"exponent underflow")}b<l?(e[l-1+Number(i)+Number(o)]!=="0"&&f!==0&&Lo(e,"inexact rounding"),l=l-1):(y[S]!==0&&Lo(e,"inexact rounding"),S=S-1),E<Ef?E=E+1:Lo(e,"overflow")}S+1<f&&(o&&(m=m+1),i&&(m=m+1),parseInt(e[m+S+1],10)!==0&&Lo(e,"inexact rounding"))}if(R=V.fromNumber(0),O=V.fromNumber(0),f===0)R=V.fromNumber(0),O=V.fromNumber(0);else if(S<17){let $=0;for(O=V.fromNumber(y[$++]),R=new V(0,0);$<=S;$++)O=O.multiply(V.fromNumber(10)),O=O.add(V.fromNumber(y[$]))}else{let $=0;for(R=V.fromNumber(y[$++]);$<=S-17;$++)R=R.multiply(V.fromNumber(10)),R=R.add(V.fromNumber(y[$]));for(O=V.fromNumber(y[$++]);$<=S;$++)O=O.multiply(V.fromNumber(10)),O=O.add(V.fromNumber(y[$]))}const q=pX(R,V.fromString("100000000000000000"));q.low=q.low.add(O),mX(q.low,O)&&(q.high=q.high.add(V.fromNumber(1))),C=E+Zq;const U={low:V.fromNumber(0),high:V.fromNumber(0)};q.high.shiftRightUnsigned(49).and(V.fromNumber(1)).equals(V.fromNumber(1))?(U.high=U.high.or(V.fromNumber(3).shiftLeft(61)),U.high=U.high.or(V.fromNumber(C).and(V.fromNumber(16383).shiftLeft(47))),U.high=U.high.or(q.high.and(V.fromNumber(0x7fffffffffff)))):(U.high=U.high.or(V.fromNumber(C&16383).shiftLeft(49)),U.high=U.high.or(q.high.and(V.fromNumber(562949953421311)))),U.low=q.low,n&&(U.high=U.high.or(V.fromString("9223372036854775808")));const Y=He.allocateUnsafe(16);return I=0,Y[I++]=U.low.low&255,Y[I++]=U.low.low>>8&255,Y[I++]=U.low.low>>16&255,Y[I++]=U.low.low>>24&255,Y[I++]=U.low.high&255,Y[I++]=U.low.high>>8&255,Y[I++]=U.low.high>>16&255,Y[I++]=U.low.high>>24&255,Y[I++]=U.high.low&255,Y[I++]=U.high.low>>8&255,Y[I++]=U.high.low>>16&255,Y[I++]=U.high.low>>24&255,Y[I++]=U.high.high&255,Y[I++]=U.high.high>>8&255,Y[I++]=U.high.high>>16&255,Y[I++]=U.high.high>>24&255,new Ii(Y)}toString(){let e,r=0;const n=new Array(36);for(let I=0;I<n.length;I++)n[I]=0;let i=0,o=!1,u,f={parts:[0,0,0,0]},p,l;const d=[];i=0;const m=this.bytes,y=m[i++]|m[i++]<<8|m[i++]<<16|m[i++]<<24,b=m[i++]|m[i++]<<8|m[i++]<<16|m[i++]<<24,w=m[i++]|m[i++]<<8|m[i++]<<16|m[i++]<<24,S=m[i++]|m[i++]<<8|m[i++]<<16|m[i++]<<24;i=0,{low:new V(y,b),high:new V(w,S)}.high.lessThan(V.ZERO)&&d.push("-");const R=S>>26&cX;if(R>>3===3){if(R===fX)return d.join("")+"Infinity";if(R===dX)return"NaN";e=S>>15&nD,u=8+(S>>14&1)}else u=S>>14&7,e=S>>17&nD;const O=e-Zq;if(f.parts[0]=(S&16383)+((u&15)<<14),f.parts[1]=w,f.parts[2]=b,f.parts[3]=y,f.parts[0]===0&&f.parts[1]===0&&f.parts[2]===0&&f.parts[3]===0)o=!0;else for(l=3;l>=0;l--){let I=0;const P=hX(f);if(f=P.quotient,I=P.rem.low,!!I)for(p=8;p>=0;p--)n[l*9+p]=I%10,I=Math.floor(I/10)}if(o)r=1,n[i]=0;else for(r=36;!n[i];)r=r-1,i=i+1;const C=r-1+O;if(C>=34||C<=-7||O>0){if(r>34)return d.push("0"),O>0?d.push(`E+${O}`):O<0&&d.push(`E${O}`),d.join("");d.push(`${n[i++]}`),r=r-1,r&&d.push(".");for(let I=0;I<r;I++)d.push(`${n[i++]}`);d.push("E"),C>0?d.push(`+${C}`):d.push(`${C}`)}else if(O>=0)for(let I=0;I<r;I++)d.push(`${n[i++]}`);else{let I=r+O;if(I>0)for(let P=0;P<I;P++)d.push(`${n[i++]}`);else d.push("0");for(d.push(".");I++<0;)d.push("0");for(let P=0;P<r-Math.max(I-1,0);P++)d.push(`${n[i++]}`)}return d.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(e){return Ii.fromString(e.$numberDecimal)}inspect(e,r,n){return n??=Ui,`new Decimal128(${n(this.toString(),r)})`}}class fs extends wo{get _bsontype(){return"Double"}value;constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e}static fromString(e){const r=Number(e);if(e==="NaN")return new fs(NaN);if(e==="Infinity")return new fs(1/0);if(e==="-Infinity")return new fs(-1/0);if(!Number.isFinite(r))throw new Oe(`Input: ${e} is not representable as a Double`);if(e.trim()!==e)throw new Oe(`Input: '${e}' contains whitespace`);if(e==="")throw new Oe("Input is an empty string");if(/[^-0-9.+eE]/.test(e))throw new Oe(`Input: '${e}' is not in decimal or exponential notation`);return new fs(r)}valueOf(){return this.value}toJSON(){return this.value}toString(e){return this.value.toString(e)}toExtendedJSON(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(e,r){const n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new fs(n)}inspect(e,r,n){return n??=Ui,`new Double(${n(this.value,r)})`}}class hd extends wo{get _bsontype(){return"Int32"}value;constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e|0}static fromString(e){const r=mM(e),n=Number(e);if(HT<n)throw new Oe(`Input: '${e}' is larger than the maximum value for Int32`);if(GT>n)throw new Oe(`Input: '${e}' is smaller than the minimum value for Int32`);if(Number.isSafeInteger(n)){if(n.toString()!==r)throw new Oe(`Input: '${e}' is not a valid Int32 string`)}else throw new Oe(`Input: '${e}' is not a safe integer`);return new hd(n)}valueOf(){return this.value}toString(e){return this.value.toString(e)}toJSON(){return this.value}toExtendedJSON(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new hd(e.$numberInt)}inspect(e,r,n){return n??=Ui,`new Int32(${n(this.value,r)})`}}class t0 extends wo{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new t0}inspect(){return"new MaxKey()"}}class r0 extends wo{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new r0}inspect(){return"new MinKey()"}}let Il=null;const Wh=new WeakMap;class vr extends wo{get _bsontype(){return"ObjectId"}static index=Math.floor(Math.random()*16777215);static cacheHexString;buffer;constructor(e){super();let r;if(typeof e=="object"&&e&&"id"in e){if(typeof e.id!="string"&&!ArrayBuffer.isView(e.id))throw new Oe("Argument passed in must have an id that is of type string or Buffer");"toHexString"in e&&typeof e.toHexString=="function"?r=He.fromHex(e.toHexString()):r=e.id}else r=e;if(r==null)this.buffer=vr.generate();else if(ArrayBuffer.isView(r)&&r.byteLength===12)this.buffer=He.toLocalBufferType(r);else if(typeof r=="string")if(vr.validateHexString(r))this.buffer=He.fromHex(r),vr.cacheHexString&&Wh.set(this,r);else throw new Oe("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new Oe("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(e){this.buffer=e,vr.cacheHexString&&Wh.set(this,He.toHex(e))}static validateHexString(e){if(e?.length!==24)return!1;for(let r=0;r<24;r++){const n=e.charCodeAt(r);if(!(n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70))return!1}return!0}toHexString(){if(vr.cacheHexString){const r=Wh.get(this);if(r)return r}const e=He.toHex(this.id);return vr.cacheHexString&&Wh.set(this,e),e}static getInc(){return vr.index=(vr.index+1)%16777215}static generate(e){typeof e!="number"&&(e=Math.floor(Date.now()/1e3));const r=vr.getInc(),n=He.allocateUnsafe(12);return ec.setInt32BE(n,0,e),Il===null&&(Il=He.randomBytes(5)),n[4]=Il[0],n[5]=Il[1],n[6]=Il[2],n[7]=Il[3],n[8]=Il[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n}toString(e){return e==="base64"?He.toBase64(this.id):e==="hex"?this.toHexString():this.toHexString()}toJSON(){return this.toHexString()}static is(e){return e!=null&&typeof e=="object"&&"_bsontype"in e&&e._bsontype==="ObjectId"}equals(e){if(e==null)return!1;if(vr.is(e))return this.buffer[11]===e.buffer[11]&&He.equals(this.buffer,e.buffer);if(typeof e=="string")return e.toLowerCase()===this.toHexString();if(typeof e=="object"&&typeof e.toHexString=="function"){const r=e.toHexString(),n=this.toHexString();return typeof r=="string"&&r.toLowerCase()===n}return!1}getTimestamp(){const e=new Date,r=ec.getUint32BE(this.buffer,0);return e.setTime(Math.floor(r)*1e3),e}static createPk(){return new vr}serializeInto(e,r){return e[r]=this.buffer[0],e[r+1]=this.buffer[1],e[r+2]=this.buffer[2],e[r+3]=this.buffer[3],e[r+4]=this.buffer[4],e[r+5]=this.buffer[5],e[r+6]=this.buffer[6],e[r+7]=this.buffer[7],e[r+8]=this.buffer[8],e[r+9]=this.buffer[9],e[r+10]=this.buffer[10],e[r+11]=this.buffer[11],12}static createFromTime(e){const r=He.allocate(12);for(let n=11;n>=4;n--)r[n]=0;return ec.setInt32BE(r,0,e),new vr(r)}static createFromHexString(e){if(e?.length!==24)throw new Oe("hex string must be 24 characters");return new vr(He.fromHex(e))}static createFromBase64(e){if(e?.length!==16)throw new Oe("base64 string must be 16 characters");return new vr(He.fromBase64(e))}static isValid(e){if(e==null)return!1;if(typeof e=="string")return vr.validateHexString(e);try{return new vr(e),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(e){return new vr(e.$oid)}isCached(){return vr.cacheHexString&&Wh.has(this)}inspect(e,r,n){return n??=Ui,`new ObjectId(${n(this.toHexString(),r)})`}}function vX(t){return t.split("").sort().join("")}class vs extends wo{get _bsontype(){return"BSONRegExp"}pattern;options;constructor(e,r){if(super(),this.pattern=e,this.options=vX(r??""),this.pattern.indexOf("\0")!==-1)throw new Oe(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\0")!==-1)throw new Oe(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new Oe(`The regular expression option [${this.options[n]}] is not supported`)}static parseOptions(e){return e?e.split("").sort().join(""):""}toExtendedJSON(e){return e=e||{},e.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(e){if("$regex"in e)if(typeof e.$regex!="string"){if(e.$regex._bsontype==="BSONRegExp")return e}else return new vs(e.$regex,vs.parseOptions(e.$options));if("$regularExpression"in e)return new vs(e.$regularExpression.pattern,vs.parseOptions(e.$regularExpression.options));throw new Oe(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(e)}`)}inspect(e,r,n){const i=zJ(r)??(f=>f);n??=Ui;const o=i(n(this.pattern),"regexp"),u=i(n(this.options),"regexp");return`new BSONRegExp(${o}, ${u})`}}class n0 extends wo{get _bsontype(){return"BSONSymbol"}value;constructor(e){super(),this.value=e}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(e){return new n0(e.$symbol)}inspect(e,r,n){return n??=Ui,`new BSONSymbol(${n(this.value,r)})`}}const yX=V;class gu extends yX{get _bsontype(){return"Timestamp"}get[pM](){return"Timestamp"}static MAX_VALUE=V.MAX_UNSIGNED_VALUE;get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(e){if(e==null)super(0,0,!0);else if(typeof e=="bigint")super(e,!0);else if(V.isLong(e))super(e.low,e.high,!0);else if(typeof e=="object"&&"t"in e&&"i"in e){if(typeof e.t!="number"&&(typeof e.t!="object"||e.t._bsontype!=="Int32"))throw new Oe("Timestamp constructed from { t, i } must provide t as a number");if(typeof e.i!="number"&&(typeof e.i!="object"||e.i._bsontype!=="Int32"))throw new Oe("Timestamp constructed from { t, i } must provide i as a number");const r=Number(e.t),n=Number(e.i);if(r<0||Number.isNaN(r))throw new Oe("Timestamp constructed from { t, i } must provide a positive t");if(n<0||Number.isNaN(n))throw new Oe("Timestamp constructed from { t, i } must provide a positive i");if(r>4294967295)throw new Oe("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(n>4294967295)throw new Oe("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(n,r,!0)}else throw new Oe("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(e){return new gu(V.fromInt(e,!0))}static fromNumber(e){return new gu(V.fromNumber(e,!0))}static fromBits(e,r){return new gu({i:e,t:r})}static fromString(e,r){return new gu(V.fromString(e,!0,r))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(e){const r=V.isLong(e.$timestamp.i)?e.$timestamp.i.getLowBitsUnsigned():e.$timestamp.i,n=V.isLong(e.$timestamp.t)?e.$timestamp.t.getLowBitsUnsigned():e.$timestamp.t;return new gu({t:n,i:r})}inspect(e,r,n){n??=Ui;const i=n(this.t,r),o=n(this.i,r);return`new Timestamp({ t: ${i}, i: ${o} })`}}V.fromNumber($J);V.fromNumber(FJ);function gX(t){return t!=null&&typeof t=="object"&&"_bsontype"in t&&typeof t._bsontype=="string"}const bX={$oid:vr,$binary:_t,$uuid:_t,$symbol:n0,$numberInt:hd,$numberDecimal:Ii,$numberDouble:fs,$numberLong:V,$minKey:r0,$maxKey:t0,$regex:vs,$regularExpression:vs,$timestamp:gu};function yM(t,e={}){if(typeof t=="number"){const n=t<=HT&&t>=GT,i=t<=lM&&t>=cM;if(e.relaxed||e.legacy)return t;if(Number.isInteger(t)&&!Object.is(t,-0)){if(n)return new hd(t);if(i)return e.useBigInt64?BigInt(t):V.fromNumber(t)}return new fs(t)}if(t==null||typeof t!="object")return t;if(t.$undefined)return null;const r=Object.keys(t).filter(n=>n.startsWith("$")&&t[n]!=null);for(let n=0;n<r.length;n++){const i=bX[r[n]];if(i)return i.fromExtendedJSON(t,e)}if(t.$date!=null){const n=t.$date,i=new Date;if(e.legacy)if(typeof n=="number")i.setTime(n);else if(typeof n=="string")i.setTime(Date.parse(n));else if(typeof n=="bigint")i.setTime(Number(n));else throw new Gq(`Unrecognized type for EJSON date: ${typeof n}`);else if(typeof n=="string")i.setTime(Date.parse(n));else if(V.isLong(n))i.setTime(n.toNumber());else if(typeof n=="number"&&e.relaxed)i.setTime(n);else if(typeof n=="bigint")i.setTime(Number(n));else throw new Gq(`Unrecognized type for EJSON date: ${typeof n}`);return i}if(t.$code!=null){const n=Object.assign({},t);return t.$scope&&(n.$scope=yM(t.$scope)),Zp.fromExtendedJSON(t)}if(tX(t)||t.$dbPointer){const n=t.$ref?t:t.$dbPointer;if(n instanceof dd)return n;const i=Object.keys(n).filter(u=>u.startsWith("$"));let o=!0;if(i.forEach(u=>{["$ref","$id","$db"].indexOf(u)===-1&&(o=!1)}),o)return dd.fromExtendedJSON(n)}return t}function _X(t,e){return t.map((r,n)=>{e.seenObjects.push({propertyName:`index ${n}`,obj:null});try{return us(r,e)}finally{e.seenObjects.pop()}})}function oD(t){const e=t.toISOString();return t.getUTCMilliseconds()!==0?e:e.slice(0,-5)+"Z"}function us(t,e){if(t instanceof Map||sM(t)){const r=Object.create(null);for(const[n,i]of t){if(typeof n!="string")throw new Oe("Can only serialize maps with string keys");r[n]=i}return us(r,e)}if((typeof t=="object"||typeof t=="function")&&t!==null){const r=e.seenObjects.findIndex(n=>n.obj===t);if(r!==-1){const n=e.seenObjects.map(d=>d.propertyName),i=n.slice(0,r).map(d=>`${d} -> `).join(""),o=n[r],u=" -> "+n.slice(r+1,n.length-1).map(d=>`${d} -> `).join(""),f=n[n.length-1],p=" ".repeat(i.length+o.length/2),l="-".repeat(u.length+(o.length+f.length)/2-1);throw new Oe(`Converting circular structure to EJSON:
    ${i}${o}${u}${f}
    ${p}\\${l}/`)}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return _X(t,e);if(t===void 0)return e.ignoreUndefined?void 0:null;if(t instanceof Date||BJ(t)){const r=t.getTime(),n=r>-1&&r<2534023188e5;return e.legacy?e.relaxed&&n?{$date:t.getTime()}:{$date:oD(t)}:e.relaxed&&n?{$date:oD(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(typeof t=="number"&&(!e.relaxed||!isFinite(t))){if(Number.isInteger(t)&&!Object.is(t,-0)){if(t>=GT&&t<=HT)return{$numberInt:t.toString()};if(t>=cM&&t<=lM)return{$numberLong:t.toString()}}return{$numberDouble:Object.is(t,-0)?"-0.0":t.toString()}}if(typeof t=="bigint")return e.relaxed?Number(BigInt.asIntN(64,t)):{$numberLong:BigInt.asIntN(64,t).toString()};if(t instanceof RegExp||MJ(t)){let r=t.flags;if(r===void 0){const i=t.toString().match(/[gimuy]*$/);i&&(r=i[0])}return new vs(t.source,r).toExtendedJSON(e)}return t!=null&&typeof t=="object"?SX(t,e):t}const wX={Binary:t=>new _t(t.value(),t.sub_type),Code:t=>new Zp(t.code,t.scope),DBRef:t=>new dd(t.collection||t.namespace,t.oid,t.db,t.fields),Decimal128:t=>new Ii(t.bytes),Double:t=>new fs(t.value),Int32:t=>new hd(t.value),Long:t=>V.fromBits(t.low!=null?t.low:t.low_,t.low!=null?t.high:t.high_,t.low!=null?t.unsigned:t.unsigned_),MaxKey:()=>new t0,MinKey:()=>new r0,ObjectId:t=>new vr(t),BSONRegExp:t=>new vs(t.pattern,t.options),BSONSymbol:t=>new n0(t.value),Timestamp:t=>gu.fromBits(t.low,t.high)};function SX(t,e){if(t==null||typeof t!="object")throw new Oe("not an object instance");const r=t._bsontype;if(typeof r>"u"){const n={};for(const i of Object.keys(t)){e.seenObjects.push({propertyName:i,obj:null});try{const o=us(t[i],e);i==="__proto__"?Object.defineProperty(n,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):n[i]=o}finally{e.seenObjects.pop()}}return n}else{if(t!=null&&typeof t=="object"&&typeof t._bsontype=="string"&&t[uM]!==FT)throw new HJ;if(gX(t)){let n=t;if(typeof n.toExtendedJSON!="function"){const i=wX[t._bsontype];if(!i)throw new Oe("Unrecognized or invalid _bsontype: "+t._bsontype);n=i(n)}return r==="Code"&&n.scope?n=new Zp(n.code,us(n.scope,e)):r==="DBRef"&&n.oid&&(n=new dd(us(n.collection,e),us(n.oid,e),us(n.db,e),us(n.fields,e))),n.toExtendedJSON(e)}else throw new Oe("_bsontype must be a string, but was: "+typeof r)}}function gM(t,e){const r={useBigInt64:e?.useBigInt64??!1,relaxed:e?.relaxed??!0,legacy:e?.legacy??!1};return JSON.parse(t,(n,i)=>{if(n.indexOf("\0")!==-1)throw new Oe(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(n)}`);return yM(i,r)})}function bM(t,e,r,n){r!=null&&typeof r=="object"&&(n=r,r=0),e!=null&&typeof e=="object"&&!Array.isArray(e)&&(n=e,e=void 0,r=0);const i=Object.assign({relaxed:!0,legacy:!1},n,{seenObjects:[{propertyName:"(root)",obj:null}]}),o=us(t,i);return JSON.stringify(o,e,r)}function EX(t,e){return e=e||{},JSON.parse(bM(t,e))}function TX(t,e){return e=e||{},gM(JSON.stringify(t),e)}const _n=Object.create(null);_n.parse=gM;_n.stringify=bM;_n.serialize=EX;_n.deserialize=TX;Object.freeze(_n);const nr={double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:255,maxKey:127};function Z1(t,e){try{return ec.getNonnegativeInt32LE(t,e)}catch(r){throw new hu("BSON size cannot be negative",e,{cause:r})}}function eE(t,e){let r=e;for(;t[r]!==0;r++);if(r===t.length-1)throw new hu("Null terminator not found",e);return r}function AX(t,e=0){if(e??=0,t.length<5)throw new hu(`Input must be at least 5 bytes, got ${t.length} bytes`,e);const r=Z1(t,e);if(r>t.length-e)throw new hu(`Parsed documentSize (${r} bytes) does not match input length (${t.length} bytes)`,e);if(t[e+r-1]!==0)throw new hu("BSON documents must end in 0x00",e+r);const n=[];let i=e+4;for(;i<=r+e;){const o=t[i];if(i+=1,o===0){if(i-e!==r)throw new hu("Invalid 0x00 type byte",i);break}const u=i,f=eE(t,i)-u;i+=f+1;let p;if(o===nr.double||o===nr.long||o===nr.date||o===nr.timestamp)p=8;else if(o===nr.int)p=4;else if(o===nr.objectId)p=12;else if(o===nr.decimal)p=16;else if(o===nr.bool)p=1;else if(o===nr.null||o===nr.undefined||o===nr.maxKey||o===nr.minKey)p=0;else if(o===nr.regex)p=eE(t,eE(t,i)+1)+1-i;else if(o===nr.object||o===nr.array||o===nr.javascriptWithScope)p=Z1(t,i);else if(o===nr.string||o===nr.binData||o===nr.dbPointer||o===nr.javascript||o===nr.symbol)p=Z1(t,i)+4,o===nr.binData&&(p+=1),o===nr.dbPointer&&(p+=12);else throw new hu(`Invalid 0x${o.toString(16).padStart(2,"0")} type byte`,i);if(p>r)throw new hu("value reports length larger than document",i);n.push([o,u,f,i,p]),i+=p}return n}const i0=Object.create(null);i0.parseToElements=AX;i0.ByteUtils=He;i0.NumberUtils=ec;Object.freeze(i0);const OX=1024*1024*17;He.allocate(OX);var RX=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},CX=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},_M=(function(){function t(e,r){this._stages=[],e&&r&&(this._db=e,this._request=Mn.createRequest(this._db.config),this._collectionName=r)}return t.prototype.end=function(){return RX(this,void 0,void 0,function(){var e;return CX(this,function(r){switch(r.label){case 0:if(!this._collectionName||!this._db)throw new Error("Aggregation pipeline cannot send request");return[4,this._request.send("database.aggregate",{collectionName:this._collectionName,stages:this._stages})];case 1:return e=r.sent(),e&&e.data&&e.data.list?[2,{requestId:e.requestId,data:JSON.parse(e.data.list).map(_n.parse)}]:[2,e]}})})},t.prototype.unwrap=function(){return this._stages},t.prototype.done=function(){return this._stages.map(function(e){var r,n=e.stageKey,i=e.stageValue;return r={},r[n]=JSON.parse(i),r})},t.prototype._pipe=function(e,r){return this._stages.push({stageKey:"$".concat(e),stageValue:JSON.stringify(r)}),this},t.prototype.addFields=function(e){return this._pipe("addFields",e)},t.prototype.bucket=function(e){return this._pipe("bucket",e)},t.prototype.bucketAuto=function(e){return this._pipe("bucketAuto",e)},t.prototype.count=function(e){return this._pipe("count",e)},t.prototype.geoNear=function(e){return e.query&&(e.query=_g.encode(e.query)),e.distanceMultiplier&&typeof e.distanceMultiplier=="number"&&(e.distanceMultiplier=e.distanceMultiplier),e.near&&(e.near=new li(e.near.longitude,e.near.latitude).toJSON()),this._pipe("geoNear",e)},t.prototype.group=function(e){return this._pipe("group",e)},t.prototype.limit=function(e){return this._pipe("limit",e)},t.prototype.match=function(e){return this._pipe("match",_g.encode(e))},t.prototype.project=function(e){return this._pipe("project",e)},t.prototype.lookup=function(e){return this._pipe("lookup",e)},t.prototype.replaceRoot=function(e){return this._pipe("replaceRoot",e)},t.prototype.sample=function(e){return this._pipe("sample",e)},t.prototype.skip=function(e){return this._pipe("skip",e)},t.prototype.sort=function(e){return this._pipe("sort",e)},t.prototype.sortByCount=function(e){return this._pipe("sortByCount",e)},t.prototype.unwind=function(e){return this._pipe("unwind",e)},t})(),IX=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),xX=(function(t){IX(e,t);function e(r,n){return t.call(this,r,n)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return this._coll},enumerable:!1,configurable:!0}),e.prototype.doc=function(r){if(typeof r!="string"&&typeof r!="number")throw new Error("docId");return new Hq(this._db,this._coll,r)},e.prototype.add=function(r,n){var i=new Hq(this._db,this._coll,void 0);return i.create(r,n)},e.prototype.aggregate=function(){return new _M(this._db,this._coll)},e})(jJ),NX={eq:function(t){return new Vr(Ve.EQ,[t])},neq:function(t){return new Vr(Ve.NEQ,[t])},lt:function(t){return new Vr(Ve.LT,[t])},lte:function(t){return new Vr(Ve.LTE,[t])},gt:function(t){return new Vr(Ve.GT,[t])},gte:function(t){return new Vr(Ve.GTE,[t])},in:function(t){return new Vr(Ve.IN,t)},nin:function(t){return new Vr(Ve.NIN,t)},all:function(t){return new Vr(Ve.ALL,t)},elemMatch:function(t){return new Vr(Ve.ELEM_MATCH,[t])},exists:function(t){return new Vr(Ve.EXISTS,[t])},size:function(t){return new Vr(Ve.SIZE,[t])},mod:function(t){return new Vr(Ve.MOD,[t])},geoNear:function(t){return new Vr(Ve.GEO_NEAR,[t])},geoWithin:function(t){return new Vr(Ve.GEO_WITHIN,[t])},geoIntersects:function(t){return new Vr(Ve.GEO_INTERSECTS,[t])},and:function(){var t=Sr(arguments[0])?arguments[0]:Array.from(arguments);return new Wl(Pi.AND,t)},nor:function(){var t=Sr(arguments[0])?arguments[0]:Array.from(arguments);return new Wl(Pi.NOR,t)},or:function(){var t=Sr(arguments[0])?arguments[0]:Array.from(arguments);return new Wl(Pi.OR,t)},not:function(){var t=Sr(arguments[0])?arguments[0]:Array.from(arguments);return new Wl(Pi.NOT,t)},set:function(t){return new Mr(wt.SET,[t])},remove:function(){return new Mr(wt.REMOVE,[])},inc:function(t){return new Mr(wt.INC,[t])},mul:function(t){return new Mr(wt.MUL,[t])},push:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r;if(Iu(t[0])&&t[0].hasOwnProperty("each")){var n=t[0];r={$each:n.each,$position:n.position,$sort:n.sort,$slice:n.slice}}else Sr(t[0])?r=t[0]:r=Array.from(t);return new Mr(wt.PUSH,r)},pull:function(t){return new Mr(wt.PULL,t)},pullAll:function(t){return new Mr(wt.PULL_ALL,t)},pop:function(){return new Mr(wt.POP,[])},shift:function(){return new Mr(wt.SHIFT,[])},unshift:function(){var t=Sr(arguments[0])?arguments[0]:Array.from(arguments);return new Mr(wt.UNSHIFT,t)},addToSet:function(t){return new Mr(wt.ADD_TO_SET,t)},rename:function(t){return new Mr(wt.RENAME,[t])},bit:function(t){return new Mr(wt.BIT,[t])},max:function(t){return new Mr(wt.MAX,[t])},min:function(t){return new Mr(wt.MIN,[t])},expr:function(t){return{$expr:t}},jsonSchema:function(t){return{$jsonSchema:t}},text:function(t){return xJ(t)?{$search:t.search}:{$search:t.search,$language:t.language,$caseSensitive:t.caseSensitive,$diacriticSensitive:t.diacriticSensitive}},aggregate:{pipeline:function(){return new _M},abs:function(t){return new _e("abs",t)},add:function(t){return new _e("add",t)},ceil:function(t){return new _e("ceil",t)},divide:function(t){return new _e("divide",t)},exp:function(t){return new _e("exp",t)},floor:function(t){return new _e("floor",t)},ln:function(t){return new _e("ln",t)},log:function(t){return new _e("log",t)},log10:function(t){return new _e("log10",t)},mod:function(t){return new _e("mod",t)},multiply:function(t){return new _e("multiply",t)},pow:function(t){return new _e("pow",t)},sqrt:function(t){return new _e("sqrt",t)},subtract:function(t){return new _e("subtract",t)},trunc:function(t){return new _e("trunc",t)},arrayElemAt:function(t){return new _e("arrayElemAt",t)},arrayToObject:function(t){return new _e("arrayToObject",t)},concatArrays:function(t){return new _e("concatArrays",t)},filter:function(t){return new _e("filter",t)},in:function(t){return new _e("in",t)},indexOfArray:function(t){return new _e("indexOfArray",t)},isArray:function(t){return new _e("isArray",t)},map:function(t){return new _e("map",t)},range:function(t){return new _e("range",t)},reduce:function(t){return new _e("reduce",t)},reverseArray:function(t){return new _e("reverseArray",t)},size:function(t){return new _e("size",t)},slice:function(t){return new _e("slice",t)},zip:function(t){return new _e("zip",t)},and:function(t){return new _e("and",t)},not:function(t){return new _e("not",t)},or:function(t){return new _e("or",t)},cmp:function(t){return new _e("cmp",t)},eq:function(t){return new _e("eq",t)},gt:function(t){return new _e("gt",t)},gte:function(t){return new _e("gte",t)},lt:function(t){return new _e("lt",t)},lte:function(t){return new _e("lte",t)},neq:function(t){return new _e("ne",t)},cond:function(t){return new _e("cond",t)},ifNull:function(t){return new _e("ifNull",t)},switch:function(t){return new _e("switch",t)},dateFromParts:function(t){return new _e("dateFromParts",t)},dateFromString:function(t){return new _e("dateFromString",t)},dayOfMonth:function(t){return new _e("dayOfMonth",t)},dayOfWeek:function(t){return new _e("dayOfWeek",t)},dayOfYear:function(t){return new _e("dayOfYear",t)},isoDayOfWeek:function(t){return new _e("isoDayOfWeek",t)},isoWeek:function(t){return new _e("isoWeek",t)},isoWeekYear:function(t){return new _e("isoWeekYear",t)},millisecond:function(t){return new _e("millisecond",t)},minute:function(t){return new _e("minute",t)},month:function(t){return new _e("month",t)},second:function(t){return new _e("second",t)},hour:function(t){return new _e("hour",t)},week:function(t){return new _e("week",t)},year:function(t){return new _e("year",t)},literal:function(t){return new _e("literal",t)},mergeObjects:function(t){return new _e("mergeObjects",t)},objectToArray:function(t){return new _e("objectToArray",t)},allElementsTrue:function(t){return new _e("allElementsTrue",t)},anyElementTrue:function(t){return new _e("anyElementTrue",t)},setDifference:function(t){return new _e("setDifference",t)},setEquals:function(t){return new _e("setEquals",t)},setIntersection:function(t){return new _e("setIntersection",t)},setIsSubset:function(t){return new _e("setIsSubset",t)},setUnion:function(t){return new _e("setUnion",t)},concat:function(t){return new _e("concat",t)},dateToString:function(t){return new _e("dateToString",t)},indexOfBytes:function(t){return new _e("indexOfBytes",t)},indexOfCP:function(t){return new _e("indexOfCP",t)},split:function(t){return new _e("split",t)},strLenBytes:function(t){return new _e("strLenBytes",t)},strLenCP:function(t){return new _e("strLenCP",t)},strcasecmp:function(t){return new _e("strcasecmp",t)},substr:function(t){return new _e("substr",t)},substrBytes:function(t){return new _e("substrBytes",t)},substrCP:function(t){return new _e("substrCP",t)},toLower:function(t){return new _e("toLower",t)},toUpper:function(t){return new _e("toUpper",t)},meta:function(t){return new _e("meta",t)},addToSet:function(t){return new _e("addToSet",t)},avg:function(t){return new _e("avg",t)},first:function(t){return new _e("first",t)},last:function(t){return new _e("last",t)},max:function(t){return new _e("max",t)},min:function(t){return new _e("min",t)},push:function(t){return new _e("push",t)},stdDevPop:function(t){return new _e("stdDevPop",t)},stdDevSamp:function(t){return new _e("stdDevSamp",t)},sum:function(t){return new _e("sum",t)},let:function(t){return new _e("let",t)}},project:{slice:function(t){return new aD("slice",t)},elemMatch:function(t){return new aD("elemMatch",t)}}},_e=(function(){function t(e,r){this["$"+e]=r}return t})(),aD=(function(){function t(e,r){this["$"+e]=r}return t})(),PX=(function(){function t(e){var r=e.regexp,n=e.options;if(!r)throw new TypeError("regexp must be a string");this.$regex=r,this.$options=n}return t.prototype.parse=function(){return{$regex:this.$regex,$options:this.$options}},Object.defineProperty(t.prototype,"_internalType",{get:function(){return eM},enumerable:!1,configurable:!0}),t})();function UX(t){return new PX(t)}var wM={INSERT_DOC_FAIL:{message:"insert document failed"},DATABASE_TRANSACTION_CONFLICT:{code:"DATABASE_TRANSACTION_CONFLICT"}},ga=function(){return ga=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ga.apply(this,arguments)},Vh=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},Yh=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},qX="database.getInTransaction",sD="database.updateDocInTransaction",DX="database.deleteDocInTransaction",jX="database.insertDocInTransaction",uD=(function(){function t(e,r,n){this._coll=r,this.id=n,this._transaction=e,this._request=this._transaction.getRequestMethod(),this._transactionId=this._transaction.getTransactionId()}return t.prototype.create=function(e){return Vh(this,void 0,void 0,function(){var r,n,i,o;return Yh(this,function(u){switch(u.label){case 0:return r={collectionName:this._coll,transactionId:this._transactionId,data:_n.stringify(Mp(e),{relaxed:!1})},this.id&&(r._id=this.id),[4,this._request.send(jX,r)];case 1:if(n=u.sent(),n.code)throw n;if(i=_n.parse(n.inserted),o=_n.parse(n.ok),o==1&&i==1)return[2,ga(ga({},n),{ok:o,inserted:i})];throw new Error(wM.INSERT_DOC_FAIL.message)}})})},t.prototype.get=function(){return Vh(this,void 0,void 0,function(){var e,r;return Yh(this,function(n){switch(n.label){case 0:return e={collectionName:this._coll,transactionId:this._transactionId,query:{_id:{$eq:this.id}}},[4,this._request.send(qX,e)];case 1:if(r=n.sent(),r.code)throw r;return[2,{data:r.data!=="null"?Zg.formatField(_n.parse(r.data)):_n.parse(r.data),requestId:r.requestId}]}})})},t.prototype.set=function(e){return Vh(this,void 0,void 0,function(){var r,n;return Yh(this,function(i){switch(i.label){case 0:return r={collectionName:this._coll,transactionId:this._transactionId,query:{_id:{$eq:this.id}},data:_n.stringify(Mp(e),{relaxed:!1}),upsert:!0},[4,this._request.send(sD,r)];case 1:if(n=i.sent(),n.code)throw n;return[2,ga(ga({},n),{updated:_n.parse(n.updated),upserted:n.upserted?JSON.parse(n.upserted):null})]}})})},t.prototype.update=function(e){return Vh(this,void 0,void 0,function(){var r,n;return Yh(this,function(i){switch(i.label){case 0:return r={collectionName:this._coll,transactionId:this._transactionId,query:{_id:{$eq:this.id}},data:_n.stringify($T.encode(e),{relaxed:!1})},[4,this._request.send(sD,r)];case 1:if(n=i.sent(),n.code)throw n;return[2,ga(ga({},n),{updated:_n.parse(n.updated)})]}})})},t.prototype.delete=function(){return Vh(this,void 0,void 0,function(){var e,r;return Yh(this,function(n){switch(n.label){case 0:return e={collectionName:this._coll,transactionId:this._transactionId,query:{_id:{$eq:this.id}}},[4,this._request.send(DX,e)];case 1:if(r=n.sent(),r.code)throw r;return[2,ga(ga({},r),{deleted:_n.parse(r.deleted)})]}})})},t})(),LX=(function(){function t(e,r){this._coll=r,this._transaction=e}return t})(),kX=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),MX=(function(t){kX(e,t);function e(r,n){return t.call(this,r,n)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return this._coll},enumerable:!1,configurable:!0}),e.prototype.doc=function(r){if(typeof r!="string"&&typeof r!="number")throw new Error("docId");return new uD(this._transaction,this._coll,r)},e.prototype.add=function(r){var n;r._id!==void 0&&(n=r._id);var i=new uD(this._transaction,this._coll,n);return i.create(r)},e})(LX),Zf=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function f(d){try{l(n.next(d))}catch(m){u(m)}}function p(d){try{l(n.throw(d))}catch(m){u(m)}}function l(d){d.done?o(d.value):i(d.value).then(f,p)}l((n=n.apply(t,e||[])).next())})},ed=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(l){return function(d){return p([l,d])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},BX="database.startTransaction",zX="database.commitTransaction",$X="database.abortTransaction",SM=(function(){function t(e){this._db=e,this._request=Mn.createRequest(this._db.config),this.aborted=!1,this.commited=!1,this.inited=!1}return t.prototype.init=function(){return Zf(this,void 0,void 0,function(){var e;return ed(this,function(r){switch(r.label){case 0:return[4,this._request.send(BX)];case 1:if(e=r.sent(),e.code)throw e;return this.inited=!0,this._id=e.transactionId,[2]}})})},t.prototype.collection=function(e){if(!e)throw new Error("Collection name is required");return new MX(this,e)},t.prototype.getTransactionId=function(){return this._id},t.prototype.getRequestMethod=function(){return this._request},t.prototype.commit=function(){return Zf(this,void 0,void 0,function(){var e,r;return ed(this,function(n){switch(n.label){case 0:return e={transactionId:this._id},[4,this._request.send(zX,e)];case 1:if(r=n.sent(),r.code)throw r;return this.commited=!0,[2,r]}})})},t.prototype.rollback=function(e){return Zf(this,void 0,void 0,function(){var r,n;return ed(this,function(i){switch(i.label){case 0:return r={transactionId:this._id},[4,this._request.send($X,r)];case 1:if(n=i.sent(),n.code)throw n;return this.aborted=!0,this.abortReason=e,[2,n]}})})},t})();function FX(){return Zf(this,void 0,void 0,function(){var t;return ed(this,function(e){switch(e.label){case 0:return t=new SM(this),[4,t.init()];case 1:return e.sent(),[2,t]}})})}function EM(t,e){return e===void 0&&(e=3),Zf(this,void 0,void 0,function(){var r,n,i,o,u=this;return ed(this,function(f){switch(f.label){case 0:return f.trys.push([0,4,,10]),r=new SM(this),[4,r.init()];case 1:return f.sent(),[4,t(r)];case 2:if(n=f.sent(),r.aborted===!0)throw r.abortReason;return[4,r.commit()];case 3:return f.sent(),[2,n];case 4:if(i=f.sent(),r.inited===!1)throw i;return o=function(p){return Zf(u,void 0,void 0,function(){return ed(this,function(l){switch(l.label){case 0:if(!(!r.aborted&&!r.commited))return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,r.rollback()];case 2:return l.sent(),[3,4];case 3:return l.sent(),[3,4];case 4:throw p;case 5:throw r.aborted===!0?r.abortReason:p}})})},e<=0?[4,o(i)]:[3,6];case 5:f.sent(),f.label=6;case 6:return i&&i.code===wM.DATABASE_TRANSACTION_CONFLICT.code?[4,EM.bind(this)(t,--e)]:[3,8];case 7:return[2,f.sent()];case 8:return[4,o(i)];case 9:return f.sent(),[3,10];case 10:return[2]}})})}var Mn=(function(){function t(e){this.config=e,this.Geo=UJ,this.serverDate=IJ,this.command=NX,this.RegExp=UX,this.startTransaction=FX,this.runTransaction=EM,this.logicCommand=Wl,this.updateCommand=Mr,this.queryCommand=Vr}return t.createRequest=function(e){var r=new t.reqClass(e),n=r.send;return r.send=function(i,o){return e.instance&&(o.instance=e.instance),e.database&&(o.database=e.database),n.call(this,i,o)},r},t.prototype.collection=function(e){if(!e)throw new Error("Collection name is required");return new xX(this,e)},t.prototype.createCollection=function(e){var r=t.createRequest(this.config),n={collectionName:e};return r.send("database.addCollection",n)},t})(),Tp=function(){return Tp=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Tp.apply(this,arguments)},HX="database";function GX(t){var e=this.platform,r=e.adapter,n=e.runtime;return Mn.reqClass=this.request.constructor,Mn.getAccessToken=this.authInstance?this.authInstance.getAccessToken.bind(this.authInstance):function(){return""},Mn.runtime=n,this.wsClientClass&&(Mn.wsClass=r.wsClass,Mn.wsClientClass=this.wsClientClass),Mn.ws||(Mn.ws=null),new Mn(Tp(Tp(Tp({},this.config),{_fromApp:this}),t))}var TM={name:HX,entity:{database:GX}};try{cloudbase.registerComponent(TM)}catch{}function AM(t){try{t.registerComponent(TM)}catch(e){console.warn(e)}}try{window.registerDatabase=AM}catch{}var WX="2.25.7";Ln.registerVersion(WX);try{sz(Ln),gz(Ln),bj(Ln),AM(Ln),x7(Ln),z7(Ln),mk(Ln),B3(Ln),pj(Ln),H3(Ln),Y3(Ln)}catch{}try{window.cloudbase=Ln}catch{}const OM="kaloseel-2g8qfao98ed4e561";console.log("[CloudBase SDK] Initializing, env:",OM);const VX=Ln.init({env:OM}),tE=VX.database(),rE={GACHAS:"dreams_gatcha"},nE={query:async(t,e)=>{console.log("[CloudBase SDK] Querying:",t,e);const r=tE.collection(t);let n=r;e&&(n=r.orderBy(e.field,e.order));const i=await n.get();return console.log("[CloudBase SDK] Query result:",i),i},add:async(t,e)=>{console.log("[CloudBase SDK] Adding to:",t,e);const r=await tE.collection(t).add(e);return console.log("[CloudBase SDK] Add result:",r),r},remove:async(t,e)=>{console.log("[CloudBase SDK] Removing:",t,e);const r=await tE.collection(t).doc(e).remove();return console.log("[CloudBase SDK] Remove result:",r),r}},YX=()=>new Date;function KX(){const[t,e]=xe.useState([]),[r,n]=xe.useState(!1),i=xe.useCallback(async()=>{try{console.log("[CloudBase] Loading gachas...");const m=(await nE.query(rE.GACHAS,{field:"createdAt",order:"desc"})).data||[];console.log("[CloudBase] Loaded",m.length,"documents");const y=m.map(b=>({id:b._id||b.id||String(Math.random()),content:b.content||"",createdAt:b.createdAt?new Date(b.createdAt).getTime():Date.now(),author:b.author||"",isSystem:b.isSystem||!1,dreamType:b.dreamType||"normal",theme:b.theme||"purple"}));e(y),n(!0)}catch(d){console.error("[CloudBase] Failed to load gachas:",d),n(!0)}},[]);xe.useEffect(()=>{i();const d=setInterval(i,5e3);return()=>clearInterval(d)},[i]);const o=xe.useCallback(async(d,m,y,b)=>{try{console.log("[CloudBase] Adding gacha...");const w={content:d.trim(),createdAt:YX(),author:m?.trim()||"",isSystem:!1,dreamType:y||"normal",theme:b||"purple"};return await nE.add(rE.GACHAS,w),await i(),"added"}catch(w){throw console.error("[CloudBase] Failed to add gacha:",w),w}},[i]),u=xe.useCallback(async d=>{try{return await nE.remove(rE.GACHAS,d),await i(),!0}catch(m){return console.error("[CloudBase] Failed to delete gacha:",m),!1}},[i]),f=xe.useCallback(()=>{const d=t.filter(y=>!y.isSystem);if(d.length===0)return null;const m=Math.floor(Math.random()*d.length);return d[m]},[t]),p=xe.useCallback(()=>t.filter(d=>!d.isSystem).length,[t]),l=xe.useCallback(()=>t.filter(d=>!d.isSystem).length,[t]);return{gachas:t,isLoaded:r,addGacha:o,deleteGacha:u,getRandomGacha:f,getTotalCount:p,getUserGachaCount:l}}const lD="cloudbase-user-collection";function QX(){const[t,e]=xe.useState([]),[r,n]=xe.useState(!1);xe.useEffect(()=>{(()=>{try{const p=localStorage.getItem(lD);if(p){const l=JSON.parse(p);Array.isArray(l)&&e(l)}}catch(p){console.error("Failed to load collection:",p)}n(!0)})()},[]),xe.useEffect(()=>{r&&localStorage.setItem(lD,JSON.stringify(t))},[t,r]);const i=xe.useCallback(async f=>{if(t.some(d=>d.id===f.id))return{success:!0,isNew:!1};const l={...f,collectedAt:Date.now()};return e(d=>[l,...d]),{success:!0,isNew:!0}},[t]),o=xe.useCallback(async f=>{e(p=>p.filter(l=>l.id!==f))},[]),u=xe.useCallback(f=>t.some(p=>p.id===f),[t]);return{collectedGachas:t,isLoaded:r,collectGacha:i,removeFromCollection:o,isCollected:u}}const JX=["","","","","","","","","","","",""],XX=t=>{if(t.length<Bo.minLength)return{passed:!1,reason:`${Bo.minLength}`};if(t.length>Bo.maxLength)return{passed:!1,reason:`${Bo.maxLength}`};const e=t.toLowerCase();for(const r of JX)if(e.includes(r))return{passed:!1,reason:""};return{passed:!0}},ZX=t=>t.length<30?"short":t.length>150?"long":["","","","","","","",""].some(r=>t.includes(r))?"nightmare":"normal",eZ=(t,e)=>{const r=t.toLowerCase();return e==="nightmare"?"red":r.includes("")||r.includes("")||r.includes("")?"blue":r.includes("")||r.includes("")?"pink":r.includes("")||r.includes("")||r.includes("")?"gold":r.includes("")||r.includes("")||r.includes("")?"green":r.includes("")||r.includes("")||r.includes("")?"cyan":r.includes("")||r.includes("")||r.includes("")?"rainbow":"purple"};function tZ(){const[t,e]=xe.useState(!1);return{reviewContent:xe.useCallback(async n=>{e(!0),await new Promise(i=>setTimeout(i,100));try{const i=XX(n);if(!i.passed)return{isValid:!1,reason:i.reason,isDreamRelated:!1,isAppropriate:!1};if(!(n.length>=15))return{isValid:!1,reason:"15",isDreamRelated:!1,isAppropriate:!0};if(["","","","","","","","",""].some(d=>n.includes(d)))return{isValid:!1,reason:"",isDreamRelated:!1,isAppropriate:!0};const p=ZX(n),l=eZ(n,p);return{isValid:!0,isDreamRelated:!0,isAppropriate:!0,dreamType:p,theme:l}}catch(i){return console.error("Review error:",i),{isValid:!0,isDreamRelated:!0,isAppropriate:!0,dreamType:"normal",theme:"purple"}}finally{e(!1)}},[]),isReviewing:t}}const cD="dream-gacha-tokens";function rZ(){const[t,e]=xe.useState(ss.initialTokens),[r,n]=xe.useState(!1);xe.useEffect(()=>{try{const p=localStorage.getItem(cD);if(p){const l=JSON.parse(p);typeof l=="number"&&l>=0&&e(l)}}catch(p){console.error("Failed to load tokens:",p)}n(!0)},[]),xe.useEffect(()=>{r&&localStorage.setItem(cD,JSON.stringify(t))},[t,r]);const i=xe.useCallback(()=>t>=ss.costPerDraw?(e(p=>p-ss.costPerDraw),!0):!1,[t]),o=xe.useCallback((p=ss.rewardPerSubmit)=>{e(l=>l+p)},[]),u=xe.useCallback(()=>t>=ss.costPerDraw,[t]),f=xe.useCallback(()=>{e(ss.initialTokens)},[]);return{tokens:t,isLoaded:r,spendToken:i,earnTokens:o,canSpend:u,resetTokens:f}}function nZ(){const t=xe.useRef(null),[e,r]=xe.useState(!0),[,n]=xe.useState(!1);xe.useEffect(()=>{const u=new Audio("/bg-music.mp3");return u.loop=!0,u.volume=.08,t.current=u,(async()=>{try{await u.play(),n(!0)}catch{r(!1)}})(),()=>{u.pause(),u.src=""}},[]);const i=xe.useCallback(()=>{t.current&&(e?t.current.pause():t.current.play().catch(()=>{}),r(!e))},[e]),o=xe.useCallback(u=>{const f=new(window.AudioContext||window.webkitAudioContext),p=f.createOscillator(),l=f.createGain();switch(p.connect(l),l.connect(f.destination),u){case"dispense":p.frequency.setValueAtTime(300,f.currentTime),p.frequency.exponentialRampToValueAtTime(150,f.currentTime+.6),l.gain.setValueAtTime(.3,f.currentTime),l.gain.exponentialRampToValueAtTime(.01,f.currentTime+.6),p.start(f.currentTime),p.stop(f.currentTime+.6);break;case"reveal":p.type="sine",p.frequency.setValueAtTime(1200,f.currentTime),p.frequency.exponentialRampToValueAtTime(400,f.currentTime+.15),l.gain.setValueAtTime(0,f.currentTime),l.gain.linearRampToValueAtTime(.25,f.currentTime+.02),l.gain.exponentialRampToValueAtTime(.01,f.currentTime+.4),p.start(f.currentTime),p.stop(f.currentTime+.4);break;case"click":p.frequency.setValueAtTime(600,f.currentTime),l.gain.setValueAtTime(.15,f.currentTime),l.gain.exponentialRampToValueAtTime(.01,f.currentTime+.08),p.start(f.currentTime),p.stop(f.currentTime+.08);break}},[]);return{isPlaying:e,toggleMusic:i,playSound:o}}var iZ=(t,e,r,n,i,o,u,f)=>{let p=document.documentElement,l=["light","dark"];function d(b){(Array.isArray(t)?t:[t]).forEach(w=>{let S=w==="class",E=S&&o?i.map(R=>o[R]||R):i;S?(p.classList.remove(...E),p.classList.add(o&&o[b]?o[b]:b)):p.setAttribute(w,b)}),m(b)}function m(b){f&&l.includes(b)&&(p.style.colorScheme=b)}function y(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)d(n);else try{let b=localStorage.getItem(e)||r,w=u&&b==="system"?y():b;d(w)}catch{}},oZ=xe.createContext(void 0),aZ={setTheme:t=>{},themes:[]},sZ=()=>{var t;return(t=xe.useContext(oZ))!=null?t:aZ};xe.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:o,value:u,themes:f,nonce:p,scriptProps:l})=>{let d=JSON.stringify([r,e,o,t,f,u,n,i]).slice(1,-1);return xe.createElement("script",{...l,suppressHydrationWarning:!0,nonce:typeof window>"u"?p:"",dangerouslySetInnerHTML:{__html:`(${iZ.toString()})(${d})`}})});var uZ=hD();const lZ=Bp(uZ);function cZ(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}const fZ=t=>{switch(t){case"success":return pZ;case"info":return vZ;case"warning":return mZ;case"error":return yZ;default:return null}},dZ=Array(12).fill(0),hZ=({visible:t,className:e})=>Te.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Te.createElement("div",{className:"sonner-spinner"},dZ.map((r,n)=>Te.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),pZ=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),mZ=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),vZ=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),yZ=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),gZ=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Te.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Te.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),bZ=()=>{const[t,e]=Te.useState(document.hidden);return Te.useEffect(()=>{const r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t};let n2=1;class _Z{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;const{message:n,...i}=e,o=typeof e?.id=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:n2++,u=this.toasts.find(p=>p.id===o),f=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),u?this.toasts=this.toasts.map(p=>p.id===o?(this.publish({...p,...e,id:o,title:n}),{...p,...e,id:o,dismissible:f,title:n}):p):this.addToast({title:n,...i,dismissible:f,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:e,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let o=n!==void 0,u;const f=i.then(async l=>{if(u=["resolve",l],Te.isValidElement(l))o=!1,this.create({id:n,type:"default",message:l});else if(SZ(l)&&!l.ok){o=!1;const m=typeof r.error=="function"?await r.error(`HTTP error! status: ${l.status}`):r.error,y=typeof r.description=="function"?await r.description(`HTTP error! status: ${l.status}`):r.description,w=typeof m=="object"&&!Te.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:y,...w})}else if(l instanceof Error){o=!1;const m=typeof r.error=="function"?await r.error(l):r.error,y=typeof r.description=="function"?await r.description(l):r.description,w=typeof m=="object"&&!Te.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:y,...w})}else if(r.success!==void 0){o=!1;const m=typeof r.success=="function"?await r.success(l):r.success,y=typeof r.description=="function"?await r.description(l):r.description,w=typeof m=="object"&&!Te.isValidElement(m)?m:{message:m};this.create({id:n,type:"success",description:y,...w})}}).catch(async l=>{if(u=["reject",l],r.error!==void 0){o=!1;const d=typeof r.error=="function"?await r.error(l):r.error,m=typeof r.description=="function"?await r.description(l):r.description,b=typeof d=="object"&&!Te.isValidElement(d)?d:{message:d};this.create({id:n,type:"error",description:m,...b})}}).finally(()=>{o&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),p=()=>new Promise((l,d)=>f.then(()=>u[0]==="reject"?d(u[1]):l(u[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:p}:Object.assign(n,{unwrap:p})},this.custom=(e,r)=>{const n=r?.id||n2++;return this.create({jsx:e(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ui=new _Z,wZ=(t,e)=>{const r=e?.id||n2++;return ui.addToast({title:t,...e,id:r}),r},SZ=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",EZ=wZ,TZ=()=>ui.toasts,AZ=()=>ui.getActiveToasts(),xl=Object.assign(EZ,{success:ui.success,info:ui.info,warning:ui.warning,error:ui.error,custom:ui.custom,message:ui.message,promise:ui.promise,dismiss:ui.dismiss,loading:ui.loading},{getHistory:TZ,getToasts:AZ});cZ("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function sy(t){return t.label!==void 0}const OZ=3,RZ="24px",CZ="16px",fD=4e3,IZ=356,xZ=14,NZ=45,PZ=200;function ya(...t){return t.filter(Boolean).join(" ")}function UZ(t){const[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}const qZ=t=>{var e,r,n,i,o,u,f,p,l;const{invert:d,toast:m,unstyled:y,interacting:b,setHeights:w,visibleToasts:S,heights:E,index:R,toasts:O,expanded:C,removeToast:I,defaultRichColors:P,closeButton:D,style:j,cancelButtonStyle:q,actionButtonStyle:U,className:Y="",descriptionClassName:$="",duration:L,position:H,gap:Q,expandByDefault:ce,classNames:M,icons:J,closeButtonAriaLabel:Z="Close toast"}=t,[Ae,Re]=Te.useState(null),[z,se]=Te.useState(null),[ae,fe]=Te.useState(!1),[pe,be]=Te.useState(!1),[Se,Ie]=Te.useState(!1),[$e,pt]=Te.useState(!1),[Ot,Kt]=Te.useState(!1),[Jr,Er]=Te.useState(0),[st,Pr]=Te.useState(0),tt=Te.useRef(m.duration||L||fD),cr=Te.useRef(null),qt=Te.useRef(null),mi=R===0,vi=R+1<=S,Dt=m.type,Ft=m.dismissible!==!1,Zt=m.className||"",Li=m.descriptionClassName||"",En=Te.useMemo(()=>E.findIndex(We=>We.toastId===m.id)||0,[E,m.id]),Qo=Te.useMemo(()=>{var We;return(We=m.closeButton)!=null?We:D},[m.closeButton,D]),ir=Te.useMemo(()=>m.duration||L||fD,[m.duration,L]),ln=Te.useRef(0),Tn=Te.useRef(0),ki=Te.useRef(0),zn=Te.useRef(null),[or,Yt]=H.split("-"),$n=Te.useMemo(()=>E.reduce((We,Rt,kt)=>kt>=En?We:We+Rt.height,0),[E,En]),Ur=bZ(),yc=m.invert||d,Ss=Dt==="loading";Tn.current=Te.useMemo(()=>En*Q+$n,[En,$n]),Te.useEffect(()=>{tt.current=ir},[ir]),Te.useEffect(()=>{fe(!0)},[]),Te.useEffect(()=>{const We=qt.current;if(We){const Rt=We.getBoundingClientRect().height;return Pr(Rt),w(kt=>[{toastId:m.id,height:Rt,position:m.position},...kt]),()=>w(kt=>kt.filter(er=>er.toastId!==m.id))}},[w,m.id]),Te.useLayoutEffect(()=>{if(!ae)return;const We=qt.current,Rt=We.style.height;We.style.height="auto";const kt=We.getBoundingClientRect().height;We.style.height=Rt,Pr(kt),w(er=>er.find(Nt=>Nt.toastId===m.id)?er.map(Nt=>Nt.toastId===m.id?{...Nt,height:kt}:Nt):[{toastId:m.id,height:kt,position:m.position},...er])},[ae,m.title,m.description,w,m.id,m.jsx,m.action,m.cancel]);const yi=Te.useCallback(()=>{be(!0),Er(Tn.current),w(We=>We.filter(Rt=>Rt.toastId!==m.id)),setTimeout(()=>{I(m)},PZ)},[m,I,w,Tn]);Te.useEffect(()=>{if(m.promise&&Dt==="loading"||m.duration===1/0||m.type==="loading")return;let We;return C||b||Ur?(()=>{if(ki.current<ln.current){const er=new Date().getTime()-ln.current;tt.current=tt.current-er}ki.current=new Date().getTime()})():tt.current!==1/0&&(ln.current=new Date().getTime(),We=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),yi()},tt.current)),()=>clearTimeout(We)},[C,b,m,Dt,Ur,yi]),Te.useEffect(()=>{m.delete&&(yi(),m.onDismiss==null||m.onDismiss.call(m,m))},[yi,m.delete]);function xa(){var We;if(J?.loading){var Rt;return Te.createElement("div",{className:ya(M?.loader,m==null||(Rt=m.classNames)==null?void 0:Rt.loader,"sonner-loader"),"data-visible":Dt==="loading"},J.loading)}return Te.createElement(hZ,{className:ya(M?.loader,m==null||(We=m.classNames)==null?void 0:We.loader),visible:Dt==="loading"})}const Jo=m.icon||J?.[Dt]||fZ(Dt);var So,qr;return Te.createElement("li",{tabIndex:0,ref:qt,className:ya(Y,Zt,M?.toast,m==null||(e=m.classNames)==null?void 0:e.toast,M?.default,M?.[Dt],m==null||(r=m.classNames)==null?void 0:r[Dt]),"data-sonner-toast":"","data-rich-colors":(So=m.richColors)!=null?So:P,"data-styled":!(m.jsx||m.unstyled||y),"data-mounted":ae,"data-promise":!!m.promise,"data-swiped":Ot,"data-removed":pe,"data-visible":vi,"data-y-position":or,"data-x-position":Yt,"data-index":R,"data-front":mi,"data-swiping":Se,"data-dismissible":Ft,"data-type":Dt,"data-invert":yc,"data-swipe-out":$e,"data-swipe-direction":z,"data-expanded":!!(C||ce&&ae),"data-testid":m.testId,style:{"--index":R,"--toasts-before":R,"--z-index":O.length-R,"--offset":`${pe?Jr:Tn.current}px`,"--initial-height":ce?"auto":`${st}px`,...j,...m.style},onDragEnd:()=>{Ie(!1),Re(null),zn.current=null},onPointerDown:We=>{We.button!==2&&(Ss||!Ft||(cr.current=new Date,Er(Tn.current),We.target.setPointerCapture(We.pointerId),We.target.tagName!=="BUTTON"&&(Ie(!0),zn.current={x:We.clientX,y:We.clientY})))},onPointerUp:()=>{var We,Rt,kt;if($e||!Ft)return;zn.current=null;const er=Number(((We=qt.current)==null?void 0:We.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Mi=Number(((Rt=qt.current)==null?void 0:Rt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Nt=new Date().getTime()-((kt=cr.current)==null?void 0:kt.getTime()),Xr=Ae==="x"?er:Mi,Eo=Math.abs(Xr)/Nt;if(Math.abs(Xr)>=NZ||Eo>.11){Er(Tn.current),m.onDismiss==null||m.onDismiss.call(m,m),se(Ae==="x"?er>0?"right":"left":Mi>0?"down":"up"),yi(),pt(!0);return}else{var Zr,Dr;(Zr=qt.current)==null||Zr.style.setProperty("--swipe-amount-x","0px"),(Dr=qt.current)==null||Dr.style.setProperty("--swipe-amount-y","0px")}Kt(!1),Ie(!1),Re(null)},onPointerMove:We=>{var Rt,kt,er;if(!zn.current||!Ft||((Rt=window.getSelection())==null?void 0:Rt.toString().length)>0)return;const Nt=We.clientY-zn.current.y,Xr=We.clientX-zn.current.x;var Eo;const Zr=(Eo=t.swipeDirections)!=null?Eo:UZ(H);!Ae&&(Math.abs(Xr)>1||Math.abs(Nt)>1)&&Re(Math.abs(Xr)>Math.abs(Nt)?"x":"y");let Dr={x:0,y:0};const Na=Fn=>1/(1.5+Math.abs(Fn)/20);if(Ae==="y"){if(Zr.includes("top")||Zr.includes("bottom"))if(Zr.includes("top")&&Nt<0||Zr.includes("bottom")&&Nt>0)Dr.y=Nt;else{const Fn=Nt*Na(Nt);Dr.y=Math.abs(Fn)<Math.abs(Nt)?Fn:Nt}}else if(Ae==="x"&&(Zr.includes("left")||Zr.includes("right")))if(Zr.includes("left")&&Xr<0||Zr.includes("right")&&Xr>0)Dr.x=Xr;else{const Fn=Xr*Na(Xr);Dr.x=Math.abs(Fn)<Math.abs(Xr)?Fn:Xr}(Math.abs(Dr.x)>0||Math.abs(Dr.y)>0)&&Kt(!0),(kt=qt.current)==null||kt.style.setProperty("--swipe-amount-x",`${Dr.x}px`),(er=qt.current)==null||er.style.setProperty("--swipe-amount-y",`${Dr.y}px`)}},Qo&&!m.jsx&&Dt!=="loading"?Te.createElement("button",{"aria-label":Z,"data-disabled":Ss,"data-close-button":!0,onClick:Ss||!Ft?()=>{}:()=>{yi(),m.onDismiss==null||m.onDismiss.call(m,m)},className:ya(M?.closeButton,m==null||(n=m.classNames)==null?void 0:n.closeButton)},(qr=J?.close)!=null?qr:gZ):null,(Dt||m.icon||m.promise)&&m.icon!==null&&(J?.[Dt]!==null||m.icon)?Te.createElement("div",{"data-icon":"",className:ya(M?.icon,m==null||(i=m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||xa():null,m.type!=="loading"?Jo:null):null,Te.createElement("div",{"data-content":"",className:ya(M?.content,m==null||(o=m.classNames)==null?void 0:o.content)},Te.createElement("div",{"data-title":"",className:ya(M?.title,m==null||(u=m.classNames)==null?void 0:u.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?Te.createElement("div",{"data-description":"",className:ya($,Li,M?.description,m==null||(f=m.classNames)==null?void 0:f.description)},typeof m.description=="function"?m.description():m.description):null),Te.isValidElement(m.cancel)?m.cancel:m.cancel&&sy(m.cancel)?Te.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||q,onClick:We=>{sy(m.cancel)&&Ft&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,We),yi())},className:ya(M?.cancelButton,m==null||(p=m.classNames)==null?void 0:p.cancelButton)},m.cancel.label):null,Te.isValidElement(m.action)?m.action:m.action&&sy(m.action)?Te.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||U,onClick:We=>{sy(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,We),!We.defaultPrevented&&yi())},className:ya(M?.actionButton,m==null||(l=m.classNames)==null?void 0:l.actionButton)},m.action.label):null)};function dD(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function DZ(t,e){const r={};return[t,e].forEach((n,i)=>{const o=i===1,u=o?"--mobile-offset":"--offset",f=o?CZ:RZ;function p(l){["top","right","bottom","left"].forEach(d=>{r[`${u}-${d}`]=typeof l=="number"?`${l}px`:l})}typeof n=="number"||typeof n=="string"?p(n):typeof n=="object"?["top","right","bottom","left"].forEach(l=>{n[l]===void 0?r[`${u}-${l}`]=f:r[`${u}-${l}`]=typeof n[l]=="number"?`${n[l]}px`:n[l]}):p(f)}),r}const jZ=Te.forwardRef(function(e,r){const{id:n,invert:i,position:o="bottom-right",hotkey:u=["altKey","KeyT"],expand:f,closeButton:p,className:l,offset:d,mobileOffset:m,theme:y="light",richColors:b,duration:w,style:S,visibleToasts:E=OZ,toastOptions:R,dir:O=dD(),gap:C=xZ,icons:I,containerAriaLabel:P="Notifications"}=e,[D,j]=Te.useState([]),q=Te.useMemo(()=>n?D.filter(ae=>ae.toasterId===n):D.filter(ae=>!ae.toasterId),[D,n]),U=Te.useMemo(()=>Array.from(new Set([o].concat(q.filter(ae=>ae.position).map(ae=>ae.position)))),[q,o]),[Y,$]=Te.useState([]),[L,H]=Te.useState(!1),[Q,ce]=Te.useState(!1),[M,J]=Te.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Z=Te.useRef(null),Ae=u.join("+").replace(/Key/g,"").replace(/Digit/g,""),Re=Te.useRef(null),z=Te.useRef(!1),se=Te.useCallback(ae=>{j(fe=>{var pe;return(pe=fe.find(be=>be.id===ae.id))!=null&&pe.delete||ui.dismiss(ae.id),fe.filter(({id:be})=>be!==ae.id)})},[]);return Te.useEffect(()=>ui.subscribe(ae=>{if(ae.dismiss){requestAnimationFrame(()=>{j(fe=>fe.map(pe=>pe.id===ae.id?{...pe,delete:!0}:pe))});return}setTimeout(()=>{lZ.flushSync(()=>{j(fe=>{const pe=fe.findIndex(be=>be.id===ae.id);return pe!==-1?[...fe.slice(0,pe),{...fe[pe],...ae},...fe.slice(pe+1)]:[ae,...fe]})})})}),[D]),Te.useEffect(()=>{if(y!=="system"){J(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?J("dark"):J("light")),typeof window>"u")return;const ae=window.matchMedia("(prefers-color-scheme: dark)");try{ae.addEventListener("change",({matches:fe})=>{J(fe?"dark":"light")})}catch{ae.addListener(({matches:pe})=>{try{J(pe?"dark":"light")}catch(be){console.error(be)}})}},[y]),Te.useEffect(()=>{D.length<=1&&H(!1)},[D]),Te.useEffect(()=>{const ae=fe=>{var pe;if(u.every(Ie=>fe[Ie]||fe.code===Ie)){var Se;H(!0),(Se=Z.current)==null||Se.focus()}fe.code==="Escape"&&(document.activeElement===Z.current||(pe=Z.current)!=null&&pe.contains(document.activeElement))&&H(!1)};return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[u]),Te.useEffect(()=>{if(Z.current)return()=>{Re.current&&(Re.current.focus({preventScroll:!0}),Re.current=null,z.current=!1)}},[Z.current]),Te.createElement("section",{ref:r,"aria-label":`${P} ${Ae}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},U.map((ae,fe)=>{var pe;const[be,Se]=ae.split("-");return q.length?Te.createElement("ol",{key:ae,dir:O==="auto"?dD():O,tabIndex:-1,ref:Z,className:l,"data-sonner-toaster":!0,"data-sonner-theme":M,"data-y-position":be,"data-x-position":Se,style:{"--front-toast-height":`${((pe=Y[0])==null?void 0:pe.height)||0}px`,"--width":`${IZ}px`,"--gap":`${C}px`,...S,...DZ(d,m)},onBlur:Ie=>{z.current&&!Ie.currentTarget.contains(Ie.relatedTarget)&&(z.current=!1,Re.current&&(Re.current.focus({preventScroll:!0}),Re.current=null))},onFocus:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||z.current||(z.current=!0,Re.current=Ie.relatedTarget)},onMouseEnter:()=>H(!0),onMouseMove:()=>H(!0),onMouseLeave:()=>{Q||H(!1)},onDragEnd:()=>H(!1),onPointerDown:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||ce(!0)},onPointerUp:()=>ce(!1)},q.filter(Ie=>!Ie.position&&fe===0||Ie.position===ae).map((Ie,$e)=>{var pt,Ot;return Te.createElement(qZ,{key:Ie.id,icons:I,index:$e,toast:Ie,defaultRichColors:b,duration:(pt=R?.duration)!=null?pt:w,className:R?.className,descriptionClassName:R?.descriptionClassName,invert:i,visibleToasts:E,closeButton:(Ot=R?.closeButton)!=null?Ot:p,interacting:Q,position:ae,style:R?.style,unstyled:R?.unstyled,classNames:R?.classNames,cancelButtonStyle:R?.cancelButtonStyle,actionButtonStyle:R?.actionButtonStyle,closeButtonAriaLabel:R?.closeButtonAriaLabel,removeToast:se,toasts:q.filter(Kt=>Kt.position==Ie.position),heights:Y.filter(Kt=>Kt.position==Ie.position),setHeights:$,expandByDefault:f,gap:C,expanded:L,swipeDirections:e.swipeDirections})})):null}))}),LZ=({...t})=>{const{theme:e="system"}=sZ();return G.jsx(jZ,{"code-path":"src/components/ui/sonner.tsx:15:5",theme:e,className:"toaster group",icons:{success:G.jsx(cB,{"code-path":"src/components/ui/sonner.tsx:19:18",className:"size-4"}),info:G.jsx(mD,{"code-path":"src/components/ui/sonner.tsx:20:15",className:"size-4"}),warning:G.jsx(xB,{"code-path":"src/components/ui/sonner.tsx:21:18",className:"size-4"}),error:G.jsx(bB,{"code-path":"src/components/ui/sonner.tsx:22:16",className:"size-4"}),loading:G.jsx(yB,{"code-path":"src/components/ui/sonner.tsx:23:18",className:"size-4 animate-spin"})},style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)","--border-radius":"var(--radius)"},...t})};function kZ(){const[t,e]=xe.useState(!1),[r,n]=xe.useState(!1),[i,o]=xe.useState(!0),[u,f]=xe.useState([]);xe.useEffect(()=>{const H=localStorage.getItem("my-submitted-gachas");if(H)try{f(JSON.parse(H))}catch{}},[]),xe.useEffect(()=>{localStorage.setItem("my-submitted-gachas",JSON.stringify(u))},[u]);const{isLoaded:p,addGacha:l,getRandomGacha:d,getTotalCount:m,getUserGachaCount:y}=KX(),{collectedGachas:b,isLoaded:w,collectGacha:S}=QX(),{tokens:E,isLoaded:R,spendToken:O,earnTokens:C,canSpend:I}=rZ(),{reviewContent:P}=tZ(),{isPlaying:D,toggleMusic:j,playSound:q}=nZ(),U=p&&R&&w,Y=()=>{if(!I())return xl.error("2~"),null;if(!O())return xl.error(""),null;const Q=d();return Q||(xl.error("~"),null)},$=async H=>{const Q=await S(H);Q.success&&Q.isNew&&xl.success("")},L=async(H,Q)=>{const ce=await P(H);if(ce.isValid&&ce.dreamType&&ce.theme)try{const M=await l(H,Q||void 0,ce.dreamType,ce.theme);if(M){const J={id:M,content:H.trim(),author:Q.trim(),createdAt:Date.now(),dreamType:ce.dreamType,theme:ce.theme,isSystem:!1};f(Z=>[J,...Z])}C(),xl.success("2")}catch(M){return console.error("Failed to submit gacha:",M),xl.error(""),{...ce,isValid:!1}}else xl.error(ce.reason||"");return ce};return U?i?G.jsx(U8,{"code-path":"src/App.tsx:144:7",onEnter:()=>o(!1)}):G.jsxs(G.Fragment,{children:[G.jsx(MB,{"code-path":"src/App.tsx:152:7",onDispense:Y,onCreateClick:()=>e(!0),onCollectionClick:()=>n(!0),totalCount:m(),userCount:y(),tokens:E,onCollectGacha:$,collectedCount:b.length,isPlaying:D,toggleMusic:j,playSound:q}),G.jsx(x8,{"code-path":"src/App.tsx:166:7",isOpen:t,onClose:()=>e(!1),onSubmit:L}),G.jsx(P8,{"code-path":"src/App.tsx:174:7",isOpen:r,onClose:()=>n(!1),collectedGachas:b,mySubmittedGachas:u}),G.jsx(LZ,{"code-path":"src/App.tsx:181:7",position:"top-center",toastOptions:{style:{background:"rgba(88, 28, 135, 0.9)",color:"#fff",border:"1px solid rgba(168, 85, 247, 0.3)",backdropFilter:"blur(10px)"}}})]}):G.jsx("div",{"code-path":"src/App.tsx:132:7",className:"min-h-screen bg-[#050508] flex items-center justify-center",children:G.jsxs("div",{"code-path":"src/App.tsx:133:9",className:"flex flex-col items-center gap-4",children:[G.jsx("div",{"code-path":"src/App.tsx:134:11",className:"w-10 h-10 border-2 border-white/20 border-t-white/60 rounded-full animate-spin"}),G.jsx("p",{"code-path":"src/App.tsx:135:11",className:"text-white/40 text-sm",children:"..."})]})})}Z6.createRoot(document.getElementById("root")).render(G.jsx(xe.StrictMode,{"code-path":"src/main.tsx:7:3",children:G.jsx(kZ,{"code-path":"src/main.tsx:8:5"})}));export{my as d};
